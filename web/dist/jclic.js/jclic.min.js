/*! 
JClic.js version 2.1.11 (2022-08-04)
HTML5 player for JClic activities
https://projectestac.github.io/jclic.js

(c) 2000-2022 Catalan Educational Telematic Network (XTEC)

Licensed under the EUPL, Version 1.2 or -as soon they will be approved by
the European Commission- subsequent versions of the EUPL (the "Licence");
You may not use this work except in compliance with the Licence.

You may obtain a copy of the Licence at:
https://joinup.ec.europa.eu/software/page/eupl

Unless required by applicable law or agreed to in writing, software
distributed under the Licence is distributed on an "AS IS" basis, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
Licence for the specific language governing permissions and limitations
under the Licence.

For full license information of included components please see: jclic.components.LICENSE

WARNING: This is a compressed version of JClic.js. Full source code is freely available at:
https://projectestac.github.io/jclic.js
 */
!function(){var t={390:function(t){t.exports=function(){function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){return r(e[s][1][t]||t)}),l,l.exports,t,e,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}return t}()({1:[function(t,e,n){function i(t){const e=t.createGain(),n=e._voltage=s(t),i=a(n),o=a(n),c=a(n);return e._startAmount=a(o),e._endAmount=a(c),e._multiplier=a(i),e._multiplier.connect(e),e._startAmount.connect(e),e._endAmount.connect(e),e.value=i.gain,e.startValue=o.gain,e.endValue=c.gain,e.startValue.value=0,e.endValue.value=0,Object.defineProperties(e,r),e}const r={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(t){const e=this._multiplier.gain,n=this._startAmount.gain,i=this._endAmount.gain;this._voltage.start(t),this._decayFrom=this._decayFrom=t+this.attack,this._startedAt=t;const r=this.sustain;e.cancelScheduledValues(t),n.cancelScheduledValues(t),i.cancelScheduledValues(t),i.setValueAtTime(0,t),this.attack?(e.setValueAtTime(0,t),e.linearRampToValueAtTime(1,t+this.attack),n.setValueAtTime(1,t),n.linearRampToValueAtTime(0,t+this.attack)):(e.setValueAtTime(1,t),n.setValueAtTime(0,t)),this.decay&&e.setTargetAtTime(r,this._decayFrom,c(this.decay))}},stop:{value:function(t,e){e&&(t-=this.release);const n=t+this.release;if(this.release){const e=this._multiplier.gain,n=this._startAmount.gain,i=this._endAmount.gain;e.cancelScheduledValues(t),n.cancelScheduledValues(t),i.cancelScheduledValues(t);const r=c(this.release);if(this.attack&&t<this._decayFrom){const i=l(0,1,this._startedAt,this._decayFrom,t);e.linearRampToValueAtTime(i,t),n.linearRampToValueAtTime(1-i,t),n.setTargetAtTime(0,t,r)}i.setTargetAtTime(1,t,r),e.setTargetAtTime(0,t,r)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(t){this._voltage.onended=t}}},o=new Float32Array([1,1]);function s(t){const e=t.createBufferSource(),n=t.createBuffer(1,2,t.sampleRate);return n.getChannelData(0).set(o),e.buffer=n,e.loop=!0,e}function a(t){const e=t.context.createGain();return t.connect(e),e}function c(t){return Math.log(t+1)/Math.log(100)}function l(t,e,n,i,r){let o=t+(r-n)/(i-n)*(e-t);return o<=t&&(o=t),o>=e&&(o=e),o}e.exports=i},{}],2:[function(t,e,n){"use strict";function i(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:43===t?62:47===t?63:0}function r(t,e){const n=t.replace(/[^A-Za-z0-9\+\/]/g,""),r=n.length,o=e?Math.ceil((3*r+1>>2)/e)*e:3*r+1>>2,s=new Uint8Array(o);for(let t,e,a=0,c=0,l=0;l<r;l++)if(e=3&l,a|=i(n.charCodeAt(l))<<18-6*e,3===e||r-l==1){for(t=0;t<3&&c<o;t++,c++)s[c]=a>>>(16>>>t&24)&255;a=0}return s}e.exports={decode:r}},{}],3:[function(t,e,n){"use strict";e.exports=function(t,e){return new Promise((function(n,i){const r=new XMLHttpRequest;e&&(r.responseType=e),r.open("GET",t),r.onload=function(){200===r.status&&n(r.response),i(Error(r.statusText))},r.onerror=()=>i(Error("Network Error")),r.send()}))}},{}],4:[function(t,e,n){"use strict";const i=t("./base64"),r=t("./fetch");function o(t){return function(e){return"string"==typeof e&&t.test(e)}}function s(t,e){return"string"==typeof t?t+e:"function"==typeof t?t(e):e}function a(t,e,n,i){const r=c(e)?l:u(e)?h:f(e)?p:d(e)?v:y(e)?g:m(e)?b:w(e)?k:A(e)?x:null;return r?r(t,e,n||{}):i?Promise.resolve(i):Promise.reject(`Source not valid (${e})`)}function c(t){return t instanceof ArrayBuffer}function l(t,e,n){return new Promise((function(n,i){t.decodeAudioData(e,(function(t){n(t)}),(function(){i(`Can't decode audio data (${e.slice(0,30)}...)`)}))}))}a.fetch=r;const u=o(/\.(mp3|wav|ogg)(\?.*)?$/i);function h(t,e,n){const i=s(n.from,e);return a(t,a.fetch(i,"arraybuffer"),n)}function f(t){return t&&"function"==typeof t.then}function p(t,e,n){return e.then((function(e){return a(t,e,n)}))}const d=Array.isArray;function v(t,e,n){return Promise.all(e.map((e=>a(t,e,n,e))))}function y(t){return t&&"object"==typeof t}function g(t,e,n){const i={},r=Object.keys(e).map((function(r){if(n.only&&-1===n.only.indexOf(r))return null;const o=e[r];return a(t,o,n,o).then((t=>{i[r]=t}))}));return Promise.all(r).then((()=>i))}const m=o(/\.json(\?.*)?$/i);function b(t,e,n){const i=s(n.from,e);return a(t,a.fetch(i,"text").then(JSON.parse),n)}const w=o(/^data:audio/);function k(t,e,n){const r=e.indexOf(",");return a(t,i.decode(e.slice(r+1)).buffer,n)}const A=o(/\.js(\?.*)?$/i);function x(t,e,n){const i=s(n.from,e);return a(t,a.fetch(i,"text").then(C),n)}function C(t){let e=t.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format");e=t.indexOf("=",e)+2;const n=t.lastIndexOf(",");return JSON.parse(t.slice(e,n)+"}")}e.exports={load:a}},{"./base64":2,"./fetch":3}],5:[function(t,e,n){const i={VERSION:"2.0.4",NOTES:[],CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},r=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]];let o=0;for(let t=-1;t<=9;t++)r.forEach((e=>{e.forEach((e=>i.NOTES[o]=e+t)),o++}));e.exports.Constants=i},{}],6:[function(t,e,n){const i=t("./player"),r=t("./soundfont-player/index");e.exports={Player:i.Player,Soundfont:r.Soundfont}},{"./player":8,"./soundfont-player/index":14}],7:[function(t,e,n){"use strict";const i=(t,e)=>Array(e+1).join(t),r=t=>"number"==typeof t,o=t=>"string"==typeof t,s=t=>void 0!==t,a=(t,e)=>Math.pow(2,(t-69)/12)*(e||440),c=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function l(){return c}const u=[0,2,4,5,7,9,11];function h(t,e,n){if("string"!=typeof t)return null;const i=c.exec(t);if(!i||!e&&i[4])return null;const r={letter:i[1].toUpperCase(),acc:i[2].replace(/x/g,"##")};r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt="b"===r.acc[0]?-r.acc.length:r.acc.length;const o=u[r.step]+r.alt;return r.chroma=o<0?12+o:o%12,i[3]&&(r.oct=+i[3],r.midi=o+12*(r.oct+1),r.freq=a(r.midi,n)),e&&(r.tonicOf=i[4]),r}const f="CDEFGAB",p=t=>r(t)?t<0?i("b",-t):i("#",t):"",d=t=>r(t)?""+t:"";function v(t,e,n){return null==t?null:t.step?v(t.step,t.alt,t.oct):t<0||t>6?null:f.charAt(t)+p(e)+d(n)}function y(t){if((r(t)||o(t))&&t>=0&&t<128)return+t;const e=h(t);return e&&s(e.midi)?e.midi:null}function g(t,e){const n=y(t);return null===n?null:a(n,e)}const m=t=>(h(t)||{}).letter,b=t=>(h(t)||{}).acc,w=t=>(h(t)||{}).pc,k=t=>(h(t)||{}).step,A=t=>(h(t)||{}).alt,x=t=>(h(t)||{}).chroma,C=t=>(h(t)||{}).oct;e.exports={regex:l,parse:h,build:v,midi:y,freq:g,letter:m,acc:b,pc:w,step:k,alt:A,chroma:x,oct:C}},{}],8:[function(t,e,n){const i=t("./utils").Utils,r=t("./track").Track;Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});class o{constructor(t,e){this.sampleRate=5,this.startTime=0,this.buffer=e||null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},"function"==typeof t&&this.on("midiEvent",t)}loadFile(e){const n=t("fs");return this.buffer=n.readFileSync(e),this.fileLoaded()}loadArrayBuffer(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}loadDataUri(t){const e=window.atob(t.split(",")[1]),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return this.buffer=n,this.fileLoaded()}getFilesize(){return this.buffer?this.buffer.length:0}fileLoaded(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}validate(){return"MThd"===i.bytesToLetters(this.buffer.subarray(0,4))}getFormat(){return this.format=i.bytesToNumber(this.buffer.subarray(8,10)),this}getTracks(){this.tracks=[];let t=0;for(;t<this.buffer.length;){if("MTrk"==i.bytesToLetters(this.buffer.subarray(t,t+4))){let e=i.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new r(this.tracks.length,this.buffer.subarray(t+8,t+8+e)))}t+=i.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}return this}enableTrack(t){return this.tracks[t-1].enable(),this}disableTrack(t){return this.tracks[t-1].disable(),this}getDivision(){return this.division=i.bytesToNumber(this.buffer.subarray(12,14)),this}playLoop(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach((function(e){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{let n=e.handleEvent(this.tick,t);t&&n?(n.hasOwnProperty("name")&&"Set Tempo"===n.name&&this.setTempo(n.data),n.hasOwnProperty("name")&&"Program Change"===n.name&&(this.instruments.includes(n.value)||this.instruments.push(n.value))):n&&this.emitEvent(n)}}),this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}setTempo(t){return this.tempo=t,this}setStartTime(t){this.startTime=t}play(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=(new Date).getTime()),this.setIntervalId=window.setInterval(this.playLoop.bind(this),this.sampleRate),this}pause(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}stop(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}skipToTick(t){return this.stop(),this.startTick=t,this.tracks.forEach((function(e){e.setEventIndexByTick(t)})),this}skipToPercent(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}skipToSeconds(t){const e=this.getSongTime();if(t<0||t>e)throw`${t} seconds not within song time of ${e}`;return this.skipToPercent(t/e*100),this}isPlaying(){return this.setIntervalId>0||"object"==typeof this.setIntervalId}dryRun(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}resetTracks(){return this.tracks.forEach((t=>t.reset())),this}getEvents(){return this.tracks.map((t=>t.events))}getTotalTicks(){return Math.max.apply(null,this.tracks.map((t=>t.delta)))}getTotalEvents(){return this.tracks.reduce(((t,e)=>({events:{length:t.events.length+e.events.length}})),{events:{length:0}}).events.length}getSongTime(){return this.totalTicks/this.division/this.tempo*60}getSongTimeRemaining(){return Math.round((this.totalTicks-this.tick)/this.division/this.tempo*60)}getSongPercentRemaining(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}bytesProcessed(){return 14+8*this.tracks.length+this.tracks.reduce(((t,e)=>({pointer:t.pointer+e.pointer})),{pointer:0}).pointer}eventsPlayed(){return this.tracks.reduce(((t,e)=>({eventIndex:t.eventIndex+e.eventIndex})),{eventIndex:0}).eventIndex}endOfFile(){return this.isPlaying()?this.eventsPlayed()==this.totalEvents:this.bytesProcessed()==this.buffer.length}getCurrentTick(){return Math.round(((new Date).getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick}emitEvent(t){return this.triggerPlayerEvent("midiEvent",t),this}on(t,e){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(e),this}triggerPlayerEvent(t,e){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach((t=>t(e||{}))),this}}e.exports={Player:o}},{"./track":15,"./utils":16,fs:void 0}],9:[function(t,e,n){function i(t,e){return function(n,i,r,o){t(n,i,r,o),e(n,i,r,o)}}e.exports=function(t){return t.on=function(e,n){if(1===arguments.length&&"function"==typeof e)return t.on("event",e);var r="on"+e,o=t[r];return t[r]=o?i(o,n):n,t},t}},{}],10:[function(t,e,n){"use strict";const i=t("./player"),r=t("./events"),o=t("./notes"),s=t("./scheduler");function a(t,e,n){return s(o(r(i(t,e,n))))}e.exports={SamplePlayer:a}},{"./events":9,"./notes":11,"./player":12,"./scheduler":13}],11:[function(t,e,n){"use strict";var i=t("../note-parser/index"),r=function(t){return null!==t&&t!==[]&&t>=0&&t<129},o=function(t){return r(t)?+t:i.midi(t)};function s(t,e){return Object.keys(t).reduce((function(n,i){return n[e(i)]=t[i],n}),{})}e.exports=function(t){if(t.buffers){var e=t.opts.map,n="function"==typeof e?e:o,i=function(t){return t?n(t)||t:null};t.buffers=s(t.buffers,i);var r=t.start;t.start=function(t,e,n){var o=i(t),s=o%1;return s&&(o=Math.floor(o),n=Object.assign(n||{},{cents:Math.floor(100*s)})),r(o,e,n)}}return t}},{"../note-parser/index":7}],12:[function(t,e,n){"use strict";const i=t("../adsr/index"),r={},o={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(t,e,n){let i=!1,s=0,a={};const c=t.createGain();c.gain.value=1;const h=Object.assign({},o,n),f={context:t,out:c,opts:h};return e instanceof AudioBuffer?f.buffer=e:f.buffers=e,f.start=function(e,n,o){if(f.buffer&&null!==e)return f.start(null,e,n);var s=e?f.buffers[e]:f.buffer;if(!s)return void console.warn(`Buffer ${e} not found.`);if(!i)return void console.warn("SamplePlayer not connected to any node.");const a=o||r;n=Math.max(t.currentTime,n||0),f.emit("start",n,e,a);var c=d(e,s,a);return c.id=p(e,c),c.env.start(n),c.source.start(n),f.emit("started",n,c.id,c),a.duration&&c.stop(n+a.duration),c},f.play=function(t,e,n){return f.start(t,e,n)},f.stop=function(t,e){return(e=e||Object.keys(a)).map((function(e){const n=a[e];return n?(n.stop(t),n.id):null}))},f.connect=function(t){return i=!0,c.connect(t),f},f.emit=function(t,e,n,i){f.onevent&&f.onevent(t,e,n,i);const r=f["on"+t];r&&r(e,n,i)},f;function p(e,n){return n.id=s++,a[n.id]=n,n.source.onended=function(){const e=t.currentTime;n.source.disconnect(),n.env.disconnect(),n.disconnect(),f.emit("ended",e,n.id,n)},n.id}function d(e,n,i){const r=t.createGain();return r.gain.value=0,r.connect(c),r.env=l(t,i,h),r.env.connect(r.gain),r.source=t.createBufferSource(),r.source.buffer=n,r.source.connect(r),r.source.loop=i.loop||h.loop,r.source.playbackRate.value=u(i.cents||h.cents),r.source.loopStart=i.loopStart||h.loopStart,r.source.loopEnd=i.loopEnd||h.loopEnd,r.stop=function(n){const i=n||t.currentTime;f.emit("stop",i,e);const o=r.env.stop(i);r.source.stop(o)},r}}function a(t){return"number"==typeof t}const c=["attack","decay","sustain","release"];function l(t,e,n){const r=i(t),o=e.adsr||n.adsr;return c.forEach((function(t,i){r[t]=o?o[i]:e[t]||n[t]})),r.value.value=a(e.gain)?e.gain:a(n.gain)?n.gain:1,r}function u(t){return t?Math.pow(2,t/1200):1}e.exports=s},{"../adsr/index":1}],13:[function(t,e,n){"use strict";var i=Array.isArray,r=function(t){return t&&"object"==typeof t},o={};e.exports=function(t){return t.schedule=function(e,n){var s,a,c,l,u=t.context.currentTime,h=e<u?u:e;return t.emit("schedule",h,n),n.map((function(e){return e?(i(e)?(s=e[0],a=e[1]):(s=e.time,a=e),r(a)?(c=a.name||a.key||a.note||a.midi||null,l=a):(c=a,l=o),t.start(c,h+(s||0),l)):null}))},t}},{}],14:[function(t,e,n){"use strict";const i=t("../audio-loader/index").load,r=t("../sample-player/index").SamplePlayer;function o(t,e,n={}){if(1===arguments.length)return function(e,n){return o(t,e,n)};let c="",l="";if("string"==typeof e){c=e;const t=n.isSoundfontURL||s,i=n.nameToUrl||a;l=t(e)?e:i(e,n.soundfont,n.format),e=l}return i(t,e,{only:n.only||n.notes}).then((e=>{const i=r(t,e,n).connect(n.destination?n.destination:t.destination);return i.url=l,i.name=c,i}))}function s(t){return/\.js(\?.*)?$/i.test(t)}function a(t,e,n){return"https://gleitz.github.io/midi-js-soundfonts/"+(e="FluidR3_GM"===e?e:"MusyngKite")+"/"+t+"-"+(n="ogg"===n?n:"mp3")+".js"}const c={instrument:o,nameToUrl:a};e.exports={Soundfont:c}},{"../audio-loader/index":4,"../sample-player/index":10}],15:[function(t,e,n){const i=t("./constants").Constants,r=t("./utils").Utils;class o{constructor(t,e){this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=t,this.data=e,this.delta=0,this.runningDelta=0,this.events=[]}reset(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}enable(){return this.enabled=!0,this}disable(){return this.enabled=!1,this}setEventIndexByTick(t){t=t||0;for(let e in this.events)if(this.events[e].tick>=t)return this.eventIndex=e,this}getCurrentByte(){return this.data[this.pointer]}getDeltaByteCount(){let t=this.getCurrentByte(),e=1;for(;t>=128;)t=this.data[this.pointer+e],e++;return e}getDelta(){return r.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}handleEvent(t,e){if(e=e||!1){const n=t-this.lastTick>=this.getDelta();if(this.pointer<this.data.length&&(e||n)){const t=this.parseEvent();if(this.enabled)return t}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}getStringData(t){const e=1,n=r.readVarInt(this.data.subarray(t+2,t+2+e));return r.bytesToLetters(this.data.subarray(t+e+2,t+e+n+2))}parseEvent(){const t=this.pointer+this.getDeltaByteCount(),e={},n=this.getDeltaByteCount();if(e.track=this.index+1,e.delta=this.getDelta(),this.lastTick=this.lastTick+e.delta,this.runningDelta+=e.delta,e.tick=this.runningDelta,e.byteIndex=this.pointer,255==this.data[t]){switch(this.data[t+1]){case 0:e.name="Sequence Number";break;case 1:e.name="Text Event",e.string=this.getStringData(t);break;case 2:e.name="Copyright Notice";break;case 3:e.name="Sequence/Track Name",e.string=this.getStringData(t);break;case 4:e.name="Instrument Name",e.string=this.getStringData(t);break;case 5:e.name="Lyric",e.string=this.getStringData(t);break;case 6:e.name="Marker";break;case 7:e.name="Cue Point",e.string=this.getStringData(t);break;case 9:e.name="Device Name",e.string=this.getStringData(t);break;case 32:e.name="MIDI Channel Prefix";break;case 33:e.name="MIDI Port",e.data=r.bytesToNumber([this.data[t+3]]);break;case 47:e.name="End of Track";break;case 81:e.name="Set Tempo",e.data=Math.round(6e7/r.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=e.data;break;case 84:e.name="SMTPE Offset";break;case 88:e.name="Time Signature",e.data=this.data.subarray(t+3,t+7),e.timeSignature=e.data[0]+"/"+Math.pow(2,e.data[1]);break;case 89:e.name="Key Signature",e.data=this.data.subarray(t+3,t+5),e.data[0]>=0?e.keySignature=i.CIRCLE_OF_FIFTHS[e.data[0]]:e.data[0]<0&&(e.keySignature=i.CIRCLE_OF_FOURTHS[Math.abs(e.data[0])]),0==e.data[1]?e.keySignature+=" Major":1==e.data[1]&&(e.keySignature+=" Minor");break;case 127:e.name="Sequencer-Specific Meta-event";break;default:e.name=`Unknown: ${this.data[t+1].toString(16)}`}const o=this.data[this.pointer+n+2];this.pointer+=n+3+o}else if(240==this.data[t]){e.name="Sysex";const t=this.data[this.pointer+n+1];this.pointer+=n+2+t}else this.data[t]<128?(e.running=!0,e.noteNumber=this.data[t],e.noteName=i.NOTES[this.data[t]],e.velocity=this.data[t+1],this.lastStatus<=143?(e.name="Note off",e.channel=this.lastStatus-128+1):this.lastStatus<=159&&(e.name="Note on",e.channel=this.lastStatus-144+1),this.pointer+=n+2):(this.lastStatus=this.data[t],this.data[t]<=143?(e.name="Note off",e.channel=this.lastStatus-128+1,e.noteNumber=this.data[t+1],e.noteName=i.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=n+3):this.data[t]<=159?(e.name="Note on",e.channel=this.lastStatus-144+1,e.noteNumber=this.data[t+1],e.noteName=i.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=n+3):this.data[t]<=175?(e.name="Polyphonic Key Pressure",e.channel=this.lastStatus-160+1,e.note=i.NOTES[this.data[t+1]],e.pressure=event[2],this.pointer+=n+3):this.data[t]<=191?(e.name="Controller Change",e.channel=this.lastStatus-176+1,e.number=this.data[t+1],e.value=this.data[t+2],this.pointer+=n+3):this.data[t]<=207?(e.name="Program Change",e.channel=this.lastStatus-192+1,e.value=this.data[t+1],this.pointer+=n+2):this.data[t]<=223?(e.name="Channel Key Pressure",e.channel=this.lastStatus-208+1,this.pointer+=n+2):this.data[t]<=239?(e.name="Pitch Bend",e.channel=this.lastStatus-224+1,this.pointer+=n+3):e.name=`Unknown.  Pointer: ${this.pointer.toString()} ${t.toString()} ${this.data.length}`);return this.delta+=e.delta,this.events.push(e),e}endOfTrack(){return 255==this.data[this.pointer+1]&&47==this.data[this.pointer+2]&&0==this.data[this.pointer+3]}}e.exports={Track:o}},{"./constants":5,"./utils":16}],16:[function(t,e,n){class i{static byteToHex(t){return`0${t.toString(16)}`.slice(-2)}static bytesToHex(t){const e=[];return t.forEach((t=>e.push(i.byteToHex(t)))),e.join("")}static hexToNumber(t){return parseInt(t,16)}static bytesToNumber(t){return i.hexToNumber(i.bytesToHex(t))}static bytesToLetters(t){const e=[];return t.forEach((t=>e.push(String.fromCharCode(t)))),e.join("")}static decToBinary(t){return(t>>>0).toString(2)}static readVarInt(t){let e=0;return t.forEach((t=>{128&t?(e+=127&t,e<<=7):e+=t})),e}}e.exports={Utils:i}},{}]},{},[6])(6)},755:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,c=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},l=o.push,u=o.indexOf,h={},f=h.toString,p=h.hasOwnProperty,d=p.toString,v=d.call(Object),y={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},m=function(t){return null!=t&&t===t.window},b=i.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function k(t,e,n){var i,r,o=(n=n||b).createElement("script");if(o.text=t,e)for(i in w)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function A(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[f.call(t)]||"object":typeof t}var x="3.6.0",C=function(t,e){return new C.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,n=A(t);return!g(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}C.fn=C.prototype={jquery:x,constructor:C,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return C.each(this,t)},map:function(t){return this.pushStack(C.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},C.extend=C.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||g(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(l&&i&&(C.isPlainObject(i)||(r=Array.isArray(i)))?(n=s[e],o=r&&!Array.isArray(n)?[]:r||C.isPlainObject(n)?n:{},r=!1,s[e]=C.extend(l,o,i)):void 0!==i&&(s[e]=i));return s},C.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t))&&(!(e=s(t))||"function"==typeof(n=p.call(e,"constructor")&&e.constructor)&&d.call(n)===v)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){k(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(S(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?C.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,s=!n;r<o;r++)!e(t[r],r)!==s&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,s=[];if(S(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&s.push(r);return c(s)},guid:1,support:y}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=o[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var O=function(t){var e,n,i,r,o,s,a,c,l,u,h,f,p,d,v,y,g,m,b,w="sizzle"+1*new Date,k=t.document,A=0,x=0,C=ct(),S=ct(),O=ct(),E=ct(),P=function(t,e){return t===e&&(h=!0),0},T={}.hasOwnProperty,_=[],j=_.pop,B=_.push,R=_.push,I=_.slice,D=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",V="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\[[\\x20\\t\\r\\n\\f]*("+V+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+V+"))|)"+N+"*\\]",L=":("+V+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),$=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),H=new RegExp(N+"|>"),W=new RegExp(L),G=new RegExp("^"+V+"$"),J={ID:new RegExp("^#("+V+")"),CLASS:new RegExp("^\\.("+V+")"),TAG:new RegExp("^("+V+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){f()},st=wt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{R.apply(_=I.call(k.childNodes),k.childNodes),_[k.childNodes.length].nodeType}catch(t){R={apply:_.length?function(t,e){B.apply(t,I.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,r){var o,a,l,u,h,d,g,m=e&&e.ownerDocument,k=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==k&&9!==k&&11!==k)return i;if(!r&&(f(e),e=e||p,v)){if(11!==k&&(h=X.exec(t)))if(o=h[1]){if(9===k){if(!(l=e.getElementById(o)))return i;if(l.id===o)return i.push(l),i}else if(m&&(l=m.getElementById(o))&&b(e,l)&&l.id===o)return i.push(l),i}else{if(h[2])return R.apply(i,e.getElementsByTagName(t)),i;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return R.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!E[t+" "]&&(!y||!y.test(t))&&(1!==k||"object"!==e.nodeName.toLowerCase())){if(g=t,m=e,1===k&&(H.test(t)||$.test(t))){for((m=tt.test(t)&&gt(e.parentNode)||e)===e&&n.scope||((u=e.getAttribute("id"))?u=u.replace(it,rt):e.setAttribute("id",u=w)),a=(d=s(t)).length;a--;)d[a]=(u?"#"+u:":scope")+" "+bt(d[a]);g=d.join(",")}try{return R.apply(i,m.querySelectorAll(g)),i}catch(e){E(t,!0)}finally{u===w&&e.removeAttribute("id")}}}return c(t.replace(z,"$1"),e,i,r)}function ct(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function lt(t){return t[w]=!0,t}function ut(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ft(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function vt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function yt(t){return lt((function(e){return e=+e,lt((function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))}))}))}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},o=at.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!K.test(e||n&&n.nodeName||"HTML")},f=at.setDocument=function(t){var e,r,s=t?t.ownerDocument||t:k;return s!=p&&9===s.nodeType&&s.documentElement?(d=(p=s).documentElement,v=!o(p),k!=p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ot,!1):r.attachEvent&&r.attachEvent("onunload",ot)),n.scope=ut((function(t){return d.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ut((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ut((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ut((function(t){return d.appendChild(t).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&v)return e.getElementsByClassName(t)},g=[],y=[],(n.qsa=Q.test(p.querySelectorAll))&&(ut((function(t){var e;d.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||y.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+M+")"),t.querySelectorAll("[id~="+w+"-]").length||y.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||y.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||y.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||y.push(".#.+[+~]"),t.querySelectorAll("\\\f"),y.push("[\\r\\n\\f]")})),ut((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&y.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),y.push(",.*:")}))),(n.matchesSelector=Q.test(m=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut((function(t){n.disconnectedMatch=m.call(t,"*"),m.call(t,"[s!='']:x"),g.push("!=",L)})),y=y.length&&new RegExp(y.join("|")),g=g.length&&new RegExp(g.join("|")),e=Q.test(d.compareDocumentPosition),b=e||Q.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==p||t.ownerDocument==k&&b(k,t)?-1:e==p||e.ownerDocument==k&&b(k,e)?1:u?D(u,t)-D(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!r||!o)return t==p?-1:e==p?1:r?-1:o?1:u?D(u,t)-D(u,e):0;if(r===o)return ft(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?ft(s[i],a[i]):s[i]==k?-1:a[i]==k?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&v&&!E[e+" "]&&(!g||!g.test(e))&&(!y||!y.test(e)))try{var i=m.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){E(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&f(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&f(t);var r=i.attrHandle[e.toLowerCase()],o=r&&T.call(i.attrHandle,e.toLowerCase())?r(t,e,!v):void 0;return void 0!==o?o:n.attributes||!v?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},at.escape=function(t){return(t+"").replace(it,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],r=0,o=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(P),h){for(;e=t[o++];)e===t[o]&&(r=i.push(o));for(;r--;)t.splice(i[r],1)}return u=null,t},r=at.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},i=at.selectors={cacheLength:50,createPseudo:lt,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return J.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+N+"|$)"))&&C(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=at.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(F," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,f,p,d,v=o!==s?"nextSibling":"previousSibling",y=e.parentNode,g=a&&e.nodeName.toLowerCase(),m=!c&&!a,b=!1;if(y){if(o){for(;v;){for(f=e;f=f[v];)if(a?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;d=v="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?y.firstChild:y.lastChild],s&&m){for(b=(p=(l=(u=(h=(f=y)[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===A&&l[1])&&l[2],f=p&&y.childNodes[p];f=++p&&f&&f[v]||(b=p=0)||d.pop();)if(1===f.nodeType&&++b&&f===e){u[t]=[A,p,b];break}}else if(m&&(b=p=(l=(u=(h=(f=e)[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===A&&l[1]),!1===b)for(;(f=++p&&f&&f[v]||(b=p=0)||d.pop())&&((a?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(m&&((u=(h=f[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]=[A,b]),f!==e)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[w]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var i,o=r(t,e),s=o.length;s--;)t[i=D(t,o[s])]=!(n[i]=o[s])})):function(t){return r(t,0,n)}):r}},pseudos:{not:lt((function(t){var e=[],n=[],i=a(t.replace(z,"$1"));return i[w]?lt((function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return at(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:lt((function(t){return G.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=v?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:vt(!1),disabled:vt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:yt((function(){return[0]})),last:yt((function(t,e){return[e-1]})),eq:yt((function(t,e,n){return[n<0?n+e:n]})),even:yt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:yt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:yt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:yt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=dt(e);function mt(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function wt(t,e,n){var i=e.dir,r=e.next,o=r||i,s=n&&"parentNode"===o,a=x++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,r);return!1}:function(e,n,c){var l,u,h,f=[A,a];if(c){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(u=(h=e[w]||(e[w]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=u[o])&&l[0]===A&&l[1]===a)return f[2]=l[2];if(u[o]=f,f[2]=t(e,n,c))return!0}return!1}}function kt(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function At(t,e,n,i,r){for(var o,s=[],a=0,c=t.length,l=null!=e;a<c;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),l&&e.push(a)));return s}function xt(t,e,n,i,r,o){return i&&!i[w]&&(i=xt(i)),r&&!r[w]&&(r=xt(r,o)),lt((function(o,s,a,c){var l,u,h,f=[],p=[],d=s.length,v=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)at(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),y=!t||!o&&e?v:At(v,f,t,a,c),g=n?r||(o?t:d||i)?[]:s:y;if(n&&n(y,g,a,c),i)for(l=At(g,p),i(l,[],a,c),u=l.length;u--;)(h=l[u])&&(g[p[u]]=!(y[p[u]]=h));if(o){if(r||t){if(r){for(l=[],u=g.length;u--;)(h=g[u])&&l.push(y[u]=h);r(null,g=[],l,c)}for(u=g.length;u--;)(h=g[u])&&(l=r?D(o,h):f[u])>-1&&(o[l]=!(s[l]=h))}}else g=At(g===s?g.splice(d,g.length):g),r?r(null,s,g,c):R.apply(s,g)}))}function Ct(t){for(var e,n,r,o=t.length,s=i.relative[t[0].type],a=s||i.relative[" "],c=s?1:0,u=wt((function(t){return t===e}),a,!0),h=wt((function(t){return D(e,t)>-1}),a,!0),f=[function(t,n,i){var r=!s&&(i||n!==l)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,r}];c<o;c++)if(n=i.relative[t[c].type])f=[wt(kt(f),n)];else{if((n=i.filter[t[c].type].apply(null,t[c].matches))[w]){for(r=++c;r<o&&!i.relative[t[r].type];r++);return xt(c>1&&kt(f),c>1&&bt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(z,"$1"),n,c<r&&Ct(t.slice(c,r)),r<o&&Ct(t=t.slice(r)),r<o&&bt(t))}f.push(n)}return kt(f)}return mt.prototype=i.filters=i.pseudos,i.setFilters=new mt,s=at.tokenize=function(t,e){var n,r,o,s,a,c,l,u=S[t+" "];if(u)return e?0:u.slice(0);for(a=t,c=[],l=i.preFilter;a;){for(s in n&&!(r=U.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(o=[])),n=!1,(r=$.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(z," ")}),a=a.slice(n.length)),i.filter)!(r=J[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):S(t,c).slice(0)},a=at.compile=function(t,e){var n,r=[],o=[],a=O[t+" "];if(!a){for(e||(e=s(t)),n=e.length;n--;)(a=Ct(e[n]))[w]?r.push(a):o.push(a);a=O(t,function(t,e){var n=e.length>0,r=t.length>0,o=function(o,s,a,c,u){var h,d,y,g=0,m="0",b=o&&[],w=[],k=l,x=o||r&&i.find.TAG("*",u),C=A+=null==k?1:Math.random()||.1,S=x.length;for(u&&(l=s==p||s||u);m!==S&&null!=(h=x[m]);m++){if(r&&h){for(d=0,s||h.ownerDocument==p||(f(h),a=!v);y=t[d++];)if(y(h,s||p,a)){c.push(h);break}u&&(A=C)}n&&((h=!y&&h)&&g--,o&&b.push(h))}if(g+=m,n&&m!==g){for(d=0;y=e[d++];)y(b,w,s,a);if(o){if(g>0)for(;m--;)b[m]||w[m]||(w[m]=j.call(c));w=At(w)}R.apply(c,w),u&&!o&&w.length>0&&g+e.length>1&&at.uniqueSort(c)}return u&&(A=C,l=k),b};return n?lt(o):o}(o,r)),a.selector=t}return a},c=at.select=function(t,e,n,r){var o,c,l,u,h,f="function"==typeof t&&t,p=!r&&s(t=f.selector||t);if(n=n||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===e.nodeType&&v&&i.relative[c[1].type]){if(!(e=(i.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(o=J.needsContext.test(t)?0:c.length;o--&&(l=c[o],!i.relative[u=l.type]);)if((h=i.find[u])&&(r=h(l.matches[0].replace(et,nt),tt.test(c[0].type)&&gt(e.parentNode)||e))){if(c.splice(o,1),!(t=r.length&&bt(c)))return R.apply(n,r),n;break}}return(f||a(t,p))(r,e,!v,n,!e||tt.test(t)&&gt(e.parentNode)||e),n},n.sortStable=w.split("").sort(P).join("")===w,n.detectDuplicates=!!h,f(),n.sortDetached=ut((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ut((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ut((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ut((function(t){return null==t.getAttribute("disabled")}))||ht(M,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(i);C.find=O,C.expr=O.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=O.uniqueSort,C.text=O.getText,C.isXMLDoc=O.isXML,C.contains=O.contains,C.escapeSelector=O.escape;var E=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&C(t).is(n))break;i.push(t)}return i},P=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},T=C.expr.match.needsContext;function _(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var j=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(t,e,n){return g(e)?C.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?C.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?C.grep(t,(function(t){return u.call(e,t)>-1!==n})):C.filter(e,t,n)}C.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?C.find.matchesSelector(i,t)?[i]:[]:C.find.matches(t,C.grep(e,(function(t){return 1===t.nodeType})))},C.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(C(t).filter((function(){for(e=0;e<i;e++)if(C.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)C.find(t,r[e],n);return i>1?C.uniqueSort(n):n},filter:function(t){return this.pushStack(B(this,t||[],!1))},not:function(t){return this.pushStack(B(this,t||[],!0))},is:function(t){return!!B(this,"string"==typeof t&&T.test(t)?C(t):t||[],!1).length}});var R,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||R,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:I.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),j.test(i[1])&&C.isPlainObject(e))for(i in e)g(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=b.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(C):C.makeArray(t,this)}).prototype=C.fn,R=C(b);var D=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.fn.extend({has:function(t){var e=C(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(C.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,o=[],s="string"!=typeof t&&C(t);if(!T.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?C.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?u.call(C(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return E(t,"parentNode")},parentsUntil:function(t,e,n){return E(t,"parentNode",n)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return E(t,"nextSibling")},prevAll:function(t){return E(t,"previousSibling")},nextUntil:function(t,e,n){return E(t,"nextSibling",n)},prevUntil:function(t,e,n){return E(t,"previousSibling",n)},siblings:function(t){return P((t.parentNode||{}).firstChild,t)},children:function(t){return P(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(_(t,"template")&&(t=t.content||t),C.merge([],t.childNodes))}},(function(t,e){C.fn[t]=function(n,i){var r=C.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=C.filter(i,r)),this.length>1&&(M[t]||C.uniqueSort(r),D.test(t)&&r.reverse()),this.pushStack(r)}}));var V=/[^\x20\t\r\n\f]+/g;function q(t){return t}function L(t){throw t}function F(t,e,n,i){var r;try{t&&g(r=t.promise)?r.call(t).done(e).fail(n):t&&g(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}C.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return C.each(t.match(V)||[],(function(t,n){e[n]=!0})),e}(t):C.extend({},t);var e,n,i,r,o=[],s=[],a=-1,c=function(){for(r=r||t.once,i=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){C.each(n,(function(n,i){g(i)?t.unique&&l.has(i)||o.push(i):i&&i.length&&"string"!==A(i)&&e(i)}))}(arguments),n&&!e&&c()),this},remove:function(){return C.each(arguments,(function(t,e){for(var n;(n=C.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(t){return t?C.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=s=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},C.extend({Deferred:function(t){var e=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return C.Deferred((function(n){C.each(e,(function(e,i){var r=g(t[i[4]])&&t[i[4]];o[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&g(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var o=0;function s(t,e,n,r){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(t<o)){if((i=n.apply(a,c))===e.promise())throw new TypeError("Thenable self-resolution");l=i&&("object"==typeof i||"function"==typeof i)&&i.then,g(l)?r?l.call(i,s(o,e,q,r),s(o,e,L,r)):(o++,l.call(i,s(o,e,q,r),s(o,e,L,r),s(o,e,q,e.notifyWith))):(n!==q&&(a=void 0,c=[i]),(r||e.resolveWith)(a,c))}},u=r?l:function(){try{l()}catch(i){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(i,u.stackTrace),t+1>=o&&(n!==L&&(a=void 0,c=[i]),e.rejectWith(a,c))}};t?u():(C.Deferred.getStackHook&&(u.stackTrace=C.Deferred.getStackHook()),i.setTimeout(u))}}return C.Deferred((function(i){e[0][3].add(s(0,i,g(r)?r:q,i.notifyWith)),e[1][3].add(s(0,i,g(t)?t:q)),e[2][3].add(s(0,i,g(n)?n:L))})).promise()},promise:function(t){return null!=t?C.extend(t,r):r}},o={};return C.each(e,(function(t,i){var s=i[2],a=i[5];r[i[1]]=s.add,a&&s.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(i[3].fire),o[i[0]]=function(){return o[i[0]+"With"](this===o?void 0:this,arguments),this},o[i[0]+"With"]=s.fireWith})),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=a.call(arguments),o=C.Deferred(),s=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(F(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||g(r[n]&&r[n].then)))return o.then();for(;n--;)F(r[n],s(n),o.reject);return o.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&z.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},C.readyException=function(t){i.setTimeout((function(){throw t}))};var U=C.Deferred();function $(){b.removeEventListener("DOMContentLoaded",$),i.removeEventListener("load",$),C.ready()}C.fn.ready=function(t){return U.then(t).catch((function(t){C.readyException(t)})),this},C.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==t&&--C.readyWait>0||U.resolveWith(b,[C]))}}),C.ready.then=U.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(C.ready):(b.addEventListener("DOMContentLoaded",$),i.addEventListener("load",$));var H=function(t,e,n,i,r,o,s){var a=0,c=t.length,l=null==n;if("object"===A(n))for(a in r=!0,n)H(t,e,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,g(i)||(s=!0),l&&(s?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(C(t),n)})),e))for(;a<c;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):c?e(t[0],n):o},W=/^-ms-/,G=/-([a-z])/g;function J(t,e){return e.toUpperCase()}function K(t){return t.replace(W,"ms-").replace(G,J)}var Z=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=C.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Z(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[K(e)]=n;else for(i in e)r[K(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in i?[e]:e.match(V)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||C.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!C.isEmptyObject(e)}};var Q=new Y,X=new Y,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}X.set(t,e,n)}else n=void 0;return n}C.extend({hasData:function(t){return X.hasData(t)||Q.hasData(t)},data:function(t,e,n){return X.access(t,e,n)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,n){return Q.access(t,e,n)},_removeData:function(t,e){Q.remove(t,e)}}),C.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=X.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=K(i.slice(5)),nt(o,i,r[i]));Q.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){X.set(this,t)})):H(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=X.get(o,t))||void 0!==(n=nt(o,t))?n:void 0;this.each((function(){X.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){X.remove(this,t)}))}}),C.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Q.get(t,e),n&&(!i||Array.isArray(n)?i=Q.access(t,e,C.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=C.queue(t,e),i=n.length,r=n.shift(),o=C._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,(function(){C.dequeue(t,e)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:C.Callbacks("once memory").add((function(){Q.remove(t,[e+"queue",n])}))})}}),C.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?C.queue(this[0],t):void 0===e?this:this.each((function(){var n=C.queue(this,t,e);C._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&C.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){C.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=C.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Q.get(o[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],st=b.documentElement,at=function(t){return C.contains(t.ownerDocument,t)},ct={composed:!0};st.getRootNode&&(at=function(t){return C.contains(t.ownerDocument,t)||t.getRootNode(ct)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===C.css(t,"display")};function ut(t,e,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return C.css(t,e,"")},c=a(),l=n&&n[3]||(C.cssNumber[e]?"":"px"),u=t.nodeType&&(C.cssNumber[e]||"px"!==l&&+c)&&rt.exec(C.css(t,e));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;s--;)C.style(t,e,u+l),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),u/=o;u*=2,C.style(t,e,u+l),n=n||[]}return n&&(u=+u||+c||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=r)),r}var ht={};function ft(t){var e,n=t.ownerDocument,i=t.nodeName,r=ht[i];return r||(e=n.body.appendChild(n.createElement(i)),r=C.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ht[i]=r,r)}function pt(t,e){for(var n,i,r=[],o=0,s=t.length;o<s;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=Q.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&lt(i)&&(r[o]=ft(i))):"none"!==n&&(r[o]="none",Q.set(i,"display",n)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}C.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){lt(this)?C(this).show():C(this).hide()}))}});var dt,vt,yt=/^(?:checkbox|radio)$/i,gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mt=/^$|^module$|\/(?:java|ecma)script/i;dt=b.createDocumentFragment().appendChild(b.createElement("div")),(vt=b.createElement("input")).setAttribute("type","radio"),vt.setAttribute("checked","checked"),vt.setAttribute("name","t"),dt.appendChild(vt),y.checkClone=dt.cloneNode(!0).cloneNode(!0).lastChild.checked,dt.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!dt.cloneNode(!0).lastChild.defaultValue,dt.innerHTML="<option></option>",y.option=!!dt.lastChild;var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function wt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&_(t,e)?C.merge([t],n):n}function kt(t,e){for(var n=0,i=t.length;n<i;n++)Q.set(t[n],"globalEval",!e||Q.get(e[n],"globalEval"))}bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,y.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);var At=/<|&#?\w+;/;function xt(t,e,n,i,r){for(var o,s,a,c,l,u,h=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if((o=t[p])||0===o)if("object"===A(o))C.merge(f,o.nodeType?[o]:o);else if(At.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(gt.exec(o)||["",""])[1].toLowerCase(),c=bt[a]||bt._default,s.innerHTML=c[1]+C.htmlPrefilter(o)+c[2],u=c[0];u--;)s=s.lastChild;C.merge(f,s.childNodes),(s=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",p=0;o=f[p++];)if(i&&C.inArray(o,i)>-1)r&&r.push(o);else if(l=at(o),s=wt(h.appendChild(o),"script"),l&&kt(s),n)for(u=0;o=s[u++];)mt.test(o.type||"")&&n.push(o);return h}var Ct=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function Ot(){return!1}function Et(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function Pt(t,e,n,i,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Pt(t,a,n,i,e[a],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Ot;else if(!r)return t;return 1===o&&(s=r,r=function(t){return C().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=C.guid++)),t.each((function(){C.event.add(this,e,r,i,n)}))}function Tt(t,e,n){n?(Q.set(t,e,!1),C.event.add(t,e,{namespace:!1,handler:function(t){var i,r,o=Q.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(C.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=a.call(arguments),Q.set(this,e,o),i=n(this,e),this[e](),o!==(r=Q.get(this,e))||i?Q.set(this,e,!1):r={},o!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else o.length&&(Q.set(this,e,{value:C.event.trigger(C.extend(o[0],C.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Q.get(t,e)&&C.event.add(t,e,St)}C.event={global:{},add:function(t,e,n,i,r){var o,s,a,c,l,u,h,f,p,d,v,y=Q.get(t);if(Z(t))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&C.find.matchesSelector(st,r),n.guid||(n.guid=C.guid++),(c=y.events)||(c=y.events=Object.create(null)),(s=y.handle)||(s=y.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(V)||[""]).length;l--;)p=v=(a=Ct.exec(e[l])||[])[1],d=(a[2]||"").split(".").sort(),p&&(h=C.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=C.event.special[p]||{},u=C.extend({type:p,origType:v,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:d.join(".")},o),(f=c[p])||((f=c[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,d,s)||t.addEventListener&&t.addEventListener(p,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,u):f.push(u),C.event.global[p]=!0)},remove:function(t,e,n,i,r){var o,s,a,c,l,u,h,f,p,d,v,y=Q.hasData(t)&&Q.get(t);if(y&&(c=y.events)){for(l=(e=(e||"").match(V)||[""]).length;l--;)if(p=v=(a=Ct.exec(e[l])||[])[1],d=(a[2]||"").split(".").sort(),p){for(h=C.event.special[p]||{},f=c[p=(i?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)u=f[o],!r&&v!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,h.remove&&h.remove.call(t,u));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,d,y.handle)||C.removeEvent(t,p,y.handle),delete c[p])}else for(p in c)C.event.remove(t,p+e[l],n,i,!0);C.isEmptyObject(c)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,s,a=new Array(arguments.length),c=C.event.fix(t),l=(Q.get(this,"events")||Object.create(null))[c.type]||[],u=C.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(s=C.event.handlers.call(this,c,l),e=0;(r=s[e++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(i=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,i,r,o,s,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],s={},n=0;n<c;n++)void 0===s[r=(i=e[n]).selector+" "]&&(s[r]=i.needsContext?C(r,this).index(l)>-1:C.find(r,this,null,[l]).length),s[r]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[C.expando]?t:new C.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return yt.test(e.type)&&e.click&&_(e,"input")&&Tt(e,"click",St),!1},trigger:function(t){var e=this||t;return yt.test(e.type)&&e.click&&_(e,"input")&&Tt(e,"click"),!0},_default:function(t){var e=t.target;return yt.test(e.type)&&e.click&&_(e,"input")&&Q.get(e,"click")||_(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},C.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:Ot,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Ot,isPropagationStopped:Ot,isImmediatePropagationStopped:Ot,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(t,e){C.event.special[t]={setup:function(){return Tt(this,t,Et),!1},trigger:function(){return Tt(this,t),!0},_default:function(){return!0},delegateType:e}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){C.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||C.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),C.fn.extend({on:function(t,e,n,i){return Pt(this,t,e,n,i)},one:function(t,e,n,i){return Pt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,C(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ot),this.each((function(){C.event.remove(this,t,n,e)}))}});var _t=/<script|<style|<link/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return _(t,"table")&&_(11!==e.nodeType?e:e.firstChild,"tr")&&C(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Dt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Mt(t,e){var n,i,r,o,s,a;if(1===e.nodeType){if(Q.hasData(t)&&(a=Q.get(t).events))for(r in Q.remove(e,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)C.event.add(e,r,a[r][n]);X.hasData(t)&&(o=X.access(t),s=C.extend({},o),X.set(e,s))}}function Nt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&yt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Vt(t,e,n,i){e=c(e);var r,o,s,a,l,u,h=0,f=t.length,p=f-1,d=e[0],v=g(d);if(v||f>1&&"string"==typeof d&&!y.checkClone&&jt.test(d))return t.each((function(r){var o=t.eq(r);v&&(e[0]=d.call(this,r,o.html())),Vt(o,e,n,i)}));if(f&&(o=(r=xt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=(s=C.map(wt(r,"script"),It)).length;h<f;h++)l=r,h!==p&&(l=C.clone(l,!0,!0),a&&C.merge(s,wt(l,"script"))),n.call(t[h],l,h);if(a)for(u=s[s.length-1].ownerDocument,C.map(s,Dt),h=0;h<a;h++)l=s[h],mt.test(l.type||"")&&!Q.access(l,"globalEval")&&C.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?C._evalUrl&&!l.noModule&&C._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):k(l.textContent.replace(Bt,""),l,u))}return t}function qt(t,e,n){for(var i,r=e?C.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||C.cleanData(wt(i)),i.parentNode&&(n&&at(i)&&kt(wt(i,"script")),i.parentNode.removeChild(i));return t}C.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),c=at(t);if(!(y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(s=wt(a),i=0,r=(o=wt(t)).length;i<r;i++)Nt(o[i],s[i]);if(e)if(n)for(o=o||wt(t),s=s||wt(a),i=0,r=o.length;i<r;i++)Mt(o[i],s[i]);else Mt(t,a);return(s=wt(a,"script")).length>0&&kt(s,!c&&wt(t,"script")),a},cleanData:function(t){for(var e,n,i,r=C.event.special,o=0;void 0!==(n=t[o]);o++)if(Z(n)){if(e=n[Q.expando]){if(e.events)for(i in e.events)r[i]?C.event.remove(n,i):C.removeEvent(n,i,e.handle);n[Q.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),C.fn.extend({detach:function(t){return qt(this,t,!0)},remove:function(t){return qt(this,t)},text:function(t){return H(this,(function(t){return void 0===t?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Vt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)}))},prepend:function(){return Vt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(C.cleanData(wt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return C.clone(this,t,e)}))},html:function(t){return H(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!_t.test(t)&&!bt[(gt.exec(t)||["",""])[1].toLowerCase()]){t=C.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(C.cleanData(wt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Vt(this,arguments,(function(e){var n=this.parentNode;C.inArray(this,t)<0&&(C.cleanData(wt(this)),n&&n.replaceChild(e,this))}),t)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){C.fn[t]=function(t){for(var n,i=[],r=C(t),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),C(r[s])[e](n),l.apply(i,n.get());return this.pushStack(i)}}));var Lt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Ft=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},zt=function(t,e,n){var i,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=o[r];return i},Ut=new RegExp(ot.join("|"),"i");function $t(t,e,n){var i,r,o,s,a=t.style;return(n=n||Ft(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||at(t)||(s=C.style(t,e)),!y.pixelBoxStyles()&&Lt.test(s)&&Ut.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function Ht(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(l).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,c=12===e(t.marginLeft),u.style.right="60%",s=36===e(t.right),r=36===e(t.width),u.style.position="absolute",o=12===e(u.offsetWidth/3),st.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var n,r,o,s,a,c,l=b.createElement("div"),u=b.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,C.extend(y,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,r;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",st.appendChild(t).appendChild(e).appendChild(n),r=i.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,st.removeChild(t)),a}}))}();var Wt=["Webkit","Moz","ms"],Gt=b.createElement("div").style,Jt={};function Kt(t){var e=C.cssProps[t]||Jt[t];return e||(t in Gt?t:Jt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Wt.length;n--;)if((t=Wt[n]+e)in Gt)return t}(t)||t)}var Zt=/^(none|table(?!-c[ea]).+)/,Yt=/^--/,Qt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,r,o){var s="width"===e?1:0,a=0,c=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=C.css(t,n+ot[s],!0,r)),i?("content"===n&&(c-=C.css(t,"padding"+ot[s],!0,r)),"margin"!==n&&(c-=C.css(t,"border"+ot[s]+"Width",!0,r))):(c+=C.css(t,"padding"+ot[s],!0,r),"padding"!==n?c+=C.css(t,"border"+ot[s]+"Width",!0,r):a+=C.css(t,"border"+ot[s]+"Width",!0,r));return!i&&o>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-a-.5))||0),c}function ne(t,e,n){var i=Ft(t),r=(!y.boxSizingReliable()||n)&&"border-box"===C.css(t,"boxSizing",!1,i),o=r,s=$t(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Lt.test(s)){if(!n)return s;s="auto"}return(!y.boxSizingReliable()&&r||!y.reliableTrDimensions()&&_(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===C.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===C.css(t,"boxSizing",!1,i),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ee(t,e,n||(r?"border":"content"),o,i,s)+"px"}function ie(t,e,n,i,r){return new ie.prototype.init(t,e,n,i,r)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=$t(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=K(e),c=Yt.test(e),l=t.style;if(c||(e=Kt(a)),s=C.cssHooks[e]||C.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:l[e];"string"===(o=typeof n)&&(r=rt.exec(n))&&r[1]&&(n=ut(t,e,r),o="number"),null!=n&&n==n&&("number"!==o||c||(n+=r&&r[3]||(C.cssNumber[a]?"":"px")),y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var r,o,s,a=K(e);return Yt.test(e)||(e=Kt(a)),(s=C.cssHooks[e]||C.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=$t(t,e,i)),"normal"===r&&e in Xt&&(r=Xt[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),C.each(["height","width"],(function(t,e){C.cssHooks[e]={get:function(t,n,i){if(n)return!Zt.test(C.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):zt(t,Qt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var r,o=Ft(t),s=!y.scrollboxSize()&&"absolute"===o.position,a=(s||i)&&"border-box"===C.css(t,"boxSizing",!1,o),c=i?ee(t,e,i,a,o):0;return a&&s&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ee(t,e,"border",!1,o)-.5)),c&&(r=rt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=C.css(t,e)),te(0,n,c)}}})),C.cssHooks.marginLeft=Ht(y.reliableMarginLeft,(function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(t,e){C.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+ot[i]+e]=o[i]||o[i-2]||o[0];return r}},"margin"!==t&&(C.cssHooks[t+e].set=te)})),C.fn.extend({css:function(t,e){return H(this,(function(t,e,n){var i,r,o={},s=0;if(Array.isArray(e)){for(i=Ft(t),r=e.length;s<r;s++)o[e[s]]=C.css(t,e[s],!1,i);return o}return void 0!==n?C.style(t,e,n):C.css(t,e)}),t,e,arguments.length>1)}}),C.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||C.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):1!==t.elem.nodeType||!C.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:C.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},C.fx=ie.prototype.init,C.fx.step={};var re,oe,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ce(){oe&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ce):i.setTimeout(ce,C.fx.interval),C.fx.tick())}function le(){return i.setTimeout((function(){re=void 0})),re=Date.now()}function ue(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=ot[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function he(t,e,n){for(var i,r=(fe.tweeners[e]||[]).concat(fe.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function fe(t,e,n){var i,r,o=0,s=fe.prefilters.length,a=C.Deferred().always((function(){delete c.elem})),c=function(){if(r)return!1;for(var e=re||le(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),o=0,s=l.tweens.length;o<s;o++)l.tweens[o].run(i);return a.notifyWith(t,[l,i,n]),i<1&&s?n:(s||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||le(),duration:n.duration,tweens:[],createTween:function(e,n){var i=C.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(!function(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=K(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=C.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(u,l.opts.specialEasing);o<s;o++)if(i=fe.prefilters[o].call(l,t,u,l.opts))return g(i.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return C.map(u,he,l),g(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),C.fx.timer(C.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}C.Animation=C.extend(fe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(V);for(var n,i=0,r=t.length;i<r;i++)n=t[i],fe.tweeners[n]=fe.tweeners[n]||[],fe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,s,a,c,l,u,h="width"in e||"height"in e,f=this,p={},d=t.style,v=t.nodeType&&lt(t),y=Q.get(t,"fxshow");for(i in n.queue||(null==(s=C._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always((function(){f.always((function(){s.unqueued--,C.queue(t,"fx").length||s.empty.fire()}))}))),e)if(r=e[i],se.test(r)){if(delete e[i],o=o||"toggle"===r,r===(v?"hide":"show")){if("show"!==r||!y||void 0===y[i])continue;v=!0}p[i]=y&&y[i]||C.style(t,i)}if((c=!C.isEmptyObject(e))||!C.isEmptyObject(p))for(i in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(l=y&&y.display)&&(l=Q.get(t,"display")),"none"===(u=C.css(t,"display"))&&(l?u=l:(pt([t],!0),l=t.style.display||l,u=C.css(t,"display"),pt([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===C.css(t,"float")&&(c||(f.done((function(){d.display=l})),null==l&&(u=d.display,l="none"===u?"":u)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),c=!1,p)c||(y?"hidden"in y&&(v=y.hidden):y=Q.access(t,"fxshow",{display:l}),o&&(y.hidden=!v),v&&pt([t],!0),f.done((function(){for(i in v||pt([t]),Q.remove(t,"fxshow"),p)C.style(t,i,p[i])}))),c=he(v?y[i]:0,i,f),i in y||(y[i]=c.start,v&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?fe.prefilters.unshift(t):fe.prefilters.push(t)}}),C.speed=function(t,e,n){var i=t&&"object"==typeof t?C.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return C.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in C.fx.speeds?i.duration=C.fx.speeds[i.duration]:i.duration=C.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){g(i.old)&&i.old.call(this),i.queue&&C.dequeue(this,i.queue)},i},C.fn.extend({fadeTo:function(t,e,n,i){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=C.isEmptyObject(t),o=C.speed(e,n,i),s=function(){var e=fe(this,C.extend({},t),o);(r||Q.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",o=C.timers,s=Q.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ae.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||C.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=Q.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=C.timers,s=i?i.length:0;for(n.finish=!0,C.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(t,e){var n=C.fn[e];C.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,i,r)}})),C.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){C.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),C.timers=[],C.fx.tick=function(){var t,e=0,n=C.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||C.fx.stop(),re=void 0},C.fx.timer=function(t){C.timers.push(t),C.fx.start()},C.fx.interval=13,C.fx.start=function(){oe||(oe=!0,ce())},C.fx.stop=function(){oe=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(t,e){return t=C.fx&&C.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",y.checkOn=""!==t.value,y.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",y.radioValue="t"===t.value}();var pe,de=C.expr.attrHandle;C.fn.extend({attr:function(t,e){return H(this,C.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){C.removeAttr(this,t)}))}}),C.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?C.prop(t,e,n):(1===o&&C.isXMLDoc(t)||(r=C.attrHooks[e.toLowerCase()]||(C.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void C.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=C.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!y.radioValue&&"radio"===e&&_(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(V);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?C.removeAttr(t,n):t.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=de[e]||C.find.attr;de[e]=function(t,e,i){var r,o,s=e.toLowerCase();return i||(o=de[s],de[s]=r,r=null!=n(t,e,i)?s:null,de[s]=o),r}}));var ve=/^(?:input|select|textarea|button)$/i,ye=/^(?:a|area)$/i;function ge(t){return(t.match(V)||[]).join(" ")}function me(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(V)||[]}C.fn.extend({prop:function(t,e){return H(this,C.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[C.propFix[t]||t]}))}}),C.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(t)||(e=C.propFix[e]||e,r=C.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||ye.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(t){var e,n,i,r,o,s,a,c=0;if(g(t))return this.each((function(e){C(this).addClass(t.call(this,e,me(this)))}));if((e=be(t)).length)for(;n=this[c++];)if(r=me(n),i=1===n.nodeType&&" "+ge(r)+" "){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=ge(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,o,s,a,c=0;if(g(t))return this.each((function(e){C(this).removeClass(t.call(this,e,me(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[c++];)if(r=me(n),i=1===n.nodeType&&" "+ge(r)+" "){for(s=0;o=e[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(a=ge(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):g(t)?this.each((function(n){C(this).toggleClass(t.call(this,n,me(this),e),e)})):this.each((function(){var e,r,o,s;if(i)for(r=0,o=C(this),s=be(t);e=s[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=me(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Q.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ge(me(n))+" ").indexOf(e)>-1)return!0;return!1}});var we=/\r/g;C.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=g(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,C(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=C.map(r,(function(t){return null==t?"":t+""}))),(e=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=C.valHooks[r.type]||C.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(we,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:ge(C.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],c=s?o+1:r.length;for(i=o<0?c:s?o:0;i<c;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){if(e=C(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=C.makeArray(e),s=r.length;s--;)((i=r[s]).selected=C.inArray(C.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=C.inArray(C(t).val(),e)>-1}},y.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),y.focusin="onfocusin"in i;var ke=/^(?:focusinfocus|focusoutblur)$/,Ae=function(t){t.stopPropagation()};C.extend(C.event,{trigger:function(t,e,n,r){var o,s,a,c,l,u,h,f,d=[n||b],v=p.call(t,"type")?t.type:t,y=p.call(t,"namespace")?t.namespace.split("."):[];if(s=f=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!ke.test(v+C.event.triggered)&&(v.indexOf(".")>-1&&(y=v.split("."),v=y.shift(),y.sort()),l=v.indexOf(":")<0&&"on"+v,(t=t[C.expando]?t:new C.Event(v,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:C.makeArray(e,[t]),h=C.event.special[v]||{},r||!h.trigger||!1!==h.trigger.apply(n,e))){if(!r&&!h.noBubble&&!m(n)){for(c=h.delegateType||v,ke.test(c+v)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(n.ownerDocument||b)&&d.push(a.defaultView||a.parentWindow||i)}for(o=0;(s=d[o++])&&!t.isPropagationStopped();)f=s,t.type=o>1?c:h.bindType||v,(u=(Q.get(s,"events")||Object.create(null))[t.type]&&Q.get(s,"handle"))&&u.apply(s,e),(u=l&&s[l])&&u.apply&&Z(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=v,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),e)||!Z(n)||l&&g(n[v])&&!m(n)&&((a=n[l])&&(n[l]=null),C.event.triggered=v,t.isPropagationStopped()&&f.addEventListener(v,Ae),n[v](),t.isPropagationStopped()&&f.removeEventListener(v,Ae),C.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=C.extend(new C.Event,n,{type:t,isSimulated:!0});C.event.trigger(i,null,e)}}),C.fn.extend({trigger:function(t,e){return this.each((function(){C.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return C.event.trigger(t,e,n,!0)}}),y.focusin||C.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){C.event.simulate(e,t.target,C.event.fix(t))};C.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=Q.access(i,e);r||i.addEventListener(t,n,!0),Q.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=Q.access(i,e)-1;r?Q.access(i,e,r):(i.removeEventListener(t,n,!0),Q.remove(i,e))}}}));var xe=i.location,Ce={guid:Date.now()},Se=/\?/;C.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Oe=/\[\]$/,Ee=/\r?\n/g,Pe=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function _e(t,e,n,i){var r;if(Array.isArray(e))C.each(e,(function(e,r){n||Oe.test(t)?i(t,r):_e(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==A(e))i(t,e);else for(r in e)_e(t+"["+r+"]",e[r],n,i)}C.param=function(t,e){var n,i=[],r=function(t,e){var n=g(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,(function(){r(this.name,this.value)}));else for(n in t)_e(n,t[n],e,r);return i.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&Te.test(this.nodeName)&&!Pe.test(t)&&(this.checked||!yt.test(t))})).map((function(t,e){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}})):{name:e.name,value:n.replace(Ee,"\r\n")}})).get()}});var je=/%20/g,Be=/#.*$/,Re=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,De=/^(?:GET|HEAD)$/,Me=/^\/\//,Ne={},Ve={},qe="*/".concat("*"),Le=b.createElement("a");function Fe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(V)||[];if(g(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function ze(t,e,n,i){var r={},o=t===Ve;function s(a){var c;return r[a]=!0,C.each(t[a]||[],(function(t,a){var l=a(e,n,i);return"string"!=typeof l||o||r[l]?o?!(c=l):void 0:(e.dataTypes.unshift(l),s(l),!1)})),c}return s(e.dataTypes[0])||!r["*"]&&s("*")}function Ue(t,e){var n,i,r=C.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&C.extend(!0,t,i),t}Le.href=xe.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ue(Ue(t,C.ajaxSettings),e):Ue(C.ajaxSettings,t)},ajaxPrefilter:Fe(Ne),ajaxTransport:Fe(Ve),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,o,s,a,c,l,u,h,f,p=C.ajaxSetup({},e),d=p.context||p,v=p.context&&(d.nodeType||d.jquery)?C(d):C.event,y=C.Deferred(),g=C.Callbacks("once memory"),m=p.statusCode||{},w={},k={},A="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=Ie.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=k[t.toLowerCase()]=k[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)x.always(t[x.status]);else for(e in t)m[e]=[m[e],t[e]];return this},abort:function(t){var e=t||A;return n&&n.abort(e),S(0,e),this}};if(y.promise(x),p.url=((t||p.url||xe.href)+"").replace(Me,xe.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(V)||[""],null==p.crossDomain){c=b.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Le.protocol+"//"+Le.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=C.param(p.data,p.traditional)),ze(Ne,p,e,x),l)return x;for(h in(u=C.event&&p.global)&&0==C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!De.test(p.type),r=p.url.replace(Be,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(je,"+")):(f=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(Se.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Re,"$1"),f=(Se.test(r)?"&":"?")+"_="+Ce.guid+++f),p.url=r+f),p.ifModified&&(C.lastModified[r]&&x.setRequestHeader("If-Modified-Since",C.lastModified[r]),C.etag[r]&&x.setRequestHeader("If-None-Match",C.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qe+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(d,x,p)||l))return x.abort();if(A="abort",g.add(p.complete),x.done(p.success),x.fail(p.error),n=ze(Ve,p,e,x)){if(x.readyState=1,u&&v.trigger("ajaxSend",[x,p]),l)return x;p.async&&p.timeout>0&&(a=i.setTimeout((function(){x.abort("timeout")}),p.timeout));try{l=!1,n.send(w,S)}catch(t){if(l)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,s,c){var h,f,b,w,k,A=e;l||(l=!0,a&&i.clearTimeout(a),n=void 0,o=c||"",x.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(w=function(t,e,n){for(var i,r,o,s,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),n[o]}(p,x,s)),!h&&C.inArray("script",p.dataTypes)>-1&&C.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),w=function(t,e,n,i){var r,o,s,a,c,l={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=l[c+" "+o]||l["* "+o]))for(r in l)if((a=r.split(" "))[1]===o&&(s=l[c+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[r]:!0!==l[r]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+c+" to "+o}}}return{state:"success",data:e}}(p,w,x,h),h?(p.ifModified&&((k=x.getResponseHeader("Last-Modified"))&&(C.lastModified[r]=k),(k=x.getResponseHeader("etag"))&&(C.etag[r]=k)),204===t||"HEAD"===p.type?A="nocontent":304===t?A="notmodified":(A=w.state,f=w.data,h=!(b=w.error))):(b=A,!t&&A||(A="error",t<0&&(t=0))),x.status=t,x.statusText=(e||A)+"",h?y.resolveWith(d,[f,A,x]):y.rejectWith(d,[x,A,b]),x.statusCode(m),m=void 0,u&&v.trigger(h?"ajaxSuccess":"ajaxError",[x,p,h?f:b]),g.fireWith(d,[x,A]),u&&(v.trigger("ajaxComplete",[x,p]),--C.active||C.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return C.get(t,e,n,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],(function(t,e){C[e]=function(t,n,i,r){return g(n)&&(r=r||i,i=n,n=void 0),C.ajax(C.extend({url:t,type:e,dataType:r,data:n,success:i},C.isPlainObject(t)&&t))}})),C.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),C._evalUrl=function(t,e,n){return C.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){C.globalEval(t,e,n)}})},C.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return g(t)?this.each((function(e){C(this).wrapInner(t.call(this,e))})):this.each((function(){var e=C(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=g(t);return this.each((function(n){C(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(t){return!C.expr.pseudos.visible(t)},C.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},He=C.ajaxSettings.xhr();y.cors=!!He&&"withCredentials"in He,y.ajax=He=!!He,C.ajaxTransport((function(t){var e,n;if(y.cors||He&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o($e[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),C.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),C.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=C("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var We,Ge=[],Je=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ge.pop()||C.expando+"_"+Ce.guid++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",(function(t,e,n){var r,o,s,a=!1!==t.jsonp&&(Je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Je,"$1"+r):!1!==t.jsonp&&(t.url+=(Se.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||C.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=i[r],i[r]=function(){s=arguments},n.always((function(){void 0===o?C(i).removeProp(r):i[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,Ge.push(r)),s&&g(o)&&o(s[0]),s=o=void 0})),"script"})),y.createHTMLDocument=((We=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===We.childNodes.length),C.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(y.createHTMLDocument?((i=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(i)):e=b),o=!n&&[],(r=j.exec(t))?[e.createElement(r[1])]:(r=xt([t],e,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var i,r,o},C.fn.load=function(t,e,n){var i,r,o,s=this,a=t.indexOf(" ");return a>-1&&(i=ge(t.slice(a)),t=t.slice(0,a)),g(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&C.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(i?C("<div>").append(C.parseHTML(t)).find(i):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},C.expr.pseudos.animated=function(t){return C.grep(C.timers,(function(e){return t===e.elem})).length},C.offset={setOffset:function(t,e,n){var i,r,o,s,a,c,l=C.css(t,"position"),u=C(t),h={};"static"===l&&(t.style.position="relative"),a=u.offset(),o=C.css(t,"top"),c=C.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1?(s=(i=u.position()).top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(c)||0),g(e)&&(e=e.call(t,n,C.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):u.css(h)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){C.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===C.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===C.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=C(t).offset()).top+=C.css(t,"borderTopWidth",!0),r.left+=C.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-C.css(i,"marginTop",!0),left:e.left-r.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===C.css(t,"position");)t=t.offsetParent;return t||st}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;C.fn[t]=function(i){return H(this,(function(t,i,r){var o;if(m(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r}),t,i,arguments.length)}})),C.each(["top","left"],(function(t,e){C.cssHooks[e]=Ht(y.pixelPosition,(function(t,n){if(n)return n=$t(t,e),Lt.test(n)?C(t).position()[e]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(t,e){C.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){C.fn[i]=function(r,o){var s=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===o?"margin":"border");return H(this,(function(e,n,r){var o;return m(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?C.css(e,n,a):C.style(e,n,r,a)}),e,s?r:void 0,s)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){C.fn[e]=function(t){return this.on(e,t)}})),C.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){C.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Ke=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return i=a.call(arguments,2),r=function(){return t.apply(e||this,i.concat(a.call(arguments)))},r.guid=t.guid=t.guid||C.guid++,r},C.holdReady=function(t){t?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=_,C.isFunction=g,C.isWindow=m,C.camelCase=K,C.type=A,C.now=Date.now,C.isNumeric=function(t){var e=C.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},C.trim=function(t){return null==t?"":(t+"").replace(Ke,"")},void 0===(n=function(){return C}.apply(e,[]))||(t.exports=n);var Ze=i.jQuery,Ye=i.$;return C.noConflict=function(t){return i.$===C&&(i.$=Ye),t&&i.jQuery===C&&(i.jQuery=Ze),C},void 0===r&&(i.jQuery=i.$=C),C}))},925:function(t){"use strict";var e={};function n(){try{return new window.XMLHttpRequest}catch(t){}}e._getBinaryFromXHR=function(t){return t.response||t.responseText};var i="undefined"!=typeof window&&window.ActiveXObject?function(){return n()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:n;e.getBinaryContent=function(t,n){var r,o,s,a;n||(n={}),"function"==typeof n?(a=n,n={}):"function"==typeof n.callback&&(a=n.callback),a||"undefined"==typeof Promise?(o=function(t){a(null,t)},s=function(t){a(t,null)}):r=new Promise((function(t,e){o=t,s=e}));try{var c=i();c.open("GET",t,!0),"responseType"in c&&(c.responseType="arraybuffer"),c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.onreadystatechange=function(n){if(4===c.readyState)if(200===c.status||0===c.status)try{o(e._getBinaryFromXHR(c))}catch(t){s(new Error(t))}else s(new Error("Ajax error for "+t+" : "+this.status+" "+this.statusText))},n.progress&&(c.onprogress=function(e){n.progress({path:t,originalEvent:e,percent:e.loaded/e.total*100,loaded:e.loaded,total:e.total})}),c.send()}catch(t){s(new Error(t),null)}return r},t.exports=e},733:function(t,e,n){t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){return r(e[s][1][t]||t)}),l,l.exports,t,e,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";var i=t("./utils"),r=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,s,a,c,l,u=[],h=0,f=t.length,p=f,d="string"!==i.getTypeOf(t);h<t.length;)p=f-h,r=d?(e=t[h++],n=h<f?t[h++]:0,h<f?t[h++]:0):(e=t.charCodeAt(h++),n=h<f?t.charCodeAt(h++):0,h<f?t.charCodeAt(h++):0),s=e>>2,a=(3&e)<<4|n>>4,c=1<p?(15&n)<<2|r>>6:64,l=2<p?63&r:64,u.push(o.charAt(s)+o.charAt(a)+o.charAt(c)+o.charAt(l));return u.join("")},n.decode=function(t){var e,n,i,s,a,c,l=0,u=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var f,p=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&p--,t.charAt(t.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=r.uint8array?new Uint8Array(0|p):new Array(0|p);l<t.length;)e=o.indexOf(t.charAt(l++))<<2|(s=o.indexOf(t.charAt(l++)))>>4,n=(15&s)<<4|(a=o.indexOf(t.charAt(l++)))>>2,i=(3&a)<<6|(c=o.indexOf(t.charAt(l++))),f[u++]=e,64!==a&&(f[u++]=n),64!==c&&(f[u++]=i);return f}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var i=t("./external"),r=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}a.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new s("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var i=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var i=t("./utils"),r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var i=null;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=i?"uint8array":"array";function c(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(c,s),c.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},c.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new c("Deflate",t)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function i(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i}function r(t,e,n,r,s,u){var h,f,p=t.file,d=t.compression,v=u!==a.utf8encode,y=o.transformTo("string",u(p.name)),g=o.transformTo("string",a.utf8encode(p.name)),m=p.comment,b=o.transformTo("string",u(m)),w=o.transformTo("string",a.utf8encode(m)),k=g.length!==p.name.length,A=w.length!==m.length,x="",C="",S="",O=p.dir,E=p.date,P={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(P.crc32=t.crc32,P.compressedSize=t.compressedSize,P.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),v||!k&&!A||(T|=2048);var _=0,j=0;O&&(_|=16),"UNIX"===s?(j=798,_|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(p.unixPermissions,O)):(j=20,_|=function(t){return 63&(t||0)}(p.dosPermissions)),h=E.getUTCHours(),h<<=6,h|=E.getUTCMinutes(),h<<=5,h|=E.getUTCSeconds()/2,f=E.getUTCFullYear()-1980,f<<=4,f|=E.getUTCMonth()+1,f<<=5,f|=E.getUTCDate(),k&&(C=i(1,1)+i(c(y),4)+g,x+="up"+i(C.length,2)+C),A&&(S=i(1,1)+i(c(b),4)+w,x+="uc"+i(S.length,2)+S);var B="";return B+="\n\0",B+=i(T,2),B+=d.magic,B+=i(h,2),B+=i(f,2),B+=i(P.crc32,4),B+=i(P.compressedSize,4),B+=i(P.uncompressedSize,4),B+=i(y.length,2),B+=i(x.length,2),{fileRecord:l.LOCAL_FILE_HEADER+B+y+x,dirRecord:l.CENTRAL_FILE_HEADER+i(j,2)+B+i(b.length,2)+"\0\0\0\0"+i(_,4)+i(r,4)+y+x+b}}var o=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),c=t("../crc32"),l=t("../signature");function u(t,e,n,i){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(u,s),u.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},u.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return l.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,s){var a=o.transformTo("string",s(r));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(t,2)+i(t,2)+i(e,4)+i(n,4)+i(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var i=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new r(e.streamFiles,n,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,n){s++;var r=function(t,e){var n=t||e,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(r,a).withStreamInfo("file",{name:t,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var i=t("./utils"),r=t("./external"),o=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function l(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new a);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(l(i[o]));return r.Promise.all(n)})).then((function(t){for(var r=t.shift(),o=r.files,s=0;s<o.length;s++){var a=o[s],c=a.fileNameStr,l=i.resolve(a.fileNameStr);n.file(l,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders}),a.dir||(n.file(l).unsafeOriginalName=c)}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var i=t("../utils"),r=t("../stream/GenericWorker");function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var i=t("readable-stream").Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){"use strict";function i(t,e,n){var i,r=o.getTypeOf(e),a=o.extend(n||{},c);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=v(t)),a.createFolders&&(i=d(t))&&y.call(this,i,!0);var h="string"===r&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!h),(e instanceof l&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",r="string");var g=null;g=e instanceof l||e instanceof s?e:f.isNode&&f.isStream(e)?new p(t,e):o.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var m=new u(t,g,a);this.files[t]=m}var r=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),c=t("./defaults"),l=t("./compressedObject"),u=t("./zipObject"),h=t("./generate"),f=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),d=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},v=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},y=function(t,e){return e=void 0!==e?e:c.createFolders,t=v(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function g(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var m={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i)},filter:function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,i.call(this,t,e,n),this;if(g(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(g(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=y.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=h.generateWorker(this,n,i)}catch(t){(e=new s("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=m},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){"use strict";e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var i=t("./DataReader");function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var i=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,n){"use strict";var i=t("./Uint8ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var i=t("./DataReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var i=t("./ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var i=t("../utils"),r=t("../support"),o=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new c(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){"use strict";var i=t("./GenericWorker"),r=t("../utils");function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var i=t("./GenericWorker"),r=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./ConvertWorker"),o=t("./GenericWorker"),s=t("../base64"),a=t("../support"),c=t("../external"),l=null;if(a.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function u(t,e){return new c.Promise((function(n,r){var o=[],a=t._internalType,c=t._outputType,l=t._mimeType;t.on("data",(function(t,n){o.push(t),e&&e(n)})).on("error",(function(t){o=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return s.encode(e);default:return i.transformTo(t,e)}}(c,function(t,e){var n,i=0,r=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,o),l);n(t)}catch(t){r(t)}o=[]})).resume()}))}function h(t,e,n){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=n,i.checkSupport(s),this._worker=t.pipe(new r(s)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}h.prototype={accumulate:function(t){return u(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),n.blob=0===r.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var i=t("./utils"),r=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,i,o,s,a=t.length,c=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(c):new Array(c),o=s=0;s<c;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e}(t)},n.utf8decode=function(t){return r.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,o,s=t.length,c=new Array(2*s);for(e=n=0;e<s;)if((r=t[e++])<128)c[n++]=r;else if(4<(o=a[r]))c[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&e<s;)r=r<<6|63&t[e++],o--;1<o?c[n++]=65533:r<65536?c[n++]=r:(r-=65536,c[n++]=55296|r>>10&1023,c[n++]=56320|1023&r)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),i.applyFromCharCode(c)}(t=i.transformTo(r.uint8array?"uint8array":"array",t))},i.inherits(l,s),l.prototype.processChunk=function(t){var e=i.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(e),c=e;s!==e.length&&(r.uint8array?(c=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(c=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:n.utf8decode(c),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,i.inherits(u,s),u.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){"use strict";var i=t("./support"),r=t("./base64"),o=t("./nodejsUtils"),s=t("./external");function a(t){return t}function c(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}t("setimmediate"),n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function u(t){var e=65536,i=n.getTypeOf(t),r=!0;if("uint8array"===i?r=l.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=l.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return l.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return l.stringifyByChar(t)}function h(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=u;var f={};f.string={string:a,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:function(t){return c(t,o.allocBuffer(t.length))}},f.array={string:u,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},f.arraybuffer={string:function(t){return u(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:u,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o.newBufferFrom(t)}},f.nodebuffer={string:u,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:a},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var i=n.getTypeOf(e);return f[i][t](e)},n.resolve=function(t){for(var e=t.split("/"),n=[],i=0;i<e.length;i++){var r=e[i];"."===r||""===r&&0!==i&&i!==e.length-1||(".."===r?n.pop():n.push(r))}return n.join("/")},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&o.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},n.delay=function(t,e,n){setImmediate((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,o,a,l){return s.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var u=n.getTypeOf(e);return u?("arraybuffer"===u?e=n.transformTo("uint8array",e):"string"===u&&(l?e=r.decode(e):o&&!0!==a&&(e=function(t){return c(t,i.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,n){"use strict";var i=t("./reader/readerFor"),r=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=t("./support");function c(t){this.files=[],this.loadOptions=t}c.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",n=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(0<i)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var i=t("./reader/readerFor"),r=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),c=t("./compressions"),l=t("./support");function u(t,e){this.options=t,this.loadOptions=e}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in c)if(Object.prototype.hasOwnProperty.call(c,e)&&c[e].magic===t)return c[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i};t.setIndex(r)},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function i(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),c=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(e=e.pipe(new s.Utf8EncodeWorker)),!o&&i&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new c("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)i.prototype[l[h]]=u;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){(function(t){"use strict";var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,s=new r(u),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new t.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var t,e;i=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}i=!1}e.exports=function(t){1!==l.push(t)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){"use strict";var i=t("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i((function(){var i;try{i=e(n)}catch(i){return o.reject(t,i)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=d((function(){e(r,i)}));"error"===s.status&&i(s.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=l).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);return this.state!==c?h(n,this.state===a?t:e,this.outcome):this.queue.push(new u(n,t,e)),n},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=d(f,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,c=-1,l=new this(r);++c<n;)u(t[c],c);return l;function u(t,r){e.resolve(t).then((function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(l,s))}),(function(t){i||(i=!0,o.reject(l,t))}))}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s,a=-1,c=new this(r);++a<n;)s=t[a],e.resolve(s).then((function(t){i||(i=!0,o.resolve(c,t))}),(function(t){i||(i=!0,o.reject(c,t))}));return c}},{immediate:36}],38:[function(t,e,n){"use strict";var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var i=t("./zlib/deflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),c=Object.prototype.toString,l=0,u=-1,h=0,f=8;function p(t){if(!(this instanceof p))return new p(t);this.options=r.assign({level:u,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==l)throw new Error(s[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var d;if(d="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,d))!==l)throw new Error(s[n]);this._dict_set=!0}}function d(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}p.prototype.push=function(t,e){var n,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===c.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=i.deflate(a,s))&&n!==l)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==s||(this.onEnd(l),!(a.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=p,n.deflate=d,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var i=t("./zlib/inflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),c=t("./zlib/zstream"),l=t("./zlib/gzheader"),u=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new l,i.inflateGetHeader(this.strm,this.header)}function f(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(t,e){var n,a,c,l,h,f,p=this.strm,d=this.options.chunkSize,v=this.options.dictionary,y=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(d),p.next_out=0,p.avail_out=d),(n=i.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&v&&(f="string"==typeof v?o.string2buf(v):"[object ArrayBuffer]"===u.call(v)?new Uint8Array(v):v,n=i.inflateSetDictionary(this.strm,f)),n===s.Z_BUF_ERROR&&!0===y&&(n=s.Z_OK,y=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==s.Z_STREAM_END&&(0!==p.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(p.output,p.next_out),l=p.next_out-c,h=o.buf2string(p.output,c),p.next_out=l,p.avail_out=d-l,l&&r.arraySet(p.output,p.output,c,l,0),this.onData(h)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(y=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=h,n.inflate=f,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(t,e,n){"use strict";var i=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,n.string2buf=function(t){var e,n,r,o,s,a=t.length,c=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(c),o=s=0;s<c;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e},n.buf2binstring=function(t){return c(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,r,o,a=e||t.length,l=new Array(2*a);for(n=i=0;n<a;)if((r=t[n++])<128)l[i++]=r;else if(4<(o=s[r]))l[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<a;)r=r<<6|63&t[n++],o--;1<o?l[i++]=65533:r<65536?l[i++]=r:(r-=65536,l[i++]=55296|r>>10&1023,l[i++]=56320|1023&r)}return c(l,i)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--s;);r%=65521,o%=65521}return r|o<<16|0}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,n){"use strict";var i,r=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),c=t("./messages"),l=0,u=4,h=0,f=-2,p=-1,d=4,v=2,y=8,g=9,m=286,b=30,w=19,k=2*m+1,A=15,x=3,C=258,S=C+x+1,O=42,E=113,P=1,T=2,_=3,j=4;function B(t,e){return t.msg=c[e],e}function R(t){return(t<<1)-(4<t?9:0)}function I(t){for(var e=t.length;0<=--e;)t[e]=0}function D(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function M(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,D(t.strm)}function N(t,e){t.pending_buf[t.pending++]=e}function V(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function q(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-S?t.strstart-(t.w_size-S):0,l=t.window,u=t.w_mask,h=t.prev,f=t.strstart+C,p=l[o+s-1],d=l[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(n=e)+s]===d&&l[n+s-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<f);if(i=C-(f-o),o=f-C,s<i){if(t.match_start=e,a<=(s=i))break;p=l[o+s-1],d=l[o+s]}}}while((e=h[e&u])>c&&0!=--r);return s<=t.lookahead?s:t.lookahead}function L(t){var e,n,i,o,c,l,u,h,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-S)){for(r.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;i=t.head[--e],t.head[e]=d<=i?i-d:0,--n;);for(e=n=d;i=t.prev[--e],t.prev[e]=d<=i?i-d:0,--n;);o+=d}if(0===t.strm.avail_in)break;if(l=t.strm,u=t.window,h=t.strstart+t.lookahead,p=void 0,(f=o)<(p=l.avail_in)&&(p=f),n=0===p?0:(l.avail_in-=p,r.arraySet(u,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=s(l.adler,u,p,h):2===l.state.wrap&&(l.adler=a(l.adler,u,p,h)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=x)for(c=t.strstart-t.insert,t.ins_h=t.window[c],t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+x-1])&t.hash_mask,t.prev[c&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=c,c++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<S&&0!==t.strm.avail_in)}function F(t,e){for(var n,i;;){if(t.lookahead<S){if(L(t),t.lookahead<S&&e===l)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-S&&(t.match_length=q(t,n)),t.match_length>=x)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=t.strstart<x-1?t.strstart:x-1,e===u?(M(t,!0),0===t.strm.avail_out?_:j):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}function z(t,e){for(var n,i,r;;){if(t.lookahead<S){if(L(t),t.lookahead<S&&e===l)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-S&&(t.match_length=q(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-x,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(M(t,!1),0===t.strm.avail_out))return P}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&M(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return P}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===u?(M(t,!0),0===t.strm.avail_out?_:j):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}function U(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*k),this.dyn_dtree=new r.Buf16(2*(2*b+1)),this.bl_tree=new r.Buf16(2*(2*w+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(A+1),this.heap=new r.Buf16(2*m+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*m+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=v,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?O:E,t.adler=2===e.wrap?0:1,e.last_flush=l,o._tr_init(e),h):B(t,f)}function W(t){var e=H(t);return e===h&&function(t){t.window_size=2*t.w_size,I(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=x-1,t.match_available=0,t.ins_h=0}(t.state),e}function G(t,e,n,i,o,s){if(!t)return f;var a=1;if(e===p&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),o<1||g<o||n!==y||i<8||15<i||e<0||9<e||s<0||d<s)return B(t,f);8===i&&(i=9);var c=new $;return(t.state=c).strm=t,c.wrap=a,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+x-1)/x),c.window=new r.Buf8(2*c.w_size),c.head=new r.Buf16(c.hash_size),c.prev=new r.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new r.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=s,c.method=n,W(t)}i=[new U(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(L(t),0===t.lookahead&&e===l)return P;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,M(t,!1),0===t.strm.avail_out))return P;if(t.strstart-t.block_start>=t.w_size-S&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===u?(M(t,!0),0===t.strm.avail_out?_:j):(t.strstart>t.block_start&&(M(t,!1),t.strm.avail_out),P)})),new U(4,4,8,4,F),new U(4,5,16,8,F),new U(4,6,32,32,F),new U(4,4,16,16,z),new U(8,16,32,32,z),new U(8,16,128,128,z),new U(8,32,128,256,z),new U(32,128,258,1024,z),new U(32,258,258,4096,z)],n.deflateInit=function(t,e){return G(t,e,y,15,8,0)},n.deflateInit2=G,n.deflateReset=W,n.deflateResetKeep=H,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,h):f},n.deflate=function(t,e){var n,r,s,c;if(!t||!t.state||5<e||e<0)return t?B(t,f):f;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==u)return B(t,0===t.avail_out?-5:f);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===O)if(2===r.wrap)t.adler=0,N(r,31),N(r,139),N(r,8),r.gzhead?(N(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),N(r,255&r.gzhead.time),N(r,r.gzhead.time>>8&255),N(r,r.gzhead.time>>16&255),N(r,r.gzhead.time>>24&255),N(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),N(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(N(r,255&r.gzhead.extra.length),N(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(N(r,0),N(r,0),N(r,0),N(r,0),N(r,0),N(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),N(r,3),r.status=E);else{var p=y+(r.w_bits-8<<4)<<8;p|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(p|=32),p+=31-p%31,r.status=E,V(r,p),0!==r.strstart&&(V(r,t.adler>>>16),V(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),D(t),s=r.pending,r.pending!==r.pending_buf_size));)N(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),D(t),s=r.pending,r.pending===r.pending_buf_size)){c=1;break}c=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,N(r,c)}while(0!==c);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===c&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),D(t),s=r.pending,r.pending===r.pending_buf_size)){c=1;break}c=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,N(r,c)}while(0!==c);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===c&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&D(t),r.pending+2<=r.pending_buf_size&&(N(r,255&t.adler),N(r,t.adler>>8&255),t.adler=0,r.status=E)):r.status=E),0!==r.pending){if(D(t),0===t.avail_out)return r.last_flush=-1,h}else if(0===t.avail_in&&R(e)<=R(n)&&e!==u)return B(t,-5);if(666===r.status&&0!==t.avail_in)return B(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==l&&666!==r.status){var d=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(L(t),0===t.lookahead)){if(e===l)return P;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===u?(M(t,!0),0===t.strm.avail_out?_:j):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}(r,e):3===r.strategy?function(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=C){if(L(t),t.lookahead<=C&&e===l)return P;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){s=t.strstart+C;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=C-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(n=o._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===u?(M(t,!0),0===t.strm.avail_out?_:j):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}(r,e):i[r.level].func(r,e);if(d!==_&&d!==j||(r.status=666),d===P||d===_)return 0===t.avail_out&&(r.last_flush=-1),h;if(d===T&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(I(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),D(t),0===t.avail_out))return r.last_flush=-1,h}return e!==u?h:r.wrap<=0?1:(2===r.wrap?(N(r,255&t.adler),N(r,t.adler>>8&255),N(r,t.adler>>16&255),N(r,t.adler>>24&255),N(r,255&t.total_in),N(r,t.total_in>>8&255),N(r,t.total_in>>16&255),N(r,t.total_in>>24&255)):(V(r,t.adler>>>16),V(r,65535&t.adler)),D(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?h:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==O&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?B(t,f):(t.state=null,e===E?B(t,-3):h):f},n.deflateSetDictionary=function(t,e){var n,i,o,a,c,l,u,p,d=e.length;if(!t||!t.state)return f;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==O||n.lookahead)return f;for(1===a&&(t.adler=s(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(I(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new r.Buf8(n.w_size),r.arraySet(p,e,d-n.w_size,n.w_size,0),e=p,d=n.w_size),c=t.avail_in,l=t.next_in,u=t.input,t.avail_in=d,t.next_in=0,t.input=e,L(n);n.lookahead>=x;){for(i=n.strstart,o=n.lookahead-(x-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+x-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--o;);n.strstart=i,n.lookahead=x-1,L(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=x-1,n.match_available=0,t.next_in=l,t.input=u,t.avail_in=c,n.wrap=a,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n,i,r,o,s,a,c,l,u,h,f,p,d,v,y,g,m,b,w,k,A,x,C,S,O;n=t.state,i=t.next_in,S=t.input,r=i+(t.avail_in-5),o=t.next_out,O=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,v=n.lencode,y=n.distcode,g=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;t:do{d<15&&(p+=S[i++]<<d,d+=8,p+=S[i++]<<d,d+=8),b=v[p&g];e:for(;;){if(p>>>=w=b>>>24,d-=w,0==(w=b>>>16&255))O[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=v[(65535&b)+(p&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}k=65535&b,(w&=15)&&(d<w&&(p+=S[i++]<<d,d+=8),k+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=S[i++]<<d,d+=8,p+=S[i++]<<d,d+=8),b=y[p&m];n:for(;;){if(p>>>=w=b>>>24,d-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=y[(65535&b)+(p&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(A=65535&b,d<(w&=15)&&(p+=S[i++]<<d,(d+=8)<w&&(p+=S[i++]<<d,d+=8)),c<(A+=p&(1<<w)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=w,d-=w,(w=o-s)<A){if(u<(w=A-w)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(C=f,(x=0)===h){if(x+=l-w,w<k){for(k-=w;O[o++]=f[x++],--w;);x=o-A,C=O}}else if(h<w){if(x+=l+h-w,(w-=h)<k){for(k-=w;O[o++]=f[x++],--w;);if(x=0,h<k){for(k-=w=h;O[o++]=f[x++],--w;);x=o-A,C=O}}}else if(x+=h-w,w<k){for(k-=w;O[o++]=f[x++],--w;);x=o-A,C=O}for(;2<k;)O[o++]=C[x++],O[o++]=C[x++],O[o++]=C[x++],k-=3;k&&(O[o++]=C[x++],1<k&&(O[o++]=C[x++]))}else{for(x=o-A;O[o++]=O[x++],O[o++]=O[x++],O[o++]=O[x++],2<(k-=3););k&&(O[o++]=O[x++],1<k&&(O[o++]=O[x++]))}break}}break}}while(i<r&&o<a);i-=k=d>>3,p&=(1<<(d-=k<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=p,n.bits=d}},{}],49:[function(t,e,n){"use strict";var i=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),c=1,l=2,u=0,h=-2,f=1,p=852,d=592;function v(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=f,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(p),e.distcode=e.distdyn=new i.Buf32(d),e.sane=1,e.back=-1,u):h}function m(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,g(t)):h}function b(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?h:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,m(t))):h}function w(t,e){var n,i;return t?(i=new y,(t.state=i).window=null,(n=b(t,e))!==u&&(t.state=null),n):h}var k,A,x=!0;function C(t){if(x){var e;for(k=new i.Buf32(512),A=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(c,t.lens,0,288,k,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(l,t.lens,0,32,A,0,t.work,{bits:5}),x=!1}t.lencode=k,t.lenbits=9,t.distcode=A,t.distbits=5}function S(t,e,n,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r<(o=s.wsize-s.wnext)&&(o=r),i.arraySet(s.window,e,n-r,o,s.wnext),(r-=o)?(i.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=m,n.inflateReset2=b,n.inflateResetKeep=g,n.inflateInit=function(t){return w(t,15)},n.inflateInit2=w,n.inflate=function(t,e){var n,p,d,y,g,m,b,w,k,A,x,O,E,P,T,_,j,B,R,I,D,M,N,V,q=0,L=new i.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;12===(n=t.state).mode&&(n.mode=13),g=t.next_out,d=t.output,b=t.avail_out,y=t.next_in,p=t.input,m=t.avail_in,w=n.hold,k=n.bits,A=m,x=b,M=u;t:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;k<16;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(2&n.wrap&&35615===w){L[n.check=0]=255&w,L[1]=w>>>8&255,n.check=o(n.check,L,2,0),k=w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&w)){t.msg="unknown compression method",n.mode=30;break}if(k-=4,D=8+(15&(w>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<D,t.adler=n.check=1,n.mode=512&w?10:12,k=w=0;break;case 2:for(;k<16;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(n.flags=w,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,n.check=o(n.check,L,2,0)),k=w=0,n.mode=3;case 3:for(;k<32;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}n.head&&(n.head.time=w),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,L[2]=w>>>16&255,L[3]=w>>>24&255,n.check=o(n.check,L,4,0)),k=w=0,n.mode=4;case 4:for(;k<16;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,n.check=o(n.check,L,2,0)),k=w=0,n.mode=5;case 5:if(1024&n.flags){for(;k<16;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,n.check=o(n.check,L,2,0)),k=w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(m<(O=n.length)&&(O=m),O&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,p,y,O,D)),512&n.flags&&(n.check=o(n.check,p,O,y)),m-=O,y+=O,n.length-=O),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break t;for(O=0;D=p[y+O++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D)),D&&O<m;);if(512&n.flags&&(n.check=o(n.check,p,O,y)),m-=O,y+=O,D)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break t;for(O=0;D=p[y+O++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D)),D&&O<m;);if(512&n.flags&&(n.check=o(n.check,p,O,y)),m-=O,y+=O,D)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;k<16;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(w!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}k=w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;k<32;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}t.adler=n.check=v(w),k=w=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=g,t.avail_out=b,t.next_in=y,t.avail_in=m,n.hold=w,n.bits=k,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){w>>>=7&k,k-=7&k,n.mode=27;break}for(;k<3;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}switch(n.last=1&w,k-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(C(n),n.mode=20,6!==e)break;w>>>=2,k-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}w>>>=2,k-=2;break;case 14:for(w>>>=7&k,k-=7&k;k<32;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if((65535&w)!=(w>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&w,k=w=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(O=n.length){if(m<O&&(O=m),b<O&&(O=b),0===O)break t;i.arraySet(d,p,y,O,g),m-=O,y+=O,b-=O,g+=O,n.length-=O;break}n.mode=12;break;case 17:for(;k<14;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(n.nlen=257+(31&w),w>>>=5,k-=5,n.ndist=1+(31&w),w>>>=5,k-=5,n.ncode=4+(15&w),w>>>=4,k-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;k<3;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}n.lens[F[n.have++]]=7&w,w>>>=3,k-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},M=a(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,M){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;_=(q=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,j=65535&q,!((T=q>>>24)<=k);){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(j<16)w>>>=T,k-=T,n.lens[n.have++]=j;else{if(16===j){for(V=T+2;k<V;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(w>>>=T,k-=T,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}D=n.lens[n.have-1],O=3+(3&w),w>>>=2,k-=2}else if(17===j){for(V=T+3;k<V;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}k-=T,D=0,O=3+(7&(w>>>=T)),w>>>=3,k-=3}else{for(V=T+7;k<V;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}k-=T,D=0,O=11+(127&(w>>>=T)),w>>>=7,k-=7}if(n.have+O>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;O--;)n.lens[n.have++]=D}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,N={bits:n.lenbits},M=a(c,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,M){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},M=a(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,M){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=m&&258<=b){t.next_out=g,t.avail_out=b,t.next_in=y,t.avail_in=m,n.hold=w,n.bits=k,s(t,x),g=t.next_out,d=t.output,b=t.avail_out,y=t.next_in,p=t.input,m=t.avail_in,w=n.hold,k=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;_=(q=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,j=65535&q,!((T=q>>>24)<=k);){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(_&&0==(240&_)){for(B=T,R=_,I=j;_=(q=n.lencode[I+((w&(1<<B+R)-1)>>B)])>>>16&255,j=65535&q,!(B+(T=q>>>24)<=k);){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}w>>>=B,k-=B,n.back+=B}if(w>>>=T,k-=T,n.back+=T,n.length=j,0===_){n.mode=26;break}if(32&_){n.back=-1,n.mode=12;break}if(64&_){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&_,n.mode=22;case 22:if(n.extra){for(V=n.extra;k<V;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,k-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;_=(q=n.distcode[w&(1<<n.distbits)-1])>>>16&255,j=65535&q,!((T=q>>>24)<=k);){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(0==(240&_)){for(B=T,R=_,I=j;_=(q=n.distcode[I+((w&(1<<B+R)-1)>>B)])>>>16&255,j=65535&q,!(B+(T=q>>>24)<=k);){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}w>>>=B,k-=B,n.back+=B}if(w>>>=T,k-=T,n.back+=T,64&_){t.msg="invalid distance code",n.mode=30;break}n.offset=j,n.extra=15&_,n.mode=24;case 24:if(n.extra){for(V=n.extra;k<V;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,k-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break t;if(O=x-b,n.offset>O){if((O=n.offset-O)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}E=O>n.wnext?(O-=n.wnext,n.wsize-O):n.wnext-O,O>n.length&&(O=n.length),P=n.window}else P=d,E=g-n.offset,O=n.length;for(b<O&&(O=b),b-=O,n.length-=O;d[g++]=P[E++],--O;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break t;d[g++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;k<32;){if(0===m)break t;m--,w|=p[y++]<<k,k+=8}if(x-=b,t.total_out+=x,n.total+=x,x&&(t.adler=n.check=n.flags?o(n.check,d,x,g-x):r(n.check,d,x,g-x)),x=b,(n.flags?w:v(w))!==n.check){t.msg="incorrect data check",n.mode=30;break}k=w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;k<32;){if(0===m)break t;m--,w+=p[y++]<<k,k+=8}if(w!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}k=w=0}n.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;default:return h}return t.next_out=g,t.avail_out=b,t.next_in=y,t.avail_in=m,n.hold=w,n.bits=k,(n.wsize||x!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&S(t,t.output,t.next_out,x-t.avail_out)?(n.mode=31,-4):(A-=t.avail_in,x-=t.avail_out,t.total_in+=A,t.total_out+=x,n.total+=x,n.wrap&&x&&(t.adler=n.check=n.flags?o(n.check,d,x,t.next_out-x):r(n.check,d,x,t.next_out-x)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==A&&0===x||4===e)&&M===u&&(M=-5),M)},n.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,u},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?h:((n.head=e).done=!1,u):h},n.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?h:11===n.mode&&r(1,e,i,0)!==n.check?-3:S(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,u):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var i=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,c,l,u,h,f){var p,d,v,y,g,m,b,w,k,A=f.bits,x=0,C=0,S=0,O=0,E=0,P=0,T=0,_=0,j=0,B=0,R=null,I=0,D=new i.Buf16(16),M=new i.Buf16(16),N=null,V=0;for(x=0;x<=15;x++)D[x]=0;for(C=0;C<c;C++)D[e[n+C]]++;for(E=A,O=15;1<=O&&0===D[O];O--);if(O<E&&(E=O),0===O)return l[u++]=20971520,l[u++]=20971520,f.bits=1,0;for(S=1;S<O&&0===D[S];S++);for(E<S&&(E=S),x=_=1;x<=15;x++)if(_<<=1,(_-=D[x])<0)return-1;if(0<_&&(0===t||1!==O))return-1;for(M[1]=0,x=1;x<15;x++)M[x+1]=M[x]+D[x];for(C=0;C<c;C++)0!==e[n+C]&&(h[M[e[n+C]]++]=C);if(m=0===t?(R=N=h,19):1===t?(R=r,I-=257,N=o,V-=257,256):(R=s,N=a,-1),x=S,g=u,T=C=B=0,v=-1,y=(j=1<<(P=E))-1,1===t&&852<j||2===t&&592<j)return 1;for(;;){for(b=x-T,k=h[C]<m?(w=0,h[C]):h[C]>m?(w=N[V+h[C]],R[I+h[C]]):(w=96,0),p=1<<x-T,S=d=1<<P;l[g+(B>>T)+(d-=p)]=b<<24|w<<16|k|0,0!==d;);for(p=1<<x-1;B&p;)p>>=1;if(0!==p?(B&=p-1,B+=p):B=0,C++,0==--D[x]){if(x===O)break;x=e[n+h[C]]}if(E<x&&(B&y)!==v){for(0===T&&(T=E),g+=S,_=1<<(P=x-T);P+T<O&&!((_-=D[P+T])<=0);)P++,_<<=1;if(j+=1<<P,1===t&&852<j||2===t&&592<j)return 1;l[v=B&y]=E<<24|P<<16|g-u|0}}return 0!==B&&(l[g+B]=x-T<<24|64<<16|0),f.bits=E,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var i=t("../utils/common"),r=0,o=1;function s(t){for(var e=t.length;0<=--e;)t[e]=0}var a=0,c=29,l=256,u=l+1+c,h=30,f=19,p=2*u+1,d=15,v=16,y=7,g=256,m=16,b=17,w=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(u+2));s(S);var O=new Array(2*h);s(O);var E=new Array(512);s(E);var P=new Array(256);s(P);var T=new Array(c);s(T);var _,j,B,R=new Array(h);function I(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function D(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function M(t){return t<256?E[t]:E[256+(t>>>7)]}function N(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function V(t,e,n){t.bi_valid>v-n?(t.bi_buf|=e<<t.bi_valid&65535,N(t,t.bi_buf),t.bi_buf=e>>v-t.bi_valid,t.bi_valid+=n-v):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function q(t,e,n){V(t,n[2*e],n[2*e+1])}function L(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function F(t,e,n){var i,r,o=new Array(d+1),s=0;for(i=1;i<=d;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=L(o[a]++,a))}}function z(t){var e;for(e=0;e<u;e++)t.dyn_ltree[2*e]=0;for(e=0;e<h;e++)t.dyn_dtree[2*e]=0;for(e=0;e<f;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*g]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function U(t){8<t.bi_valid?N(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function $(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function H(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&$(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!$(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function W(t,e,n){var i,r,o,s,a=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===i?q(t,r,e):(q(t,(o=P[r])+l+1,e),0!==(s=k[o])&&V(t,r-=T[o],s),q(t,o=M(--i),n),0!==(s=A[o])&&V(t,i-=R[o],s)),a<t.last_lit;);q(t,g,e)}function G(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=p,n=0;n<c;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,n=t.heap_len>>1;1<=n;n--)H(t,o,n);for(r=c;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,H(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,c=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,v=e.stat_desc.extra_base,y=e.stat_desc.max_length,g=0;for(o=0;o<=d;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<p;n++)y<(o=c[2*c[2*(i=t.heap[n])+1]+1]+1)&&(o=y,g++),c[2*i+1]=o,l<i||(t.bl_count[o]++,s=0,v<=i&&(s=f[i-v]),a=c[2*i],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(u[2*i+1]+s)));if(0!==g){do{for(o=y-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[y]--,g-=2}while(0<g);for(o=y;0!==o;o--)for(i=t.bl_count[o];0!==i;)l<(r=t.heap[--n])||(c[2*r+1]!==o&&(t.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}(t,e),F(o,l,t.bl_count)}function J(t,e,n){var i,r,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<c&&r===s||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*m]++):a<=10?t.bl_tree[2*b]++:t.bl_tree[2*w]++,o=r,l=(a=0)===s?(c=138,3):r===s?(c=6,3):(c=7,4))}function K(t,e,n){var i,r,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<c&&r===s)){if(a<l)for(;q(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==o&&(q(t,r,t.bl_tree),a--),q(t,m,t.bl_tree),V(t,a-3,2)):a<=10?(q(t,b,t.bl_tree),V(t,a-3,3)):(q(t,w,t.bl_tree),V(t,a-11,7));o=r,l=(a=0)===s?(c=138,3):r===s?(c=6,3):(c=7,4)}}s(R);var Z=!1;function Y(t,e,n,r){V(t,(a<<1)+(r?1:0),3),function(t,e,n,r){U(t),r&&(N(t,n),N(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}n._tr_init=function(t){Z||(function(){var t,e,n,i,r,o=new Array(d+1);for(i=n=0;i<c-1;i++)for(T[i]=n,t=0;t<1<<k[i];t++)P[n++]=i;for(P[n-1]=i,i=r=0;i<16;i++)for(R[i]=r,t=0;t<1<<A[i];t++)E[r++]=i;for(r>>=7;i<h;i++)for(R[i]=r<<7,t=0;t<1<<A[i]-7;t++)E[256+r++]=i;for(e=0;e<=d;e++)o[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,o[8]++;for(;t<=255;)S[2*t+1]=9,t++,o[9]++;for(;t<=279;)S[2*t+1]=7,t++,o[7]++;for(;t<=287;)S[2*t+1]=8,t++,o[8]++;for(F(S,u+1,o),t=0;t<h;t++)O[2*t+1]=5,O[2*t]=L(t,5);_=new I(S,k,l+1,u,d),j=new I(O,A,0,h,d),B=new I(new Array(0),x,0,f,y)}(),Z=!0),t.l_desc=new D(t.dyn_ltree,_),t.d_desc=new D(t.dyn_dtree,j),t.bl_desc=new D(t.bl_tree,B),t.bi_buf=0,t.bi_valid=0,z(t)},n._tr_stored_block=Y,n._tr_flush_block=function(t,e,n,i){var s,a,c=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<l;e++)if(0!==t.dyn_ltree[2*e])return o;return r}(t)),G(t,t.l_desc),G(t,t.d_desc),c=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=f-1;3<=e&&0===t.bl_tree[2*C[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),s=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==e?Y(t,e,n,i):4===t.strategy||a===s?(V(t,2+(i?1:0),3),W(t,S,O)):(V(t,4+(i?1:0),3),function(t,e,n,i){var r;for(V(t,e-257,5),V(t,n-1,5),V(t,i-4,4),r=0;r<i;r++)V(t,t.bl_tree[2*C[r]+1],3);K(t,t.dyn_ltree,e-1),K(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),W(t,t.dyn_ltree,t.dyn_dtree)),z(t),i&&U(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(P[n]+l+1)]++,t.dyn_dtree[2*M(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){V(t,2,3),q(t,g,S),function(t){16===t.bi_valid?(N(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,i){(function(t){!function(t,e){"use strict";if(!t.setImmediate){var n,i,r,o,s=1,a={},c=!1,l=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,n="[object process]"==={}.toString.call(t.process)?function(t){process.nextTick((function(){f(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(o="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",p,!1):t.attachEvent("onmessage",p),function(e){t.postMessage(o+e,"*")}):t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){r.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,function(t){var e=l.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):function(t){setTimeout(f,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return a[s]=r,n(s),s++},u.clearImmediate=h}function h(t){delete a[t]}function f(t){if(c)setTimeout(f,0,t);else{var n=a[t];if(n){c=!0;try{!function(t){var n=t.callback,i=t.args;switch(i.length){case 0:n();break;case 1:n(i[0]);break;case 2:n(i[0],i[1]);break;case 3:n(i[0],i[1],i[2]);break;default:n.apply(e,i)}}(n)}finally{h(t),c=!1}}}}function p(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},277:function(t,e,n){var i,r,o;o=function(){var t,e,n=document,i=n.getElementsByTagName("head")[0],r={},o={},s={},a={};function c(t,e){for(var n=0,i=t.length;n<i;++n)if(!e(t[n]))return!1;return 1}function l(t,e){c(t,(function(t){return e(t),1}))}function u(e,n,i){e=e.push?e:[e];var f=n&&n.call,p=f?n:i,d=f?e.join(""):n,v=e.length;function y(t){return t.call?t():r[t]}function g(){if(!--v)for(var t in r[d]=1,p&&p(),s)c(t.split("|"),y)&&!l(s[t],y)&&(s[t]=[])}return setTimeout((function(){l(e,(function e(n,i){return null===n?g():(i||/^https?:\/\//.test(n)||!t||(n=-1===n.indexOf(".js")?t+n+".js":t+n),a[n]?(d&&(o[d]=1),2==a[n]?g():setTimeout((function(){e(n,!0)}),0)):(a[n]=1,d&&(o[d]=1),void h(n,g)))}))}),0),u}function h(t,r){var o,s=n.createElement("script");s.onload=s.onerror=s.onreadystatechange=function(){s.readyState&&!/^c|loade/.test(s.readyState)||o||(s.onload=s.onreadystatechange=null,o=1,a[t]=2,r())},s.async=1,s.src=e?t+(-1===t.indexOf("?")?"?":"&")+e:t,i.insertBefore(s,i.lastChild)}return u.get=h,u.order=function(t,e,n){!function i(r){r=t.shift(),t.length?u(r,i):u(r,e,n)}()},u.path=function(e){t=e},u.urlArgs=function(t){e=t},u.ready=function(t,e,n){t=t.push?t:[t];var i,o=[];return!l(t,(function(t){r[t]||o.push(t)}))&&c(t,(function(t){return r[t]}))?e():(i=t.join("|"),s[i]=s[i]||[],s[i].push(e),n&&n(o)),u},u.done=function(t){u([null],t)},u},t.exports?t.exports=o():void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r)},933:function(t,e,n){var i;!function(){function r(t,e,n){return t.call.apply(t.bind,arguments)}function o(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function s(t,e,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:o).apply(null,arguments)}var a=Date.now||function(){return+new Date};function c(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var l=!!window.FontFace;function u(t,e,n,i){if(e=t.c.createElement(e),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i&&e.appendChild(t.c.createTextNode(i)),e}function h(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var o=!1,s=0;s<i.length;s+=1)if(e[r]===i[s]){o=!0;break}o||i.push(e[r])}for(e=[],r=0;r<i.length;r+=1){for(o=!1,s=0;s<n.length;s+=1)if(i[r]===n[s]){o=!0;break}o||e.push(i[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var n=t.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==e)return!0;return!1}function v(t,e,n){function i(){a&&r&&o&&(a(s),a=null)}e=u(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,o=!0,s=null,a=n||null;l?(e.onload=function(){r=!0,i()},e.onerror=function(){r=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout((function(){r=!0,i()}),0),h(t,"head",e)}function y(t,e,n,i){var r=t.c.getElementsByTagName("head")[0];if(r){var o=u(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout((function(){s||(s=!0,n&&n(Error("Script load timeout")))}),i||5e3),o}return null}function g(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,w(t)}}function b(t,e){t.c=e,w(t)}function w(t){0==t.a&&t.c&&(t.c(),t.c=null)}function k(t){this.a=t||"-"}function A(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function x(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function C(t){return t.a+t.f}function S(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function O(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function E(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new k("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function P(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),p(t.f,n,i)}T(t,"inactive")}function T(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,C(n)):t.h[e]())}function _(){this.c={}}function j(t,e){this.c=t,this.f=e,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function B(t){h(t.c,"body",t.a)}function R(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+x(t.c)+";font-style:"+S(t)+";font-weight:"+t.f+"00;"}function I(t,e,n,i,r,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function D(t,e,n,i,r,o,s){this.v=t,this.B=e,this.c=n,this.a=i,this.s=s||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new j(this.c,this.s),this.h=new j(this.c,this.s),this.j=new j(this.c,this.s),this.m=new j(this.c,this.s),t=R(t=new A(this.a.c+",serif",C(this.a))),this.g.a.style.cssText=t,t=R(t=new A(this.a.c+",sans-serif",C(this.a))),this.h.a.style.cssText=t,t=R(t=new A("serif",C(this.a))),this.j.a.style.cssText=t,t=R(t=new A("sans-serif",C(this.a))),this.m.a.style.cssText=t,B(this.g),B(this.h),B(this.j),B(this.m)}k.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},I.prototype.start=function(){var t=this.c.o.document,e=this,n=a(),i=new Promise((function(i,r){!function o(){a()-n>=e.f?r():t.fonts.load(function(t){return S(t)+" "+t.f+"00 300px "+x(t.c)}(e.a),e.h).then((function(t){1<=t.length?i():setTimeout(o,25)}),(function(){r()}))}()})),r=null,o=new Promise((function(t,n){r=setTimeout(n,e.f)}));Promise.race([o,i]).then((function(){r&&(clearTimeout(r),r=null),e.g(e.a)}),(function(){e.j(e.a)}))};var M={D:"serif",C:"sans-serif"},N=null;function V(){if(null===N){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return N}function q(t,e,n){for(var i in M)if(M.hasOwnProperty(i)&&e===t.f[M[i]]&&n===t.f[M[i]])return!0;return!1}function L(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=V()&&q(t,n,i)),e?a()-t.A>=t.w?V()&&q(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?F(t,t.v):F(t,t.B):function(t){setTimeout(s((function(){L(this)}),t),50)}(t):F(t,t.v)}function F(t,e){setTimeout(s((function(){f(this.g.a),f(this.h.a),f(this.j.a),f(this.m.a),e(this.a)}),t),0)}function z(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}D.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),L(this)};var U=null;function $(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),T(t,"active")):P(t.a))}function H(t){this.j=t,this.a=new _,this.h=0,this.f=this.g=!0}function W(t,e,n,i,r){var o=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=r||null,a=i||{};if(0===n.length&&o)P(e.a);else{e.f+=n.length,o&&(e.j=o);var c,l=[];for(c=0;c<n.length;c++){var u=n[c],h=a[u.c],f=e.a,d=u;if(f.g&&p(f.f,[f.a.c("wf",d.c,C(d).toString(),"loading")]),T(f,"fontloading",d),f=null,null===U)if(window.FontFace){d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);U=d?42<parseInt(d[1],10):!v}else U=!1;f=U?new I(s(e.g,e),s(e.h,e),e.c,u,e.s,h):new D(s(e.g,e),s(e.h,e),e.c,u,e.s,t,h),l.push(f)}for(c=0;c<l.length;c++)l[c].start()}}),0)}function G(t,e){this.c=t,this.a=e}function J(t,e){this.c=t,this.a=e}function K(t,e){this.c=t||Z,this.a=[],this.f=[],this.g=e||""}z.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,C(t).toString(),"active")],[e.a.c("wf",t.c,C(t).toString(),"loading"),e.a.c("wf",t.c,C(t).toString(),"inactive")]),T(e,"fontactive",t),this.m=!0,$(this)},z.prototype.h=function(t){var e=this.a;if(e.g){var n=d(e.f,e.a.c("wf",t.c,C(t).toString(),"active")),i=[],r=[e.a.c("wf",t.c,C(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,C(t).toString(),"inactive")),p(e.f,i,r)}T(e,"fontinactive",t),$(this)},H.prototype.load=function(t){this.c=new c(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var i=[],r=n.timeout;!function(t){t.g&&p(t.f,[t.a.c("wf","loading")]),T(t,"loading")}(e);i=function(t,e,n){var i,r=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&r.push(o(e[i],n))}return r}(t.a,n,t.c);var o=new z(t.c,e,r);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load((function(e,n,i){W(t,o,e,n,i)}))}(this,new E(this.c,t),t)},G.prototype.load=function(t){function e(){if(o["__mti_fntLst"+i]){var n,r=o["__mti_fntLst"+i](),s=[];if(r)for(var a=0;a<r.length;a++){var c=r[a].fontfamily;null!=r[a].fontStyle&&null!=r[a].fontWeight?(n=r[a].fontStyle+r[a].fontWeight,s.push(new A(c,n))):s.push(new A(c))}t(s)}else setTimeout((function(){e()}),50)}var n=this,i=n.a.projectId,r=n.a.version;if(i){var o=n.c.o;y(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(r?"?v="+r:""),(function(r){r?t([]):(o["__MonotypeConfiguration__"+i]=function(){return n.a},e())})).id="__MonotypeAPIScript__"+i}else t([])},J.prototype.load=function(t){var e,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},s=new g;for(e=0,n=i.length;e<n;e++)v(this.c,i[e],m(s));var a=[];for(e=0,n=r.length;e<n;e++)if((i=r[e].split(":"))[1])for(var c=i[1].split(","),l=0;l<c.length;l+=1)a.push(new A(i[0],c[l]));else a.push(new A(i[0]));b(s,(function(){t(a,o)}))};var Z="https://fonts.googleapis.com/css";function Y(t){this.f=t,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"Ã§Ã¶Ã¼ÄÅ",cyrillic:"Ð¹ÑÐ",greek:"Î±Î²Î£",khmer:"ááá",Hanuman:"ááá"},X={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function nt(t,e){this.c=t,this.a=e}var it={Arimo:!0,Cousine:!0,Tinos:!0};function rt(t,e){this.c=t,this.a=e}function ot(t,e){this.c=t,this.f=e,this.a=[]}nt.prototype.load=function(t){var e=new g,n=this.c,i=new K(this.a.api,this.a.text),r=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i].split(":");3==r.length&&t.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),t.a.push(r.join(o))}}(i,r);var o=new Y(r);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,c=(a=a.split(",")).length,l=0;l<c;l++){var u;if((u=a[l]).match(/^[\w-]+$/))if(null==(h=et.exec(u.toLowerCase())))u="";else{if(u=null==(u=h[2])||""==u?"n":tt[u],null==(h=h[1])||""==h)h="4";else var h=X[h]||(isNaN(h)?"4":h.substr(0,1));u=[u,h].join("")}else u="";u&&s.push(u)}0<s.length&&(o=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=Q[i[0]])&&(t.c[r]=i))}for(t.c[r]||(i=Q[r])&&(t.c[r]=i),i=0;i<o.length;i+=1)t.a.push(new A(r,o[i]))}}(o),v(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),m(e)),b(e,(function(){t(o.a,o.c,it)}))},rt.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],r=0;r<e.length;r+=2)for(var o=e[r],s=e[r+1],a=0;a<s.length;a++)i.push(new A(o,s[a]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}}),2e3):t([])},ot.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var r=0,o=n.fonts.length;r<o;++r){var s=n.fonts[r];i.a.push(new A(s.name,O("font-weight:"+s.weight+";font-style:"+s.style)))}t(i.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var st=new H(window);st.a.c.custom=function(t,e){return new J(e,t)},st.a.c.fontdeck=function(t,e){return new ot(e,t)},st.a.c.monotype=function(t,e){return new G(e,t)},st.a.c.typekit=function(t,e){return new rt(e,t)},st.a.c.google=function(t,e){return new nt(e,t)};var at={load:s(st.load,st)};void 0===(i=function(){return at}.call(e,n,e,t))||(t.exports=i)}()}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){"use strict";var t={};n.r(t),n.d(t,{ClipboardItem:function(){return U},read:function(){return Y},readText:function(){return F},setDebugLog:function(){return d},suppressWarnings:function(){return y},write:function(){return Z},writeText:function(){return L}});var e=n(755),i=n.n(e),r=n(733),o=n.n(r),s=n(925),a=n.n(s),c=n(277),l=n.n(c);function u(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))}function h(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=function(t){};function p(t){f(t)}function d(t){f=t}var v=!0;function y(){v=!1}function g(){return v}(function(){(console.warn||console.log).apply(console,arguments)}).bind("[clipboard-polyfill]");var m,b,w,k,A="undefined"==typeof navigator?void 0:navigator,x=null==A?void 0:A.clipboard,C=null===(m=null==x?void 0:x.read)||void 0===m?void 0:m.bind(x),S=null===(b=null==x?void 0:x.readText)||void 0===b?void 0:b.bind(x),O=null===(w=null==x?void 0:x.write)||void 0===w?void 0:w.bind(x),E=null===(k=null==x?void 0:x.writeText)||void 0===k?void 0:k.bind(x),P="undefined"==typeof window?void 0:window,T=null==P?void 0:P.ClipboardItem,_=P;function j(){return"undefined"==typeof ClipboardEvent&&void 0!==_.clipboardData&&void 0!==_.clipboardData.setData}function B(){return u(this,void 0,void 0,(function(){var t;return h(this,(function(e){if(""===(t=_.clipboardData.getData("Text")))throw new Error("Empty clipboard or could not read plain text from clipboard");return[2,t]}))}))}var R=function(){this.success=!1};function I(t,e,n){for(var i in p("listener called"),t.success=!0,e){var r=e[i],o=n.clipboardData;o.setData(i,r),"text/plain"===i&&o.getData(i)!==r&&(p("setting text/plain failed"),t.success=!1)}n.preventDefault()}function D(t){var e=new R,n=I.bind(this,e,t);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return e.success}function M(t,e){N(t);var n=D(e);return V(),n}function N(t){var e=document.getSelection();if(e){var n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}function V(){var t=document.getSelection();t&&t.removeAllRanges()}function q(t){return u(this,void 0,void 0,(function(){var e;return h(this,(function(n){if(e="text/plain"in t,j()){if(!e)throw new Error("No `text/plain` value was specified.");if(i=t["text/plain"],_.clipboardData.setData("Text",i))return[2,!0];throw new Error("Copying failed, possibly because the user rejected it.")}var i;return D(t)?(p("regular execCopy worked"),[2,!0]):navigator.userAgent.indexOf("Edge")>-1?(p('UA "Edge" => assuming success'),[2,!0]):M(document.body,t)?(p("copyUsingTempSelection worked"),[2,!0]):function(t){var e=document.createElement("div");e.setAttribute("style","-webkit-user-select: text !important"),e.textContent="temporary element",document.body.appendChild(e);var n=M(e,t);return document.body.removeChild(e),n}(t)?(p("copyUsingTempElem worked"),[2,!0]):function(t){p("copyTextUsingDOM");var e=document.createElement("div");e.setAttribute("style","-webkit-user-select: text !important");var n=e;e.attachShadow&&(p("Using shadow DOM."),n=e.attachShadow({mode:"open"}));var i=document.createElement("span");i.innerText=t,n.appendChild(i),document.body.appendChild(e),N(i);var r=document.execCommand("copy");return V(),document.body.removeChild(e),r}(t["text/plain"])?(p("copyTextUsingDOM worked"),[2,!0]):[2,!1]}))}))}function L(t){return u(this,void 0,void 0,(function(){return h(this,(function(e){if(E)return p("Using `navigator.clipboard.writeText()`."),[2,E(t)];if(!q(function(t){var e={};return e["text/plain"]=t,e}(t)))throw new Error("writeText() failed");return[2]}))}))}function F(){return u(this,void 0,void 0,(function(){return h(this,(function(t){if(S)return p("Using `navigator.clipboard.readText()`."),[2,S()];if(j())return p("Reading text using IE strategy."),[2,B()];throw new Error("Read is not supported in your browser.")}))}))}function z(t,e){for(var n=0,i=t;n<i.length;n++)if(-1!==i[n].types.indexOf(e))return!0;return!1}var U=function(){function t(t,e){var n;for(var i in void 0===e&&(e={}),this.types=Object.keys(t),this._items={},t){var r=t[i];this._items[i]="string"==typeof r?$(i,r):r}this.presentationStyle=null!==(n=null==e?void 0:e.presentationStyle)&&void 0!==n?n:"unspecified"}return t.prototype.getType=function(t){return u(this,void 0,void 0,(function(){return h(this,(function(e){return[2,this._items[t]]}))}))},t}();function $(t,e){return new Blob([e],{type:t})}function H(t){return u(this,void 0,void 0,(function(){return h(this,(function(e){return[2,new Promise((function(e,n){var i=new FileReader;i.addEventListener("load",(function(){var t=i.result;"string"==typeof t?e(t):n("could not convert blob to string")})),i.readAsText(t)}))]}))}))}function W(t){return u(this,void 0,void 0,(function(){var e,n,i,r,o,s,a;return h(this,(function(c){switch(c.label){case 0:e={},n=0,i=t.types,c.label=1;case 1:return n<i.length?(r=i[n],o=e,s=r,[4,t.getType(r)]):[3,4];case 2:o[s]=c.sent(),c.label=3;case 3:return n++,[3,1];case 4:return a={},t.presentationStyle&&(a.presentationStyle=t.presentationStyle),[2,new T(e,a)]}}))}))}function G(t){var e={};return e["text/plain"]=$(t,"text/plain"),new U(e)}function J(t,e){return u(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,t.getType(e)];case 1:return[4,H(n.sent())];case 2:return[2,n.sent()]}}))}))}function K(t){return u(this,void 0,void 0,(function(){var e,n,i,r,o,s;return h(this,(function(a){switch(a.label){case 0:e={},n=0,i=t.types,a.label=1;case 1:return n<i.length?(r=i[n],o=e,s=r,[4,J(t,r)]):[3,4];case 2:o[s]=a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}}))}))}function Z(t){return u(this,void 0,void 0,(function(){var e,n,i,r;return h(this,(function(o){switch(o.label){case 0:return O&&T?(p("Using `navigator.clipboard.write()`."),[4,Promise.all(t.map(W))]):[3,5];case 1:e=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,O(e)];case 3:return[2,o.sent()];case 4:if(n=o.sent(),!z(t,"text/plain")&&!z(t,"text/html"))throw n;return[3,5];case 5:return i=z(t,"text/plain"),g&&!i&&p("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call suppressWarnings() to suppress this warning."),r=q,[4,K(t[0])];case 6:if(!r.apply(void 0,[o.sent()]))throw new Error("write() failed");return[2]}}))}))}function Y(){return u(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return C?(p("Using `navigator.clipboard.read()`."),[2,C()]):(t=G,[4,F()]);case 1:return[2,[t.apply(void 0,[e.sent()])]]}}))}))}var Q=n(933),X=n.n(Q),tt={version:"2.1.11 (2022-08-04)",languages:["en","ar","ast","bs","ca","ca_ES@valencia","cs","da","de","el","es","eu","fr","gl","he","it","ja","nl","pl","pt","pt_BR","ro","ru","tr","vec","zh_TW"],messages:{ar:{Version:"Ø§ÙØ¥ØµØ¯Ø§Ø±",time:"Ø§ÙÙÙØª",actions:"Ø§ÙÙØ­Ø§ÙÙØ§Øª",score:"Ø§ÙÙØªÙØ¬Ø©","Next activity":"Ø§ÙÙØ´Ø§Ø· Ø§ÙØªØ§ÙÙ","Previous activity":"Ø§ÙÙØ´Ø§Ø· Ø§ÙØ³Ø§Ø¨Ù","Restart activity":"Ø§Ø³ØªØ¦ÙÙ Ø§ÙÙØ´Ø§Ø·",Information:"Ø§ÙÙØ¹ÙÙÙØ©","Current results":"ØªÙØ§Ø±ÙØ± Ø§ÙÙØ³ØªØ®Ø¯Ù","User:":"Ø§ÙÙØ³ØªØ®Ø¯Ù:","Projects:":"Ø§ÙÙØ´Ø§Ø±ÙØ¹:",Project:"Ø§ÙÙØ´Ø±ÙØ¹:",sequence:"Ø§ÙØªØ³ÙØ³Ù",activity:"Ø§ÙÙØ´Ø§Ø·",OK:"ÙÙØ§ÙÙ","Total:":"Ø§ÙÙØ¬ÙÙØ¹:"},ast:{Version:"VersiÃ³n",time:"tiempu",actions:"intentos",score:"marcador","Next activity":"Xera siguiente","Previous activity":"Xera anterior","Restart activity":"Reaniciar xera",Information:"InformaciÃ³n","Results are not currently being saved":"L'informe nun ta rexistrÃ¡u en nenguna base de datos","Current results":"Informes d'usuariu","Session started:":"Entamu de sesiÃ³n:","Reports system:":"Sistema d'informes:","User:":"Usuariu:","Projects:":"Proyeutos:","Sequences:":"Secuencies:","Activities done:":"Xeres feches:","Activities solved:":"Xeres correctes:","Global score:":"PuntuaciÃ³n global:","Total time in activities:":"Tiempu total en xeres:","Actions done:":"Aiciones feches:","No activities done!":"Â¡Nenguna informaciÃ³n sobre xeres!",Project:"Proyeutu:",sequence:"Secuencia",activity:"Xera",OK:"OK",YES:"SI",NO:"NON","Total:":"Total:"},bs:{Version:"Verzija",time:"vrijeme",actions:"pokuÅ¡aji",score:"rezultat","Next activity":"SljedeÄa aktivnost","Previous activity":"Prethodna aktivnost","Restart activity":"Ponovno pokreni aktivnost",Information:"Informacije","Current results":"IzvjeÅ¡Äa korisnika","Session started:":"Sesija zapoÄeta:","User:":"Korisnik:","Projects:":"Projekti:","Activities done:":"UraÄene aktivnosti:","Activities solved:":"Aktivnosti ok:","Global score:":"Ukupan rezultat:","Total time in activities:":"Ukupno vrijeme aktivnosti:","Actions done:":"UraÄene aktivnosti:",Project:"Projekt:",sequence:"Sekvenca",activity:"Aktivnost",OK:"Uredu",YES:"DA",NO:"NE","Total:":"Ukupno:"},ca:{Version:"VersiÃ³",time:"temps",actions:"accions",score:"encerts","Next activity":"Activitat segÃ¼ent","Previous activity":"Activitat anterior","Restart activity":"Reinicia l'activitat",Information:"InformaciÃ³","Results are not currently being saved":"Els resultats no s'estan desant","Current results":"Resultats actuals","Session started:":"Inici de sessiÃ³:","Reports system:":"Sistema d'informes:","User:":"Usuari/Ã ria:","Projects:":"Projectes:","Sequences:":"SeqÃ¼Ã¨ncies:","Activities done:":"Activitats fetes:","Activities solved:":"Activitats resoltes:","Global score:":"PuntuaciÃ³ global:","(out of all project activities)":"(sobre totes les activitats del projecte)","Total time in activities:":"Temps total en les activitats:","Actions done:":"Accions fetes:","No activities done!":"No heu fet cap activitat!",Project:"Projecte",sequence:"seqÃ¼Ã¨ncia",activity:"activitat",OK:"OK",YES:"SÃ",NO:"NO","Total:":"Totals:","Select group:":"Seleccioneu el grup:","Select user:":"Seleccioneu l'usuari:",Cancel:"CancelÂ·la",Close:"Tanca","Copy data to clipboard":"Copia les dades al porta-retalls","The data has been copied in HTML format. Please paste them into a spreadsheet or in a rich text editor":"Les dades s'han copiat en format HTML. Enganxeu-les a un full de cÃ lcul o a un editor de text enriquit.","The data has been copied to clipboard":"Les dades s'han copiat al porta-retalls","not connected":"no connectat","Please wait until the results of your activities are sent to the reports system":"Si us plau, espereu a que els resultats de les vostres activitats s'enviÃ¯n al servidor d'informes","Password:":"Contrasenya:","Incorrect password":"Contrasenya incorrecta","Invalid user":"Usuari/Ã ria incorrecte","Partial score:":"PuntuaciÃ³ parcial:","(out of played activities)":"(sobre les activitats fetes)","Activities played at least once:":"Activitats fetes almenys una vegada:",Reports:"Informes","Toggle full screen":"Commuta pantalla completa","JClic logo":"Logotip del JClic",message:"missatge","Activity panel":"Tauler d'activitats",cell:"celÂ·la",image:"imatge",source:"origen",target:"destÃ­","image fragment":"fragment d'imatge"},"ca_ES@valencia":{Version:"VersiÃ³",time:"temps",actions:"accions",score:"encerts","Next activity":"Activitat segÃ¼ent","Previous activity":"Activitat anterior","Restart activity":"Reinicia l'activitat",Information:"InformaciÃ³","Results are not currently being saved":"Els resultats no s'estan alÃ§ant","Current results":"Resultats actuals","Session started:":"Inici de sessiÃ³:","Reports system:":"Sistema d'informes:","User:":"Usuari/Ã ria:","Projects:":"Projectes:","Sequences:":"SeqÃ¼Ã¨ncies:","Activities done:":"Activitats fetes:","Activities solved:":"Activitats resoltes:","Global score:":"PuntuaciÃ³ global:","Total time in activities:":"Temps total en les activitats:","Actions done:":"Accions fetes:","No activities done!":"No heu fet cap activitat!",Project:"Projecte",sequence:"seqÃ¼Ã¨ncia",activity:"activitat",OK:"OK",YES:"SÃ",NO:"NO","Total:":"Totals:"},cs:{Version:"Verze",time:"Äas",actions:"pokusÅ¯",score:"skÃ³re","Next activity":"DalÅ¡Ã­ aktivita","Previous activity":"PÅedchozÃ­ aktivita","Restart activity":"Restartovat aktivitu",Information:"Informace","Results are not currently being saved":"ZprÃ¡va nenÃ­ zaregistrovÃ¡na v Å¾Ã¡dnÃ© DB","Current results":"UÅ¾ivatelskÃ¡ sestava","Session started:":"SezenÃ­ spuÅ¡tÄno:","Reports system:":"SystÃ©m zprÃ¡vy:","User:":"UÅ¾ivatel:","Projects:":"Projekty:","Sequences:":"Sekvence:","Activities done:":"DokonÄenÃ© aktivity:","Activities solved:":"Aktivity ok:","Global score:":"CelkovÃ© skÃ³re:","Total time in activities:":"CelkovÃ½ Äas aktivit:","Actions done:":"ProvedenÃ© akce:","No activities done!":"Nebyly nahlÃ¡Å¡eny Å¾Ã¡dnÃ© aktivity!",Project:"Projekt",sequence:"Sekvence",activity:"Aktivita",OK:"Ok",YES:"ANO",NO:"NE","Total:":"Celkem:"},da:{Version:"Version",time:"tid",actions:"forsÃ¸g",score:"score","Next activity":"NÃ¦ste aktivitet","Previous activity":"Forrige aktivitet","Restart activity":"Genstart aktivitet",Information:"Information","Current results":"Bruger rapport","User:":"Bruger:","Projects:":"Projekter:","Sequences:":"Sekvenser:","Activities done:":"Aktiviteter udfÃ¸rt:","Activities solved:":"Aktiviteter OK:","Global score:":"Global score:","No activities done!":"Ingen aktiviteter rapporteret!",Project:"Projekt",sequence:"Sequence",activity:"Aktivitet",OK:"Ok",YES:"JA",NO:"IKKE","Total:":"Total:"},de:{Version:"Version",time:"Zeit",actions:"Versuche",score:"Ergebnis","Next activity":"NÃ¤chste Ãbung","Previous activity":"Vorherige Ãbung","Restart activity":"Ãbung neu starten",Information:"Information","Results are not currently being saved":"Bericht in keiner Datenbank eingetragen","Current results":"Benutzerberichte","Session started:":"Sitzung gestartet:","Reports system:":"Report system:","User:":"User:","Projects:":"Projekte:","Sequences:":"Sequenzen:","Activities done:":"Beendete Ãbungen:","Activities solved:":"Korrekte Ãbungen:","Global score:":"Gesamtpunktezahl:","Total time in activities:":"Ãbungs-Gesamtzeit:","Actions done:":"DurchgefÃ¼hrte Aktionen:","No activities done!":"Keine Ãbungsberichte vorhanden!",Project:"Projekt",sequence:"Sequenz",activity:"Ãbung",OK:"OK",YES:"JA",NO:"NEIN","Total:":"Gesamt:"},el:{Version:"ÎÎºÎ´Î¿ÏÎ·",time:"ÏÏÏÎ½Î¿Ï",actions:"ÏÏÎ¿ÏÏÎ¬Î¸ÎµÎ¹ÎµÏ",score:"Î²Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î±","Next activity":"ÎÏÏÎ¼ÎµÎ½Î· Î´ÏÎ±ÏÏÎ·ÏÎ¹ÏÏÎ·ÏÎ±","Previous activity":"Î ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î· Î´ÏÎ±ÏÏÎ·ÏÎ¹ÏÏÎ·ÏÎ±","Restart activity":"ÎÏÎ±Î½ÎµÎºÎºÎ¯Î½Î·ÏÎ· Î´ÏÎ±ÏÏÎ·ÏÎ¹ÏÏÎ·ÏÎ±Ï",Information:"Î Î»Î·ÏÎ¿ÏÎ¿ÏÎ¯ÎµÏ","Results are not currently being saved":"Î Î±Î½Î±ÏÎ¿ÏÎ¬ Î´ÎµÎ½ ÎµÎ³Î³ÏÎ¬ÏÎ·ÎºÎµ ÏÏÎ¹Ï Î²Î¬ÏÎµÎ¹Ï Î´ÎµÎ´Î¿Î¼Î­Î½ÏÎ½","Current results":"ÎÎ½Î±ÏÎ¿ÏÎ­Ï ÏÏÎ®ÏÏÎ·","Session started:":"ÎÎ½Î±ÏÎ¾Î· ÏÏÎ½ÎµÎ´ÏÎ¯Î±Ï:","Reports system:":"Î£ÏÏÏÎ·Î¼Î± Î±Î½Î±ÏÎ¿ÏÏÎ½:","User:":"Î§ÏÎ®ÏÏÎ·Ï:","Projects:":"ÎÏÎ³Î±:","Sequences:":"ÎÎ»Î»Î·Î»Î¿ÏÏÎ¯ÎµÏ:","Activities done:":"ÎÎ»Î¿ÎºÎ»Î·ÏÏÎ¼Î­Î½ÎµÏ Î´ÏÎ±ÏÏÎ·ÏÎ¹ÏÏÎ·ÏÎµÏ:","Activities solved:":"ÎÏÎ±ÏÏÎ·ÏÎ¹ÏÏÎ·ÏÎµÏ, ÎµÎ½ÏÎ¬Î¾ÎµÎ¹:","Global score:":"Î£ÏÎ½Î¿Î»Î¹ÎºÎ® Î²Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î±:","Total time in activities:":"Î£ÏÎ½Î¿Î»Î¹ÎºÏÏ ÏÏÏÎ½Î¿Ï Î´ÏÎ±ÏÏÎ·ÏÎ¹Î¿ÏÎ®ÏÏÎ½:","Actions done:":"ÎÎ¹ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎ±Î½:","No activities done!":"ÎÎ¹Î± ÎºÎ±Î¼Î¼Î¯Î± Î´ÏÎ±ÏÏÎ·ÏÎ¹ÏÏÎ·ÏÎ± Î´ÎµÎ½ Î­ÏÎµÎ¹ ÏÏÎ¿Î²Î»Î·Î¸ÎµÎ¯ Î±Î½Î±ÏÎ¿ÏÎ¬!",Project:"ÎÏÎ³Î¿",sequence:"ÎÎ»Î»Î·Î»Î¿ÏÏÎ¯Î±",activity:"ÎÏÎ±ÏÏÎ·ÏÎ¹ÏÏÎ·ÏÎ±",OK:"ÎÎ½ÏÎ¬Î¾ÎµÎ¹",YES:"ÎÎ±Î¯",NO:"ÏÏÎ¹","Total:":"Î£ÏÎ½Î¿Î»Î¿:"},es:{Version:"VersiÃ³n",time:"tiempo",actions:"acciones",score:"aciertos","Next activity":"Actividad siguiente","Previous activity":"Actividad anterior","Restart activity":"Reiniciar actividad",Information:"InformaciÃ³n","Results are not currently being saved":"Los resultados no se estÃ¡n guardando","Current results":"Resultados actuales","Session started:":"Inicio de sesiÃ³n:","Reports system:":"Sistema de informes:","User:":"Usuario/aria:","Projects:":"Proyectos:","Sequences:":"Secuencias:","Activities done:":"Actividades realizadas:","Activities solved:":"Actividades resueltas:","Global score:":"PuntuaciÃ³n global:","(out of all project activities)":"(sobre todas las actividades del proyecto)","Total time in activities:":"Tiempo total en las actividades:","Actions done:":"Acciones realizadas:","No activities done!":"Â¡No se ha realizado ninguna actividad!",Project:"Proyecto",sequence:"secuencia",activity:"actividad",OK:"OK",YES:"SI",NO:"NO","Total:":"Totales:","Select group:":"Seleccionar grupo:","Select user:":"Seleccionar usuario:",Cancel:"Cancelar",Close:"Cerrar","Copy data to clipboard":"Copiar datos al portapapeles","The data has been copied in HTML format. Please paste them into a spreadsheet or in a rich text editor":"Los datos se han copiado en formato HTML. Puedes pegarlos en una hoja de cÃ¡lculo o en un editor de texto rico.","The data has been copied to clipboard":"Los datos se han copiado al portapapeles","not connected":"no conectado","Please wait until the results of your activities are sent to the reports system":"Por favor, espera mientras los resultados de las actividades se envian al servidor de informes","Password:":"ContraseÃ±a:","Incorrect password":"ContraseÃ±a incorrecta","Invalid user":"Usuario incorrecto","Partial score:":"PuntuaciÃ³n parcial:","(out of played activities)":"(sobre las actividades realizadas)","Activities played at least once:":"Actividades realizadas al menos una vez:",Reports:"Informes","Toggle full screen":"Conmutar pantalla completa","JClic logo":"Logotipo de JClic",message:"mensaje","Activity panel":"Panel de actividad",cell:"celda",image:"imagen",source:"origen",target:"destino","image fragment":"fragmento de imagen"},eu:{Version:"Bertsioa",time:"denbora",actions:"saiakerak",score:"puntuazioa","Next activity":"Hurrengo jarduera","Previous activity":"Aurreko jarduera","Restart activity":"Jarduera berriro hasi",Information:"Informazioa","Results are not currently being saved":"Txostena ez dago ezein datu-basetan","Current results":"Erabiltzailearen txostenak","Session started:":"Saio-hasiera:","Reports system:":"Txosten-sistema:","User:":"Erabiltzailea:","Projects:":"Proiektuak:","Sequences:":"Sekuentziak:","Activities done:":"Burututako ekinzak:","Activities solved:":"Jarduera zuzenak:","Global score:":"Jarduera zuzenak:","Total time in activities:":"Jardueretan emandako denbora guztira:","Actions done:":"Burututako ekintzak:","No activities done!":"Ez da jardueren txostenik!",Project:"Proiektua",sequence:"Sekuentzia",activity:"Jarduera",OK:"Ados",YES:"BAI",NO:"EZ","Total:":"Guztira:"},fr:{Version:"Version",time:"temps",actions:"essais",score:"rÃ©sultat","Next activity":"ActivitÃ© suivante","Previous activity":"ActivitÃ© prÃ©cÃ©dente","Restart activity":"Recommencer l'activitÃ©",Information:"Information","Results are not currently being saved":"Le rapport n'est enregistrÃ© dans aucune base de donnÃ©es","Current results":"Rapports utilisateur","Session started:":"Session dÃ©marrÃ©e:","Reports system:":"Report systÃ¨me:","User:":"Utilisateur:","Projects:":"Projets:","Sequences:":"SÃ©quences:","Activities done:":"ActivitÃ©s faites:","Activities solved:":"ActivitÃ©s ok:","Global score:":"Score global:","(out of all project activities)":"(Hors de toutes les activitÃ©s du projet)","Total time in activities:":"Temps total sur les activitÃ©s:","Actions done:":"Actions faites:","No activities done!":"Pas d'activitÃ©s rapportÃ©es!",Project:"Projet",sequence:"sÃ©quence",activity:"activitÃ©",OK:"Ok",YES:"OUI",NO:"NON","Total:":"Total:","Select group:":"SÃ©lectionner un groupe:","Select user:":"SÃ©lectionner l'utilisateur:",Cancel:"Annuler",Close:"Fermer","Copy data to clipboard":"Copier les donnÃ©es dans le presse-papier","The data has been copied in HTML format. Please paste them into a spreadsheet or in a rich text editor":"Les donnÃ©es ont Ã©tÃ© copiÃ©es au format HTML. Veuillez les coller dans une feuille de calcul ou dans un Ã©diteur de texte","The data has been copied to clipboard":"Les donnÃ©es sont copier dans le presse-papier","not connected":"Non connectÃ© ","Please wait until the results of your activities are sent to the reports system":"Veuillez patienter durant l'envoi de votre activitÃ© au rapport systÃ¨me","Password:":"Mot de passe: ","Incorrect password":"Mot de passe incorrect","Invalid user":"Utilisateur invalide","Partial score:":"Score partiel:","(out of played activities)":"(Hors activitÃ©s jouÃ©es)","Activities played at least once:":"Les activitÃ©s jouÃ© au moins une fois:",Reports:"Rapport","Toggle full screen":"Basculer en plein Ã©cran","JClic logo":"JClic logo",message:"message","Activity panel":"Groupe d'activitÃ©s",cell:"cellule",image:"image",source:"source",target:"cible","image fragment":"fragment d'image"},gl:{Version:"VersiÃ³n",time:"tempo",actions:"intentos",score:"acertos","Next activity":"Seguinte actividade","Previous activity":"Anterior actividade","Restart activity":"Reiniciar a actividade",Information:"InformaciÃ³n","Results are not currently being saved":"O informe non estÃ¡ rexistrado en ningunha base de datos","Current results":"Informes de usuario","Session started:":"Inicio de sesiÃ³n:","Reports system:":"Sistema de informes:","User:":"Usuario:","Projects:":"Proxectos:","Sequences:":"Secuencias:","Activities done:":"Actividades realizadas:","Activities solved:":"Actividades correctas:","Global score:":"PuntuaciÃ³n global:","Total time in activities:":"Tempo total nas actividades:","Actions done:":"AcciÃ³ns efectuadas:","No activities done!":"Non hai informada ningunha actividade!",Project:"Proxecto",sequence:"secuencia",activity:"actividade",OK:"Correcta",YES:"SI",NO:"NON","Total:":"Total:"},he:{Version:"×××¨×¡×",time:"×××",actions:"× ×¡××× ××ª",score:"× ××§××","Next activity":"××¤×¢××××ª ××××","Previous activity":"××¤×¢××××ª ××§××××ª","Restart activity":"××ª×× ×¤×¢××××ª ××××©",Information:"××××¢","Results are not currently being saved":"×××××× ××× × ×¨×©×× ×××¡× × ×ª×× ×× ×××©××","Current results":"×××××ª ××©×ª××©","Session started:":"××¤×¢×× ××××:","Reports system:":"××¢×¨××ª ×××××ª:","User:":"××©×ª××©:","Projects:":"×¤×¨××××§×××:","Sequences:":"×¨×¦×¤××:","Activities done:":"×¤×¢××××××ª ×©×××©×××:","Activities solved:":"×¤×¢××××××ª ××××©×¨××ª:","Global score:":"× ××§×× ××××:","Total time in activities:":"××©× ××¤×¢××××××ª ×××¦×××¨:","Actions done:":"×¤×¢××××ª ×©×××¦×¢×:","No activities done!":"×× ××××× ×¤×¢××××××ª!",Project:"×¤×¨××××§×",sequence:"×¨×¦×£",activity:"×¤×¢××××ª",OK:"×××©××¨",YES:"××",NO:"××","Total:":"×¡× ×××:"},it:{Version:"Versione",time:"tempo",actions:"tentativi",score:"punteggio","Next activity":"AttivitÃ  successiva","Previous activity":"AttivitÃ  precedente","Restart activity":"Riavvia l'attivitÃ ",Information:"Informazioni","Results are not currently being saved":"Rapporto non registrato in alcun database","Current results":"Rapporti utente","Session started:":"Sessione avviata:","Reports system:":"Sistema dei rapporti:","User:":"Utente:","Projects:":"Progetti:","Sequences:":"Sequenze:","Activities done:":"AttivitÃ  eseguite:","Activities solved:":"AttivitÃ  ok:","Global score:":"Punteggio globale:","Total time in activities:":"Tempo totale nelle attivitÃ :","Actions done:":"Azioni compiute:","No activities done!":"Nessuna attivitÃ  a rapporto!",Project:"Progetto",sequence:"sequenza",activity:"attivitÃ ",OK:"Ok",YES:"SI",NO:"NO","Total:":"Totale:"},ja:{Version:"ãã¼ã¸ã§ã³",time:"æé",actions:"ã¢ã¯ã·ã§ã³",score:"ã¹ã³ã¢","Next activity":"æ¬¡ã®ã¢ã¯ãã£ããã£","Previous activity":"åã®ã¢ã¯ãã£ããã£","Restart activity":"ã¢ã¯ãã£ããã£ãåèµ·å",Information:"æå ±","Results are not currently being saved":"çµæã¯ãç¾å¨ä¿å­ããã¦ãã¾ãã","Current results":"ç¾å¨ã®çµæ","Session started:":"ã»ãã·ã§ã³ãéå§ãã¾ãã:","Reports system:":"ã¬ãã¼ã ã·ã¹ãã :","User:":"ã¦ã¼ã¶ã¼:","Projects:":"ãã­ã¸ã§ã¯ã:","Sequences:":"ã·ã¼ã±ã³ã¹:","Activities done:":"å®äºããã¢ã¯ãã£ããã£:","Activities solved:":"è§£æ±ºããã¢ã¯ãã£ããã£:","Global score:":"ã°ã­ã¼ãã« ã¹ã³ã¢:","(out of all project activities)":"(ãã¹ã¦ã®ãã­ã¸ã§ã¯ã ã¢ã¯ãã£ããã£ã®çµæ)","Total time in activities:":"ã¢ã¯ãã£ããã£æéã®åè¨:","Actions done:":"å®äºããã¢ã¯ã·ã§ã³:","No activities done!":"ã¢ã¯ãã£ããã£ã¯è¡ããã¦ãã¾ãã!",Project:"ãã­ã¸ã§ã¯ã",sequence:"ã·ã¼ã±ã³ã¹",activity:"ã¢ã¯ãã£ããã£",OK:"OK",YES:"ã¯ã",NO:"ããã","Total:":"åè¨:","Select group:":"ã°ã«ã¼ããé¸æ:","Select user:":"ã¦ã¼ã¶ã¼ãé¸æ:",Cancel:"ã­ã£ã³ã»ã«",Close:"éãã","Copy data to clipboard":"ãã¼ã¿ãã¯ãªãããã¼ãã«ã³ãã¼","The data has been copied in HTML format. Please paste them into a spreadsheet or in a rich text editor":"ãã¼ã¿ã¯ HTML å½¢å¼ã§ã³ãã¼ããã¾ãããªãã ãã­ã¹ã ã¨ãã£ã¿ã¼ãã¹ãã¬ããã·ã¼ãã«è²¼ãä»ãã¦ãã ãã","The data has been copied to clipboard":"ã¯ãªãããã¼ãã«ãã¼ã¿ãã³ãã¼ããã¾ãã","not connected":"æ¥ç¶ããã¦ãã¾ãã","Please wait until the results of your activities are sent to the reports system":"ã¢ã¯ãã£ããã£ã®çµæãã¬ãã¼ã ã·ã¹ãã ã«éä¿¡ãããã¾ã§ãå¾ã¡ãã ãã","Password:":"ãã¹ã¯ã¼ã:","Incorrect password":"ãã¹ã¯ã¼ããæ­£ããããã¾ãã","Invalid user":"ç¡å¹ãªã¦ã¼ã¶ã¼","Partial score:":"é¨åã¹ã³ã¢:","(out of played activities)":"(ãã¬ã¤ããã¢ã¯ãã£ããã£ã®çµæ)","Activities played at least once:":"å°ãªãã¨ãä¸åº¦ãã¬ã¤ããã¢ã¯ãã£ããã£:",Reports:"ã¬ãã¼ã","Toggle full screen":"å¨ç»é¢ã®åãæ¿ã","JClic logo":"JClic ã­ã´",message:"ã¡ãã»ã¼ã¸","Activity panel":"ã¢ã¯ãã£ããã£ ããã«",cell:"ã»ã«",image:"ç»å",source:"ã½ã¼ã¹",target:"ã¿ã¼ã²ãã","image fragment":"ç»åãã©ã°ã¡ã³ã"},nl:{Version:"Versie",time:"tijd",actions:"pogingen",score:"punten","Next activity":"Volgende activiteit","Previous activity":"Vorige activiteit","Restart activity":"Herstart activiteit",Information:"Informatie","Results are not currently being saved":"Rapport niet geregistreerd in een DB","Current results":"Gebruikers rapport","Session started:":"Reeks gestart:","Reports system:":"Rapporteer systeem:","User:":"Gebruiker:","Projects:":"Projecten:","Sequences:":"Reeksen:","Activities done:":"Activiteiten klaar:","Activities solved:":"Activiteiten ok:","Global score:":"Puntentotaal:","Total time in activities:":"Totale tijd activiteiten:","Actions done:":"Einde activiteiten:","No activities done!":"Geen activiteiten gerapporteerd!",Project:"Project",sequence:"Volgorde",activity:"Activiteit",OK:"Ok",YES:"JA",NO:"NEE","Total:":"Totaal:"},pl:{Version:"Wersja",time:"czas",actions:"dziaÅania",score:"wynik","Next activity":"NastÄpne dziaÅanie","Previous activity":"Poprzednia aktywnoÅÄ","Restart activity":"Restartuj aktywnoÅÄ",Information:"Informacje","Results are not currently being saved":"Wyniki nie sÄ obecnie zapisywane","Current results":"Aktualne wyniki","Session started:":"Sesja rozpoczÄÅa siÄ:","Reports system:":"System raportÃ³w:","User:":"UÅ¼ytkownik:","Projects:":"Projekty:","Sequences:":"Sekwencje:","Activities done:":"DziaÅania wykonane:","Activities solved:":"DziaÅania rozwiÄzane:","Global score:":"Globalny wynik:","(out of all project activities)":"(poza wszystkimi dziaÅaniami projektu)","Total time in activities:":"CaÅkowity czas aktywnoÅci:","Actions done:":"Wykonane czynnoÅci:","No activities done!":"Nie wykonano Å¼adnych czynnoÅci!",Project:"Projekt",sequence:"kolejnoÅÄ",activity:"aktywnoÅÄ",OK:"OK",YES:"Tak",NO:"Nie","Total:":"CaÅkowity:","Select group:":"Wybierz grupÄ:","Select user:":"Wybierz uÅ¼ytkownika:",Cancel:"Anuluj",Close:"Zamknij","Copy data to clipboard":"Skopiuj dane do schowka","The data has been copied in HTML format. Please paste them into a spreadsheet or in a rich text editor":"Dane zostaÅy skopiowane w formacie HTML. Wklej je do arkusza kalkulacyjnego lub edytora tekstu","The data has been copied to clipboard":"Dane zostaÅy skopiowane do schowka","not connected":"nie poÅÄczony","Please wait until the results of your activities are sent to the reports system":"Poczekaj, aÅ¼ wyniki Twoich dziaÅaÅ zostanÄ przesÅane do systemu raportÃ³w","Password:":"HasÅo:","Incorrect password":"Niepoprawne hasÅo","Invalid user":"NieprawidÅowy uÅ¼ytkownik","Partial score:":"Wynik czÄÅciowy:","(out of played activities)":"(z granych dziaÅaÅ)","Activities played at least once:":"DziaÅania grane co najmniej raz:",Reports:"Raporty","Toggle full screen":"PrzeÅÄcz tryb peÅnoekranowy","JClic logo":"Logo JClic",message:"komunikat","Activity panel":"Panel aktywnoÅci",cell:"komÃ³rka",image:"obraz",source:"ÅºrÃ³dÅo",target:"miejsce docelowe","image fragment":"fragment obrazu"},pt:{Version:"VersÃ£o",time:"tempo",actions:"tentativas",score:"acertos","Next activity":"Actividade seguinte","Previous activity":"Actividade anterior","Restart activity":"Reiniciar a actividade",Information:"InformaÃ§Ã£o","Results are not currently being saved":"O relatÃ³rio nÃ£o estÃ¡ registado em nenhuma base de dados","Current results":"RelatÃ³rios do utilizador","Session started:":"InÃ­cio da sessÃ£o:","Reports system:":"Sistema de relatÃ³rios:","User:":"Utilizador:","Projects:":"Projectos:","Sequences:":"SequÃªncias:","Activities done:":"Actividades realizadas:","Activities solved:":"Actividades correctas:","Global score:":"PontuaÃ§Ã£o global:","Total time in activities:":"Tempo total das actividades:","Actions done:":"AcÃ§Ãµes efectuadas:","No activities done!":"Nenhuma actividade registada!",Project:"Projecto",sequence:"sequÃªncia",activity:"Actividade",OK:"Correcta",YES:"sim",NO:"nÃ£o","Total:":"Total:"},pt_BR:{Version:"VersÃ£o",time:"tempo",actions:"tentativas",score:"acertos","Next activity":"atividade seguinte","Previous activity":"atividade anterior","Restart activity":"Reiniciar a atividade",Information:"InformaÃ§Ã£o","Results are not currently being saved":"O relatÃ³rio nÃ£o estÃ¡ registrando em nenhuma base de dados","Current results":"relatÃ³rios de usuÃ¡rio","Session started:":"InÃ­cio da sessÃ£o:","Reports system:":"Sistema de relatÃ³rios:","User:":"UsuÃ¡rio:","Projects:":"Projetos:","Sequences:":"SequÃªncias:","Activities done:":"Atividades realizadas:","Activities solved:":"Atividades corretas:","Global score:":"PontuaÃ§Ã£o geral:","Total time in activities:":"Tempo total das atividades:","Actions done:":"AÃ§Ãµes efetuadas:","No activities done!":"Nenhuma atividade registrada!",Project:"Projeto",sequence:"sequÃªncia",activity:"atividade",OK:"Correta",YES:"sim",NO:"nÃ£o","Total:":"Total:"},ro:{Version:"Versiune",time:"timp",actions:"acÈiuni",score:"rezultat","Next activity":"Activitatea urmÄtoare","Previous activity":"Activitatea anterioarÄ","Restart activity":"RestarteazÄ activitatea",Information:"InformaÈii","Results are not currently being saved":"Rezultatul nu pare a fi salvat","Current results":"Rezultatul curent","Session started:":"Sesiune pornitÄ la:","Reports system:":"Sistem raportare:","User:":"Utilizator","Projects:":"Proiecte:","Sequences:":"SecvenÈe:","Activities done:":"ActivitÄÈi realizate: ","Activities solved:":"ActivitÄÈi rezolvate: ","Global score:":"Rezultat global:","(out of all project activities)":"(Ã®n afara activitÄÈilor din proiect)","Total time in activities:":"Timp total Ã®n activitate:","Actions done:":"ActivitÄÈi realizate: ","No activities done!":"ActivitÄÈi nerealizate: ",Project:"Proiect",sequence:"secvenÈÄ",activity:"activitate",OK:"OK",YES:"DA",NO:"NU","Total:":"Total:","Select group:":"Alege grup:","Select user:":"Alege utilizator:",Cancel:"Anuleaza",Close:"Ãnchide","Copy data to clipboard":"CopiazÄ datele in clipboard","The data has been copied in HTML format. Please paste them into a spreadsheet or in a rich text editor":"Datele au fost copiate Ã®n format HTML. VÄ rog lipiÈi-le Ã®ntr-o foaie de calcul sau Ã®ntr-un editor compatibil rich text","The data has been copied to clipboard":"Datele au fost copiate Ã®n clipboard","not connected":"neconectat","Please wait until the results of your activities are sent to the reports system":"VÄ rugÄm sÄ aÈteptaÈi pÃ¢nÄ ce rezultatele activitÄÈilor sunt trimise cÄtre sistemul de raportare","Password:":"ParolÄ:","Incorrect password":"ParolÄ incorectÄ","Invalid user":"Utilizator incorect","Partial score:":"Rezultat parÈial:","(out of played activities)":"(Ã®n afara activitÄÈi jucate) ","Activities played at least once:":"ActivitÄÈi jucate cel puÈin o datÄ: ",Reports:"Rapoarte","Toggle full screen":"ComutÄ Ã®n ecran plin","JClic logo":"Jclic logo",message:"mesaj","Activity panel":"Panou activitÄÈi",cell:"celulÄ",image:"imagine",source:"sursÄ",target:"ÈintÄ","image fragment":"fragment de imagine "},ru:{Version:"ÐÐµÑÑÐ¸Ñ",time:"Ð²ÑÐµÐ¼Ñ",actions:"Ð¿Ð¾Ð¿ÑÑÐºÐ¸",score:"ÑÑÑÑ","Next activity":"Ð¡Ð»ÐµÐ´ÑÑÑÐµÐµ Ð´ÐµÐ¹ÑÑÐ²Ð¸Ðµ","Previous activity":"ÐÑÐµÐ´ÑÐ´ÑÑÐµÐµ Ð´ÐµÐ¹ÑÑÐ²Ð¸Ðµ","Restart activity":"ÐÐµÑÐµÐ·Ð°Ð¿ÑÑÐº Ð´ÐµÐ¹ÑÑÐ²Ð¸Ñ",Information:"ÐÐ½ÑÐ¾ÑÐ¼Ð°ÑÐ¸Ñ","Results are not currently being saved":"ÐÑÑÑÑ Ð½Ðµ Ð·Ð°ÑÐµÐ³Ð¸ÑÑÑÐ¸ÑÐ¾Ð²Ð°Ð½ Ð² ÐÐ","Current results":"ÐÑÑÑÑÑ Ð¿Ð¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÐµÐ»Ñ","Session started:":"Ð¡ÐµÑÑÐ¸Ñ Ð½Ð°ÑÐ°ÑÐ°:","Reports system:":"Ð¡Ð¸ÑÑÐµÐ¼Ð° Ð¾ÑÑÑÑÐ¾Ð²:","User:":"ÐÐ¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÐµÐ»Ñ:","Projects:":"ÐÑÐ¾ÐµÐºÑÑ:","Sequences:":"ÐÐ¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°ÑÐµÐ»ÑÐ½Ð¾ÑÑÐ¸:","Activities done:":"Ð¡Ð¾Ð²ÐµÑÑÐµÐ½Ð½ÑÐµ Ð´ÐµÐ¹ÑÑÐ²Ð¸Ñ:","Activities solved:":"ÐÐµÐ¹ÑÑÐ²Ð¸Ñ Ð² Ð¿Ð¾ÑÑÐ´ÐºÐµ:","Global score:":"ÐÐ±ÑÐ¸Ð¹ ÑÑÑÑ:","Total time in activities:":"ÐÐ±ÑÐµÐµ Ð²ÑÐµÐ¼Ñ Ð°ÐºÑÐ¸Ð²Ð½Ð¾ÑÑÐ¸:","Actions done:":"ÐÐ°Ð²ÐµÑÑÐµÐ½Ð¾ Ð´ÐµÐ¹ÑÑÐ²Ð¸Ð¹:","No activities done!":"ÐÐµÑ ÑÐ¾Ð¾Ð±ÑÐµÐ½Ð½ÑÑ Ð´ÐµÐ¹ÑÑÐ²Ð¸Ð¹!",Project:"ÐÑÐ¾ÐµÐºÑ",sequence:"ÐÐ¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°ÑÐµÐ»ÑÐ½Ð¾ÑÑÑ",activity:"ÐÐºÑÐ¸Ð²Ð½Ð¾ÑÑÑ",OK:"ÐÐ",YES:"Ð´Ð°",NO:"Ð½ÐµÑ","Total:":"ÐÑÐ¾Ð³Ð¾:"},tr:{Version:"SÃ¼rÃ¼m",time:"zaman",actions:"Denemeler",score:"sonuÃ§","Next activity":"Bir sonraki etkinlik","Previous activity":"Bir Ã¶nceki etkinlik","Restart activity":"EtkinliÄi tekrar baÅlat",Information:"Bilgi","Results are not currently being saved":"Rapor herhangi bir veritabanÄ±nda kaydedilmedi","Current results":"KullanÄ±cÄ± raporlarÄ±","Session started:":"Oturum baÅlatÄ±ldÄ±","Reports system:":"Sistem raporu:","User:":"KullanÄ±cÄ±:","Projects:":"Projeler:","Sequences:":"Etkinlik dizisi","Activities done:":"Etkinlikler baÅlatÄ±lÄ±yor:","Activities solved:":"Etkinlikler tamam:","Global score:":"Genel sonuÃ§:","Total time in activities:":"Etkinlikde geÃ§irilen toplam zaman:","Actions done:":"Eylem gerÃ§ekleÅtiriliyor:","No activities done!":"Etkinlik raporu yok!",Project:"Proje",sequence:"Etkinlik dizisi",activity:"Etkinlik",OK:"Tamam",YES:"Evet",NO:"hiÃ§bir","Total:":"Toplam:"},vec:{Version:"Version",time:"tenpo",actions:"tentadivi",score:"pontexio","Next activity":"PrÃ²sima ativitÃ ","Previous activity":"AtivitÃ  presedente","Restart activity":"InvÃ¬a ativitÃ  da novo",Information:"Informasion","Results are not currently being saved":"Report no registrÃ  inte nisun database","Current results":"Reports utenti","Session started:":"Sesion inviada:","Reports system:":"SistÃ¨ma de report","User:":"Utente:","Projects:":"ProxÃ¨ti:","Sequences:":"Secuense:","Activities done:":"AtivitÃ  fate:","Activities solved:":"AtivitÃ  ok:","Global score:":"Pontexio global","Total time in activities:":"Tenpo total so Æe ativitÃ ","Actions done:":"Asion exeguÃ¬e","No activities done!":"No xÃ© stÃ  reportÃ  ativitÃ !",Project:"ProxÃ¨to:",sequence:"secuensa",activity:"AtivitÃ ",OK:"Ok",YES:"SI",NO:"NO","Total:":"Total:"},zh_TW:{Version:"çæ¬",time:"æé",actions:"åè©¦æ¬¡æ¸",score:"åæ¸","Next activity":"ä¸ä¸åæ´»å","Previous activity":"ä¸ä¸åæ´»å","Restart activity":"éè¨­æ´»å",Information:"ç¸éè³è¨","Results are not currently being saved":"åå ±å¨DBä¸­ç¡è¨»å","Current results":"ä½¿ç¨èå ±å","Session started:":"å·¥ä½éå§ï¼","Reports system:":"å ±åç³»çµ±:","User:":"ä½¿ç¨è:","Projects:":"å°æ¡ï¼","Sequences:":"é åºï¼","Activities done:":"æ´»åçµæ:","Activities solved:":"æ´»åå®æ:","Global score:":"ç¸½æç¸¾:","Total time in activities:":"æ´»åç¸½æé:","Actions done:":"æ´»åå®æï¼","No activities done!":"æ²ææ´»åå ±å",Project:"å°æ¡ï¼",sequence:"é åº",activity:"æ´»å",OK:"ç¢ºå®",YES:"æ¯",NO:"å¦","Total:":"ç¸½è¨ï¼"}}};function et(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ot(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function nt(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ot(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function rt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||ot(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){if(t){if("string"==typeof t)return st(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(t,e):void 0}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var at={clipboard:t,$:i(),JSZip:o(),JSZipUtils:a(),ScriptJS:l(),WebFont:X()},ct=["none","error","warn","info","debug","trace","all"],lt=["     ","ERROR","WARN ","INFO ","DEBUG","TRACE","ALL  "],ut={level:2,prefix:"JClic",timestamp:!0,popupOnErrors:!1,chainTo:null,pipeTo:null},ht={};function ft(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t=Vt(t),e&&(void 0!==t.logLevel&&yt(t.logLevel),"function"==typeof t.chainLogTo&&(ut.chainTo=t.chainLogTo),"function"==typeof t.pipeLogTo&&(ut.pipeTo=t.pipeLogTo)),n){var i=t.lang,r=vt(tt.languages,"en",i);gt("debug","Language ".concat(i?'requested: "'.concat(i,'" '):"",' used: "').concat(r,'"')),ht="en"===r?{}:tt.messages[r]}return t}function pt(t){return ht[t]||t}function dt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=/^([a-zA-Z]{2,3})[_-]?([a-zA-Z]{2})?@?([a-zA-Z0-9]*)?$/.exec(t.trim())||[],n=rt(e,4),i=n[1],r=void 0===i?null:i,o=n[2],s=void 0===o?null:o,a=n[3],c=void 0===a?null:a;return r?"".concat(r.toLowerCase()).concat(s?"_".concat(s.toUpperCase()):"").concat(c?"@".concat(c.toLowerCase()):""):""}function vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=-1,r=[];if(n){var o=dt(n);o&&r.push(o)}window.navigator.languages&&(r=r.concat(window.navigator.languages)),window.navigator.language&&r.push(window.navigator.language),r.push(e);for(var s=0;s<r.length;s++){var a=-1;for(var c in t)if(0===r[s].indexOf(t[c])&&(a=c,r[s]===t[c])){i=c;break}if(i>=0||(i=a)>=0)break}return t[i>=0?i:0]}function yt(t){var e=ct.indexOf(t);e>=0&&(ut.level=e)}function gt(t,e){var n=ct.indexOf(t),i=Array.prototype.slice.call(arguments);if(n<0||n<=ut.level)if(ut.pipeTo)ut.pipeTo.apply(null,i);else{var r="".concat(ut.prefix||""," ").concat(lt[n]," ").concat(ut.timestamp?Ct():""," ").concat(e);console[1===n?"error":2===n?"warn":"log"].apply(console,[r].concat(i.slice(2))),ut.chainTo&&ut.chainTo.apply(null,i)}}function mt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"true"===t||"false"!==t&&e}function bt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return""===t||null==t?e:t}function wt(t,e){return Number(bt(t,e))}function kt(t){return"".concat(Math.round(100*t),"%")}function At(t){return"0".concat(t).slice(-2)}function xt(t){var e=new Date(t),n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds();return"".concat(n?n+"h ":"").concat(n||i?At(i)+"'":"").concat(At(r),'"')}function Ct(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(t.getFullYear(),"/").concat(At(t.getMonth()+1),"/").concat(At(t.getDate())," ").concat(At(t.getHours()),":").concat(At(t.getMinutes()),":").concat(At(t.getSeconds()))}function St(t){var e=null;if(t){var n=t.trim().split("/");if(3===n.length){var i=parseInt(n[0])||0,r=parseInt(n[1])||0,o=parseInt(n[2])||0;if(i>12&&r<=12){var s=i;i=r,r=s}o<1980&&(o+=o<90?2e3:1900),r&&i&&o&&(e=new Date(Date.parse("".concat(i,"/").concat(r,"/").concat(o))))}}return e||new Date}function Ot(t){if(t){if(!t.match(/^[a-z][a-z][a-z]?$/)){var e=t.match(/\(([a-z][a-z][a-z]?)\)/);t=e&&2===e.length?e[1]:"--"}}else t="--";return t}function Et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"true"===t?1:"false"===t?0:e}function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array(e).fill(t).join("")}function Tt(t){return null==t}function _t(t,e){return null==t&&null==e||t===e}function jt(t){var e="";return i()(t).children("p").each((function(t,n){e+="<p>".concat(n.textContent,"</p>")})),e}function Bt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};t.attributes&&he(t.attributes,(function(t,e){return n[t]=/^-?\d*$/.test(e)?Number(e):e}));var i=[],r=Array.from(t.children||t.childNodes||[]),o=r.filter((function(t){return"p"===t.nodeName}));if(o.length>0&&o.length===r.filter((function(t){return"#text"!==t.nodeName})).length){var s=o.map((function(t){return t.textContent})).join("\n");return t.attributes?(n.text=s,n):s}return r.forEach((function(t){if("#text"!==t.nodeName||e){var r=Bt(t,e);if(n[t.nodeName]||(n[t.nodeName]={},i.push(t.nodeName)),r.id)n[t.nodeName][r.id]=r;else{var o=Object.keys(n[t.nodeName]).length;n[t.nodeName][o]=r}}})),i.forEach((function(t){var e=Object.keys(n[t]);if(!e.find((function(t){return isNaN(t)})))if(1===e.length)n[t]=n[t][0];else{var i=[];e.forEach((function(e){return i.push(n[t][e])})),n[t]=i}})),0===r.length&&t.textContent&&(n.textContent=t.textContent),n}function Rt(t){var e=Bt(t);return"string"==typeof e?e:e.hasOwnProperty("text")?e.text:e.hasOwnProperty("textContent")?e.textContent:e}function It(t){t&&Object.keys(t).forEach((function(e){var n=t[e];if("object"===it(n)){var i=Object.keys(n);1===i.length&&"text"===i[0]?t[e]=n.text:t[e]=It(n)}}));return t}function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye.BoxBase.BACK_COLOR;if(null==t&&(t=e),"#"===(t=t.replace("0x","#")).charAt(0)&&t.length>7){var n=Jt(parseInt(t.substring(1,3),16)/255,2);t="rgba(".concat(parseInt(t.substring(3,5),16),",").concat(parseInt(t.substring(5,7),16),",").concat(parseInt(t.substring(7,9),16),",").concat(n,")")}return t}function Mt(t){if(Yt(t,"rgba(")){var e=parseInt(t.substr(t.lastIndexOf(",")));return"number"==typeof e&&e<1}return!1}function Nt(t){return i().extend(!0,Object.create(Object.getPrototypeOf(t)),t)}function Vt(t){var e={};return t&&i().each(t,(function(t,n){var i;"string"==typeof n&&""!==(i=n.trim().toLowerCase())&&(n="true"===i||"false"!==i&&(isNaN(i)?n:Number(i))),e[t]=n})),e}function qt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={};return(e=e||Object.keys(t)).forEach((function(e){var i=rt(e.split("|"),2),r=i[0],o=i[1];if(t.hasOwnProperty(r)&&void 0!==t[r]&&null!==t[r]&&t[r].toString()!==o){var s=Lt(t[r]);Ft(s)||(n[r]=s)}})),1===(e=Object.keys(n)).length&&"text"===e[0]&&(n=n.text),n}function Lt(t){return t.getAttributes?t.getAttributes():t instanceof Array?t.map((function(t){return Lt(t)})):t instanceof Date?t.toISOString():t instanceof Object?qt(t):t}function Ft(t){var e=null==t;if(!e)switch(it(t)){case"object":e=0===Object.keys(t).length;break;case"string":e=0===t.length}return e}function zt(t,e,n){return n.forEach((function(n){if(n.key){var i=n.key,r=n.fn,o=n.group,s=n.init,a=n.params;if(!Ft(e[i])){var c=e[i];t[i]="object"===o?Object.keys(c).reduce((function(t,e){return t[e]=Ut(r,c[e],"key"===s?e:s,a),t}),{}):"array"===o?c.map((function(t,e){return Ut(r,t,"key"===s?e:s,a)})):Ut(r,c,s,a)}}else Ft(e[n])||(t[n]=e[n])})),t}function Ut(t,e,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t.factory?t.factory(e,n,r):(i=new t(n)).setAttributes.apply(i,[e].concat(nt(r)))}function $t(t){return ye.SEPARATORS.includes(t)}function Ht(t){return ye.WORD_DELIMITERS.includes(t)}function Wt(t){for(var e=[],n={text:"",sep:""},i=!0,r=0;r<t.length;r++){var o=t.charAt(r),s=Ht(o);i?s?(i=!1,n.sep=o):n.text+=o:s?n.sep+=o:(e.push(n),n={text:o,sep:""},i=!0)}return e.push(n),e}function Gt(t,e){return Math.round(t/e)*e}function Jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return t.toFixed?Number(t.toFixed(e)):t}function Kt(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===t||0===t.length||null===e||0===e.length)return!1;n||i||(t=t.toUpperCase()),t=t.trim(),i=i&&/\d/.test(t);var r,o=et(e.split("|"));try{for(o.s();!(r=o.n()).done;){var s=r.value;if(i){if(Number.parseFloat(t.replace(/,/,"."))===Number.parseFloat(s.replace(/,/,".")))return!0}else if(t===(n?s:s.toUpperCase()).trim())return!0}}catch(t){o.e(t)}finally{o.f()}return!1}function Zt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return"string"==typeof t&&(n?t.trim():t).endsWith(e)}function Yt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return"string"==typeof t&&0===(n?t.trim():t).indexOf(e)}function Qt(t){return t?t.replace(/\\/g,"/"):t}function Xt(t){return/^(filesystem:)?(https?|file|data|ftps?):/i.test(t)}function te(t){var e=t.lastIndexOf("/");return e>=0?t.substring(0,e+1):""}function ee(t,e){return e&&""!==e&&0===t.indexOf(e)?t.substr(e.length):t}function ne(t,e){return Xt(e)?e:t+e}function ie(t,e,n){if(n){var i=ee(t+e,n.zipBasePath);if(n.files[i])return new Promise((function(t,r){n.file(i).async("base64").then((function(n){var i=e.toLowerCase().split(".").pop(),r=ye.MIME_TYPES[i]||"application/octet-stream";t("data:".concat(r,";base64,").concat(n))})).catch(r)}))}return Promise.resolve(ne(t,e))}var re={doubleCell:function(t,e){return i()("<tr/>").append(i()("<td/>").html(t)).append(i()("<td/>").html(e))},p:function(t){return i()("<p/>").html(t)},td:function(t,e){return i()("<td/>",e?{class:e}:null).html(t)},th:function(t,e){return i()("<th/>",e?{class:e}:null).html(t)}};function oe(t,e,n,i){return e&&(t=t.replace(/width=\"\d*\"/,'width="'.concat(e,'"'))),n&&(t=t.replace(/height=\"\d*\"/,'height="'.concat(n,'"'))),i&&(t=t.replace(/fill=\"[#A-Za-z0-9]*\"/,'fill="'.concat(i,'"'))),t}function se(t,e,n,i){return"data:image/svg+xml;base64,"+window.btoa(oe(t,e,n,i))}function ae(t,e,n,i){var r=null==t?null:isNaN(t)?t:t<0?"".concat(Math.abs(t),"%"):"".concat(t,"px");return e&&n&&(r||i)&&(e[n]=null!==r?r:i),r}function ce(t,e){var n=document.createElement("canvas");n.width=e.dim.width,n.height=e.dim.height;var i=n.getContext("2d"),r="";try{i.drawImage(t,e.pos.x,e.pos.y,e.dim.width,e.dim.height,0,0,e.dim.width,e.dim.height),r=n.toDataURL()}catch(t){gt("error",t)}return r}function le(t){if(t){for(;t.parentElement;)t=t.parentElement;t instanceof HTMLElement&&(t=t.parentNode||t),t=t.head||t}return t||document.head}function ue(t,e){var n=le(e&&e.$topDiv?e.$topDiv[0]:null),i=document.createElement("style");return i.type="text/css",i.appendChild(document.createTextNode(t)),n.appendChild(i)}function he(t,e){for(var n=0;n<t.length;n++)e(t[n].name,t[n].value)}function fe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t[e]?n.push(t):Object.values(t).forEach((function(t){"object"===it(t)&&fe(t,e,n)})),n}function pe(t){var e,n=0,i=t.ownerDocument||t.document,r=i.defaultView||i.parentWindow;if(void 0!==r.getSelection){if((e=r.getSelection()).rangeCount>0){var o=r.getSelection().getRangeAt(0),s=o.cloneRange();s.selectNodeContents(t),s.setEnd(o.endContainer,o.endOffset),n=s.toString().length}}else if((e=i.selection)&&"Control"!==e.type){var a=e.createRange(),c=i.body.createTextRange();c.moveToElementText(t),c.setEndPoint("EndToEnd",a),n=c.text.length}return n}function de(t){var e=[];if(3===t.nodeType)e.push(t);else for(var n=t.childNodes,i=0,r=n.length;i<r;++i)e.push.apply(e,de(n[i]));return e}function ve(t,e,n){if(Tt(n)&&(n=e),document.createRange&&window.getSelection){var i=document.createRange();i.selectNodeContents(t);for(var r,o,s=de(t),a=!1,c=0,l=0;l<s.length;l++){if(r=c+(o=s[l]).length,!a&&e>=c&&(e<r||e===r&&l+1<=s.length)&&(i.setStart(o,e-c),a=!0),a&&n<=r){i.setEnd(o,n-c);break}c=r}var u=window.getSelection();u.removeAllRanges(),u.addRange(i)}else if(document.selection&&document.body.createTextRange){var h=document.body.createTextRange();h.moveToElementText(t),h.collapse(!0),h.moveEnd("character",n),h.moveStart("character",e),h.select()}}var ye={VERSION:tt.version,NODEJS:"nodejs"===window.name,AB:0,BA:1,AUB:2,BUA:3,LAYOUT_NAMES:["AB","BA","AUB","BUA"],DEFAULT_WIDTH:400,DEFAULT_HEIGHT:300,MINIMUM_WIDTH:40,MINIMUM_HEIGHT:40,DEFAULT_NAME:"---",DEFAULT_MARGIN:8,DEFAULT_SHUFFLES:31,DEFAULT_GRID_ELEMENT_SIZE:20,MIN_CELL_SIZE:10,DEFAULT_BG_COLOR:"#C0C0C0",ACTIONS:{ACTION_MATCH:"MATCH",ACTION_PLACE:"PLACE",ACTION_WRITE:"WRITE",ACTION_SELECT:"SELECT",ACTION_HELP:"HELP"},PREVIOUS:0,MAIN:1,END:2,END_ERROR:3,NUM_MSG:4,MSG_TYPE:["previous","initial","final","finalError"],RANDOM_CHARS:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",NUM_COUNTERS:3,MAX_RECORD_LENGTH:180,BoxBase:{REDUCE_FONT_STEP:1,MIN_FONT_SIZE:8,STROKE:1,AC_MARGIN:6,BACK_COLOR:"#C0C0C0",TEXT_COLOR:"black",SHADOW_COLOR:"gray",INACTIVE_COLOR:"gray",ALTERNATIVE_COLOR:"gray",BORDER_COLOR:"black",BORDER_STROKE_WIDTH:.75,MARKER_STROKE_WIDTH:2.75},FILE_TYPES:{image:"gif,jpg,png,jpeg,bmp,ico,svg",audio:"wav,mp3,ogg,oga,au,aiff,flac",video:"avi,mov,mpeg,mp4,ogv,m4v,webm",font:"ttf,otf,eot,woff,woff2",midi:"mid,midi",anim:"swf",xml:"xml"},MIME_TYPES:{xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",svg:"image/svg+xml",ico:"image/x-icon",wav:"audio/wav",mp3:"audio/mpeg",mp4:"video/mp4",m4v:"video/mp4",ogg:"audio/ogg",oga:"audio/ogg",ogv:"video/ogg",webm:"video/webm",au:"audio/basic",aiff:"audio/x-aiff",flac:"audio/flac",avi:"video/avi",mov:"video/quicktime",mpeg:"video/mpeg",ttf:"application/font-sfnt",otf:"application/font-sfnt",eot:" application/vnd.ms-fontobject",woff:"application/font-woff",woff2:"application/font-woff2",swf:"application/x-shockwave-flash",mid:"audio/midi",midi:"audio/midi"},COMPRESS_IMAGES:!0,VK:{LEFT:37,UP:38,RIGHT:39,DOWN:40},TOUCH_DEVICE:!1,LOAD_TIMEOUT:1e4,BEZIER_POINTS:4,CANVAS_DRAW_FOCUS:void 0!==window.CanvasRenderingContext2D&&"function"==typeof window.CanvasRenderingContext2D.prototype.drawFocusIfNeeded,WHITESPACES:"  \f\n\r\t\vÂ áâââââââââââ\u2028\u2029â¯âã\ufeff"};ye.SEPARATORS="".concat(ye.WHITESPACES,".,;-|"),ye.WORD_DELIMITERS="".concat(ye.SEPARATORS,"â¦_<>\"ââÂ«Â»'Â´`âââ¢~+âââ=%Â¿?Â¡!:/\\()[]{}$Â£â¬");var ge={pkg:at,settings:ye,getMsg:pt,LOG_LEVELS:ct,LOG_PRINT_LABELS:lt,LOG_OPTIONS:ut,init:ft,setLogLevel:yt,log:gt,getBoolean:mt,getVal:bt,getNumber:wt,getPercent:kt,zp:At,getHMStime:xt,getDateTime:Ct,parseOldDate:St,cleanOldLanguageTag:Ot,FALSE:0,TRUE:1,DEFAULT:2,getTriState:Et,fillString:Pt,isNullOrUndef:Tt,isEquivalent:_t,getXmlText:jt,parseXmlNode:Bt,getXmlNodeText:Rt,reduceTextsToStrings:It,cssToString:function(t){return Object.keys(t).reduce((function(e,n){return"".concat(e).concat(n,":").concat(t[n],";")}),"")},checkColor:Dt,colorHasTransparency:Mt,cloneObject:Nt,normalizeObject:Vt,getAttr:qt,getValue:Lt,isEmpty:Ft,setAttr:zt,buildObj:Ut,isSeparator:$t,isWordDelimiter:Ht,stringToWords:Wt,roundTo:Gt,fx:Jt,compareMultipleOptions:Kt,endsWith:Zt,startsWith:Yt,nSlash:Qt,isURL:Xt,getBasePath:te,getRelativePath:ee,getPath:ne,getPathPromise:ie,$HTML:re,getSvg:oe,svgToURI:se,toCssSize:ae,getImgClipUrl:ce,getRootHead:le,appendStyleAtHead:ue,attrForEach:he,findParentsWithChild:fe,getCaretCharacterOffsetWithin:pe,getTextNodesIn:de,setSelectionRange:ve},me=ge;function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function we(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ke(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ae(){return Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=xe(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Ae.apply(this,arguments)}function xe(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pe(t)););return t}function Ce(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Pe(t);if(e){var r=Pe(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ee(this,n)}}function Ee(t,e){if(e&&("object"===be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Pe(t){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(t)}function Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function je(t,e,n){return e&&_e(t.prototype,e),n&&_e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Be=function(){function t(e,n,i,r,o){Te(this,t),e&&(this.family=e),"number"==typeof n&&(this.size=n),i&&(this.bold=i),r&&(this.italic=r),o&&(this.variant=o),this._metrics={ascent:-1,descent:-1,height:-1}}return je(t,[{key:"setProperties",value:function(t){return t.attr("family")&&(this.family=t.attr("family")),t.attr("size")&&(this.size=Number(t.attr("size"))),t.attr("bold")&&(this.bold=mt(t.attr("bold"))),t.attr("italic")&&(this.italic=mt(t.attr("italic"))),t.attr("variant")&&(this.variant=t.attr("variant")),this}},{key:"getAttributes",value:function(){return qt(this,["family|Arial","size|17","bold|0","italic|0","variant"])}},{key:"setAttributes",value:function(t){return zt(this,t,["family","size","bold","italic","variant"])}},{key:"setSize",value:function(t){var e=this.size;return this.size=t,e!==t&&(this._metrics.height=-1),this}},{key:"zoom",value:function(t){return this.setSize(this.size+t)}},{key:"getMetrics",value:function(){var e=this;if(this._metrics.height<0){var n=t.ALREADY_CALCULATED_FONTS.find((function(t){return t.equals(e)}));n&&Object.assign(this._metrics,n._metrics),this._metrics.height<0&&(this._calcHeight(),this._metrics.height>0&&t.ALREADY_CALCULATED_FONTS.push(this))}return this._metrics}},{key:"getHeight",value:function(){return this.getMetrics().height}},{key:"toCss",value:function(t){return t||(t={}),t["font-family"]=this.family,t["font-size"]="".concat(this.size,"px"),this.hasOwnProperty("bold")&&(t["font-weight"]=this.bold?"bold":"normal"),this.hasOwnProperty("italic")&&(t["font-style"]=this.italic?"italic":"normal"),this.hasOwnProperty("variant")&&(t["font-variant"]=this.variant),t}},{key:"cssFont",value:function(){return"".concat(this.italic?"italic ":"normal"," ").concat(""===this.variant?"normal":this.variant," ").concat(this.bold?"bold ":"normal"," ").concat(this.size,"px ").concat(this.family)}},{key:"_calcHeight",value:function(){var t=i()("<span/>").html("Hg").css(this.toCss()),e=i()("<div/>").css({display:"inline-block",width:"1px",height:"0px"}),n=i()("<div/>").append(t,e);i()("body").append(n);try{e.css({verticalAlign:"baseline"}),this._metrics.ascent=e.offset().top-t.offset().top,e.css({verticalAlign:"bottom"}),this._metrics.height=e.offset().top-t.offset().top,this._metrics.descent=this._metrics.height-this._metrics.ascent}finally{n.remove()}return this}},{key:"equals",value:function(t){return this.family===t.family&&this.size===t.size&&this.bold===t.bold&&this.italic===t.italic&&this.variant===t.variant}}],[{key:"checkTree",value:function(e,n){var r=t.SUBSTITUTIONS;n&&n.ownFonts&&n.ownFonts.forEach((function(e){t.ALREADY_LOADED_FONTS.indexOf(e)<0&&X()&&X().load&&(X().load({custom:{families:[e]}}),t.ALREADY_LOADED_FONTS.push(e),delete r[e.trim().toLowerCase()])})),n&&n.fontSubstitutions&&(r=i().extend(Object.create(r),n.fontSubstitutions)),e.jquery?e.find("style[family],font[family]").each((function(e,n){var o=i()(n),s=o.attr("family").trim().toLowerCase();if(s in r){var a=r[s];""!==a&&(t.loadGoogleFont(a),o.attr("family",a))}})):fe(e,"family").forEach((function(e){if("string"==typeof e.family){var n=e.family;if(t.GOOGLEFONTS.includes(n))t.loadGoogleFont(n);else{var i=r[n.trim().toLowerCase()];i&&(t.loadGoogleFont(i),e.family=i)}}}))}},{key:"loadGoogleFont",value:function(e){e&&!t.ALREADY_LOADED_FONTS.includes(e)&&X()&&X().load&&(X().load({google:{families:[e]}}),t.ALREADY_LOADED_FONTS.push(e))}},{key:"loadGoogleFonts",value:function(e){e&&e.forEach&&e.forEach((function(e){return t.loadGoogleFont(e)}))}}]),t}();Be.ALREADY_CALCULATED_FONTS=[],Be.ALREADY_LOADED_FONTS=["serif","sans-serif","monospace","cursive","fantasy"],Be.SUBSTITUTIONS={dialog:"sans-serif",dialoginput:"sans-serif",monospaced:"monospace",sansserif:"sans-serif",abc:"Kalam","a.c.m.e. secret agent":"Permanent Marker","comic sans ms":"Patrick Hand",impact:"Oswald",massallera:"Vibur",memima:"Vibur",memima_n1:"Vibur",memima_n2:"Vibur","memimas-regularalternate":"Vibur",palmemim:"Vibur",zurichcalligraphic:"Felipa"},Be.GOOGLEFONTS=["Kalam","Permanent Marker","Patrick Hand","Oswald","Vibur","Felipa"],Object.assign(Be.prototype,{family:"Arial",size:17,bold:0,italic:0,variant:"",_metrics:{ascent:-1,descent:-1,height:-1}});var Re=function(){function t(e,n,i,r){Te(this,t),e&&(this.c1=e),n&&(this.c2=n),"number"==typeof i&&(this.angle=i%360),"number"==typeof r&&(this.cycles=r)}return je(t,[{key:"setProperties",value:function(t){return this.c1=Dt(t.attr("source"),"black"),this.c2=Dt(t.attr("dest"),"white"),this.angle=Number(t.attr("angle")||0)%360,this.cycles=Number(t.attr("cycles")||1),this}},{key:"getAttributes",value:function(){return qt(this,["c1","c2","angle|0","cycles|1"])}},{key:"setAttributes",value:function(t){return zt(this,t,["c1","c2","angle","cycles"])}},{key:"getGradient",value:function(t,e){for(var n=e.getOppositeVertex(),i=t.createLinearGradient(e.pos.x,e.pos.y,n.x,n.y),r=1/Math.max(this.cycles,1),o=0;o<=this.cycles;o++)i.addColorStop(o*r,o%2?this.c1:this.c2);return i}},{key:"getCss",value:function(){for(var t="linear-gradient(".concat(this.angle+90,"deg, ").concat(this.c1,", ").concat(this.c2),e=1;e<this.cycles;e++)t="".concat(t,", ").concat(e%2>0?this.c1:this.c2);return"".concat(t,")")}},{key:"hasTransparency",value:function(){return Mt(this.c1)||Mt(this.c2)}}]),t}();Object.assign(Re.prototype,{c1:"white",c2:"black",angle:0,cycles:1});var Ie=function(){function t(e,n,i,r){Te(this,t),"number"==typeof e&&(this.lineWidth=e),n&&(this.lineCap=n),i&&(this.lineJoin=i),"number"==typeof r&&(this.miterLimit=r)}return je(t,[{key:"getAttributes",value:function(){return qt(this,["lineWidth|1","lineCap|butt","lineJoin|miter","miterLimit|10"])}},{key:"setAttributes",value:function(t){return zt(this,t,["lineWidth","lineCap","lineJoin","miterLimit"])}},{key:"setStroke",value:function(t){return t.lineWidth=this.lineWidth,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.miterLimit=this.miterLimit,t}}]),t}();Object.assign(Ie.prototype,{lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10});var De=function(){function t(e,n){Te(this,t),e instanceof t?(this.x=e.x,this.y=e.y):(this.x=e||0,this.y=n||0)}return je(t,[{key:"setProperties",value:function(t){return this.x=Number(t.attr("x")),this.y=Number(t.attr("y")),this}},{key:"getAttributes",value:function(){return qt(this,["x","y"])}},{key:"setAttributes",value:function(t){return zt(this,t,["x","y"])}},{key:"moveBy",value:function(t){return this.x+=t.x||t.width||0,this.y+=t.y||t.height||0,this}},{key:"moveTo",value:function(t,e){return"number"==typeof t?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y),this}},{key:"multBy",value:function(t){return this.x*=t.x||t.width||0,this.y*=t.y||t.height||0,this}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2),Math.pow(this.y-t.y,2))}},{key:"clone",value:function(){return new t(this)}}]),t}();Object.assign(De.prototype,{x:0,y:0});var Me=function(){function t(e,n){Te(this,t),e instanceof De&&n instanceof De?(this.width=n.x-e.x,this.height=n.y-e.y):(this.width=e||0,this.height=n||0)}return je(t,[{key:"setProperties",value:function(t){return this.width=Number(t.attr("width")),this.height=Number(t.attr("height")),this}},{key:"getAttributes",value:function(){return qt(this,["width","height"])}},{key:"setAttributes",value:function(t){return zt(this,t,["width","height"])}},{key:"equals",value:function(t){return this.width===t.width&&this.height===t.height}},{key:"multBy",value:function(t){return this.width*=t.x||t.width||0,this.height*=t.y||t.height||0,this}},{key:"setDimension",value:function(e,n){return e instanceof t&&(n=e.height,e=e.width),this.width=e,this.height=n,this}},{key:"getSurface",value:function(){return this.width*this.height}}]),t}();Object.assign(Me.prototype,{width:0,height:0});var Ne,Ve,qe,Le=function(){function t(e){Te(this,t),this.pos=e||new De}return je(t,[{key:"moveBy",value:function(t){return this.pos.moveBy(t),this}},{key:"moveTo",value:function(t){return this.pos.moveTo(t),this}},{key:"getBounds",value:function(){return new Fe(this.pos)}},{key:"equals",value:function(t){return this.pos.equals(t.pos)}},{key:"scaleBy",value:function(t){return this}},{key:"getShape",value:function(t){return this.clone().scaleBy(t.dim).moveBy(t.pos)}},{key:"contains",value:function(t){return!1}},{key:"intersects",value:function(t){return!1}},{key:"fill",value:function(t,e){return t.save(),e&&e.getSurface()>0&&(t.beginPath(),t.rect(e.pos.x,e.pos.y,e.dim.width,e.dim.height),t.clip()),this.preparePath(t),t.fill(),t.restore(),t}},{key:"stroke",value:function(t){return this.preparePath(t),t.stroke(),t}},{key:"preparePath",value:function(t){return t}},{key:"clip",value:function(t,e){return this.preparePath(t),t.clip(e||"nonzero"),t}},{key:"isRect",value:function(){return!1}},{key:"toString",value:function(){return"Shape enclosed in ".concat(this.getBounds().getCoords())}},{key:"setAttributes",value:function(e){return t.buildShape(e)}}],[{key:"buildShape",value:function(t){var e="rect"===t.type&&Fe||"ellipse"===t.type&&ze||"path"===t.type&&Ue||null;if(e)return(new e).setAttributes(t);console.log("unknown shape:",t)}}]),t}();Object.assign(Le.prototype,(Ne={type:"shape",pos:new De},qe="shape",(Ve="type")in Ne?Object.defineProperty(Ne,Ve,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Ne[Ve]=qe,Ne));var Fe=function(t){Ce(n,t);var e=Oe(n);function n(t,i,r,o){var s;Te(this,n);var a=t,c=i;return t instanceof n?(c=new Me(t.dim.width,t.dim.height),a=new De(t.pos.x,t.pos.y)):t instanceof De?(a=new De(t.x,t.y),i instanceof Me&&(c=new Me(i.width,i.height))):t instanceof Array?(a=new De(t[0],t[1]),c=new Me(t[2]-t[0],t[3]-t[1])):"number"==typeof r&&"number"==typeof o&&(a=new De(t,i),c=new Me(r,o)),(s=e.call(this,a)).dim=c instanceof Me?c:c instanceof De?new Me(c.x-s.pos.x,c.y-s.pos.y):new Me,s.type="rect",s}return je(n,[{key:"getBounds",value:function(){return this}},{key:"setBounds",value:function(t){return t||(t=new n),this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.dim.width=t.dim.width,this.dim.height=t.dim.height,this}},{key:"equals",value:function(t){return t instanceof n&&this.pos.equals(t.pos)&&this.dim.equals(t.dim)}},{key:"clone",value:function(){return new n(this)}},{key:"scaleBy",value:function(t){return this.pos.multBy(t),this.dim.multBy(t),this}},{key:"grow",value:function(t,e){return this.pos.x-=t,this.pos.y-=e,this.dim.width+=2*t,this.dim.height+=2*e,this}},{key:"getOppositeVertex",value:function(){return new De(this.pos.x+this.dim.width,this.pos.y+this.dim.height)}},{key:"add",value:function(t){var e=this.getOppositeVertex(),n=t.getBounds().getOppositeVertex();return this.pos.moveTo(Math.min(this.pos.x,t.getBounds().pos.x),Math.min(this.pos.y,t.getBounds().pos.y)),this.dim.setDimension(Math.max(e.x,n.x)-this.pos.x,Math.max(e.y,n.y)-this.pos.y),this}},{key:"contains",value:function(t){var e=this.getOppositeVertex();return t.x>=this.pos.x&&t.x<=e.x&&t.y>=this.pos.y&&t.y<=e.y}},{key:"intersects",value:function(t){var e=this.pos,n=this.getOppositeVertex(),i=t.pos,r=t.getOppositeVertex();return r.x>=e.x&&i.x<=n.x&&r.y>=e.y&&i.y<=n.y}},{key:"preparePath",value:function(t){return t.beginPath(),t.rect(this.pos.x,this.pos.y,this.dim.width,this.dim.height),t}},{key:"getSurface",value:function(){return this.dim.getSurface()}},{key:"isEmpty",value:function(){return 0===this.getSurface()}},{key:"isRect",value:function(){return!0}},{key:"toString",value:function(){return"Rectangle ".concat(this.getCoords())}},{key:"getCoords",value:function(){return"[".concat(Math.round(this.pos.x),",").concat(Math.round(this.pos.y),",").concat(Math.round(this.pos.x+this.dim.width),",").concat(Math.round(this.pos.y+this.dim.height),"]")}},{key:"getAttributes",value:function(){return qt(this,["type","pos","dim"])}},{key:"setAttributes",value:function(t){return zt(this,t,["type",{key:"pos",fn:De},{key:"dim",fn:Me}])}}]),n}(Le);Object.assign(Fe.prototype,{type:"rect",dim:new Me});var ze=function(t){Ce(n,t);var e=Oe(n);function n(t,i,r,o){return Te(this,n),e.call(this,t,i,r,o)}return je(n,[{key:"preparePath",value:function(t){var e=.5522848,n=e*this.dim.width/2,i=e*this.dim.height/2,r=this.pos.x+this.dim.width,o=this.pos.y+this.dim.height,s=this.pos.x+this.dim.width/2,a=this.pos.y+this.dim.height/2;return t.beginPath(),t.moveTo(this.pos.x,a),t.bezierCurveTo(this.pos.x,a-i,s-n,this.pos.y,s,this.pos.y),t.bezierCurveTo(s+n,this.pos.y,r,a-i,r,a),t.bezierCurveTo(r,a+i,s+n,o,s,o),t.bezierCurveTo(s-n,o,this.pos.x,a+i,this.pos.x,a),t.closePath(),t}},{key:"contains",value:function(t){var e=Ae(Pe(n.prototype),"contains",this).call(this,t);if(e){var i=this.dim.width/2,r=this.dim.height/2,o=this.pos.x+i,s=this.pos.y+r;e=Math.pow(t.x-o,2)/Math.pow(i,2)+Math.pow(t.y-s,2)/Math.pow(r,2)<=1}return e}},{key:"getSurface",value:function(){return Math.PI*this.dim.width/2*this.dim.height/2}},{key:"equals",value:function(t){return t instanceof n&&Ae(Pe(n.prototype),"equals",this).call(this,t)}},{key:"clone",value:function(){return new n(this.pos,this.dim)}},{key:"isRect",value:function(){return!1}},{key:"toString",value:function(){return"Ellipse enclosed in ".concat(this.getCoords())}}]),n}(Fe);Object.assign(ze.prototype,{type:"ellipse"});var Ue=function(t){Ce(n,t);var e=Oe(n);function n(t){var i;return Te(this,n),i=e.call(this),t&&i.setStrokes(t),i}return je(n,[{key:"setStrokes",value:function(t){var e=this;return this.strokes=[],t.forEach((function(t){return e.strokes.push(new $e(t.type||t.action,t.points||t.data))})),this.enclosing=new Fe,this.enclosingPoints=[],this.calcEnclosingRect(),this.pos=this.enclosing.pos,this}},{key:"clone",value:function(){return new n(this.strokes.map((function(t){return t.clone()})))}},{key:"addStroke",value:function(t){return this.strokes.push(t),this}},{key:"calcEnclosingRect",value:function(){var t=this;this.enclosingPoints=[];var e=new De;this.strokes.forEach((function(n){n.getEnclosingPoints(e).forEach((function(n){e=new De(n),t.enclosingPoints.push(e)}))}));var n=this.enclosingPoints.length;n>1&&this.enclosingPoints[0].equals(this.enclosingPoints[n-1])&&(this.enclosingPoints.pop(),n--);for(var i=new De(this.enclosingPoints[0]),r=new De(this.enclosingPoints[0]),o=1;o<n;o++){var s=this.enclosingPoints[o];i.x=Math.min(s.x,i.x),i.y=Math.min(s.y,i.y),r.x=Math.max(s.x,r.x),r.y=Math.max(s.y,r.y)}return this.enclosing.setBounds(new Fe(i,new Me(i,r))),this.enclosing}},{key:"getBounds",value:function(){return this.enclosing}},{key:"moveBy",value:function(t){return this.strokes.forEach((function(e){return e.moveBy(t)})),this.enclosingPoints.forEach((function(e){return e.moveBy(t)})),this.enclosing.moveBy(t),this}},{key:"moveTo",value:function(t){return this.moveBy(new Me(t.x-this.pos.x,t.y-this.pos.y))}},{key:"equals",value:function(t){return!1}},{key:"scaleBy",value:function(t){return this.strokes.forEach((function(e){return e.multBy(t)})),this.enclosingPoints.forEach((function(e){return e.multBy(t)})),this.enclosing.scaleBy(t),this}},{key:"contains",value:function(t){var e=this.enclosing.contains(t);if(e){for(var n=this.enclosingPoints.length,i=0,r=0,o=this.enclosingPoints[0],s=1;s<=n;s++){var a=this.enclosingPoints[s%n];t.y>Math.min(o.y,a.y)&&t.y<=Math.max(o.y,a.y)&&t.x<=Math.max(o.x,a.x)&&o.y!==a.y&&(i=(t.y-o.y)*(a.x-o.x)/(a.y-o.y)+o.x,(o.x===a.x||t.x<=i)&&r++),o=a}r%2==0&&(e=!1)}return e}},{key:"intersects",value:function(t){return this.enclosing.intersects(t)}},{key:"preparePath",value:function(t){return t.beginPath(),this.strokes.forEach((function(e){return e.stroke(t)})),t}},{key:"getAttributes",value:function(){return{type:this.type,strokes:this.strokes.map((function(t){return t.getAttributes()})).join("|")}}},{key:"setAttributes",value:function(t){var e=t.strokes.split("|").map((function(t){var e=we(t.split(":"),2),n=e[0],i=e[1];return new $e(n,i?i.split(","):[])}));return this.setStrokes(e)}}]),n}(Le);Object.assign(Ue.prototype,{type:"path",strokes:[],enclosing:new Fe,enclosingPoints:[]});var $e=function(){function t(e,n){if(Te(this,t),this.type=e,n&&n.length>0)if(n[0]instanceof De)this.points=n.map((function(t){return new De(t)}));else{this.points=[];for(var i=0;i<n.length;i+=2)this.points.push(new De(n[i],n[i+1]))}}return je(t,[{key:"clone",value:function(){return new t(this.type,this.points)}},{key:"moveBy",value:function(t){return this.points&&this.points.forEach((function(e){return e.moveBy(t)})),this}},{key:"multBy",value:function(t){return this.points&&this.points.forEach((function(e){return e.multBy(t)})),this}},{key:"stroke",value:function(t){switch(this.type){case"M":t.moveTo(this.points[0].x,this.points[0].y);break;case"L":t.lineTo(this.points[0].x,this.points[0].y);break;case"Q":t.quadraticCurveTo(this.points[0].x,this.points[0].y,this.points[1].x,this.points[1].y);break;case"B":t.bezierCurveTo(this.points[0].x,this.points[0].y,this.points[1].x,this.points[1].y,this.points[2].x,this.points[2].y);break;case"X":t.closePath()}return t}},{key:"getEnclosingPoints",value:function(e){var n=[];switch(this.type){case"M":case"L":n.push(this.points[0]);break;case"Q":(n=t.getQuadraticPoints(e,this.points[0],this.points[1])).push(this.points[1]);break;case"B":(n=t.getCubicPoints(e,this.points[0],this.points[1],this.points[2])).push(this.points[2])}return n}},{key:"getAttributes",value:function(){return"".concat(this.type,":").concat(this.points?this.points.map((function(t){return"".concat(Jt(t.x),",").concat(Jt(t.y))})).join(","):"")}}],[{key:"getQuadraticPoints",value:function(t,e,n,i){i||(i=ye.BEZIER_POINTS);for(var r=[],o=new De,s=new De,a=0;a<i;a++){var c=(a+1)/(i+1);o.x=t.x+(e.x-t.x)*c,o.y=t.y-(t.y-e.y)*c,s.x=e.x+(n.x-e.x)*c,s.y=e.y+(n.y-e.y)*c,r.push(new De(o.x+(s.x-o.x)*c,o.y-(o.y-s.y)*c))}return r}},{key:"getCubicPoints",value:function(e,n,i,r,o){var s=[];o||(o=ye.BEZIER_POINTS);for(var a=t.getQuadraticPoints(e,n,i,o),c=t.getQuadraticPoints(n,i,r,o),l=0;l<o;l++){var u=(l+1)/(o+1);s.push(new De(a[l].x+(c[l].x-a[l].x)*u,a[l].y-(a[0].y-c[0].y)*u))}return s}}]),t}();Object.assign($e.prototype,{type:"X",points:null});var He=function(){function t(e,n){Te(this,t),this.name=e,this.actionPerformed=n,this._statusListeners=[]}return je(t,[{key:"actionPerformed",value:function(t,e){return this}},{key:"processEvent",value:function(t){return this.actionPerformed(this,t)}},{key:"addStatusListener",value:function(t){this._statusListeners.push(t)}},{key:"removeStatusListener",value:function(t){this._statusListeners=this._statusListeners.map((function(e){return e!==t}))}},{key:"setEnabled",value:function(t){var e=this;return this.enabled=t,this._statusListeners.forEach((function(t){return t.call(e,e)})),this}}]),t}();Object.assign(He.prototype,{name:null,description:null,enabled:!1,_statusListeners:null});var We=function(){function t(e,n,i){Te(this,t),this.actionPerformed=e,this.interval=n,this.setEnabled(!0===i)}return je(t,[{key:"actionPerformed",value:function(t){return this}},{key:"processTimer",value:function(t){return this.ticks++,this.repeats||this.stop(),this.actionPerformed.call(this)}},{key:"setEnabled",value:function(t,e){var n=this;if(e||(this.ticks=0),!t||null===this.timer)return t?this.timer=window.setInterval((function(){return n.processTimer(null)}),this.interval):null!==this.timer&&(window.clearInterval(this.timer),this.timer=null),this}},{key:"isRunning",value:function(){return null!==this.timer}},{key:"start",value:function(t){return this.setEnabled(!0,t)}},{key:"stop",value:function(t){return this.setEnabled(!1,t)}}]),t}();Object.assign(We.prototype,{interval:0,ticks:0,timer:null,repeats:!0});var Ge=function(t){Ce(n,t);var e=Oe(n);function n(t,i,r,o){return Te(this,n),e.call(this,t,i,r,o)}return je(n,[{key:"invalidate",value:function(t){return t?null===this.invalidatedRect?this.invalidatedRect=t.clone():this.invalidatedRect.add(t):this.invalidatedRect=null,this}},{key:"update",value:function(){return this.updateContent(this.invalidatedRect),this.invalidatedRect=null,this}},{key:"updateContent",value:function(t){return this}}]),n}(Fe);Object.assign(Ge.prototype,{invalidatedRect:null});var Je={Font:Be,Gradient:Re,Stroke:Ie,Point:De,Dimension:Me,Shape:Le,Rectangle:Fe,Ellipse:ze,Path:Ue,PathStroke:$e,Action:He,Timer:We,Container:Ge};function Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ye(t,e,n){return e&&Ze(t.prototype,e),n&&Ze(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Qe=function(){function t(e){var n=this;Ke(this,t),this.player=e,this.sequenceStack=[],window&&window.history&&e.options.browserHistory&&(this.browserHistory=!0,i()(window).on("popstate",(function(t){var e=t.originalEvent.state;e&&n.processPopStateEvent(e)})))}return Ye(t,[{key:"processPopStateEvent",value:function(t){gt("info","Processing History popstate event with state:",t),this.processingPop=!0,t.projectPath===this.player.project.path&&_t(t.fullZipPath,this.player.zip?this.player.zip.fullZipPath:null)?this.player.load(null,t.activity,null):this.player.load(t.fullZipPath||t.projectPath,t.activity,null)}},{key:"pushBrowserHistory",value:function(){if(this.browserHistory){if(this.processingPop)return void(this.processingPop=!1);var t=this.player.project.activitySequence,e=t.currentAct,n=this.player.actPanel.act.name||"No name",i=new this.HistoryElement(this.player.project.path,t.getSequenceForElement(e),e,this.player.zip?this.player.zip.fullZipPath:null);window.history.state?window.history.pushState(i,n):window.history.replaceState(i,n)}}},{key:"storedElementsCount",value:function(){return this.sequenceStack.length}},{key:"clearHistory",value:function(){this.sequenceStack=[0]}},{key:"push",value:function(){if(null!==this.player.project&&null!==this.player.project.path){var t=this.player.project.activitySequence,e=t.currentAct;if(e>=0){if(this.sequenceStack.length>0){var n=this.sequenceStack[this.sequenceStack.length-1];if(n.projectPath===this.player.project.path&&n.activity===e)return}this.sequenceStack.push(new this.HistoryElement(this.player.project.path,t.getSequenceForElement(e),e,this.player.zip?this.player.zip.fullZipPath:null))}}}},{key:"pop",value:function(){if(this.sequenceStack.length>0){var t=this.sequenceStack.pop();t.projectPath===this.player.project.path&&_t(t.fullZipPath,this.player.zip?this.player.zip.fullZipPath:null)?this.player.load(null,t.activity,null):this.testMode&&null!==t.projectPath&&t.projectPath.length>0?gt("info",'At this point, a jump to "'.concat(t.projectPath,'" should be performed.')):this.player.load(t.fullZipPath||t.projectPath,t.activity,null)}return!0}},{key:"processJump",value:function(t,e){var n=!1;if(null!==t&&null!==this.player.project)switch(t.action){case"STOP":break;case"RETURN":if(this.sequenceStack.length>0||!this.player.options.returnAsExit){n=this.pop();break}case"EXIT":this.testMode?gt("info","At this point, the program should exit."):this.player.exit(t.sequence);break;case"JUMP":if(t.sequence||t.projectPath)this.testMode&&null!==t.projectPath&&t.projectPath.length>0?gt("info",'At this point, a jump to "'.concat(t.projectPath,'" should be performed.')):n=this.jumpToSequence(t.sequence,t.projectPath?ne(this.player.project.basePath,t.projectPath):null,e);else{var i=this.player.project.activitySequence.getElement(t.actNum,!0);null!==i&&(e&&this.push(),this.player.load(null,null,i.activity),n=!0)}}return n}},{key:"jumpToSequence",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Tt(t)&&Tt(e))return!1;if(Tt(e)&&(e=this.player.project.path),this.sequenceStack.length>0){var i=this.sequenceStack[this.sequenceStack.length-1];if(!Tt(t)&&e===i.projectPath){var r=t===i.sequence;if(e===this.player.project.path){var o=this.player.project.activitySequence.getElement(i.activity,!1);r=null!==o&&t===o.tag}if(r)return this.pop()}}return n&&this.push(),e===this.player.project.path?this.player.load(null,t,null):this.player.load(e,t,null),!0}}]),t}();Object.assign(Qe.prototype,{player:null,sequenceStack:[],testMode:!1,browserHistory:!1,processingPop:!1,HistoryElement:Ye((function t(e,n,i,r){Ke(this,t),this.projectPath=e,this.sequence=n,this.activity=i,this.fullZipPath=r}))});var Xe=Qe;function tn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var en=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this.enabled=!0),e&&(this.seconds=e),this.chunks=[]}var e,n,i;return e=t,(n=[{key:"play",value:function(){this.stop(),this.mediaPlayer?(this.mediaPlayer.currentTime=0,this.mediaPlayer.play()):this.playWhenFinished=!0}},{key:"stop",value:function(){this.mediaRecorder&&"recording"===this.mediaRecorder.state?this.mediaRecorder.stop():this.mediaPlayer&&!this.mediaPlayer.paused&&this.mediaPlayer.pause()}},{key:"record",value:function(t){var e=this;this.mediaRecorder&&"recording"===this.mediaRecorder.state?this.mediaRecorder.stop():this.enabled&&(this.stop(),this.mediaPlayer=null,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.mediaRecorder=new MediaRecorder(n),e.mediaRecorder.ondataavailable=function(t){return e.chunks.push(t.data)},e.mediaRecorder.onerror=function(t){gt("error","Error recording audio: ".concat(t)),e.mediaRecorder=null},e.mediaRecorder.onstart=function(){gt("debug","Recording audio started"),e.visualFeedbak(!0,t)},e.mediaRecorder.onstop=function(){gt("debug","Recording audio finished"),e.visualFeedbak(!1,t),e.timeoutID&&(window.clearTimeout(e.timeoutID),e.timeoutID=null);var n={};e.chunks.length>0&&e.chunks[0].type&&(n.type=e.chunks[0].type);var i=new Blob(e.chunks,n);e.chunks=[],e.mediaPlayer=document.createElement("audio"),e.mediaPlayer.src=URL.createObjectURL(i),e.mediaPlayer.pause(),e.mediaRecorder=null,e.playWhenFinished&&(e.playWhenFinished=!1,e.mediaPlayer.play())},e.mediaRecorder.onwarning=function(t){return gt("warn","Warning recording audio: ".concat(t))},e.playWhenFinished=!1,e.mediaRecorder.start(),e.timeoutID=window.setTimeout((function(){e.mediaRecorder,e.mediaRecorder.stop()}),1e3*e.seconds)})).catch((function(n){gt("error",n.toString()),e.visualFeedbak(!1,t)})))}},{key:"visualFeedbak",value:function(t,e){e&&e.css("cursor",t?"progress":"inherit")}},{key:"clear",value:function(){this.stop(),this.mediaPlayer=null}}])&&tn(e.prototype,n),i&&tn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(en.prototype,{enabled:!1,seconds:20,mediaRecorder:null,chunks:null,mediaPlayer:null,timeoutID:null,playWhenFinished:!1}),en.MAX_RECORD_LENGTH=180;var nn=en;function rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var on=function(){function t(e,n,i){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mc=e,this.ps=i,e.type){case"RECORD_AUDIO":t.AUDIO_BUFFERS&&(this.clearAudioBuffer(e.recBuffer),t.AUDIO_BUFFERS[e.recBuffer]=new nn(e.length));case"PLAY_RECORDED_AUDIO":this.useAudioBuffer=!0;break;case"PLAY_AUDIO":case"PLAY_VIDEO":case"PLAY_MIDI":this.mbe=n.getElement(e.file,!0)}}var e,n,r;return e=t,n=[{key:"realize",value:function(){var t=this;this.mbe&&this.mbe.build((function(e){e.data&&e.data.pause&&!e.data.paused&&!e.data.ended&&e.data.currentTime&&e.data.pause(),"video"!==e.type&&"anim"!==e.type||!e.data||(t.$visualComponent=i()(e.data),t.$visualComponent.css("z-index",20))}),this.ps,!1,this.mc.level)}},{key:"playNow",value:function(e){var n=this;if(this.useAudioBuffer){if(t.AUDIO_BUFFERS){var r=this.ps&&this.ps.$div,o=t.AUDIO_BUFFERS[this.mc.recBuffer];o&&("RECORD_AUDIO"===this.mc.type?o.record(r):o.play())}}else this.mbe&&this.mbe.build((function(){if(n.mbe.data){if("midi"===n.mbe.type)n.mbe.data.playTo=n.mc.to||0;else{var t=!1,e=i()(n.mbe.data);e.off(),n.mc.to>0&&e.on("timeupdate",(function(){t&&n.mbe.data.currentTime>=n.mc.to/1e3&&(e.off("timeupdate"),n.mbe.data.pause())})),t=!0}n.mbe.data.paused||n.mbe.data.ended||!n.mbe.data.currentTime||n.mbe.data.pause(),n.mbe.data.currentTime=n.mc.from>0?n.mc.from/1e3:0,n.mbe.data.play()}}),this.ps,!0,this.mc.level)}},{key:"play",value:function(t){this.stopAllAudioBuffers(),this.playNow(t)}},{key:"stop",value:function(){this.useAudioBuffer?this.stopAudioBuffer(this.mc.recBuffer):this.mbe&&this.mbe.data&&this.mbe.data.pause&&!this.mbe.data.paused&&!this.mbe.data.ended&&this.mbe.data.currentTime&&this.mbe.data.pause()}},{key:"clear",value:function(){this.stop(),this.useAudioBuffer&&this.clearAudioBuffer(this.mc.recBuffer)}},{key:"clearAudioBuffer",value:function(e){t.AUDIO_BUFFERS&&e>=0&&e<t.AUDIO_BUFFERS.length&&t.AUDIO_BUFFERS[e]&&(t.AUDIO_BUFFERS[e].clear(),t.AUDIO_BUFFERS[e]=null)}},{key:"clearAllAudioBuffers",value:function(){var e=this;t.AUDIO_BUFFERS&&t.AUDIO_BUFFERS.forEach((function(t,n){return e.clearAudioBuffer(n)}))}},{key:"countActiveBuffers",value:function(){return t.AUDIO_BUFFERS?t.AUDIO_BUFFERS.reduce((function(t,e){return t+e?1:0}),0):0}},{key:"stopAllAudioBuffers",value:function(){t.AUDIO_BUFFERS&&t.AUDIO_BUFFERS.forEach((function(t){return t?t.stop():null}))}},{key:"stopAudioBuffer",value:function(e){t.AUDIO_BUFFERS&&e>=0&&e<t.AUDIO_BUFFERS.length&&t.AUDIO_BUFFERS[e]&&t.AUDIO_BUFFERS[e].stop()}},{key:"checkVisualComponentBounds",value:function(t){}},{key:"setVisualComponentVisible",value:function(t){}},{key:"linkTo",value:function(t){this.bx=t,this.bx&&this.$visualComponent&&this.bx.setHostedComponent(this.$visualComponent)}}],n&&rn(e.prototype,n),r&&rn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(on.prototype,{mc:null,ps:null,bx:null,$visualComponent:null,useAudioBuffer:!1,mbe:null}),on.REC_ENABLED="undefined"!=typeof MediaRecorder&&"undefined"!=typeof navigator,on.REC_ENABLED&&(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),on.AUDIO_BUFFERS=on.REC_ENABLED?[]:null;var sn=on;function an(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var cn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.players=[]}var e,n,i;return e=t,n=[{key:"createActiveMediaPlayer",value:function(t,e,n){var i=null;switch(t.type){case"RECORD_AUDIO":if(t.length<=0||t.length>=ye.MAX_RECORD_LENGTH)break;case"PLAY_RECORDED_AUDIO":if(t.recBuffer<0||t.recBuffer>=10)break;case"PLAY_AUDIO":case"PLAY_MIDI":case"PLAY_VIDEO":i=new sn(t,e,n)}return null!==i&&this.players.push(i),i}},{key:"getActiveMediaPlayer",value:function(t,e,n){return this.players.find((function(e){return e.mc===t||e.mc.isEquivalent(t)}))||this.createActiveMediaPlayer(t,e,n)}},{key:"removeActiveMediaPlayer",value:function(t){var e=this.players.findIndex((function(e){return e.mc===t}));e>=0&&(this.players[e].clear(),this.players.splice(e,1))}},{key:"realizeAll",value:function(){this.players.forEach((function(t){return t.realize()}))}},{key:"stopAll",value:function(t){void 0===t&&(t=-1),this.players.forEach((function(e){(-1===t||null!==e.mc&&e.mc.level<=t)&&e.stop()}))}},{key:"removeAll",value:function(){this.players.forEach((function(t){return t.clear()})),this.players.length=0,sn.prototype.clearAllAudioBuffers()}}],n&&an(e.prototype,n),i&&an(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(cn.prototype,{players:[]});var ln=cn;function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function hn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pn(){return pn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=dn(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},pn.apply(this,arguments)}function dn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bn(t)););return t}function vn(t,e){return vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vn(t,e)}function yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=bn(t);if(e){var r=bn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gn(this,n)}}function gn(t,e){if(e&&("object"===un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mn(t)}function mn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bn(t){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bn(t)}var wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vn(t,e)}(s,t);var e,n,r,o=yn(s);function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(hn(this,s),(e=o.call(this)).ps=t,null!==n&&(e.name=n),e.options=r,e.options.skinId&&(e.skinId=e.options.skinId),!s.registerStyleSheet(e.skinId,t)){var a=e._getStyleSheets("default"),c=e._getStyleSheets("twoThirds");c.length>0&&(a+=" @media (max-width:".concat(e.twoThirdsMedia.width,"px),(max-height:").concat(e.twoThirdsMedia.height,"px){").concat(c,"}"));var l=e._getStyleSheets("half");l.length>0&&(a+=" @media (max-width:".concat(e.halfMedia.width,"px),(max-height:").concat(e.halfMedia.height,"px){").concat(l,"}")),ue(a.replace(/\.ID/g,".".concat(e.skinId)),t)}var u="";e.$div=i()("<div/>",{class:e.skinId}),e.$playerCnt=i()("<div/>",{class:"JClicPlayerCnt"}),e.$progress=i()("<progress/>",{class:"progressBar"}).css({display:"none"}),e.$waitPanel=i()("<div/>").css({display:"none","background-color":"rgba(255, 255, 255, .60)","z-index":99}).append(i()("<div/>",{class:"waitPanel"}).css({display:"flex","flex-direction":"column"}).append(i()("<div/>",{class:"animImgBox"}).append(i()(e.waitImgBig),i()(e.waitImgSmall))).append(e.$progress)),e.$playerCnt.append(e.$waitPanel),e.buttons=Nt(s.prototype.buttons),e.counters=Nt(s.prototype.counters),e.msgArea=Nt(s.prototype.msgArea),e.$dlgOverlay=i()("<div/>",{class:"dlgOverlay"}).css({"z-index":98,position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"none","background-color":"rgba(30,30,30,0.7)"}).on("click",(function(){return e._isModalDlg||e._closeDlg(!0),!1}));var h=i()("<div/>",{class:"dlgDiv",role:"dialog","aria-labelledby":t.getUniqueId("ReportsLb"),"aria-describedby":t.getUniqueId("ReportsCnt")}).css({display:"inline-block",position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}).on("click",(function(){return!1}));return e.$dlgMainPanel=i()("<div/>",{class:"dlgMainPanel",id:t.getUniqueId("ReportsCnt")}),e.$dlgBottomPanel=i()("<div/>",{class:"dlgBottomPanel",role:"navigation"}),e.$div.append(e.$playerCnt,e.$dlgOverlay.append(h.append(e.$dlgMainPanel,e.$dlgBottomPanel))),u=pt("JClic logo"),e.$infoHead=i()("<div/>",{class:"infoHead"}).append(i()("<div/>",{class:"headTitle unselectableText"}).append(i()(e.appLogo,{"aria-label":u}).css({width:"1.5em",height:"1.5em","vertical-align":"bottom"}).on("dblclick",(function(){yt("all"),gt("trace",'Log level set to "trace"')}))).append(i()("<span/>").html("JClic.js"))).append(i()("<p/>").css({"margin-top":0,"margin-left":"3.5em"}).append(i()("<a/>",{href:"http://clic.xtec.cat/repo/index.html?page=info"}).html("http://clic.xtec.cat")).append(i()("<br>")).append(i()("<span/>").html("".concat(pt("Version")," ").concat(ye.VERSION)))),e.$reportsPanel=i()("<div/>",{class:"reportsPanel",role:"document"}),u=pt("Copy data to clipboard"),e.$copyBtn=i()("<button/>",{title:u,"aria-label":u}).append(i()(e.copyIcon).css({width:"26px",height:"26px"})).on("click",(function(){Z([new U({"text/plain":"===> ".concat(pt("The data has been copied in HTML format. Please paste them into a spreadsheet or in a rich text editor")," <==="),"text/html":e.$reportsPanel.html()})]).then((function(){return e.$copyBtn.parent().append(i()("<div/>",{class:"smallPopup"}).html(pt("The data has been copied to clipboard")).fadeIn().delay(3e3).fadeOut((function(){i()(this).remove()})))})).catch((function(t){return e.$copyBtn.parent().append(i()("<div/>",{class:"smallPopup"}).html("ERROR: Unable to write data into the clipboard: ".concat(t)).fadeIn().delay(3e3).fadeOut((function(){i()(this).remove()})))}))})),u=pt("Close"),e.$closeDlgBtn=i()("<button/>",{title:u,"aria-label":u}).append(i()(e.closeDialogIcon).css({width:"26px",height:"26px"})).on("click",(function(){return e._closeDlg(!0)})),u=pt("OK"),e.$okDlgBtn=i()("<button/>",{title:u,"aria-label":u}).append(i()(e.okDialogIcon).css({width:"26px",height:"26px"})).on("click",(function(){return e._closeDlg(!0)})),u=pt("Cancel"),e.$cancelDlgBtn=i()("<button/>",{title:u,"aria-label":u}).append(i()(e.closeDialogIcon).css({width:"26px",height:"26px"})).on("click",(function(){return e._closeDlg(!1)})),s.skinStack.push(mn(e)),e}return e=s,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"default"===t?this.basicCSS+this.waitAnimCSS+this.reportsCSS:""}},{key:"attach",value:function(t){this.detach(),null!==t&&null!==t.skin&&t.skin.detach(),this.player=t,this.$playerCnt.prepend(t.$div),this.setSkinSizes(),t.$mainContainer.append(this.$div)}},{key:"setSkinSizes",value:function(t){var e,n={},i=(null===(e=this.player)||void 0===e?void 0:e.$topDiv.height())||0,r=this.player.fullScreenChecked?"inherit":null;void 0===t&&(t=!(!document||!document.fullscreenElement)),ae(t?"100vw":this.ps.options.minWidth,n,"min-width",r),ae(t?"100vh":this.ps.options.minHeight,n,"min-height",r),ae(t?"100vw":this.ps.options.maxWidth,n,"max-width",r),ae(t?"100vh":this.ps.options.maxHeight,n,"max-height",r),ae(t?"100vw":this.ps.options.width,n,"width","100%"),ae(t?"100vh":this.ps.options.height,n,"height",i>0?"100%":"100vh"),this.$div.css(n)}},{key:"detach",value:function(){null!==this.player&&(this.player.$div.remove(),this.$div.detach(),this.player=null)}},{key:"updateContent",value:function(t){if(this.$msgBoxDivCanvas){var e=this.$msgBoxDivCanvas.get(-1).getContext("2d");e.clearRect(0,0,e.canvas.clientWidth,e.canvas.clientHeight),this.msgBox.update(e,t)}return pn(bn(s.prototype),"updateContent",this).call(this)}},{key:"resetAllCounters",value:function(t){i().each(this.counters,(function(e,n){null!==n&&(n.value=0,n.countDown=0,n.enabled=t,n.refreshDisplay())}))}},{key:"setWaitCursor",value:function(t){if(void 0===t)this.$waitPanel&&this.$waitPanel.css({display:this.waitCursorCount>0?"initial":"none"});else{switch(t){case!0:this.waitCursorCount++;break;case!1:--this.waitCursorCount<0&&(this.waitCursorCount=0);break;case"reset":this.waitCursorCount=0}this.setWaitCursor()}}},{key:"setProgress",value:function(t,e){this.$progress&&(this.currentProgress=t,t<0?this.$progress.css({display:"none"}):(e&&(this.maxProgress=e,this.$progress.attr("max",e).css({display:"initial"})),this.$progress.attr("value",t)),gt("trace","Progress: ".concat(this.currentProgress,"/").concat(this.maxProgress)))}},{key:"incProgress",value:function(t){this.currentProgress>=0&&this.setProgress(this.currentProgress+(t||1))}},{key:"showHelp",value:function(t){}},{key:"showDlg",value:function(t,e){var n=this;return new Promise((function(i,r){n._dlgOkValue="ok",n._dlgCancelValue="cancelled",n._isModalDlg=t,n.$dlgMainPanel.children().detach(),n.$dlgBottomPanel.children().detach(),e.main&&n.$dlgMainPanel.append(e.main),e.bottom&&n.$dlgBottomPanel.append(e.bottom),n._closeDlg=function(t){t&&i?i(n._dlgOkValue):!t&&r&&r(n._dlgCancelValue),n.$dlgOverlay.css({display:"none"}),n.enableMainButtons(!0),n._closeDlg=s.prototype._closeDlg},n.enableMainButtons(!1),n.$dlgOverlay.css({display:"initial"})}))}},{key:"enableMainButtons",value:function(t){this.$playerCnt.find("button").attr("tabindex",t?"0":"-1")}},{key:"_closeDlg",value:function(){}},{key:"showReports",value:function(t){return this.$reportsPanel.html(this.$printReport(t)),this.showDlg(!1,{main:[this.$infoHead,this.$reportsPanel],bottom:[this.$copyBtn,this.$closeDlgBtn]})}},{key:"$printReport",value:function(t){var e=[];if(t){var n=t.getData(),r=new Date(n.started);e.push(i()("<div/>",{class:"subTitle",id:this.ps.getUniqueId("ReportsLb")}).html(pt("Current results")));var o=i()("<table/>",{class:"JCGlobalResults"});o.append(re.doubleCell(pt("Session started:"),"".concat(r.toLocaleDateString()," ").concat(r.toLocaleTimeString())),re.doubleCell(pt("Reports system:"),"".concat(pt(n.descriptionKey)," ").concat(n.descriptionDetail))),n.userId?o.append(re.doubleCell(pt("User:"),n.userId)):n.user&&o.append(re.doubleCell(pt("User:"),n.user)),n.sequences>0?(n.sessions.length>1&&o.append(re.doubleCell(pt("Projects:"),n.sessions.length)),o.append(re.doubleCell(pt("Sequences:"),n.sequences),re.doubleCell(pt("Activities done:"),n.activitiesDone),re.doubleCell(pt("Activities played at least once:"),"".concat(n.playedOnce,"/").concat(n.reportable," (").concat(kt(n.ratioPlayed/100),")"))),n.activitiesDone>0&&(o.append(re.doubleCell(pt("Activities solved:"),"".concat(n.activitiesSolved," (").concat(kt(n.ratioSolved/100),")"))),n.actScore>0&&o.append(re.doubleCell(pt("Partial score:"),"".concat(kt(n.partialScore/100)," ").concat(pt("(out of played activities)"))),re.doubleCell(pt("Global score:"),"".concat(kt(n.globalScore/100)," ").concat(pt("(out of all project activities)")))),o.append(re.doubleCell(pt("Total time in activities:"),xt(1e3*n.time)),re.doubleCell(pt("Actions done:"),n.actions))),e.push(o),n.sessions.forEach((function(t){if(t.sequences.length>0){var r=i()("<table/>",{class:"JCDetailed"});e.push(i()("<p/>").html(n.sessions.length>1?"".concat(pt("Project")," ").concat(t.projectName):"")),r.append(i()("<thead/>").append(i()("<tr/>").append(re.th(pt("sequence")),re.th(pt("activity")),re.th(pt("OK")),re.th(pt("actions")),re.th(pt("score")),re.th(pt("time"))))),t.sequences.forEach((function(t){var e=i()("<tr/>").append(i()("<td/>",{rowspan:t.activities.length}).html(t.sequence));t.activities.forEach((function(t){if(t.closed)e.append(re.td(t.name)),e.append(t.solved?re.td(pt("YES"),"ok"):re.td(pt("NO"),"no")),e.append(re.td(t.actions)),e.append(re.td(kt(t.precision/100))),e.append(re.td(xt(1e3*t.time)));else{e.append(re.td(t.name,"incomplete"));for(var n=0;n<4;n++)e.append(re.td("-","incomplete"))}r.append(e),e=i()("<tr/>")}))})),r.append(i()("<tr/>").append(re.td(pt("Total:")),re.td("".concat(t.played," (").concat(kt(t.ratioPlayed/100),")")),re.td("".concat(t.solved," (").concat(kt(t.ratioSolved/100),")")),re.td(t.actions),re.td(kt(t.score/100)),re.td(xt(1e3*t.time)))),e.push(r)}}),this)):e.push(i()("<p/>").html(pt("No activities done!")))}return e}},{key:"enableCounter",value:function(t,e){this.counters[t]&&this.counters[t].setEnabled(e)}},{key:"doLayout",value:function(){var t=this;this.player.doLayout(),this.$msgBoxDiv&&window.setTimeout((function(){t.$msgBoxDivCanvas&&t.$msgBoxDivCanvas.remove();var e=t.$msgBoxDiv.outerWidth(),n=t.$msgBoxDiv.outerHeight();null!==t.$msgBoxDivCanvas&&t.msgBox.dim.widht===e&&t.msgBox.dim.height===n||(t.$msgBoxDivCanvas=i()('<canvas width="'.concat(e,'" height="').concat(n,'"/>')),t.msgBox.setBounds(new Fe(0,0,e+1,n)),t.msgBox.buildAccessibleElement(t.$msgBoxDivCanvas,t.$msgBoxDiv)),t.$msgBoxDiv.append(t.$msgBoxDivCanvas),t.updateContent()}),0)}},{key:"fit",value:function(){return this.doLayout(),new Me(this.$div.width(),this.$div.height())}},{key:"setScreenFull",value:function(t){if(document&&document.fullscreenEnabled&&(!0===t&&!document.fullscreenElement||!1===t&&!document.fullscreenElement||!0!==t&&!1!==t)){var e=!!document.fullscreenElement;if(document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var n=this.player.$mainContainer.get(-1);n&&n.requestFullscreen&&n.requestFullscreen()}this.player.fullScreenChecked=!0,this.setSkinSizes(!e)}}},{key:"actionStatusChanged",value:function(t){t.name&&this.buttons[t.name]&&this.setEnabled(this.buttons[t.name],t.enabled)}},{key:"setEnabled",value:function(t,e){t&&e?t.removeAttr("disabled"):t&&t.attr("disabled",!0)}},{key:"equals",value:function(t){return t&&this.name===t.name&&this.ps===t.ps}},{key:"getMsgBox",value:function(){return this.msgBox}}],r=[{key:"registerClass",value:function(t,e){return s.CLASSES[t]=e,e}},{key:"registerStyleSheet",value:function(t,e){var n=!1,i=le(e);i.__JClicID||(i.__JClicID="SK".concat(s.lastId++));var r=s.rootStyles[i.__JClicID];return r||(r=[],s.rootStyles[i.__JClicID]=r),r.indexOf(t)<0?(gt("trace",'Stylesheet "'.concat(t,'" has been registered for root node labeled as "').concat(i.__JClicID,'"')),r.push(t)):n=!0,n}},{key:"getSkin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("@"===(t=t||"default").charAt(0,1)&&".xml"===t.substr(-4)&&(t=t.substr(1,t.length-5)),t&&e){var i=s.skinStack.find((function(n){return n.name===t&&n.ps===e}));if(i)return i}var r=s.CLASSES[t];if(!r){var o=e.project.mediaBag.getElement(t,!1);o&&o.data&&((n=Object.assign({},n,o.data)).skinId="JClic-".concat(t.replace(".xml",""))),!e.zip&&"edu.xtec.jclic.skins.BasicSkin"===n.class&&n.image&&e.project.mediaBag.getElement(n.image,!1)&&e.project.mediaBag.getElement(n.image,!1).data?r=s.CLASSES.custom:(gt("warn","Unknown skin class: ".concat(t)),r=s.CLASSES.default)}return new r(e,t,n)}}],n&&fn(e.prototype,n),r&&fn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(Ge);wn.skinStack=[],wn.rootStyles={},wn.lastId=1,wn.CLASSES={},Object.assign(wn.prototype,{skinId:"JClicBasicSkin",$div:null,$playerCnt:null,name:"default",options:{},$waitPanel:null,$progress:null,currentProgress:-1,maxProgress:0,msgBox:null,$msgBoxDiv:null,$msgBoxDivCanvas:null,$dlgOverlay:null,$dlgMainPanel:null,$dlgBottomPanel:null,$infoHead:null,$copyBtn:null,$closeDlgBtn:null,$okDlgBtn:null,$cancelDlgBtn:null,_dlgOkValue:null,_dlgCancelValue:null,_isModalDlg:!1,$reportsPanel:null,buttons:{prev:null,next:null,return:null,reset:null,info:null,help:null,audio:null,about:null,fullscreen:null,close:null},counters:{actions:null,score:null,time:null},msgArea:{main:null,aux:null,mem:null},player:null,ps:null,waitCursorCount:0,basicCSS:".ID {\n  width: 100%;\n  background-color: #3F51B5;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n}\n\n.ID .JClicPlayerCnt {\n  background-color: lightblue;\n  margin: 18px;\n  -webkit-flex-grow: 1;\n  flex-grow: 1;\n  position: relative;\n}\n\n.ID .JClicPlayerCnt>div {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.ID button:not(.StockBtn) {\n  background: transparent;\n  padding: 0;\n  border: none;\n  box-shadow: none;\n  text-shadow: none;\n}\n\n.ID .unselectableText {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.ID .progressBar {\n  width: 250px\n}\n",waitAnimCSS:".ID .waitPanel {\n  display: -webkit-flex;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-align-items: center;\n  align-items: center;\n}\n\n.ID .animImgBox {\n  position: relative;\n  width: 300px;\n  height: 300px;\n  max-width: 80%;\n  max-height: 80%;\n}\n\n.ID .animImgBox svg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n}\n\n.ID #waitImgBig {\n  animation-duration: 0.8s;\n  animation-name: rotate-right;\n}\n\n@keyframes rotate-right {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(1turn);\n  }\n}\n\n.ID #waitImgSmall {\n  animation-duration: 0.6s;\n  animation-name: rotate-left;\n}\n\n@keyframes rotate-left {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(-1turn);\n  }\n}\n",waitImgBig:'<svg id="waitImgBig" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">\n  <path fill="#3F51B5" d="m 65.99,40.19 c -0.42,5.33 7.80,4.94 8.11,0.20 C 74.50,34.37 66.35,8.59 42.92,7.98 15.90,7.29 9.96,29.50 9.94,39.41 15.33,-1.66 68.61,7.048 65.99,40.19 Z" />\n</svg>\n',waitImgSmall:'<svg id="waitImgSmall" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">\n  <path fill="#3F51B5" d="m 57.00,39.43 c -0.28,-3.53 5.16,-3.27 5.37,-0.13 0.26,3.99 -5.13,21.04 -20.63,21.44 C 23.85,61.19 19.93,46.50 19.92,39.94 23.48,67.11 58.73,61.35 57.00,39.43 Z" />\n</svg>\n',reportsCSS:".ID .dlgDiv {\n  background-color: #efefef;\n  color: #757575;\n  font-family: Roboto, sans-serif;\n  font-size: 10pt;\n  line-height: normal;\n}\n\n.ID .dlgDiv a, a:visited, a:active, a:hover {\n  text-decoration: none;\n  color: inherit;\n}\n\n.ID .dlgMainPanel {\n  padding: 1em 2em;\n  max-height: calc(100vh - 8em);\n  max-width: calc(100vw - 2em);\n  min-width: 20em;\n  overflow: auto;\n}\n\n.ID .dlgMainPanel .headTitle {\n  font-size: 2.5em;\n  font-weight: bold;\n  margin: auto;\n}\n\n.ID .dlgMainPanel .subTitle {\n  font-size: 1.4em;\n  font-weight: bold;\n  margin-bottom: 0.5em;\n}\n\n.ID .dlgMainPanel p {\n  font-size: 1.1em;\n  margin-bottom: 0.5em;\n}\n\n.ID .dlgMainPanel table {\n  table-layout: fixed;\n  width: 40em;\n  margin: 0.5em 0 1.7em 0;\n  border-collapse: collapse;\n}\n\n.ID .dlgMainPanel select {\n  min-width: 20em;\n  font-size: 1.2em;\n  font-family: Roboto, sans-serif;\n  color: #757575;\n}\n\n.ID .dlgMainPanel input {\n  margin-left: 1em;\n  font-size: 1.2em;\n  font-family: Roboto, sans-serif;\n  border-color: lightgray;\n}\n\n.ID .infoHead {\n  padding: 1em 0em 0.5em;\n}\n\n.ID .JCGlobalResults td {\n  padding: 0.4em;\n  border-bottom: 1px solid #b6b6b6;\n}\n\n.ID .JCGlobalResults td:first-child {\n  font-weight: 600;\n  width: 14em;\n}\n\n.ID .JCDetailed td, th {\n  border-bottom: 1px solid #b6b6b6;\n  padding: 0.3em 0.4em;\n  vertical-align: top;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.ID .JCDetailed thead {\n  font-weight: 600;\n}\n\n.ID .JCDetailed th:first-child {\n  width: 7em;\n}\n\n.ID .JCDetailed th:nth-last-child(4) {\n  width: 4em;\n}\n\n.ID .JCDetailed th:nth-last-child(-n+3) {\n  width: 4.1em;\n  text-align: right;\n}\n\n.ID .JCDetailed td:nth-last-child(-n+3) {\n  text-align: right;\n}\n\n.ID .JCDetailed .ok {\n  color: #4bae4f;\n  font-weight: 600;\n}\n\n.ID .JCDetailed .no {\n  color: #f34235;\n  font-weight: 600;\n}\n\n.ID .JCDetailed tr:last-child {\n  font-weight: bold;\n}\n\n.ID .JCDetailed .incomplete {\n  font-style: italic;\n}\n\n.ID .dlgBottomPanel {\n  height: 3.5em;\n  background-color: white;\n  padding: 0.5em;\n  font-weight: bold;\n  text-align: right;\n  border-top: 1px solid #eee;\n  position: relative;\n}\n\n.ID .dlgBottomPanel .smallPopup {\n  background-color: #222;\n  color: #ddd;\n  padding: 0.5em;\n  font-size: 0.9em;\n  position: absolute;\n  right: 6em;\n  top: 1em;\n}\n\n.ID .dlgBottomPanel button {\n  display: inline-block;\n  padding: 10px;\n  cursor: pointer;\n  line-height: 0;\n}\n\n.ID .dlgBottomPanel button:hover {\n  background-color: #eee;\n  border-radius: 80px;\n}\n\n.ID .dlgBottomPanel button:active {\n  background-color: #b3e5fc;\n}\n",closeDialogIcon:'<svg fill="#757575" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />\n</svg>\n',okDialogIcon:'<svg fill="#757575" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />\n</svg>\n',copyIcon:'<svg fill="#757575" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />\n</svg>\n',appLogo:'<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n  <g transform="matrix(.02081 0 0-.02081 5 62.33)">\n    <path d="m1263 1297l270 1003 996-267-267-990c-427-1583-2420-1046-1999 519 3 11 999-266 999-266z" fill="none" stroke="#9d6329" stroke-linejoin="round" stroke-linecap="round" stroke-width="180" stroke-miterlimit="3.864" />\n    <path d="m1263 1297l270 1003 996-267-267-990c-427-1583-2420-1046-1998 519 3 11 999-266 999-266" fill="#f89c0e" />\n    <path d="m357 2850l1000-268-267-992-1000 266 267 994z" fill="none" stroke="#86882b" stroke-linejoin="round" stroke-linecap="round" stroke-width="180" stroke-miterlimit="3.864" />\n    <path d="m357 2850l1000-268-267-992-1000 266 267 994" fill="#d9e70c" />\n  </g>\n</svg>\n',halfMedia:{width:376,height:282},twoThirdsMedia:{width:420,height:315}});var kn=wn;function An(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var xn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,n&&(this.file=n)}var e,n,i;return e=t,(n=[{key:"setProperties",value:function(t){var e=this;return he(t.get(0).attributes,(function(t,n){switch(t){case"type":e.type=n;break;case"file":e.file=Qt(n);break;case"params":e.externalParam=Qt(n);break;case"pFrom":e.absLocationFrom=n;break;case"buffer":e.recBuffer=Number(n);break;case"level":case"from":case"to":case"length":e[t]=Number(n);break;case"px":case"py":null===e.absLocation&&(e.absLocation=new De(0,0)),"px"===t?e.absLocation.x=Number(n):e.absLocation.y=Number(n);break;case"stretch":case"free":case"catchMouseEvents":case"loop":case"autostart":e[t]=mt(n)}})),this}},{key:"getAttributes",value:function(){return qt(this,["type","file","externalParam","absLocation","absLocationFrom","recBuffer","level|1","from","to","length","stretch","free","catchMouseEvents","loop","autostart"])}},{key:"setAttributes",value:function(t){return zt(this,t,["type","file","externalParam",{key:"absLocation",fn:De},"absLocationFrom","recBuffer","level","from","to","length","stretch","free","catchMouseEvents","loop","autostart"])}},{key:"isEquivalent",value:function(t){return this.type===t.type&&(this.file===t.file||null!==this.file&&null!==t.file&&this.file.toLocaleLowerCase()===t.file.toLocaleLowerCase())&&this.from===t.from&&this.to===t.to&&this.recBuffer===t.recBuffer}},{key:"getDescription",value:function(){var t="".concat(this.type);return this.file?t="".concat(t," ").concat(this.file).concat(this.from>=0?" from:".concat(this.from):"").concat(this.to>=0?" to:".concat(this.to):""):this.externalParam&&(t="".concat(t," ").concat(this.externalParam)),t}},{key:"toString",value:function(){return"".concat(this.type).concat(this.file?" ".concat(this.file):"")}},{key:"getIcon",value:function(){var e=null;switch(this.type){case"PLAY_AUDIO":case"PLAY_RECORDED_AUDIO":e="audio";break;case"RECORD_AUDIO":e="mic";break;case"PLAY_VIDEO":e="movie";break;case"PLAY_MIDI":e="music";break;case"URL":e="url";break;default:e="generic"}return e?t.ICONS[e]:null}}])&&An(e.prototype,n),i&&An(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(xn.prototype,{type:"UNKNOWN",level:1,file:null,externalParam:null,from:-1,to:-1,length:3,recBuffer:0,stretch:!1,free:!1,absLocation:null,absLocationFrom:null,catchMouseEvents:!1,loop:!1,autoStart:!1});var Cn={generic:'<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg">\n  <path d="M28.8 12L28 8H10v34h4V28h11.2l.8 4h14V12z" />\n</svg>\n',audio:'<svg fill="#000000" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />\n</svg>\n',movie:'<svg fill="#000000" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg">\n  <path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" />\n</svg>\n',mic:'<svg fill="#000000" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg">\n  <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" />\n</svg>\n',music:'<svg fill="#000000" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg">\n  <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />\n</svg>\n',url:'<svg fill="#000000" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg">\n  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" />\n</svg>\n'};xn.ICONS={},i().each(Cn,(function(t,e){var n=new Image;n.src=se(e),xn.ICONS[t]=n}));var Sn=xn;function On(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var En=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,n&&(Yt(n,"data:")?this.audio=new Audio(n):this.file=n)}var e,n,i;return e=t,(n=[{key:"setProperties",value:function(t){return this.file=t.attr("file"),this.enabled=Et(t.attr("enabled")),this}},{key:"getAttributes",value:function(){return qt(this,["enabled|".concat(2),"file"])}},{key:"setAttributes",value:function(t){return zt(this,t,["enabled","file"])}},{key:"realize",value:function(t,e){this.audio||null!==this.player||null===this.file||(this.player=new sn(new Sn("PLAY_AUDIO",this.file),e,t),this.player.realize())}},{key:"play",value:function(){this.enabled&&(this.audio?(this.audio.currentTime=0,this.audio.play()):this.player&&this.player.play())}},{key:"stop",value:function(){this.enabled&&(this.audio?this.audio.pause():this.player&&this.player.stop())}}])&&On(e.prototype,n),i&&On(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(En.prototype,{file:null,enabled:2,player:null,audio:null});var Pn=En;function Tn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.elements=Object.assign({},this.elements,e.elements),this.enabled=e.enabled)}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){var e=this;return this.enabled=Et(t.attr("enabled"),this.enabled),t.children().each((function(t,n){var r=n.getAttribute("id");e.elements[r]=new Pn(r),e.elements[r].setProperties(i()(n))})),this}},{key:"getAttributes",value:function(){return qt(this,["enabled|".concat(2),"elements"])}},{key:"setAttributes",value:function(t){return zt(this,t,["enabled",{key:"elements",fn:Pn,group:"object"}])}},{key:"realize",value:function(t,e){i().each(this.elements,(function(n,i){return i.realize(t,e)}))}},{key:"play",value:function(t){if(this.globalEnabled&&this.enabled){var e=this.elements[t];e&&e.enabled&&e.play()}}}],n&&Tn(e.prototype,n),r&&Tn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();_n.MEDIA={start:"data:audio/mpeg;base64,//NAxAARGk5RdUEQANIEZEBAPGPyIAAYAKMY/6EaQn8hP+c/yEb//kITU7oc9Cf6nPnPoT/8nQhCKEEEnDizkAwM8ThYH1Bj/EAYEhyUGghyivv7fn0vtsLdYI0CiTQE+aaqfH3BW37/80LEFhl6nvZfj1ACplLtsfx19gOQfBp7iHeEWRj8WxiLLI6khikjEI9IvsePycfERCSpPJ9s95IbO1O/tRX70XQiOGX+n+hmeb+aMirKxN/IibInf//G3K9PVym7NoL/W2usCkcMT5T/80DEDBcivuJd0lADkXMLoGxcA7ENhPlAY8LMK280iLkhQq80ojkRQCwz/rEsTjjTlMPMu3RWZ2c3dmONON0NVDzDzDzP79Y9PFg9v//oqi4hHyp+7HGl2b///I8VcYAAls9qrCT1Mv/zQsQKFsrCvlzLRNa/FN/jd/HUrGLUa8tKonzDK8+t55alG5sbKYilBExD8Id1ugmp+eKIdSplGpaoxNZiznEU/J9KJmUsqBzPVjJ/+Aif//71QCdv+gE7f//6gICqPAAci1sbgH8/G//zQMQKFfF2qb9ZaAKU9PlY3uHFsAqAXfgZvyyhtTM2fC1zH/8+tFlslODFHjTHsClFqSTfprRCxdzMcppQ8yHsbbEkzpoLvZFBnWt1GBa/+8se/+SPdQe//FIIsAAAba7YbC65AQAf//NCxA0XMh6xv5OIAEIz0mVENAJ0DbwIQjpGYFNAvTSI1ePBuh+MwYk+xib0DA/K5YQadIk+o0Z0UyLmiv+h5bMD1Ro3/3/TSUggmu/+v/7KNL03CcLAh//5dpCqkltAAAqFFpldqAHI//NAxAwXGl7aXYxoABm/nTyF8EwhIPY/DSOKUIQ2WXUzAlFDQXzyRCXBUNUk33XoqQNhyeltWFUL6CKTImv7/vSZNZw0MP6v/v2oFQ5EUR7/1SVyb//E7FkIn9f9NXWQAg47vXRBbzv/80LEChbaYs5f2IAC9rPHK1z/yygqmvwSoaAGvNLr9jCagdVUGyxOpVqpp79lJPf9ZNEttWXTUvf/9azMUgOcZrZPMThF00d7//v///9SnpUlpJJJJJFeLhp3///yKi4QAHWdrdQE07P/80DEChTJvrI+Ro6Oalhjl3DYQyyMpMHHcIbTFNlqYvp6GKBJBYZ89G+PKyt/Q4oCbx9z9b//80CTA+F3zTlSqOz6G0PoVCIItC3/CnwN/xZAvcr/99VSIAEKz7+UABhWz01LyctXJv/zQsQRE5nOvl4WFHISWA9Ybn87+VaIKzA0kk7n33/KHo6qv1QKoNjMTHtX//ocaRCuGg2MP8jbueS9WIWU3NPcenOEv/CbcsVAKiIkATNv/9QAb60qFitrzbcZQ+ixX7169gCfAOpwHf/zQMQeE+Fasl4T0HJRrdobjyh8XBKr80WAqJQaiQPhY7vmJ4///ppkOhOaLMDbgVOwVdYt0SgqM/4hBQO+qglKQAFQM0aPnrrVvpRJLyCYt2amWVGBpcJrSl6ypI4hgoMQk5Di+Yv3//NCxCkP+IpANGYehC+92dkrPJ/1a+z+3/r/sL/6f+6G7BotKqkVeDWsJLMDPP8pf2a4///Jf+VgHuRkfn85h7MIeAY9RE3ZM3IRTyUaGvCJpep52lDPb0nCY5xRqRkEWzDKgw+8Ftdp//NAxEUS42YhgAhHHAG9ZCQjo0VONppYbQStB6qWUv5f591O8bze0/3y//62eUqnWzSn9vNsnOBzK8TN6urr6bcxGukbeqNZjuyIMO5FREnqzI6SVZVcahzgpCwMa561B4M8zjedy6v/80LEVBI7ViYoCEsdN5b7kv/+Rsub5P/X6yz0/JdhcZdZl+/hII/xFYdTSmc0ck3O0055fkc2R+ZgsyZsEagnMwRqkK1xle//6iZh/ITJmiF/yEKT4QyEKEP8hMQl/mNYxv+hn/lKZyn/80DEZxEbPiWICEc9StmmMZW0r1KXR/qYxnX0UpWMZAxQFqoapnCiQwqxihWDAQEBAQEKE6mZGZGTTMiMjTWZHa/aZkZlTRGXojIzL///////8yP85/5k1lspGrWRyNWCggYME4kGJf/zQsR9EkNiDAAARN1MNUkqTEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/zQMSQDcslQAoAR1mqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",click:"data:audio/mpeg;base64,//NAxAASsyJgIUEQAY///gX8///yfyHO/8hCEafoRp3nPQgAAEUAABBCEIT//QhCKQhNGyEIQhCNITU5//OQhCN7f/yEZQAAIynOc5CEIhGnABGY/4gAIQZ4h4h4d3Z2Z9Jba5XWhWP/80LEEBhJOxcfiUAC9BEda+oiKFQsViiMpvHFC98pLjySjUNeKoYxMpwIT21HmHlEhx83A9K5vDAuZUQxzq7nJPgEVWKQZ1Iu5oJH3UpGObWV/MfAgLC4Z/yhP/ULKnqHd/syOQenhOL/80DEChZpZs7rzBgAT3bBWub0T/xNtn9nY5bvQdCA0TvnpXNC7EJ3iRPtebJ//7xK4IAqIii2AKbfkBAJxATDLN7wiUGv6VANBNjqQwGCayGoaBAJaNC79/z5wP2IuJbfZsNFgBVo7P/zQsQLF0lGxvRJhlQVDyEmYldHXJGadquTRs6aYmq9VY1hqqt6xmqts2zGTvGNrl+u1IMBHREJREbkpaFQkFRoa2FYSDvBp6DwSf1lgFqfkQ0JcRCYlKxKg0eEw8sKqgaEogGBH3EZpv/zQMQJEyEudaoIBoAf+HV2UBjoOsP2/IwrkezQ1Y4e2wVxgxlVAqDQUSRUBRU6LrBY1lvxEdUBWBIOnZWOCrvlVnTsltWNOqPP4seUBcKgKpW44m3GkHLjaBS4ohHZdTGi6FXXVo6+//NCxBcNYAYyWAhEAJ3U+j3uXdl1z1Du30fCySCGablvUTrhwggLTomAAmrWsmWY9ym89ZcvlwX/zf+a95ZLwXOar/LNrJ60LUl25Hs58yKRWIjSbt9DCIs0UtF/TOlm2cyNTpKysuCB//NAxD0Rw1YliAhHPdmd9nYYQOsGCgAfmqIAXlnhbNZeUBQvyL/y6NlP/r1LLlEiSPL/7lE9SirM5zxZEwCseMDL330yrtl8/8jJs6mt5dTloYsvNSGbmTkYQhpVpRpCG1yr9YSfr1b/80LEURFLZiWQCEc8v/rLXPzys+Z9z8v+H9qyCMpGLn3bla9qtcxYZXk9cbOUjb8t0q2ytz79ImM1R0ht3QdWK11myihIpt8SZBRAlbWq3CDpDKWUte/VHgJDH6k+lsqSPbRj+pHWWrL/80DEZxKjYh2ICIfhxIKhMBeLPjgKlFRIKjCxIKjCukkFAKCSCxFtgTAQFIkisqIg2EngUVFg8FQCQUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsR3EnAF9kgARgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",actionOk:"data:audio/mpeg;base64,//NAxAAT+gKmPUFoAI81KAANYQZECuQAASjAD820006kC+buYDgGEGEKIcsCYAUQYA6JeI2JmS5wcY5yXL6b1IJpp6kG////9X+h/oaaaadAvpvBA5/9QIDQQOQ+cbQllsQQAKTggvn/80LECxdCcupdjFACwA8cFoNFZuosRJUe3E48kEhWIRueePjSdR4T9XMQ4SwB/BZ1GQNAtHHOPzOFryImV2zlb//rZV/6MYp56IY00sPgvi5vp1NN///3Q4ZlSUVV6wAAHLn//b/+Bv3/80DEChbo7s5fmGgA8cDgPEdPslrmVdkwdsV66+p2vZktFECYbF0sxMc6XTyGfU7omIDWqTLdIdocopcSHkqkN/1OLnGEiTI5lQIHz6F//h8+Aw////SWn6Ai////RQCALJttttthGP/zQsQJFgLXBl+PUAJpUBpuDr/a/Bn7vbuBpTSaJu9C26HLGnV05pymMa+52rjwoQl9HX5xkseQEWn/zR+C+CGcTN1IQsr/O/6N///////zyotv//Ulb+WNu/4a/G/DAGASAsBQ86QpAv/zQMQNFyqWqFWaUACorGJ3w70JwQXdB1Iw8FBR6w8BkLlXmCwSQKbRFEDGyFEFw/LiWNeT8eOSG/++3///5oEpv5wrF/RmoYsz////+yuLZ55GT//yosfyqj5gugANMBv///+Bt0Bw//NCxAsWul7hv49QAIAcsuZ3XnIKHgXVwYS+wjbgGuEvA8WjfAsaQmNk2QkZh5517ceH7uZegsm5y///0VTDzzDz09dev/6IIMKcL8i/5CSjE3/oqRMBZpmk7R/RgAAbjwkkcZrZNKRG//NAxAwW4j6pudpoAwwbDspelxARGBQ5l21KTHGz7RkyVSuLZ5l3/S9SQ1CutfuvPzIvF4HUFzRXNkiXJVH+pv//mvMTVRJGyT6S29LRao2Wqj///UbLJxLHVPBVD9SWyADnc5p6REf/80LECxb6Uoxe3A7SY0MyGLYtINLEx4dXVEEvywRGZ7pcZEtrkjRpam6yOArCCRZNX/W3WOoGKq04z/0I/nt/UCYZf6GfovMahvTn21oZ7KnY4oNhuRFQuLsBID8cKC5qSQAC9j29EzH/80DECxNZYoT+xuAyRLbuBA8WRBNAN0Eq+mboAV7G62xjgCvi7cM0Ov1kOELDyoy/75RGdB8iaMZJ//S9SaPWe8oonsV4o5NO40K5FG2xNQZo78WcFOwcZjQQYvlIW6mGkh0f0ZiOBv/zQsQYE8jiVBDfVogDF7hUFzGQhTgpeTFkKEeXlL8syjVHZ03ZCDR2nSxR7Pq7np3LRaHB9adBZ07r018kdy3tjTX1KiSqekjtoMGlaAKNEYCZkOHzpZziA0FmwmEDZhMwfvxGWFAY3P/zQMQkE5DaRAjW1ohECprRK1TRrKRtJsNpyJrNfLvndF7g+gSnAyt351B5obyX8r/u//////rqgBmlYGs01hNdBQpEQyNoHhEMuUtgytPS01oLy0hu6NVNabzryYxwzfIqvKPaRFls//NCxDAQ+FYw8gjSKH7tHbMxfJlUtVpIB16SI0SEXBsf68/+/L//zfLll/nmj7F/1pcpZ/+Z3Ur5Eq5WpbM9MfPljxeb9Lamv/nXIuOSkVXJVRmzRxLpVUlMiBhOahamKCgmCgSwVXHX//NAxEgRU1YcAABGvSNI0Nzzp5SNpUj5aE3ZUqAvIkhEnnq1D3/yxFqrceAgEVIho8WKlhKVGBUJHjzvOh0JndVbtdYykkFQmdDoaDqCIaLKTEFNRTMuOTkuNaqqqqqqqqqqqqqqqqr/80LEXRFYBf5ICEYAqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",actionError:"data:audio/mpeg;base64,//M4xAAUuVJUAUgYARcXFz4DgFAeKHAeChiIie7u+iaIibgYuAYGcTz3OIhf/Xd38v+J6J7u+gGBiw8P8PDw8PDHRw8/+O6GADo/h78BEQz8HAHh5+v+A4A6H/8AAEfIiZmZBXlicwVCsWj1//M4xAwYWvL/H4goAHY5EADTzSBEDUpfz/OhTMPGC+NAMWAgfAcAgHFSjhZD1PCRAUQFBjMUxMhGGuOVyndnXzvlH2dGLp+jbHsUykMTTFkX/+ror2841v+k//+MIOdv/GUVmvrpkGSqAYta//M4xAkXMsLmN89oAg/iwxc/bCcqY374+ZYv8ms1WUWQHQlTUFCJgbIjvMcd6K1m71G+ttB9Pt32bR6OptTZxtV0l/ov20P3b9/1/1f0dSCkh7FjKTdSRbQKiRLyBKFroXi7uP0CAvGOAWNk//M4xAsXwr7a/mPUwS+O1HXtgEWD0qvqiuk8xOG4QoqkAU5eFUIMYl8WHoK3Hcq2dx5p5fTjLvlFtLucF2SuaciHhslc4JhNnm5XU2pCS6c3n6+3/9GyFsk+xwWUQmSTumm7e5ggAEWsUBor//M4xAsXCrLXHntO7NUoPTkrtfAzt+Vmc1QDhdvOk4mMiMaxzG9AERpgbNKfJVp0/lfOvjfl9SWj5XpoXfIYVep7R0WTaUAGDj1IkMHy1Oyrfnfq2e37/22fJduLdKpFmVawABglJaFVG03L//M4xA0XurK+5HnLTJeQXpCP4L6DAO1L6jOnPOCx/wVBu4nAIHEgOCbXJbP5R/74hGiwND1iw7BYtTsqM6viJ1aoa14o/kdXwsdo2K6nxravl7al1/t+rUDz4J+IDtW7bbVAX+3gDwiUL8lI//M4xA0Xgq7qVnoO+zaBvGmHeGt1WGsEPh7RWPKQT82FEhiWLGeUlRHjRERFE6UUhhATy9J5Lcv+PM+axpVIkaHDqqvi+yUHdjW3sp2vTv+rav9F/Kt+Lm9QJFdnwrvt7SXHLLMAFKoGoNaO//M4xA4UurLyXkDFT5XYo5iQ9ckoWFh61037WowPpb5NVRWlrUmVVqxmNV/b6q+xuJVfY1VVXfDHvnL7TGOFMb6ifdZf0etaP//lZH6FbyuK5MUAYWLKUvoamjS5tZpdNnrWz2ASUXdsckcS//M4xBoUcVJ4IisMydfHkiAUZzmoyajzSOzOf1T9qlFq+ORkFFeC//HxXOxf/PKPG/CNxYO4+WKbl+Lv4VBQU6KKhP/K/+vK3+WXVv/9SobSZ1b/lb9SshjN9S/Upahjf/LMahjv6qx/DpAR//M4xCcS40IEABDN5DMaqqrVVVjWLGPjH7GpWZ/7dqr47Eq/7HQds4duAxGfzkjUTpoLSIv///qn///YxTAwQIGhyP/u7O/3P2eqNZ2k4so4sp2NFAYhnZ2couBNTEFNRTMuOTkuNVVVVVVV//M4xDoKqz1wDACNy1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",finishedOk:"data:audio/mpeg;base64,//NAxAAQiXIEAUIQAPnfO/OdyAYGehP/U5Gqd+c/8785zoBi3QhCMpCVP+SpwM6AYGODH/8TvB+sPiMP5cMCcPygIAg7/lAff4IAgcBCD6ofD4diQbC0WaISi0SB3EAzA8WZgeALXg3/80LEGBoDGyZfglACgsRODRuWFcnMLm+eQEhRVQz5IePy5Icm/2Yn5GLY58hG3/J0JyAkq54WhVHosmkTmr//OYkIx+aejta5yObVf////fbcgJP/8oP//L/+w6tzSgKyRVuaO6jleQb/80DEDBdLJs4/2FABfMefV3NU1/Pu+MiMj5TGccdZM7mtR9poqDaj269WQ7clU5//OzTSgSRYFoL8eoeaaxhw+u9lq/9jn/NY7/3VPohqW+///////5ELQ+cqSm8F1QfSAHmkZP3Rz//zQsQJFgHCul9ZUACtuzlS2auXefrUxQUkTU+etjYpBz++SrehymLQlDIbPScu+uppsoFMTf/5uSiO7kpKKo1ONQ6/NbKkDv8iJj3OE/xEHRQl1Hv//4UPLBeWtoFTaaAttttstQEAgP/zQMQNF1PXDl+BUAJQhUAPuz0DJsKELcVBuf+NDz79ceCoSE/meeYSBfk6fQt91kZOYYxE3/+2YwtnyQxn////0JHMY+w/H5OSN/////zDGf5+p7///////kjSQxXTFGTyENw7gapG//NCxAoVUeLUAYKYABCegFrFga4BpxsoJJHKbdSSNc9rTRNTiRTtofSWUkUt1o19fWkoiIJAGaRYixFlM4yQ2FK7pDOlX6q0Ty0TFQNc910f521f//sEw5VqWAAa0xN/4IJysXXPUXWj//NAxBAYQc7CX9RQAD7L1moNjonkAxWFww4nWd9JCeciFDR6QsKgKiayKccZU7pWdi9jnzTd7C9HzWNZFE6VNY70udouzEPUInt/WdLG0YKntR5SDn/rBWjQpBIJjCnEADG403RAjmT/80LEChYx1rpfU2gCXkzXRRXSZBTHSfAUM4JVGmSJvr92ZalqJzOtY1C+n3qXd7ojHpJVph9KfTv2QF00S62UsnjyUkk+pbH0Uf+akuloBUN9eziVT/Kbf//1pSuJ/YIvIGDjaERizGT/80DEDRciBtzLgWgAnyaG0C1lwTMAJBpi0QiX27oskt/p2pJGx1aanoWQ9R1FMw1JVmtN1vSNE2ZKcL4kwhTIv+7hPkVpum9/54qQNoCB5od9Wc/WVZltv//9olVqRkBpkMgFbWp6pf/zQsQLFGGq0jfYOAJYZ33eO8O4ay/WUDUrPXKa0BSIWhEPEua1Jvfvd1CxL/0T7nGsppoSEjjaf6tN1ZTTR0SRqRO/+K/Ou/9CwVOnmrcSdMqBpY56yFdrrd+BUSsXF/De07+HriXkC//zQMQVEyIO7l9IOAINDw83zXmx47coMuc54Km6W6HL5VI1dHUoFS9CrJ/FZBL1apo8Bec67a3b/1JDQt4iEv/niXtWlQKNhcSXFrNXq9RoxmJPGjO8N0UWAZDR6hQZVGYs4HkcGtuz//NCxCMcqvMKX4VQAp6GEjERDVO0nICRTDDitdHYkPnkRhZTDzS5o/yvFTPc9GLCuTkX7OXt7fseehISK578TUFArC8lNQ06n//2Gg/Jy48bb9TWcmmH//93/Fyy29rQUkjgEwC74QXH//NAxAwTWb76X8xoAtGYil8Sf13FyrazOOzs66VgJUPYvJbKXWr+myS2SrPPf1KWiiiyOpLSWjRTZFlalf//omqn///Bl/gqd4NSP1sCtUboQAq2KfAZcuompqTyWlosplpidkw4Y4D/80LEGRRiJrZdUqAAgAJMBywG+KiSmxrWtlKfMj6SV386x0gTt/1OtvvS0CizI+umWkl/XUbP1ESayKkktX93dfzztT61SAEkgBQEjccjkciAYAa39zxcaPCYCFY9Q550fgIUwErGSDn/80DEIxwS+tZfhWgDSkw83gvvZTK1Iko2tI9rLpf1mZ+b1tMy4Nm06mXyUQY9ZLXyQUJTs9RmYhzjd0y+bppJEj+8v/+81fqQYzTN1ppIW/////+pA0UgaXaVuC5FVLzhMlMyKAyi3P/zQsQNF/I62AGBiABLhOwsg1FMBUmAa4LK0kU0GslRZGmpJb+3on0EzNJjN/Rt+6CJfdTUtj6KkvV+iRcjyBCdC2XzhNFUvstzFYtImJ1Ff9ZRIj59h0HQICe1It//pYprEApJJFaBDP/zQMQJFHJu5l/GaALvVEYd0Zlq2t/CXLznyPVFYKIeRsUnRSrZNn/r6CnqdQ5i8i3q1bKfpGtS0UV2JMeKP6knf2Nf0VaLGLbf//rR0WRKyF4MhrBplw9IE232uwC4QyFzCiYsW86d//NCxBIT0nLqXgpUxo9sRW7llTyJzaqvmIaPi3VgsG/mt9ykwfCQIU3OOY04ehw7/ppOC+OfQ45TbwRmsdOf9V//3NEgtEX//4aVAAFRFv32vuC0ePWVlkuksMhlhMTeSZcTTa6TL1tX//NAxB4T0m7aXgNUnlF5nDuaJdERvfmX6mCXNcKxO/V1USAU/9yGy3Aqp/1gZFJn/1f/82RAAwvUf/9n/4aVAAEIF91+vwCeBTp6TCmP9INghMQii720i+pAnlzzrUX1IHQtju2swb//80LEKRQCbtJeAJqGnOo/ai6SKYMAWbN+pyk9BZgJk//uSoi1brV+z//mZmmHNKZ13/4fAAEADstllgF/v972towZ0QXK8AA+PC5cN0PRTdbHW9k5M9zgqso/zibfk+1ZC/skJF/61jz/80DENROyfrpeA9qODemqMKr/rUHwRS1Nq9SKD//rZIcRZmT//kUEALSZ3D//6vAmzqOlAm8FwxbwFiX8VRMT/DEsPCqRbOw8Q1mIxxtBkkSi3qAOVm6F2/FRWYSyB/bF4bP/YoK6TP/zQsRBE7JuiRpulMRYCzO1V/Bgm+3///oVNQABURf9/bgBP/8U9MW42GQb/AyP4bURvzzGIYvAhJL0x3ooCTlFLZYWlmfqPt+PdVErEQz3RZKDyTFf60vWSP/2GMeX/qsr/+oxmB0RAP/zQMROEzJqxl4CWpcBmBvv9vwBTX/L98zdfopM4GlbpJtgUn1eHHhe8yxjmqcdp+upQEuTdtU3X9x6VTAMv2qIoiG/VYg/GN7/nhJgfH2Qf0qSKab/9STkueh1IDkmklAH5fflAZLq//NCxFwT8m7CXgPall7BM4igvw7JyAbmlbrY2Zmc95UkokD/dw4U/VNjZq2TcStZukKgZTDVrng8v/mRTZa8Yre35WIl+v9boo3/1pprJU2wFQAyBI5tJABr9/77Z/CdRCLoRWqEYrN6//NAxGgUEnKcfgPaq4nSU+eNbpg1JSTemhOK12Eir1L/WdGRPphACdmzWMj7GIgg/nV/2MkNzYiH1f+MUXviFwhf5ESNESoACMgKy22UAf/oZWmPclPEoiClH5cGwN0IZce9FABAWFr/80LEchQJ8p2+BhqSJMm0Y97b+IcHG7exHP1o1ozptGFJY96zeDFv2jvm5WapBNLZ6npCx39f9//xJxaUAGauYYNH0NxP49ytAzAugiwASDuCaDUpRXKKAro0F7oKjNigqK2bCimismz/80DEfRPCbrJeUYsW2bJs07zhUJE83J52vOGiuPNiokv/+//8tONhddJC82Fk8VX//+//+L/+X8vgX38/zyBLzXnwocMyMyN5mLPJsiIzhs/AZfSMyzTJX/zT7ykZlXbe+/dxn2i68f/zQsSJFBiqZBYAXknZ3GPTCDzzqqXjKRMJwaRC8G6IQU2nG4n4GGmXKsyZrv9S/Pz0LNbNUKz3/+L//YfmT5sn3CfNUKp/vzCv+a/PzXF+sMhBLEGQyJlrOq0Ao4kKJILAayo7MqEZp//zQMSUEvNmFAAIzcjp0sip/9jKz0mW6zFUj/RP6r+xkUjlR2Mj/dbbIrGRyodjWKh2MrGEVYys5TKUSGhweBQ8NIQysZWMrlRxEYLh0SRVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVV//NCxKMQi2IeUAhHXVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//NAxLwR22HQAAgKnVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",finishedError:"data:audio/mpeg;base64,/+MgxAAT5BX8AUEoAP///mNkc/////1Oc/6noc/9f///85/0O///r/kI2jf+pCf/Of/6HP/znOc7znPkIQgfFzvIRjhwOChCEIQOB8Ph853yHOc/zvEA4AAAAABF/UgSPmQKhhYBw4f/4yLECxVpXpgBmYgAKgCEXoz6Bj24G4gxlPDKhgAUoFxwtiGufjWFsGbKgF+Fh4noT/8i5uaFcZgLm1i2k0Mbam8ZAiwbYX0nExHIEEx2FBBP9J3S5vA6wAAltAA+pUwHS9e7B4EtiwD/4yDEERexdr1fz2ABlQrFTFPgXqqjQRzMFqGEeDUkEbrrMjtB+lU/tcuj+umyBDN1q/2GlFesgKLdHTqWo7RktruiRwdRlfa8J/BPRN+XHtgb0Y/AzC/2cZdiQgBuTa69W4S8bMAAXP/jIsQNF0k6wVZ5xSYzp4BvjV+T2Udd8R2+On01SiRpX5PGv6QjYpD1nBt8VZ0skMc9QHq1CpqJlnhoqVPKPHZYGqnIypEyWPAo8SPz0OhX//QJmyvHu/o8qM/6CtXSAhKu34FZMGcPy//jIMQLFcmeyX5pRy5R0BZEoNVh/FruKTVBRcR5rUTQpGyFqJx7CzcOcPjqoGcWJjOrcdzfsGXZAsFs2WdUKwcLiEIhWFB7w0GpuTa0XaMGgcqzrQsz/+kNKkIAFLvgP/OonDe+4DCL/+MixA4XgpK9XsKG9sYelKU8J/UGwRrm0l9/tjMjWMAOthrqK45iONNBfxi+hbllz+raE/If6Y91Y8jnb49Kxn0WeTT6ihhKnGOj8LGIiWQHuOogUc/66H/hHf+ZgAISpdgBncq6Fj3n/+MgxAwWYfa9fnqHEiCLPLVweu/9CIz6wGZbXVpry1Kg57ZhtwxXKh82K2giB2guGug/OyF9W1JuQftstdzJ1LPcEKLR5hTreUz/iBxskEVBY+CqAyCgQoz+yuNqlTn/4AmceACjmEH/4yLEDROBjtGfTFACEdnXxxr0lwp2+ghopgB4IjWCiAiL1Fns+pLqPWoKx2ncfG0InzW1JerftHxMpxQ801HHziUMvQeK6+SzxEliW+qFqaEByyhgQELpGQIgqtQ3JzIWch4kp17kEgX/4yDEGxrBdpwBmcgA2HbmH2R4LIKeMtsKwjCc/PT00y9l+qMGDIckAycFqvMfuJz7iPxLEzFQo5sngfD9d/3Lh+njFJYublz8Q5Rf////T2+4Yc+Lz9NurVqf9g+AKTd3AE4qU1E2vP/jIsQLFHFG1N/MMAKBuH8oS/ikp9KqlSqkwegTJgTLjeYlyndKcQSsCSPJJQRk9HC1Mj+l42THqWrK1khp0NFfwKks86SKw6IipGbLX60JBY92Jgpy/gAfjbqATePy62LBPlndI3QLQ//jIMQVEzHK0D5ITaKR7RryvYmOsx1fbM6V2JJnbpavk1iJiS8JPqV6qgWaY6uxhvzoBzN51ktGpofVlW2syZxMO0b3qgp3fgAeIb4DIseOluSeSAlQn7hrzAjZSZuJ1hX4vsT7jPQ//+MixCMTSZ7MPlmQ9/X6VzdY3edjF975aHZclh+kp0dpLevY334aVbI8HpNcncwNu/n4iv+WjdUp78AD9ctNSZuODC31N8HTqGeWmtBbEAMsHqNC8I2hSomoRqXy9S0ceUx3G2Xy1HlX/+MgxDETia7EHnnS35XKZuzIM1elCplWUbSZUyasFtQGBXZtvjOkd7fyKgXdgAP2BBZD9S9RP5NG79jO2pTIwZr7J8G1gzEtzOp2ieBOgOaBuVOqMyrSjT9MjQyjbxO0deP52eZM5EX/4yLEPRPR9rgeeccSHPRatU3MJQt+RHNLSiTFR+5aqgXbiAQBNtgMw1oA6FmGT6BBFIiJwdNzPHg4GwWjwaEZMdZCYHjSgwh4y0x3apZUmcmPvrb6vn+zvD/t5itoX1ejvi2HXytG9Pf/4yDESRRRirQZT1gDn6MGwmcJJfWqPBUiBf4SQhy0VHhgDRhoxv1ZsAhtWpzFYcHZOFihgb4zFC60dOmrlmXJiSomyBZ2YpiZigYKoIYAIGkiMAiwM8MMgCyIACjNhTPqzAnwKNMoKP/jIsRSJSlqhAma0AChCECX2WopEOPhhoiCKtdUFCCgKJA0W01lY2TxupC5HD8td2jhciVYlirC37fwM/kcmq9jHKMSipK977GKSz039KNFCnN8BxNkyKQ7PaifSU06ZWbLXIRrxeNesv/jIMQZFAk6zD/MMAKWQS5DeCUx/Y3lI4WvyH8L5+c/sB9iWul3X4R9zz7SwOgUyMBtTkhABBIUn1CLs///////9YC1KgVL/IbU4pxAdm9RCY22Fl3QDjRdhcbGgh/GwR2i7lo1CmY0/+MixCMT0ZasGMPKX2VNy3/JfvZB7an/a3fEB8Ky4hh6gJUlR8Y0bs8ZsysdHzOS5lQSpSjDL8SjagVdQAPkgaNhAzDy0U7Ny7ewjcdcD9uihn7LI+uRtxwzNFzBvzo+Dh1KUoG4nLxM/+MgxC8TQaK0HnnHLvdpTPyNVqWq8ps87Xc4tp+84odaBg0EhAGhAEm9SAVb+0XZfMCMzNKdBLCfWT9Cl5ZjyQd6VlAraiTVvTti91RulyZBkwXuoV3YXmOkKVn5U0rzPNMp1ltR6t7/4yLEPRQ5lqwYw1ETceczuhocBflPuWRyT5NPfTibxXsKc3HAHohRMAuHFwWYsiboQoSDQaBHij2BTtI1iU2jto6ycFqsuHDPAswsJlcSaDHBypOCRwT6zM81yPX/lTY4KIGgWSGQ4+n/4yDESBLppsg+SYaW///sUgodAxFs3LEahGcMIGORNKMFqJMRseA8gjpVF3QapN5RoQOoQ0DWBwiRkkW4R+n8dpREBICTA00IFzMpEJUo25plEqklOrq6VWSDH6/u3crqCEL0P4bJIP/jIsRXE9ECWADD0lknZeEGlVUAgUCFiDzDzCj4WjRpT2WWWUGKhkz4qKC1QsK/ioqLN9ISFhURmfWKi3//////////QDIVFBIHgZFaTEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqv/jIMRjEaCVZAp5hlCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"},Object.assign(_n.prototype,{elements:{start:new Pn("start",_n.MEDIA.start),click:new Pn("click",_n.MEDIA.click),actionOk:new Pn("actionOk",_n.MEDIA.actionOk),actionError:new Pn("actionError",_n.MEDIA.actionError),finishedOk:new Pn("finishedOk",_n.MEDIA.finishedOk),finishedError:new Pn("finishedError",_n.MEDIA.finishedError)},enabled:2,globalEnabled:!0});var jn=_n;function Bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.project=e,this.authors=[],this.organizations=[],this.revisions=[],this.languages=[],this.locales=[],this.description={},this.tags={}}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){var e=this,n=null,r=[];return t.children().each((function(t,o){switch(o.nodeName){case"title":e.title=o.textContent;break;case"description":n=Rt(o);break;case"descriptions":i()(o).children().each((function(t,e){return r.push(Bt(e))}));break;case"author":e.authors.push(It(Bt(o)));break;case"organization":e.organizations.push(It(Bt(o)));break;case"revision":var s=It(Bt(o));s.date&&(s.date=St(s.date)),e.revisions.push(s);break;case"language":e.languages.push(Ot(o.textContent));break;case"eventSounds":e.eventSounds=new jn,e.eventSounds.setProperties(i()(o));break;case"skin":e.skinFileName=i()(o).attr("file");break;case"descriptors":e.tags=Bt(o,!0),e.tags["#text"]&&(e.tags.other=e.tags["#text"].textContent,delete e.tags["#text"]);break;case"license":e.license=Rt(o);break;case"cover":case"thumb":var a=Rt(o);a.file&&(e[o.nodeName]=a.file)}})),this.buildLocales(),r.forEach((function(t){t.language&&t.text&&(e.description[t.language]=t.text)})),n&&this.languages.length>0&&!this.description[this.languages[0]]&&(this.description[this.languages[0]]=n),this}},{key:"buildLocales",value:function(){var t=this;return this.languages.length>0&&window.Intl&&window.Intl.getCanonicalLocales&&(this.locales=[],this.languages.forEach((function(e){var n=/\(([a-z,A-Z,-]+)\)/.exec(e);if(n&&n.length>1)try{var i=window.Intl.getCanonicalLocales(n[1]);i&&(t.locales=t.locales.concat(i))}catch(t){gt("error","Invalid language: ".concat(e))}}))),this}},{key:"getAttributes",value:function(){return qt(this,["title","description","tags","languages","license","authors","organizations","revisions","cover","thumb","skinFileName","eventSounds"])}},{key:"setAttributes",value:function(t){return zt(this,t,["title","description","tags","languages","license","authors","organizations","revisions","cover","thumb","skinFileName","eventSounds"]),this.revisions&&this.revisions.forEach((function(t){t.date&&(t.date=new Date(t.date))})),this.buildLocales()}}],n&&Bn(e.prototype,n),r&&Bn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Rn.prototype,{project:null,title:"Untitled",authors:null,organizations:null,revisions:null,description:null,languages:null,tags:null,cover:null,thumb:null,license:{type:"by-nc-sa",url:"https://creativecommons.org/licenses/by-nc-sa/4.0"},locales:null,skinFileName:null,eventSounds:new jn});var In=Rn;function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function Mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Nn=function(){function t(e,n){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=e,Dn(n)){case"string":this.sequence=n;break;case"number":this.actNum=n}}var e,n,i;return e=t,n=[{key:"setProperties",value:function(t){return this.id=t.attr("id"),this.action=t.attr("action")||"JUMP",t.attr("tag")&&(this.sequence=Qt(t.attr("tag"))),t.attr("project")&&(this.projectPath=Qt(t.attr("project"))),this}},{key:"getAttributes",value:function(){return qt(this,["id","action","actNum","sequence","projectPath"])}},{key:"setAttributes",value:function(t){var e=this;return["id","action","actNum","sequence","projectPath"].forEach((function(n){Ft(t[n])||(e[n]=t[n])})),this}}],n&&Mn(e.prototype,n),i&&Mn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Nn.prototype,{id:null,action:null,actNum:-1,sequence:null,projectPath:null});var Vn=Nn;function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function Ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fn(){return Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=zn(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Fn.apply(this,arguments)}function zn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wn(t)););return t}function Un(t,e){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Un(t,e)}function $n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Wn(t);if(e){var r=Wn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){if(e&&("object"===qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Wn(t){return Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wn(t)}var Gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Un(t,e)}(o,t);var e,n,i,r=$n(o);function o(t,e,n,i){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(s=r.call(this,t,e)).threshold="number"==typeof n?n:-1,s.time="number"==typeof n?i:-1,s}return e=o,n=[{key:"setProperties",value:function(t){return Fn(Wn(o.prototype),"setProperties",this).call(this,t),void 0!==t.attr("threshold")&&(this.threshold=t.attr("threshold")),void 0!==t.attr("time")&&(this.time=t.attr("time")),this}},{key:"getAttributes",value:function(){return Object.assign(Fn(Wn(o.prototype),"getAttributes",this).call(this),qt(this,["threshold","time"]))}},{key:"setAttributes",value:function(t){var e=this;return Fn(Wn(o.prototype),"setAttributes",this).call(this,t),["threshold","time"].forEach((function(n){Ft(t[n])||(e[n]=t[n])})),this}}],n&&Ln(e.prototype,n),i&&Ln(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Vn);Object.assign(Gn.prototype,{threshold:-1,time:-1});var Jn=Gn;function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Zn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yn(){return Yn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Qn(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Yn.apply(this,arguments)}function Qn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ni(t)););return t}function Xn(t,e){return Xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xn(t,e)}function ti(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ni(t);if(e){var r=ni(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ei(this,n)}}function ei(t,e){if(e&&("object"===Kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ni(t){return ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ni(t)}var ii=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xn(t,e)}(s,t);var e,n,r,o=ti(s);function s(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,t,e)}return e=s,(n=[{key:"setProperties",value:function(t){var e=this;return Yn(ni(s.prototype),"setProperties",this).call(this,t),t.children("jump").each((function(t,n){var r=(new Jn).setProperties(i()(n));"upper"===r.id?e.upperJump=r:"lower"===r.id&&(e.lowerJump=r)})),this}},{key:"getAttributes",value:function(){return Object.assign(Yn(ni(s.prototype),"getAttributes",this).call(this),qt(this,["upperJump","lowerJump"]))}},{key:"setAttributes",value:function(t){var e=this;return Yn(ni(s.prototype),"setAttributes",this).call(this,t),["upperJump","lowerJump"].forEach((function(n){t[n]&&(e[n]=(new Jn).setAttributes(t[n]))})),this}},{key:"resolveJump",value:function(t,e){var n=this;return t>=0&&e>=0&&(null!==this.upperJump&&t>this.upperJump.threshold&&(this.upperJump.time<=0||e<this.upperJump.time)?n=this.upperJump:null!==this.lowerJump&&(t<this.lowerJump.threshold||this.lowerJump.time>0&&e>this.lowerJump.time)&&(n=this.lowerJump)),n}}])&&Zn(e.prototype,n),r&&Zn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(Vn);Object.assign(ii.prototype,{upperJump:null,lowerJump:null});var ri=ii;function oi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var si=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){var e=this;return he(t.get(0).attributes,(function(t,n){switch(t){case"id":e.tag=Qt(n);break;case"name":e.activity=n;break;case"description":case"navButtons":e[t]=n;break;case"delay":e[t]=Number(n)}})),t.children("jump").each((function(t,n){var r=(new ri).setProperties(i()(n));"forward"===r.id?e.fwdJump=r:"back"===r.id&&(e.backJump=r)})),this}},{key:"getAttributes",value:function(){return qt(this,["tag","description","activity","fwdJump","backJump","navButtons","delay"])}},{key:"setAttributes",value:function(t){var e=this;return["tag","description","activity","navButtons","delay"].forEach((function(n){Ft(t[n])||(e[n]=t[n])})),["fwdJump","backJump"].forEach((function(n){t[n]&&(e[n]=(new ri).setAttributes(t[n]))})),this}}],n&&oi(e.prototype,n),r&&oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(si.prototype,{tag:null,description:null,activity:"",fwdJump:null,backJump:null,navButtons:"both",delay:0});var ai=si;function ci(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var li=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.project=e,this.elements=[]}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){var e=this;return t.children("item").each((function(t,n){return e.elements.push((new ai).setProperties(i()(n)))})),this}},{key:"getAttributes",value:function(){return this.elements.map((function(t){return t.getAttributes()}))}},{key:"setAttributes",value:function(t){var e=this;return t.forEach((function(t){return e.elements.push((new ai).setAttributes(t))})),this}},{key:"getElementIndex",value:function(t){return null===t?-1:this.elements.indexOf(t)}},{key:"getElement",value:function(t,e){var n=null;return t>=0&&t<this.elements.length&&(n=this.elements[t],e&&(this.currentAct=t)),n}},{key:"getElementByTag",value:function(t,e){var n=null,i=-1;return t&&(t=Qt(t),this.elements.some((function(e,r){return e.tag===t&&(n=e,i=r),-1!==i})),-1!==i&&e&&(this.currentAct=i)),n}},{key:"getCurrentAct",value:function(){return this.getElement(this.currentAct,!1)}},{key:"hasNextAct",value:function(t){var e=!1,n=this.getCurrentAct();if(n)if(null===n.fwdJump)e=!0;else switch(n.fwdJump.action){case"STOP":break;case"RETURN":e=t;break;default:e=!0}return e}},{key:"hasPrevAct",value:function(t){var e=!1,n=this.getCurrentAct();if(n)if(null===n.backJump)e=!0;else switch(n.backJump.action){case"STOP":break;case"RETURN":e=t;break;default:e=!0}return e}},{key:"getNavButtonsFlag",value:function(){var t="none",e=this.getCurrentAct();return e&&(t=e.navButtons),t}},{key:"getJump",value:function(t,e){var n=this.getCurrentAct(),i=null;if(n){var r=t?n.backJump:n.fwdJump;if(null===r){var o=this.currentAct+(t?-1:1);(o>=this.elements.length||o<0)&&(o=0),i=new Vn("JUMP",o)}else{var s=-1,a=-1;if(null!==e){var c=e.getCurrentSequenceInfo();null!==c&&(s=Math.round(c.tScore),a=Math.round(c.tTime/1e3))}i=r.resolveJump(s,a)}}return i}},{key:"getSequenceForElement",value:function(t){var e=null;if(t>=0&&t<this.elements.length)for(var n=t;null===e&&n>=0;n--)e=this.getElement(n,!1).tag;return e}},{key:"getElementByActivityName",value:function(t){var e=null;if(null!==t)for(var n=0;null===e&&n<this.elements.length;n++){var i=this.getElement(n,!1);i.activity.toLowerCase()===t.toLowerCase()&&(e=i)}return e}},{key:"checkCurrentActivity",value:function(t){var e=this.getCurrentAct();if(null===e||e.activity.toUpperCase()!==t.toUpperCase()){for(var n=0;n<this.elements.length;n++)if(this.getElement(n,!1).activity.toUpperCase()===t.toUpperCase())return this.currentAct=n,!1;return(e=new ai).activity=t,e.fwdJump=new ri("STOP"),e.backJump=new ri("STOP"),this.elements.push(e),this.currentAct=this.elements.length-1,!1}return!0}}],n&&ci(e.prototype,n),r&&ci(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(li.prototype,{elements:null,project:null,currentAct:-1});var ui=li,hi=n(390),fi=n.n(hi);function pi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function di(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vi=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pi(this,t);var r=window&&(window.AudioContext||window.webkitAudioContext);r&&(t.prepareInstrument(i,new r),this.data=e,this.player=new(fi().Player)((function(t){return n.playEvent(t)})),this.player&&this.player.loadArrayBuffer(e))}var e,n,i;return e=t,i=[{key:"prepareInstrument",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!1===t.loadingInstrument&&(t.loadingInstrument=!0,t.audioContext=n,fi().Soundfont.instrument(t.audioContext,e.MIDISoundFontObject||t.MIDISoundFontObject||"".concat(e.MIDISoundFontBase||t.MIDISoundFontBase,"/").concat(e.MIDISoundFontName||t.MIDISoundFontName).concat(e.MIDISoundFontExtension||t.MIDISoundFontExtension)).then((function(e){gt("info","MIDI soundfont instrument loaded"),t.instrument=e})).catch((function(t){gt("error","Error loading soundfont base instrument: ".concat(t))})))}}],(n=[{key:"pause",value:function(){this.player&&(this.player.pause(),this.startedNotes=[])}},{key:"play",value:function(){this.player&&(this.startedNotes=[],this.player.play())}},{key:"paused",get:function(){return this.player&&!this.player.isPlaying()}},{key:"ended",get:function(){return this.player&&this.player.getSongTimeRemaining()<=0}},{key:"currentTime",get:function(){return this.player&&1e3*this.player.getSongTime()||0},set:function(t){this.player&&this.player.skipToSeconds(t/1e3)}},{key:"playEvent",value:function(e){this.player&&t.instrument&&(this.playTo>0&&this.currentTime>=this.playTo?this.pause():"Controller Change"===e.name&&7===e.number?this.mainVolume=e.value/127:"Note on"===e.name&&e.velocity>0?this.startedNotes[e.noteNumber]=t.instrument.play(e.noteName,t.audioContext.currentTime,{gain:this.mainVolume*e.velocity/100*2}):"Note off"===e.name&&e.noteNumber&&this.startedNotes[e.noteNumber]&&(this.startedNotes[e.noteNumber].stop(),delete this.startedNotes[e.noteNumber]))}}])&&di(e.prototype,n),i&&di(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(vi.prototype,{data:null,player:null,playTo:0,mainVolume:1,startedNotes:[]}),vi.audioContext=null,vi.instrument=null,vi.loadingInstrument=!1,vi.MIDISoundFontObject=null,vi.MIDISoundFontBase="https://clic.xtec.cat/dist/jclic.js/soundfonts/MusyngKite",vi.MIDISoundFontName="acoustic_grand_piano",vi.MIDISoundFontExtension="-mp3.js";var yi=vi;function gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bi=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.basePath=e),n&&(this.file=Qt(n),this.name=Qt(n),this.ext=this.file.toLowerCase().split(".").pop(),this.type=this.getFileType(this.ext),"gif"===this.ext&&this.checkAnimatedGif()),i&&(this.zip=i),this.timeout=Date.now()+ye.LOAD_TIMEOUT}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){if(this.name=Qt(t.attr("name")),this.file=Qt(t.attr("file")),this.ext=this.file.toLowerCase().split(".").pop(),this.type=this.getFileType(this.ext),"gif"===this.ext){var e=t.attr("animated");void 0===e?this.checkAnimatedGif():this.animated="true"===e}return"font"===this.type&&(this.fontName=this.name===this.file&&this.name.lastIndexOf(".")>0?this.name.substring(0,this.name.lastIndexOf(".")):this.name),this}},{key:"getAttributes",value:function(){return qt(this,["name","file","animated"])}},{key:"setAttributes",value:function(t){var e=this;return["name","file","animated"].forEach((function(n){Ft(t[n])||(e[n]=t[n])})),this.ext=this.file.toLowerCase().split(".").pop(),this.type=this.getFileType(this.ext),"gif"===this.ext&&"undefined"===this.animated&&this.checkAnimatedGif(),"font"===this.type&&(this.fontName=this.name===this.file&&this.name.lastIndexOf(".")>0?this.name.substring(0,this.name.lastIndexOf(".")):this.name),this}},{key:"checkAnimatedGif",value:function(){var t=this,e=new XMLHttpRequest;e.addEventListener("load",(function(){var n=new Uint8Array(e.response),i=n.length;if(71===n[0]&&73===n[1]&&70===n[2]&&56===n[3]){for(var r=0,o=i-3,s=0;r<o&&s<2;++r)if(0===n[r]&&33===n[r+1]&&249===n[r+2]){var a=r+4+n[r+3];if(a+1<i&&0===n[a]&&(44===n[a+1]||33===n[a+1])&&++s>1){t.animated=!0,gt("debug","Animated GIF detected: ".concat(t.file));break}}}else t.animated=!1})),this.getFullPathPromise().then((function(t){e.open("GET",t,!0),e.responseType="arraybuffer",e.send()}))}},{key:"isEmpty",value:function(){return null===this.data}},{key:"getFileType",value:function(t){var e=null;for(var n in ye.FILE_TYPES)if(ye.FILE_TYPES[n].indexOf(t)>=0){e=n;break}return e}},{key:"build",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ye.NODEJS&&(this.data=[],this.ready=!0),e&&(this._whenReady||(this._whenReady=[]),this._whenReady.push(e)),this.data?this.ready&&this._onReady():this.getFullPathPromise().then((function(e){switch(n.type){case"font":var a="ttf"===n.ext?"truetype":"otf"===n.ext?"embedded-opentype":n.ext;ue('@font-face{font-family:"'.concat(n.fontName,'";src:url(').concat(e,') format("').concat(a,'");}'),r),n.data=new Be(n.name),n.ready=!0;break;case"image":n.data=new Image,n.data.addEventListener("load",(function(){n._onReady.call(n)}),{once:!0}),n.data.src=e;break;case"video":n.data=document.createElement(n.type),n.data.addEventListener("canplay",(function(){n._onReady.call(n)}),{once:!0}),n.data.src=e,n.data.load(),n.data.pause();break;case"audio":if(o){var c=t._currentAudioElements[s];c&&c!==n&&(c.data=null,c.ready=!1),t._currentAudioElements[s]=n;var l=t.getAudioPlayer(s);l.src!==e?(gt("trace","Loading static player #".concat(s," with new audio: ").concat(e)),n.data=l,n.ready=!1,l.addEventListener("canplay",(function(){n._onReady.call(n)}),{once:!0}),l.src=e,l.load(),l.pause()):gt("trace","Reusing existing audio in player #".concat(s,": ").concat(e))}else n.ready=!0;break;case"anim":n.data=i()('<object type"application/x-shockwave-flash" width="300" height="200" data="'.concat(e,'"/>')).get(-1),n.ready=!0;break;case"xml":i().get(e,null,null,"xml").done((function(t){var e=t?t.children||t.childNodes:null;n.data=e&&e.length>0?Bt(e[0]):null,n._onReady()})).fail((function(t){gt("error","Error loading ".concat(n.name,": ").concat(t)),n._onReady()}));break;case"midi":var u=new XMLHttpRequest;u.onreadystatechange=function(){4===u.readyState&&(200===u.status?n.data=new yi(u.response,r&&r.options):gt("error","Error loading ".concat(n.name,": ").concat(u.statusText)),n._onReady())},u.open("GET",e,!0),u.responseType="arraybuffer",u.send();break;default:gt("trace","Media currently not supported: ".concat(n.name)),n.ready=!0}n.ready&&n._onReady()})),this}},{key:"checkReady",value:function(){if(this.data&&!this.ready)switch(this.type){case"image":this.ready=!0===this.data.complete;break;case"audio":case"video":case"anim":this.ready=this.data.readyState>=1;break;default:this.ready=!0}return this.ready}},{key:"checkTimeout",value:function(){var t=Date.now()>this.timeout;return t&&gt("warn","Timeout while loading: ".concat(this.name)),t}},{key:"_onReady",value:function(){var t=this;this.ready=!0,this._whenReady&&(this._whenReady.forEach((function(e){return e.call(t,t)})),this._whenReady=null)}},{key:"getFullPath",value:function(){return this._fullPath}},{key:"getFullPathPromise",value:function(){var t=this;return ie(this.basePath,this.file,this.zip).then((function(e){return t._fullPath=ye.NODEJS?e:new URL(e,document.location.href).toString(),t._fullPath}))}}],r=[{key:"getAudioPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t._audioPlayers[e]||(t._audioPlayers[e]=document.createElement("audio")),t._audioPlayers[e]}},{key:"resetAudioElements",value:function(){t._audioPlayers.fill(null),t._currentAudioElements.fill(null)}}],n&&gi(e.prototype,n),r&&gi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();mi(bi,"_audioPlayers",[]),mi(bi,"_currentAudioElements",[]),Object.assign(bi.prototype,{name:"",file:"",fontName:"",basePath:"",zip:null,data:null,ready:!1,_whenReady:null,ext:"",type:null,timeout:0,animated:!1,_fullPath:null});var wi=bi;function ki(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ai=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.project=e,this.elements={}}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){var e=this;return t.children("media").each((function(t,n){var r=new wi(e.project.basePath,null,e.project.zip);r.setProperties(i()(n)),e.elements[r.name]=r})),this}},{key:"getAttributes",value:function(){var t=this;return Object.keys(this.elements).map((function(e){return t.elements[e].getAttributes()}))}},{key:"setAttributes",value:function(t){var e=this;return t.forEach((function(t){var n=new wi(e.project.basePath,null,e.project.zip);n.setAttributes(t),e.elements[n.name]=n})),this}},{key:"getElement",value:function(t,e){t=Qt(t);var n=this.elements[t];return e&&!n&&(n=this.getElementByFileName(t,e)),n}},{key:"getElementByFileName",value:function(t,e){var n=null;if(t){for(var i in t=Qt(t),this.elements)if(this.elements[i].file===t){n=this.elements[i];break}!n&&e&&((n=new wi(this.project.basePath,null,this.project.zip)).name=t,n.file=t,n.ext=t.toLowerCase().split("#")[0].split(".").pop(),n.type=n.getFileType(n.ext),this.elements[n.name]=n)}return n}},{key:"getElementsOfType",value:function(t){var e=[];return i().each(this.elements,(function(n,i){i.type===t&&e.push("font"===t?i.fontName:n)})),e}},{key:"buildAll",value:function(t,e,n){var r=0;return i().each(this.elements,(function(i,o){t&&o.type!==t||(o.build(e,n,!1),r++)})),r}},{key:"countWaitingElements",value:function(){var t=0,e=!0;return i().each(this.elements,(function(n,i){!i.data||i.ready||i.checkReady()||i.checkTimeout()?t++:(gt("debug","... waiting for: %s",n),e=!1)})),e?-1:t}},{key:"getSkinElement",value:function(t,e){return kn.getSkin(t,e)}}],n&&ki(e.prototype,n),r&&ki(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Ai.prototype,{elements:null,project:null});var xi=Ai;function Ci(t){return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(t)}function Si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Oi=ye.BoxBase,Ei=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e||null}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){var e=this;return he(t.get(0).attributes,(function(t,n){switch(t){case"shadow":case"transparent":e[t]=mt(n,!1);break;case"margin":e[t]=Number(n);break;case"borderStroke":e.borderStroke=new Ie(Number(n));break;case"markerStroke":e.markerStroke=new Ie(Number(n))}})),t.children().each((function(t,n){var r=i()(n);switch(n.nodeName){case"font":e.font=(new Be).setProperties(r);break;case"gradient":e.bgGradient=(new Re).setProperties(r);break;case"color":e.textColor=Dt(r.attr("foreground"),e.textColor),e.backColor=Dt(r.attr("background"),e.backColor),e.shadowColor=Dt(r.attr("shadow"),e.shadowColor),e.inactiveColor=Dt(r.attr("inactive"),e.inactiveColor),e.alternativeColor=Dt(r.attr("alternative"),e.alternativeColor),e.borderColor=Dt(r.attr("border"),e.borderColor)}})),this}},{key:"getAttributes",value:function(){return qt(this,["shadow","transparent","margin","borderStroke","markerStroke","font","bgGradient","textColor|".concat(t.prototype.textColor),"backColor|".concat(t.prototype.backColor),"shadowColor|".concat(t.prototype.shadowColor),"inactiveColor|".concat(t.prototype.inactiveColor),"alternativeColor|".concat(t.prototype.alternativeColor),"borderColor|".concat(t.prototype.borderColor)])}},{key:"setAttributes",value:function(t){return zt(this,t,["shadow","transparent","margin",{key:"borderStroke",fn:Ie},{key:"markerStroke",fn:Ie},{key:"font",fn:Be},{key:"bgGradient",fn:Re},"textColor","backColor","shadowColor","inactiveColor","alternativeColor","borderColor"])}},{key:"get",value:function(t){return this.hasOwnProperty(t)||null===this.parent?this[t]:this.parent.get(t)}},{key:"set",value:function(t,e){return this[t]=e,this}},{key:"getOwn",value:function(e){return this.hasOwnProperty(e)?this[e]:null!==this.parent?this.parent.getOwn(e):("object"===Ci(this[e])?this[e]=Nt(t.prototype[e]):this[e]=t.prototype[e],this[e])}},{key:"getCSS",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.get("font");(t=r.toCss(t)).color=n?this.get("backColor"):i?this.get("alternativeColor"):this.get("textColor");var o=this.get("transparent");t["background-color"]=o?"transparent":e?this.get("inactiveColor"):n?this.get("textColor"):this.get("backColor");var s=this.get("bgGradient");if(s&&!o&&(t["background-image"]=s.getCss()),1===this.shadow){var a=Math.max(1,Math.round(r.size/10)),c=this.get("shadowColor");t["text-shadow"]="".concat(a,"px ").concat(a,"px 3px ").concat(c)}return t}},{key:"prepareText",value:function(t,e,n,i){var r=[],o=this.get("font"),s=o.getHeight(),a=0,c=e.trim().split("\n");t.font=o.cssFont();for(var l=0;l<c.length;l++){var u=c[l].trim(),h=t.measureText(u).width;if(h>n){for(var f=0,p=0,d=0;d<u.length;d++)if($t(u[d])){var v=t.measureText(u.substr(0,d).trim()).width;if(v>n)break;f=d,p=v}if(f>0)c.splice(l+1,0,u.substr(f+1).trim()),u=c[l]=u.substr(0,f).trim(),h=p;else if(o.size>Oi.MIN_FONT_SIZE)return this.getOwn("font").zoom(-1),this.prepareText(t,e,n,i)}if(r.push({text:u,size:new Me(h,s)}),(a+=s)>i&&o.size>Oi.MIN_FONT_SIZE)return this.getOwn("font").zoom(-1),this.prepareText(t,e,n,i)}return r}}],n&&Si(e.prototype,n),r&&Si(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Ei.prototype,{parent:null,default:Oi,font:new Be,dynFontSize:0,resetFontCounter:0,backColor:Oi.BACK_COLOR,bgGradient:null,textColor:Oi.TEXT_COLOR,shadowColor:Oi.SHADOW_COLOR,borderColor:Oi.BORDER_COLOR,inactiveColor:Oi.INACTIVE_COLOR,alternativeColor:Oi.ALTERNATIVE_COLOR,shadow:!1,transparent:!1,dontFill:!1,textMargin:Oi.AC_MARGIN,borderStroke:new Ie(Oi.BORDER_STROKE_WIDTH),markerStroke:new Ie(Oi.MARKER_STROKE_WIDTH)}),Ei.DEFAULT_BOX_BASE=new Ei;var Pi=Ei;function Ti(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ji(t,e,n){return e&&_i(t.prototype,e),n&&_i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Bi=function(){function t(e,n){Ti(this,t),e&&(this.h=e),n&&(this.v=n)}return ji(t,[{key:"getAttributes",value:function(){return qt(this,["h|center","v|center"])}},{key:"setAttributes",value:function(t){return zt(this,t,["h","v"])}}]),t}();Object.assign(Bi.prototype,{h:"center",v:"center"});var Ri=function(){function t(e){Ti(this,t),void 0!==e&&(this.id=e),this.imgAlign=new Bi,this.txtAlign=new Bi}return ji(t,[{key:"setProperties",value:function(t,e){var n=this;return he(t.get(0).attributes,(function(t,e){switch(t){case"id":case"item":n[t]=Number(e);break;case"width":case"height":null===n.dimension&&(n.dimension=new Me(0,0)),n.dimension[t]=Number(e);break;case"txtAlign":case"imgAlign":n[t]=n.readAlign(e);break;case"hAlign":n.txtAlign=n.readAlign(e+",center"),n.imgAlign=n.readAlign(e+",center");break;case"border":case"avoidOverlapping":n[t]=mt(e);break;case"image":n.image=Qt(e)}})),t.children().each((function(t,e){var r=i()(e);switch(e.nodeName){case"style":n.style=new Pi(null).setProperties(r);break;case"media":n.mediaContent=(new Sn).setProperties(r);break;case"p":null===n.text?n.text="":n.text+="\n",n.text+=e.textContent}})),e&&this.realizeContent(e),this}},{key:"getAttributes",value:function(){return qt(this,["id","item","dimension","border","avoidOverlapping","image","text","objectType","txtAlign","imgAlign","style","mediaContent"])}},{key:"setAttributes",value:function(t,e){return"string"==typeof t?this.text=t:zt(this,t,["id","item","border","avoidOverlapping","image","text","objectType",{key:"dimension",fn:Me},{key:"txtAlign",fn:Bi},{key:"imgAlign",fn:Bi},{key:"style",fn:Pi},{key:"mediaContent",fn:Sn}]),e&&this.realizeContent(e),this}},{key:"readAlign",value:function(t){var e=new Bi;if(t){var n=t.split(",");e.h=n[0].replace("middle","center"),e.v=n[1].replace("middle","center")}return e}},{key:"isEmpty",value:function(){return null===this.text&&null===this.img}},{key:"isEquivalent",value:function(t,e){if(t===this)return!0;var n=!1;return null!==t&&(n=this.isEmpty()&&t.isEmpty()?this.id===t.id:(null===this.text?null===t.text:e?this.text===t.text:this.text.toLocaleLowerCase()===t.text.toLocaleLowerCase())&&(null===this.mediaContent?null===t.mediaContent:this.mediaContent.isEquivalent(t.mediaContent))&&this.img===t.img&&(null===this.imgClip?null===t.imgClip:this.imgClip.equals(t.imgClip))),n}},{key:"setTextContent",value:function(t){null!==t?(this.text=t,this.checkHtmlText()):(this.text=null,this.innerHtmlText=null)}},{key:"checkHtmlText",value:function(){if(this.innerHtmlText=null,Yt(this.text,"<html>",!0)){var t=this.text.trim(),e=t.toLocaleLowerCase();if(-1===e.indexOf("<body")){var n=e.indexOf("</html>");n>=0&&(this.innerHtmlText=t.substr(6,n))}}}},{key:"setImgContent",value:function(t,e,n){this.img=t,this.image=null,this.imgClip=e,n&&(this.animatedGifFile=n)}},{key:"prepareMedia",value:function(t){!this.amp&&this.mediaContent&&"PLAY_VIDEO"===this.mediaContent.type&&(this.amp=t.getActiveMediaPlayer(this.mediaContent),this.amp.realize())}},{key:"realizeContent",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==this.image&&this.image.length>0&&(this.mbe=t.getElement(this.image,!0),this.mbe&&this.mbe.build((function(){e.img=e.mbe.data,e.animatedGifFile=e.mbe.animated?e.mbe.getFullPath():null}),n,!0)),null!==this.mediaContent&&(null!==this.image||null!==this.text&&0!==this.text.length||(this.img=this.mediaContent.getIcon(),this.animatedGifFile=null)),this.checkHtmlText(t)}},{key:"getDescription",value:function(){var t=[];return this.text&&this.text.length&&t.push(this.text),this.image&&t.push("".concat(pt("image")," ").concat(this.image)),this.imgClip&&t.push(this.imgClip.toString()),this.mediaContent&&t.push(this.mediaContent.getDescription()),t.join(" ")}},{key:"toString",value:function(){var t=[];return this.text&&this.text.length&&t.push(this.text),this.image&&t.push("".concat(pt("image")," ").concat(this.image)),this.imgClip&&t.push("".concat(pt("image fragment")," ").concat((this.id>=0?this.id:this.item)+1)),t.join(" ")||pt("cell")}}]),t}();Object.assign(Ri.prototype,{style:null,dimension:null,border:null,text:null,image:null,imgClip:null,mediaContent:null,imgAlign:null,txtAlign:null,avoidOverlapping:!1,id:-1,item:-1,img:null,animatedGifFile:null,innerHtmlText:null,amp:null,mbe:null}),Ri.EMPTY_CONTENT=new Ri;var Ii=Ri;function Di(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Mi=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset(e,n)}var e,n,r;return e=t,n=[{key:"reset",value:function(t,e){this.nCols=t,this.nRows=e,this.nCells=e*t,this.initiated=!1,this.shapeData=[];for(var n=0;n<this.nCells;n++)this.shapeData[n]=new Le}},{key:"setProperties",value:function(e){var n=this;return he(e.get(0).attributes,(function(t,e){switch(t){case"class":n.className=e;break;case"cols":n.nCols=Number(e);break;case"rows":n.nRows=Number(e);break;case"baseWidthFactor":case"toothHeightFactor":case"scaleX":case"scaleY":n[t]=Number(e);break;case"randomLines":case"showEnclosure":n[t]=mt(e,!0)}})),e.children("enclosing:first").each((function(e,r){i()(r).children("shape:first").each((function(e,i){var r=t.readShapeData(i,n.scaleX,n.scaleY);n.enclosing=r,n.showEnclosure=!0,n.hasRemainder=!0}))})),e.children("shape").each((function(e,i){n.shapeData[e]=t.readShapeData(i,n.scaleX,n.scaleY)})),this.shapeData.length>0&&(this.nCells=this.shapeData.length),this}},{key:"getAttributes",value:function(){var t=["className","nCols","nRows","baseWidthFactor","toothHeightFactor","scaleX","scaleY","randomLines"];return this.customShapes&&["showEnclosure","hasRemainder","enclosing","shapeData"].forEach((function(e){return t.push(e)})),qt(this,t)}},{key:"buildShapes",value:function(){}},{key:"getShape",value:function(t,e){return this.initiated||this.buildShapes(),t>=this.nCells||null===this.shapeData[t]?null:this.shapeData[t].getShape(e)}},{key:"getShapeData",value:function(t){return t>=0&&t<this.shapeData.length?this.shapeData[t]:null}},{key:"getEnclosingShapeData",value:function(){return new Fe(0,0,1,1)}},{key:"getRemainderShape",value:function(t){if(!this.hasRemainder)return null;this.initiated||this.buildShapes();for(var e=this.getEnclosingShapeData(),n=e?e.getShape(t):new Fe,i=0;i<this.nCells;i++)this.shapeData[i]&&n.add(this.shapeData[i].getShape(t),!1);return n}}],r=[{key:"registerClass",value:function(e,n){return t.CLASSES[e]=n,n}},{key:"getShaper",value:function(e,n,i){var r=t.CLASSES[(e||"").replace(/^edu\.xtec\.jclic\.shapers\./,"@")];return r||gt("error","Unknown shaper: ".concat(e)),r?new r(n,i):null}},{key:"readShapeData",value:function(t,e,n){var r=[],o=null;return i().each(t.textContent.split("|"),(function(t,i){var s=i.split(":"),a=s.length>1?s[1].split(","):null;switch(a&&(a=a.map((function(t,i){return t/(i%2?n:e)}))),s[0]){case"rectangle":o=new Fe(a[0],a[1],a[2],a[3]);break;case"ellipse":o=new ze(a[0],a[1],a[2],a[3]);break;default:r.push(new $e(s[0],a))}})),!o&&r.length>0?new Ue(r):o}},{key:"factory",value:function(e){var n=t.getShaper(e.className,e.nCols,e.nRows);return zt(n,e,["className","nCols","nRows","baseWidthFactor","toothHeightFactor","scaleX","scaleY","randomLines","showEnclosure","hasRemainder",{key:"enclosing",fn:Le},{key:"shapeData",fn:Le,group:"array"}]),n.nCells=n.shapeData.length||n.nCols*n.nRows,n}}],n&&Di(e.prototype,n),r&&Di(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Mi.prototype,{className:"Shaper",nCols:0,nRows:0,nCells:0,shapeData:null,initiated:!1,baseWidthFactor:1/3,toothHeightFactor:1/6,randomLines:!1,scaleX:1,scaleY:1,enclosing:null,showEnclosure:!1,rectangularShapes:!1,hasRemainder:!1,customShapes:!1}),Mi.CLASSES={};var Ni=Mi;function Vi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var qi=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.id=e),this.cells=[],this.ncw=Math.max(1,n),this.nch=Math.max(1,i)}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t,e){var n=this,r=!1;if(he(t.get(0).attributes,(function(t,e){switch(t){case"id":n.id=e;break;case"image":n.image=Qt(e);break;case"rows":n.nch=Number(e);break;case"columns":r=!0;case"cols":n.ncw=Number(e);break;case"cellWidth":n.w=Number(e);break;case"cellHeight":n.h=Number(e);break;case"border":n.border=mt(e)}})),r){var o=this.ncw;this.ncw=this.nch,this.nch=o}t.children().each((function(t,r){var o=i()(r);switch(r.nodeName){case"style":n.style=new Pi(null).setProperties(o);break;case"shaper":var s=o.attr("class"),a=Math.max(1,o.attr("cols")),c=Math.max(1,o.attr("rows"));n.shaper=Ni.getShaper(s,a,c),n.shaper.setProperties(o);break;case"ids":n.ids=r.textContent,n.ids.split(" ").forEach((function(t,e){n.cells[e]=new Ii(Number(t))}));break;case"cell":n.cells.push((new Ii).setProperties(o,e))}}));var s=this.cells.length;if(0===s&&this.shaper&&this.shaper.nCells>0&&(this.initiallyEmptyCells=!0,s=this.shaper.nCells,this.getActiveBoxContent(s-1)),s>0){for(var a=!0,c=0;c<s;c++){var l=this.getActiveBoxContent(c);if(-1!==l.id||-1!==l.item||!l.isEmpty()){a=!1;break}}if(a)for(var u=0;u<s;u++)this.getActiveBoxContent(u).id=u}return this.style&&this.cells.forEach((function(t){t.style&&(t.style.parent=n.style)})),this}},{key:"getAttributes",value:function(){var t=["id","image","ncw","nch","w","h","border","style","shaper"];return this.initiallyEmptyCells||t.push(this.ids?"ids":"cells"),qt(this,t)}},{key:"setAttributes",value:function(t,e){var n=this;zt(this,t,["id","image","ncw","nch","w","h","border",{key:"style",fn:Pi},{key:"shaper",fn:Ni},"ids",{key:"cells",fn:Ii,group:"array",params:[e]}]);var i=this.cells.length;if(0===i&&this.shaper&&this.shaper.nCells>0&&(this.initiallyEmptyCells=!0,i=this.shaper.nCells,this.getActiveBoxContent(i-1),this.ids&&this.ids.split(" ").forEach((function(t,e){n.getActiveBoxContent(e).id=Number(t)}))),i>0){for(var r=!0,o=0;o<i;o++){var s=this.getActiveBoxContent(o);if(-1!==s.id||-1!==s.item||!s.isEmpty()){r=!1;break}}if(r)for(var a=0;a<i;a++)this.getActiveBoxContent(a).id=a}return this.style&&this.cells.forEach((function(t){t.style&&(t.style.parent=n.style)})),e&&this.cells.forEach((function(t){return t.realizeContent(e)})),this}},{key:"prepareMedia",value:function(t){this.cells.forEach((function(e){return e.prepareMedia(t)}))}},{key:"getTotalWidth",value:function(){return this.w*this.ncw}},{key:"getTotalHeight",value:function(){return this.h*this.nch}},{key:"getNumCells",value:function(){return this.cells.length}},{key:"isEmpty",value:function(){return 0===this.cells.length}},{key:"getShaper",value:function(){return null===this.shaper&&(this.shaper=Ni.getShaper("@Rectangular",this.ncw,this.nch)),this.shaper}},{key:"getBoxBase",value:function(){return null===this.style&&(this.style=new Pi),this.style}},{key:"addActiveBoxContent",value:function(t){this.cells.push(t),0!==this.ncw&&0!==this.nch||(this.ncw=this.nch=1)}},{key:"getActiveBoxContent",value:function(t){if(t>=this.cells.length)for(var e=this.cells.length;e<=t;e++)this.cells.push(new Ii);return this.cells[t]}},{key:"getActiveBoxContentWith",value:function(t,e){return this.cells.find((function(n){return n.id===t&&n.item===e}))}},{key:"setImgContent",value:function(t,e,n){e&&this.setShaper(e),"@Holes"===this.shaper.className&&(this.shaper.hasRemainder=!0),this.ncw=this.shaper.nCols,this.nch=this.shaper.nRows;var i=t.elements[this.image];t&&this.image&&i&&i.ready?(this.img=i.data,i.animated&&(this.animatedGifFile=i.getFullPath()),this.w=this.img.width/this.ncw,this.h=this.img.height/this.nch,n&&(this.w=Math.round(this.w),this.h=Math.round(this.h))):(this.img=null,this.w=Math.max(this.w,10),this.h=Math.max(this.h,10));for(var r=new Fe(0,0,this.w*this.ncw,this.h*this.nch),o=0;o<this.shaper.nCells;o++)this.getActiveBoxContent(o).setImgContent(this.img,this.shaper.getShape(o,r),this.animatedGifFile);this.shaper.hasRemainder&&(this.backgroundContent=new Ii,this.backgroundContent.setImgContent(this.img,this.shaper.getRemainderShape(r)))}},{key:"setTextContent",value:function(t,e,n){this.ncw=Math.max(1,e),this.nch=Math.max(1,n);for(var i=this.ncw*this.nch,r=0;r<i;r++)this.getActiveBoxContent(r).setTextContent(r>=t.length||null===t[r]?"":t[r])}},{key:"setIds",value:function(t){for(var e=0;e<t.length&&e<this.cells.length;e++)this.getActiveBoxContent(e).id=t[e]}},{key:"setCellsAttribute",value:function(t,e){this.cells.forEach((function(n){return n[t]=e}))}},{key:"avoidAllIdsNull",value:function(t){this.cells.every((function(t){return-1===t.id}))&&(t=Math.max(1,t),this.cells.forEach((function(e,n){e.id=n%t})))}}],n&&Vi(e.prototype,n),r&&Vi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(qi.prototype,{id:"primary",image:null,img:null,animatedGifFile:null,ncw:1,nch:1,w:ye.DEFAULT_GRID_ELEMENT_SIZE,h:ye.DEFAULT_GRID_ELEMENT_SIZE,border:!0,style:null,shaper:null,backgroundContent:null,cells:null,defaultIdValue:-1,ids:null});var Li=qi;function Fi(t){return function(t){if(Array.isArray(t))return zi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return zi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zi(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hi(t,e,n){return e&&$i(t.prototype,e),n&&$i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Wi=function(){function t(){Ui(this,t)}return Hi(t,[{key:"setProperties",value:function(t){return this.className=(t.attr("class")||"").replace(/^edu\.xtec\.jclic\.automation\./,"@"),this}},{key:"getAttributes",value:function(){return qt(this,["className"])}},{key:"init",value:function(){}},{key:"generateContent",value:function(e,n,i,r){return this.process(new t.ActiveBagContentKit(e,n,i,r))}},{key:"process",value:function(t){return!1}}],[{key:"getProvider",value:function(e){var n=null;if(e){var i=(e.attr("class")||"").replace(/^edu\.xtec\.jclic\.automation\./,"@"),r=t.CLASSES[i];r?(n=new r).setProperties(e):gt("error","Unknown AutoContentProvider class: ".concat(i))}return n}},{key:"factory",value:function(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.CLASSES[e.className];return(n=new r).setAttributes.apply(n,[e].concat(Fi(i)))}},{key:"registerClass",value:function(e,n){return t.CLASSES[e]=n,n}}]),t}();Object.assign(Wi.prototype,{numericContent:!1}),Wi.ActiveBagContentKit=function(){return Hi((function t(e,n,i,r){Ui(this,t),this.nRows=e,this.nCols=n,this.content=i,this.useIds=r}))}(),Wi.CLASSES={"@tagreplace.TagReplace":Wi},Wi.registerClass("@tagreplace.TagReplace",Wi);var Gi=Wi;function Ji(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ki=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=new Pi(null),this.text=[]}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t){var e=this;he(t.get(0).attributes,(function(t,n){switch(t){case"rows":e.ncw=Number(n);break;case"columns":e.nch=Number(n);break;case"cellWidth":e.w=Number(n);break;case"cellHeight":e.h=Number(n);break;case"border":e.border=mt(n);break;case"wild":case"randomChars":e[t]=n}})),t.children("style:first").each((function(t,n){e.style=(new Pi).setProperties(i()(n))})),t.find("text:first > row").each((function(t,n){return e.text.push(n.textContent)}));for(var n=this.text.length;n<this.nch;n++)this.text[n]="";return this}},{key:"getAttributes",value:function(){return qt(this,["ncw","nch","w","h","text","style","border","wild|*","randomChars|".concat(ye.RANDOM_CHARS)])}},{key:"setAttributes",value:function(t){return zt(this,t,["ncw","nch","w","h","text",{key:"style",fn:Pi},"border","wild","randomChars"])}},{key:"countWildChars",value:function(){var t=0;if(this.text)for(var e=0;e<this.nch;e++)for(var n=0;n<this.ncw;n++)this.text[e].charAt(n)===this.wild&&t++;return t}},{key:"getNumChars",value:function(){return this.ncw*this.nch}},{key:"setCharAt",value:function(t,e,n){t>=0&&t<this.ncw&&e>=0&&e<this.nch&&(this.text[e]=this.text[e].substring(0,t)+n+this.text[e].substring(t+1))}}],n&&Ji(e.prototype,n),r&&Ji(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Ki.prototype,{ncw:1,nch:1,w:20,h:20,border:!1,style:null,text:null,wild:"*",randomChars:ye.RANDOM_CHARS});var Zi=Ki;function Yi(t){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yi(t)}function Qi(){return Qi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Xi(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Qi.apply(this,arguments)}function Xi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rr(t)););return t}function tr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&er(t,e)}function er(t,e){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},er(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=rr(t);if(e){var r=rr(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ir(this,n)}}function ir(t,e){if(e&&("object"===Yi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function rr(t){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rr(t)}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ar(t,e,n){return e&&sr(t.prototype,e),n&&sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var cr=function(){function t(e){var n=this;or(this,t),this.className=e,this.collator=window.Intl&&window.Intl.Collator?new window.Intl.Collator:{compare:function(t,e){return n.checkCase?t===e:t.toUpperCase()===e.toUpperCase()}}}return ar(t,[{key:"setProperties",value:function(t){var e=this;return he(t.get(0).attributes,(function(t,n){switch(t){case"class":e.className=n;break;case"checkCase":case"checkAccents":case"checkPunctuation":case"checkDoubleSpaces":case"detail":e[t]=mt(n);break;case"checkSteps":case"checkScope":e[t]=Number(n)}})),this}},{key:"getAttributes",value:function(){return qt(this,["className","checkCase","checkAccents","checkPunctuation","checkDoubleSpaces","detail","checkSteps","checkScope"])}},{key:"init",value:function(t){this.initiated=!0}},{key:"checkText",value:function(t,e){var n=this;return e instanceof Array?e.some((function(e){return n._checkText(t,e)})):!!e&&this._checkText(t,e)}},{key:"_checkText",value:function(t,e){return!1}},{key:"evalText",value:function(t,e){return e instanceof Array||(e=[e]),this._evalText(t,e)}},{key:"_evalText",value:function(t,e){return[]}},{key:"isOk",value:function(t){return t&&t.length>0&&!t.some((function(t){return 0!==t}))}}],[{key:"getEvaluator",value:function(e){var n=null;if(e){var i=e.attr("class"),r=t.CLASSES[i];r?(n=new r(i)).setProperties(e):gt("error",'Unknown evaluator class: "'.concat(i,'"'))}return n}},{key:"factory",value:function(e){var n=t.CLASSES[e.className];return n?zt(new n(e.className),e,["className","checkCase","checkAccents","checkPunctuation","checkDoubleSpaces","detail","checkSteps","checkScope"]):null}}]),t}();Object.assign(cr.prototype,{className:null,initiated:!1,collator:null,checkCase:!1});var lr=function(t){tr(n,t);var e=nr(n);function n(t){return or(this,n),e.call(this,t)}return ar(n,[{key:"init",value:function(t){Qi(rr(n.prototype),"init",this).call(this,[t]),window.Intl&&window.Intl.Collator&&(this.collator=new window.Intl.Collator(t,{sensitivity:this.checkAccents?this.checkCase?"case":"accent":"base",ignorePunctuation:!this.checkPunctuation}))}},{key:"_checkText",value:function(t,e){return 0===this.collator.compare(this.getClearedText(t),this.getClearedText(e))}},{key:"_evalText",value:function(t,e){return Array(t.length).fill(this._checkText(t,e[0])?0:1)}},{key:"getClearedText",value:function(t,e){if(this.checkPunctuation&&this.checkDoubleSpaces)return t;e||(e=Array(t.length).fill(!1));for(var n="",i=0,r=!1;i<t.length;i++){var o=t.charAt(i);this.PUNCTUATION.indexOf(o)>=0&&!this.checkPunctuation?(r?e[i]=!0:n+=" ",r=!0):" "===o?(this.checkDoubleSpaces||!r?n+=o:e[i]=!0,r=!0):(r=!1,n+=o)}return n}}]),n}(cr);Object.assign(lr.prototype,{checkAccents:!0,checkPunctuation:!0,checkDoubleSpaces:!1,PUNCTUATION:".,;:"});var ur=function(t){tr(n,t);var e=nr(n);function n(t){return or(this,n),e.call(this,t)}return ar(n,[{key:"_evalText",value:function(t,e){if(!this.detail)return Qi(rr(n.prototype),"_evalText",this).call(this,t,e);for(var i=Array(t.length).fill(!1),r=this.getClearedText(t,i),o=Array(e.length),s=Array(e.length),a=Array(t.length),c=-1,l=-1,u=0;u<e.length;u++){s[u]=Array(t.length).fill(0);var h=this.compareSegment(r,r.length,e[u],e[u].length,s[u],!1);o[u]=this.countFlagsOk(s[u]),h&&(l=u,c=o[u])}if(-1===l)for(var f=0;f<e.length;f++)o[f]>c&&(c=o[f],l=f);for(var p=0,d=0;p<t.length;p++)a[p]=i[p]?0:s[l][d++];return a}},{key:"countFlagsOk",value:function(t){return t.reduce((function(t,e){return 0==e?++t:t}),0)}},{key:"compareSegment",value:function(t,e,n,i,r,o){var s=0,a=0,c=0,l=!0,u=!0,h="",f="";if(0===e||0===i||null===t||null===n)return!1;for(;s<e;s++,a++)if(h=t.charAt(s),c=s,f=a>=0&&a<i?n.charAt(a):0,0===this.collator.compare(h,f))r[s]=0,l=!0;else if(u=!1,r[s]=1,!o&&l&&0!==f&&this.checkSteps>0&&this.checkScope>0){for(var p=2*this.checkSteps+1,d=[],v=0,y=0;y<p;y++)if(d[y]=0,!((v=a+Math.floor((y+1)/2)*(0!=(1&y)?1:-1))>=i)){var g=v<0?s-v:s;if(!(g>=e)){var m=Math.min(e-g,this.checkScope),b=v<0?0:v,w=Math.min(i-b,this.checkScope),k=Array(t.length-g).fill(0),A=this.compareSegment(t.substring(g),m,n.substring(b),w,k,!0);if(d[y]=this.countFlagsOk(k),A)break}}if(y===p){var x=this.checkSteps;for(y=0;y<p;y++)d[y]>d[x]&&(x=y);v=a+Math.floor((x+1)/2)*(0!=(1&x)?1:-1)}a=v,l=!1}return a!==i&&(u=!1,r[c]=1),u}}]),n}(lr);Object.assign(ur.prototype,{detail:!0,checkSteps:3,checkScope:6}),cr.CLASSES={"@BasicEvaluator":lr,"@ComplexEvaluator":ur};var hr=cr;function fr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fr(Object(n),!0).forEach((function(e){dr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gr(t,e,n){return e&&yr(t.prototype,e),n&&yr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var mr=function(){function t(){vr(this,t),this.style={default:pr({},t.DEFAULT_DOC_STYLE)},this.p=[]}return gr(t,[{key:"setProperties",value:function(t,e){var n=this,r=t.children("style").toArray().sort((function(t,e){var n=t.getAttribute("name"),i=t.getAttribute("base")||null,r=e.getAttribute("name"),o=e.getAttribute("base")||null;return"default"===n?-1:"default"===r||i===r?1:o===n?-1:i?o?0:1:-1}));return r.forEach((function(t){var e=n.readDocAttributes(i()(t));n.style[e.name]="default"===e.name?i().extend(!0,n.style.default,e):e})),t.find("section > p").each((function(t,r){var o={elements:[]};he(r.attributes,(function(t,e){switch(t){case"style":o[t]=e;break;case"bidiLevel":case"Alignment":o[t]=Number(e)}})),i()(r).children().each((function(t,r){var s,a=i()(r);switch(r.nodeName){case"cell":s=(new Ii).setProperties(a,e);break;case"text":s={text:r.textContent.replace(/\t/g,"&#9;")};var c=n.readDocAttributes(a);i().isEmptyObject(c)||(s.attr=c);break;case"target":(s=new br(n,r.textContent.replace(/\t/g,"&#9;"))).setProperties(a,e),n.numTargets++;break;default:gt("error",'Unknown object in activity document: "'.concat(r.nodeName,'"'))}s&&(s.objectType=r.nodeName,o.elements.push(s))})),n.p.push(o)})),this}},{key:"readDocAttributes",value:function(t){var e=this,n={},r={};return he(t.get(0).attributes,(function(t,o){switch(t){case"background":o=Dt(o,"white"),n[t]=o,r["background-color"]=o;break;case"foreground":o=Dt(o,"black"),n[t]=o,r.color=o;break;case"family":r["font-family"]=o;case"name":case"style":n[t]=o;break;case"base":n[t]=o,e.style[o]&&(n=i().extend(!0,{},e.style[o],n),e.style[o].css&&(r=i().extend({},e.style[o].css,r)));break;case"bold":o=mt(o),n[t]=o,r["font-weight"]=o?"bold":"normal";break;case"italic":o=mt(o),n[t]=o,r["font-style"]=o?"italic":"normal";break;case"target":n[t]=mt(o);break;case"size":n[t]=Number(o),r["font-size"]="".concat(o,"px");break;case"tabWidth":e.tabSpc=o,r["tab-size"]=e.tabSpc,r["white-space"]="pre-wrap";break;default:gt("warn",'Unknown text attribute: "'.concat(t,'" = "').concat(o,'"')),n[t]=o}})),i().isEmptyObject(r)||(n.css=r),n}},{key:"getAttributes",value:function(){return qt(this,["style","tabSpc","targetType","p"])}},{key:"setAttributes",value:function(t,e){var n=this;return zt(this,t,["style","tabSpc","targetType","p"]),this.p.forEach((function(t){t.elements?t.elements=t.elements.map((function(t){return"cell"===t.objectType?(new Ii).setAttributes(t,e):"target"===t.objectType?new br(n).setAttributes(t,e):t})):t.elements=[]})),this}},{key:"getRawText",value:function(){var t=i()("<div/>");return this.p.forEach((function(e){var n=i()("<p/>"),r=!0;e.elements.forEach((function(t){switch(t.objectType){case"text":case"target":n.append(t.text)}r=!1})),r&&n.html("&nbsp;"),t.append(n)})),t.text().trim()}},{key:"getFullStyle",value:function(t){var e=i().extend(!0,{},this.style.default);return i().extend(!0,e,this.style[t]?this.style[t]:{})}}]),t}();mr.DEFAULT_DOC_STYLE={background:"0xFFFFFF",foreground:"0x000000",family:"Arial",bold:!1,italic:!1,size:17,css:{"background-color":"#FFFFFF",color:"#000000","font-family":"Arial","font-weight":"normal","font-style":"normal","font-size":"17px"}},Object.assign(mr.prototype,{tabSpc:12,lastBoxId:0,tmb:null,numTargets:0,targetType:"TT_FREE",style:null,p:null});var br=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";vr(this,t),this.doc=e,this.text=n,this.numIniChars=n.length,this.answers=[n],this.maxLenResp=this.numIniChars}return gr(t,[{key:"reset",value:function(t){this.targetStatus=t||"NOT_EDITED",this.flagModified=!1}},{key:"setProperties",value:function(t,e){var n=this,r=!0;t.children().each((function(t,o){var s=i()(o);switch(o.nodeName){case"answer":r&&(r=!1,n.answers=[]),null===n.answers&&(n.answers=[]),n.answers.push(o.textContent);break;case"optionList":s.children("option").each((function(t,e){n.isList=!0,null===n.options&&(n.options=[]),n.options.push(e.textContent)}));break;case"response":n.iniChar=bt(s.attr("fill"),n.iniChar).charAt(0),ye.WHITESPACES.indexOf(n.iniChar)>=0&&(n.iniChar="_"),n.numIniChars=wt(s.attr("length"),n.numIniChars),n.maxLenResp=wt(s.attr("maxLength"),n.maxLenResp),n.iniText=bt(s.attr("show"),n.iniText);break;case"info":n.infoMode=bt(s.attr("mode"),"always"),n.popupDelay=wt(s.attr("delay"),n.popupDelay),n.popupMaxTime=wt(s.attr("maxTime"),n.popupMaxTime),s.children("media").each((function(t,e){n.onlyPlay=!0,n.popupContent=new Ii,n.popupContent.mediaContent=(new Sn).setProperties(i()(e))})),n.popupContent||s.children("cell").each((function(t,r){n.popupContent=(new Ii).setProperties(i()(r),e)}));break;case"text":n.text=o.textContent.replace(/\t/g,"&#9;");var a=n.doc.readDocAttributes(i()(o));i().isEmptyObject(a)||(n.attr=a)}}))}},{key:"getAttributes",value:function(){return qt(this,["objectType","text","attr","isList","answers","options","iniChar","numIniChars","maxLenResp","iniText","infoMode","popupDelay","popupKey","popupMaxTime","onlyPlay","popupContent"])}},{key:"setAttributes",value:function(t,e){return zt(this,t,["objectType","text","attr","isList","answers","options","iniChar","numIniChars","maxLenResp","iniText","infoMode","popupDelay","popupKey","popupMaxTime","onlyPlay",{key:"popupContent",fn:Ii,params:[e]}])}},{key:"getAnswers",value:function(){return this.answers?this.answers.join("|"):""}},{key:"checkColors",value:function(){var t=this.$comboList||this.$span;if(t){var e=this.doc.style["WITH_ERROR"===this.targetStatus?"targetError":"HIDDEN"===this.targetStatus?"default":"target"];e&&e.css&&t.css(e.css)}}},{key:"readCurrentText",value:function(){return this.$span?this.currentText=this.$span.text():this.$comboList&&(this.currentText=this.$comboList.val()),this.currentText}}]),t}();Object.assign(br.prototype,{doc:null,text:null,attr:null,isList:!1,numIniChars:1,iniChar:"_",maxLenResp:0,answers:null,options:null,iniText:null,infoMode:"no_info",popupKey:"F1",popupContent:null,popupDelay:0,popupMaxTime:0,onlyPlay:!1,$comboList:null,$span:null,$p:null,$popup:null,currentText:"",num:0,pos:0,targetStatus:"NOT_EDITED",flagModified:!1,parentPane:null}),mr.TextTarget=br;var wr=mr;function kr(t){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr(t)}function Ar(){return Ar="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=xr(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Ar.apply(this,arguments)}function xr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Er(t)););return t}function Cr(t,e){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cr(t,e)}function Sr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Er(t);if(e){var r=Er(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Or(this,n)}}function Or(t,e){if(e&&("object"===kr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Er(t){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Er(t)}function Pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _r(t,e,n){return e&&Tr(t.prototype,e),n&&Tr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var jr="touchstart",Br=function(){function t(e){Pr(this,t),this.project=e,this.eventSounds=new jn(this.project.settings.eventSounds),this.messages={},this.abc={}}return _r(t,[{key:"setProperties",value:function(t){var e=this;return he(t.get(0).attributes,(function(t,n){switch(t){case"name":n=Qt(n);case"code":case"type":case"description":e[t]=n;break;case"class":e.className=n.replace(/^edu\.xtec\.jclic\.activities\./,"@");break;case"inverse":e.invAss=mt(n,!1);break;case"autoJump":case"forceOkToAdvance":case"amongParagraphs":e[t]=mt(n,!1)}})),t.children().each((function(t,n){var r=i()(n);switch(n.nodeName){case"settings":he(r.get(0).attributes,(function(t,n){switch(t){case"infoUrl":case"infoCmd":e[t]=n;break;case"margin":case"maxTime":case"maxActions":e[t]=Number(n);break;case"report":e.includeInReports=mt(n,!1);break;case"countDownTime":case"countDownActions":case"reportActions":case"useOrder":case"dragCells":e[t]=mt(n,!1)}})),r.children().each((function(t,n){var r=i()(n);switch(n.nodeName){case"skin":e.skinFileName=r.attr("file");break;case"helpWindow":e.helpMsg=jt(e),e.showSolution=mt(r.attr("showSolution"),!1),e.helpWindow=null!==e.helpMsg||e.showSolution;break;case"container":e.bgColor=Dt(r.attr("bgColor"),ye.BoxBase.BACK_COLOR),r.children().each((function(t,n){var r=i()(n);switch(n.nodeName){case"image":e.bgImageFile=r.attr("name"),e.tiledBgImg=mt(r.attr("tiled"),!1);break;case"counters":e.bTimeCounter=mt(r.attr("time"),!0),e.bActionsCounter=mt(r.attr("actions"),!0),e.bScoreCounter=mt(r.attr("score"),!0);break;case"gradient":e.bgGradient=(new Re).setProperties(r)}}));break;case"window":e.activityBgColor=Dt(r.attr("bgColor"),ye.DEFAULT_BG_COLOR),e.transparentBg=mt(r.attr("transparent"),!1),e.border=mt(r.attr("border"),!1),r.children().each((function(t,n){var r=i()(n);switch(n.nodeName){case"gradient":e.activityBgGradient=(new Re).setProperties(r);break;case"position":e.absolutePosition=(new De).setProperties(r),e.absolutePositioned=!0;break;case"size":e.windowSize=(new Me).setProperties(r)}}));break;case"eventSounds":e.eventSounds.setProperties(r)}}));break;case"messages":r.children("cell").each((function(t,n){var r=e.readMessage(i()(n));e.messages[r.type]=r}));break;case"automation":e.acp=Gi.getProvider(r,e.project),e.acp&&(e.numericContent=e.acp.numericContent);break;case"cells":var o=(new Li).setProperties(r,e.project.mediaBag);e.abc[o.id]=o;break;case"scramble":e.shuffles=Number(r.attr("times")),e.shuffleA=mt(r.attr("primary")),e.shuffleB=mt(r.attr("secondary"));break;case"layout":he(r.get(0).attributes,(function(t,n){switch(t){case"position":e.boxGridPos=n;break;case"wildTransparent":case"upperCase":case"checkCase":e[t]=mt(n)}}));break;case"menuElement":e.menuElements.push({caption:r.attr("caption")||"",icon:r.attr("icon")||null,projectPath:r.attr("path")||null,sequence:r.attr("sequence")||null,description:r.attr("description")||""});break;case"textGrid":e.tgc=(new Zi).setProperties(r);break;case"clues":e.clues=[],e.clueItems=[],r.children("clue").each((function(t,n){e.clueItems[t]=Number(i()(n).attr("id")),e.clues[t]=n.textContent}));break;case"checkButton":e.checkButtonText=n.textContent||"check";break;case"prevScreen":e.prevScreen=!0,e.prevScreenMaxTime=r.attr("maxTime")||-1,r.children().each((function(t,n){switch(n.nodeName){case"style":e.prevScreenStyle=(new Pi).setProperties(i()(n));break;case"p":null===e.prevScreenText&&(e.prevScreenText=""),e.prevScreenText+="<p>".concat(n.textContent,"</p>")}}));break;case"evaluator":e.ev=hr.getEvaluator(r);break;case"document":e.document=(new wr).setProperties(r,e.project.mediaBag)}})),this}},{key:"readMessage",value:function(t){var e=(new Ii).setProperties(t,this.project.mediaBag);return e.type=t.attr("type"),Tt(e.style)&&(e.style=new Pi(null)),e}},{key:"getAttributes",value:function(){return qt(this,["name","className","code","type","description","invAss","numericContent","autoJump","forceOkToAdvance","amongParagraphs","infoUrl","infoCmd","margin|".concat(ye.DEFAULT_MARGIN),"maxTime","maxActions","includeInReports|true","reportActions|false","countDownTime","countDownActions","useOrder","dragCells","skinFileName","showSolution|false","helpMsg","bgColor|".concat(ye.DEFAULT_BG_COLOR),"bgImageFile","tiledBgImg","bTimeCounter|true","bActionsCounter|true","bScoreCounter|true","activityBgColor|".concat(ye.DEFAULT_BG_COLOR),"transparentBg|false","border|true","shuffleA","shuffleB","shuffles","boxGridPos","wildTransparent","upperCase","checkCase","checkButtonText","prevScreen","prevScreenMaxTime","prevScreenText","bgGradient","activityBgGradient","absolutePosition","windowSize","eventSounds","messages","acp","abc","menuElements","tgc","clues","clueItems","prevScreenStyle","ev","document"])}},{key:"setAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.project.mediaBag;return zt(this,t,["name","className","code","type","description","invAss","numericContent","autoJump","forceOkToAdvance","amongParagraphs","infoUrl","infoCmd","margin","maxTime","maxActions","includeInReports","reportActions","countDownTime","countDownActions","useOrder","dragCells","skinFileName","showSolution","helpMsg","bgColor","bgImageFile","tiledBgImg","bTimeCounter","bActionsCounter","bScoreCounter","activityBgColor","transparentBg","border","shuffleA","shuffleB","shuffles","boxGridPos","wildTransparent","upperCase","checkCase","checkButtonText","prevScreen","prevScreenMaxTime","prevScreenText",{key:"bgGradient",fn:Re},{key:"activityBgGradient",fn:Re},{key:"absolutePosition",fn:De},{key:"windowSize",fn:Me},{key:"messages",fn:Ii,group:"object",init:"key",params:[e]},{key:"abc",fn:Li,group:"object",init:"key",params:[e]},{key:"acp",fn:Gi,params:[e]},"menuElements",{key:"tgc",fn:Zi},"clues","clueItems",{key:"prevScreenStyle",fn:Pi},{key:"ev",fn:hr},{key:"document",fn:wr,params:[e]}]),t.eventSounds&&this.eventSounds.setAttributes(t.eventSounds),this.absolutePosition&&(this.absolutePositioned=!0),this}},{key:"initAutoContentProvider",value:function(){null!==this.acp&&this.acp.init()}},{key:"prepareMedia",value:function(t){return this.eventSounds.realize(t,this.project.mediaBag),i().each(this.messages,(function(e,n){null!==n&&n.prepareMedia(t)})),i().each(this.abc,(function(e,n){null!==n&&n.prepareMedia(t)})),!0}},{key:"helpSolutionAllowed",value:function(){return!1}},{key:"helpWindowAllowed",value:function(){return this.helpWindow&&(this.helpSolutionAllowed()&&this.showSolution||null!==this.helpMsg)}},{key:"getMinNumActions",value:function(){return 0}},{key:"mustPauseSequence",value:function(){return 0!==this.getMinNumActions()}},{key:"canReinit",value:function(){return!0}},{key:"hasInfo",value:function(){return null!==this.infoUrl&&this.infoUrl.length>0||null!==this.infoCmd&&this.infoCmd.length>0}},{key:"hasRandom",value:function(){return!1}},{key:"shuffleAlways",value:function(){return!1}},{key:"needsKeyboard",value:function(){return!1}},{key:"end",value:function(){this.eventSounds.close(),this.clear()}},{key:"clear",value:function(){}},{key:"getWindowSize",value:function(){return new Me(this.windowSize)}},{key:"setWindowSize",value:function(t){this.windowSize=new Me(t)}},{key:"getActivityPanel",value:function(t){return new this.constructor.Panel(this,t)}}],[{key:"registerClass",value:function(e,n){return t.CLASSES[e]=n,n}},{key:"getActivity",value:function(e,n){var i=null,r=e.jquery&&!0;if(e&&n){var o=r?(e.attr("class")||"").replace(/^edu\.xtec\.jclic\.activities\./,"@"):e.className,s=t.CLASSES[o];s?(i=new s(n),r?i.setProperties(e):i.setAttributes(e)):gt("error","Unknown activity class: ".concat(o))}return i}}]),t}();Br.CLASSES={"@panels.Menu":Br},Object.assign(Br.prototype,{project:null,name:ye.DEFAULT_NAME,className:null,code:null,type:null,description:null,margin:ye.DEFAULT_MARGIN,bgColor:ye.DEFAULT_BG_COLOR,bgGradient:null,tiledBgImg:!1,bgImageFile:null,border:!0,absolutePositioned:!1,absolutePosition:null,includeInReports:!0,reportActions:!1,helpWindow:!1,showSolution:!1,helpMsg:"",eventSounds:null,useOrder:!1,dragCells:!1,skinFileName:null,maxTime:0,countDownTime:!1,maxActions:0,countDownActions:!1,infoUrl:null,infoCmd:null,messages:null,windowSize:new Me(ye.DEFAULT_WIDTH,ye.DEFAULT_HEIGHT),transparentBg:!1,activityBgColor:ye.DEFAULT_BG_COLOR,activityBgGradient:null,bTimeCounter:!0,bScoreCounter:!0,bActionsCounter:!0,acp:null,abc:null,tgc:null,document:null,boxGridPos:"AB",shuffles:ye.DEFAULT_SHUFFLES,shuffleA:!0,shuffleB:!0,invAss:!1,menuElements:null,numericContent:!1});var Rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(n,t);var e=Sr(n);function n(t,r,o){var s;return Pr(this,n),(s=e.call(this)).act=t,s.ps=r,s.minimumSize=new Me(100,100),s.preferredSize=new Me(500,400),s.$div=o||i()("<div/>",{class:"JClicActivity","aria-label":pt("Activity panel")}),s.act.initAutoContentProvider(),s}return _r(n,[{key:"setBounds",value:function(t){this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.dim.width=t.dim.width,this.dim.height=t.dim.height,this.invalidate(t),this.$div.css({position:"relative",left:t.pos.x,top:t.pos.y,width:t.dim.width,height:t.dim.height})}},{key:"buildVisualComponents",value:function(){if(this.playing=!1,this.skin=null,this.act.skinFileName&&this.act.skinFileName.length>0&&this.act.skinFileName!==this.act.project.settings.skinFileName&&(this.skin=this.act.project.mediaBag.getSkinElement(this.act.skinFileName,this.ps)),this.bgImage=null,this.act.bgImageFile&&this.act.bgImageFile.length>0){var t=this.act.project.mediaBag.getElement(this.act.bgImageFile,!0);t&&(this.bgImage=t.data)}this.backgroundColor=this.act.activityBgColor,this.act.transparentBg&&(this.backgroundTransparent=!0),this.act.border&&(this.border=!0);var e={display:"block","background-color":this.backgroundTransparent?"transparent":this.backgroundColor};this.border&&(e["box-shadow"]="0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12)",e["border-radius"]="2px",e.color="#272727"),this.act.activityBgGradient&&(e["background-image"]=this.act.activityBgGradient.getCss()),this.$div.css(e)}},{key:"updateContent",value:function(t){return Ar(Er(n.prototype),"updateContent",this).call(this,t)}},{key:"playEvent",value:function(t){this.act.eventSounds.play(t)}},{key:"initActivity",value:function(){this.playing&&(this.playing=!1,this.ps.reportEndActivity(this.act,this.solved)),this.solved=!1,this.ps.reportNewActivity(this.act,0),this.attachEvents(),this.enableCounters()}},{key:"startActivity",value:function(){this.playing=!0}},{key:"activityReady",value:function(){}},{key:"showHelp",value:function(){}},{key:"setDimension",value:function(t){return new Me(Math.min(t.width,this.act.windowSize.width),Math.min(t.height,this.act.windowSize.height))}},{key:"attachEvents",value:function(){var t=this;this.events.forEach((function(e){return t.attachEvent(t.$div,e)})),ye.TOUCH_DEVICE||-1!==i().inArray(jr,this.events)||this.attachEvent(this.$div,jr)}},{key:"attachEvent",value:function(t,e){var n=this;t.on(e,this,(function(e){if(e.type!==jr||(ye.TOUCH_DEVICE||(ye.TOUCH_DEVICE=!0),-1!==i().inArray(jr,n.events)))return e.data.processEvent.call(e.data,e);t.off(jr)}))}},{key:"processEvent",value:function(t){return!1}},{key:"fitTo",value:function(t,e){var n=this,i=new De;this.act.absolutePositioned&&null!==this.act.absolutePosition&&(i.x=Math.max(0,this.act.absolutePosition.x+t.pos.x),i.y=Math.max(0,this.act.absolutePosition.y+t.pos.y),t.dim.width-=this.act.absolutePosition.x,t.dim.height-=this.act.absolutePosition.y);var r=this.setDimension(new Me(Math.max(2*this.act.margin+ye.MINIMUM_WIDTH,t.dim.width),Math.max(2*this.act.margin+ye.MINIMUM_HEIGHT,t.dim.height)));this.act.absolutePositioned||i.moveTo(Math.max(0,t.pos.x+(t.dim.width-r.width)/2),Math.max(0,t.pos.y+(t.dim.height-r.height)/2)),i.x+r.width>e.dim.width&&(i.x=Math.max(0,e.dim.width-r.width)),i.y+r.height>e.dim.height&&(i.y=Math.max(0,e.dim.height-r.height)),this.setBounds(new Fe(i.x,i.y,r.width,r.height)),window.setTimeout((function(){return n.buildAccessibleComponents()}),0)}},{key:"buildAccessibleComponents",value:function(){this.accessibleCanvas&&this.$canvas&&this.$canvas.children().length>0&&this.$canvas.empty()}},{key:"forceFinishActivity",value:function(){}},{key:"finishActivity",value:function(t){this.playing=!1,this.solved=t,null!==this.bc&&this.bc.end(),t?this.setAndPlayMsg("final","finishedOk"):this.setAndPlayMsg("finalError","finishedError"),this.ps.activityFinished(this.solved),this.ps.reportEndActivity(this.act,this.solved)}},{key:"setAndPlayMsg",value:function(t,e){var n=this.act.messages[t]||null;this.ps.setMsg(n),null!==n&&null!==n.mediaContent||this.playEvent(e)}},{key:"end",value:function(){this.forceFinishActivity(),this.playing&&(null!==this.bc&&this.bc.end(),this.ps.reportEndActivity(this.act,this.solved),this.playing=!1,this.solved=!1),this.clear()}},{key:"clear",value:function(){}},{key:"enableCounters",value:function(t,e,n){void 0===t&&(t=this.act.bTimeCounter),void 0===e&&(e=this.act.bScoreCounter),void 0===n&&(n=this.act.bActionsCounter),this.ps.setCounterEnabled("time",t),this.act.countDownTime&&this.ps.setCountDown("time",this.act.maxTime),this.ps.setCounterEnabled("score",e),this.ps.setCounterEnabled("actions",n),this.act.countDownActions&&this.ps.setCountDown("actions",this.act.maxActions)}},{key:"shuffle",value:function(t,e,n){for(var i=this.act.shuffles,r=i,o=function(){var e=r>i?i:r;t.forEach((function(t){t&&t.shuffleCells(e,n)})),r-=i};r>0;)o()}}]),n}(Ge);Object.assign(Rr.prototype,{act:null,$div:null,$canvas:null,accessibleCanvas:!0,skin:null,$animatedBg:null,$animatedBgB:null,solved:!1,bgImage:null,playing:!1,firstRun:!0,currentItem:0,bc:null,ps:null,minimumSize:null,preferredSize:null,events:["click"],backgroundColor:null,backgroundTransparent:!1,border:null}),Br.Panel=Rr;var Ir=Br;function Dr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Mr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings=new In(this),this.activitySequence=new ui(this),this._activities={},this.mediaBag=new xi(this)}var e,n,r;return e=t,n=[{key:"setProperties",value:function(t,e,n,r){var o=this;e&&(this.path=e,e.file?this.basePath=e:this.basePath=te(e)),this.zip=n,this.name=t.attr("name"),this.version=t.attr("version"),void 0!==t.attr("type")&&""!==t.attr("type")&&(this.type=t.attr("type")),void 0!==t.attr("code")&&""!==t.attr("code")&&(this.code=t.attr("code")),this.settings.setProperties(t.children("settings")),this.activitySequence.setProperties(t.children("sequence")),this.mediaBag.setProperties(t.children("mediaBag")),this.reportableActs=0,this._activities={};var s=t.children("activities").children("activity"),a=this.mediaBag.getElementsOfType("font");return a.length>0&&(r.ownFonts=(r.ownFonts||[]).concat(a)),Be.checkTree(s,r),s.each((function(t,e){var n=i()(e);o._activities[Qt(n.attr("name"))]=n,"true"===n.children("settings").attr("report")&&o.reportableActs++})),this}},{key:"getAttributes",value:function(){var t=this,e=Object.keys(this._activities);return this.activities={},e.forEach((function(e){var n=t._activities[e];t.activities[e]=n.jquery?Ir.getActivity(n,t):n})),qt(this,["name","version","type","code","settings","activitySequence","activities","mediaBag"])}},{key:"getJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return JSON.stringify(this.getAttributes(),(function(t,e){return e.toFixed?Number(e.toFixed(4)):e}),t)}},{key:"setAttributes",value:function(t,e,n,i){var r=this;e&&(this.path=e,e.file?this.basePath=e:this.basePath=te(e)),this.zip=n,this.name=t.name,this.version=t.version,t.type&&(this.type=t.type),t.code&&(this.code=t.code),this.settings.setAttributes(t.settings),this.activitySequence.setAttributes(t.activitySequence),this.mediaBag.setAttributes(t.mediaBag),this.reportableActs=0,this._activities=t.activities;var o=this.mediaBag.getElementsOfType("font");return o.length>0&&(i.ownFonts=(i.ownFonts||[]).concat(o)),Be.checkTree(this._activities,i),this.reportableActs=Object.keys(this._activities).filter((function(t){return r._activities[t].includeInReports})).length,this}},{key:"getActivity",value:function(t){return Ir.getActivity(this._activities[Qt(t)],this)}},{key:"realize",value:function(t){null===this.skin&&null!==this.settings.skinFileName&&this.settings.skinFileName.length>0&&(this.skin=this.mediaBag.getSkinElement(this.settings.skinFileName,t)),this.settings.eventSounds.realize(t,this.mediaBag),this.mediaBag.buildAll("font",null,t)}},{key:"end",value:function(){}}],n&&Dr(e.prototype,n),r&&Dr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Mr.prototype,{name:"unknown",version:"0.1.3",type:null,code:null,settings:null,activitySequence:null,_activities:null,reportableActs:0,mediaBag:null,skin:null,basePath:"",path:null,zip:null});var Nr=Mr;function Vr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var qr=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.source=n||null,this.dest=i||null,this.ok=r||!1,this.time=(new Date).valueOf()}var e,n,r;return e=t,n=[{key:"$getXML",value:function(){var t={ok:this.ok,time:this.time};return this.type&&(t.type=this.type),this.source&&(t.source=this.source),this.dest&&(t.dest=this.dest),i()("<action/>",t)}},{key:"setProperties",value:function(t){var e=this;he(t.get(0).attributes,(function(t,n){switch(t){case"type":case"source":case"dest":e[t]=n;break;case"time":e[t]=Number(n);break;case"ok":e[t]=mt(n,!1)}}))}}],n&&Vr(e.prototype,n),r&&Vr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(qr.prototype,{type:"unknown",source:null,dest:null,time:0,isOk:!1});var Lr=qr;function Fr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var zr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.code=e.code,this.actions=[],this.startTime=(new Date).valueOf(),this.minActions=e.getMinNumActions(),this.reportActions=e.reportActions}var e,n,r;return e=t,n=[{key:"$getXML",value:function(){var t={start:this.startTime,time:this.totalTime,solved:this.solved,score:this.score,minActions:this.minActions,actions:this.numActions};this.name&&(t.name=this.name),this.code&&(t.code=this.code),this.closed||(t.closed=!1),this.reportActions&&(t.reportActions=!0);var e=i()("<activity/>",t);return this.actions.forEach((function(t){e.append(t.$getXML())})),e}},{key:"getData",value:function(){var t={name:this.name,time:Math.round(this.totalTime/10)/100,solved:this.solved,score:this.score,minActions:this.minActions,actions:this.numActions,precision:this.getPrecision(),closed:this.closed};return this.code&&(t.code=this.code),t}},{key:"setProperties",value:function(t){var e=this;he(t.get(0).attributes,(function(t,n){switch(t){case"name":case"code":e[t]=n;break;case"start":case"time":case"score":case"minActions":case"actions":e[t]=Number(n);break;case"solved":case"closed":case"reportActions":e[t]=mt(n,!1)}})),t.children("action").each((function(t,n){var r=new Lr;r.setProperties(i()(n)),e.actions.push(r)}))}},{key:"newAction",value:function(t,e,n,i){this.closed||(this.lastAction=new Lr(t,e,n,i),this.actions.push(this.lastAction))}},{key:"getActionReg",value:function(t){return t>=this.actions.length?null:this.actions[t]}},{key:"closeActivity",value:function(){this.closed||(this.lastAction?this.totalTime=this.lastAction.time-this.startTime:this.totalTime=(new Date).valueOf()-this.startTime,this.closed=!0)}},{key:"getPrecision",value:function(){var t=0;return this.closed&&this.minActions>0&&this.numActions>0&&(t=this.solved?this.numActions<this.minActions?100:Math.round(100*this.minActions/this.numActions):Math.round(this.score*this.score*100/(this.minActions*this.numActions))),t}},{key:"endActivity",value:function(t,e,n){this.closed||(this.solved=n,this.numActions=e,this.score=t,this.closeActivity())}}],n&&Fr(e.prototype,n),r&&Fr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(zr.prototype,{name:"",code:"",startTime:0,totalTime:0,actions:[],solved:!1,lastAction:null,score:0,minActions:0,closed:!1,reportActions:!1,numActions:0});var Ur=zr;function $r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wr(t,e,n){return e&&Hr(t.prototype,e),n&&Hr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Gr=function(){function t(e){$r(this,t),this.name=e.tag,this.description=e.description,this.activities=[],this.currentActivity=null,this.totalTime=0,this.closed=!1,this.info=new Jr(this)}return Wr(t,[{key:"getData",value:function(){var t={sequence:this.name,activities:[]};return this.activities.forEach((function(e){return t.activities.push(e.getData())})),t}},{key:"getInfo",value:function(){return this.info.recalc()}},{key:"endSequence",value:function(){this.currentActivity&&this.activities.length>0&&(this.currentActivity.closed||this.currentActivity.closeActivity(),this.totalTime=this.currentActivity.startTime+this.currentActivity.totalTime-this.activities[0].startTime,this.info.valid=!1)}},{key:"newActivity",value:function(t){this.closed||(this.currentActivity=new Ur(t),this.activities.push(this.currentActivity),this.info.valid=!1)}},{key:"endActivity",value:function(t,e,n){this.currentActivity&&(this.currentActivity.endActivity(t,e,n),this.info.valid=!1)}},{key:"newAction",value:function(t,e,n,i){this.currentActivity&&(this.currentActivity.newAction(t,e,n,i),this.info.valid=!1)}}]),t}();Object.assign(Gr.prototype,{name:"",description:"",activities:[],currentActivity:null,totalTime:0,closed:!1,info:null});var Jr=function(){function t(e){$r(this,t),this.sqReg=e}return Wr(t,[{key:"clear",value:function(){this.nActivities=this.nActClosed=this.nActSolved=this.nActScore=0,this.ratioSolved=this.nActions=this.tScore=this.tTime=0,this.valid=!1}},{key:"recalc",value:function(){var t=this;return this.valid||(this.clear(),this.nActivities=this.sqReg.activities.length,this.nActivities>0&&(this.sqReg.activities.forEach((function(e){if(e.closed){t.nActClosed++,t.tTime+=e.totalTime,t.nActions+=e.numActions,e.solved&&t.nActSolved++;var n=e.getPrecision();n>=0&&(t.tScore+=n,t.nActScore++)}})),this.nActClosed>0&&(this.ratioSolved=this.nActSolved/this.nActClosed),this.nActScore>0&&(this.tScore=Math.round(this.tScore/this.nActScore))),this.valid=!0),this}}]),t}();Object.assign(Jr.prototype,{sqReg:null,valid:!1,nActivities:0,nActClosed:0,nActSolved:0,nActScore:0,ratioSolved:0,nActions:0,tScore:0,tTime:0}),Gr.Info=Jr;var Kr=Gr;function Zr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qr(t,e,n){return e&&Yr(t.prototype,e),n&&Yr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Xr=function(){function t(e,n){Zr(this,t),this.projectName=e.name,this.code=n||e.code,this.sequences=[],this.actNames=[],this.started=new Date,this.info=new to(this),this.reportableActs=e.reportableActs}return Qr(t,[{key:"getData",value:function(t,e){t&&this.info.recalc();var n={projectName:this.projectName,played:this.info.nActivities,ratioPlayed:Math.round(100*this.info.ratioPlayed),solved:this.info.nActSolved,ratioSolved:Math.round(100*this.info.ratioSolved),actions:this.info.nActions,score:this.info.tScore,time:Math.round(this.info.tTime/10)/100,sequences:[]};return this.sequences.forEach((function(t){var i=t.getData();(e||i.activities.length>0)&&n.sequences.push(i)})),n}},{key:"getInfo",value:function(){return this.info.recalc()}},{key:"end",value:function(){this.endSequence()}},{key:"endSequence",value:function(){this.currentSequence&&0===this.currentSequence.totalTime&&this.currentSequence.endSequence(),this.currentSequence=null,this.info.valid=!1}},{key:"newSequence",value:function(t){this.endSequence(),this.currentSequence=new Kr(t),this.sequences.push(this.currentSequence),this.info.valid=!1}},{key:"newActivity",value:function(t){this.currentSequence&&(-1===this.actNames.indexOf(t.name)&&this.actNames.push(t.name),this.currentSequence.newActivity(t),this.info.valid=!1)}},{key:"endActivity",value:function(t,e,n){this.currentSequence&&(this.currentSequence.endActivity(t,e,n),this.info.valid=!1)}},{key:"newAction",value:function(t,e,n,i){this.currentSequence&&(this.currentSequence.newAction(t,e,n,i),this.info.valid=!1)}},{key:"getCurrentSequenceTag",value:function(){return this.currentSequence?this.currentSequence.name:null}},{key:"getCurrentSequenceInfo",value:function(){return this.currentSequence?this.currentSequence.getInfo():null}}]),t}();Object.assign(Xr.prototype,{reportableActs:0,actNames:null,sequences:null,currentSequence:null,started:null,projectName:"",info:null,code:null});var to=function(){function t(e){Zr(this,t),this.sReg=e}return Qr(t,[{key:"clear",value:function(){this.numSequences=this.nActivities=this.nActSolved=this.nActScore=0,this.ratioSolved=this.ratioPlayed=this.nActions=this.tScore=this.tTime=0,this.valid=!1}},{key:"recalc",value:function(){var t=this;return this.valid||(this.clear(),this.sReg.sequences.forEach((function(e){var n=e.getInfo();n.nActivities>0&&(t.numSequences++,n.nActClosed>0&&(t.nActivities+=n.nActClosed,t.nActions+=n.nActions,n.nActScore>0&&(t.nActScore+=n.nActScore,t.tScore+=n.tScore*n.nActScore),t.tTime+=n.tTime,t.nActSolved+=n.nActSolved))})),this.nActScore>0&&(this.tScore=Math.round(this.tScore/this.nActScore)),this.nActivities>0&&(this.ratioSolved=this.nActSolved/this.nActivities,this.sReg.reportableActs>0&&(this.ratioPlayed=this.sReg.actNames.length/this.sReg.reportableActs)),this.valid=!0),this}}]),t}();Object.assign(to.prototype,{sReg:null,valid:!1,numSequences:0,nActivities:0,nActSolved:0,nActScore:0,ratioSolved:0,ratioPlayed:0,nActions:0,tScore:0,tTime:0}),Xr.Info=to;var eo=Xr;function no(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var io=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"Decrypt",value:function(e){if(null===e||0===e.length)return null;var n=t.decodify(e);return n===t.BLANK?"":n}},{key:"hexCharArrayToChar",value:function(t,e){for(var n=0,i=0;i<=3;i++){var r=Number.parseInt(t[e+i],16);if(isNaN(r))throw"Invalid expression!";n=16*n+r}return String.fromCharCode(n)}},{key:"hexCharArrayToInt",value:function(t,e){for(var n=0,i=0;i<=1;i++){var r=Number.parseInt(t[e+i],16);if(isNaN(r))throw"Invalid expression!";n=16*n+r}return n}},{key:"decodifyZerosField",value:function(t){var e="",n=Number.parseInt(t[0],32),i=0,r=0;for(r=0;0!==n;r++){for(;n>0;)e=e+t[3*r+1]+t[3*r+2],n--,i++;n=t.length>3*r+3?Number.parseInt(t[3*r+3],32):0}for(var o=3*r+1;o<t.length;o++)e+=t[o];return Number.parseInt(i,32)+e}},{key:"decompressZeros",value:function(e){e=t.decodifyZerosField(e);for(var n=Number.parseInt(e[0],32),i=2*n+1,r=!1,o="",s=0;s<n&&!r;s++){for(var a=t.hexCharArrayToInt(e,1+2*s).toString(2);a.length<8;)a="0"+a;for(var c=0;c<=7&&!r;c++)"1"===a[c]?o+="0":i<e.length?o+=e[i++]:r=!0}return o}},{key:"decodifyFromHex",value:function(e){for(var n="",i=0,r=0;i<e.length;r++)n+=t.hexCharArrayToChar(e,i),i+=4;return n}},{key:"unchangeOrder",value:function(t){for(var e=0,n=t.length-1,i=[],r=0;r<t.length;r++)i[r]="";for(var o=0;o<t.length;o++)i[o]=o%2==0?t[e++]:t[n--];return i.join("")}},{key:"codify",value:function(e){if(e.length>24)throw"Password is too large!";return t.changeOrder(t.compressZeros(t.codifyToHexWord(e)))}},{key:"decodify",value:function(e){try{return t.decodifyFromHex(t.decompressZeros(t.unchangeOrder(e)))}catch(t){return""}}}],(n=null)&&no(e.prototype,n),i&&no(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();io.BLANK="___blank___##";var ro=io;function oo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var so=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.API=e,"function"==typeof e.Initialize?this.is2004=!0:(this.prefix="LMS",this.core="cmi.core."),this.reporter=n}var e,n,r;return e=t,n=[{key:"initialize",value:function(){var t=this,e=!1;try{(e=this.API[this.prefix+"Initialize"](""))&&(this.studentId=this.getValue(this.core+(this.is2004?"learner_id":"student_id")),this.studentName=this.getValue(this.core+(this.is2004?"learner_name":"student_name")),this.setValue(this.core+"score.min",0),this.setValue(this.core+"score.max",100),i()(window).on("unload",(function(){t.commitInfo(),t.terminate(),t.API=null}))),gt("debug","SCORM initialized")}catch(t){gt("error","Error initializing SCORM API: ".concat(t.message))}return e}},{key:"terminate",value:function(){var t=!1;try{t=this.API[this.is2004?"Terminate":"LMSFinish"]("")}catch(t){gt("error","Error terminating SCORM API: ".concat(t.message))}return t}},{key:"commitInfo",value:function(){var t=this.reporter.getInfo(),e=Math.round(100*t.globalScore),n=this.getTimeExpression(t.tTime);this.setValue(this.core+"score.raw",e),this.setValue(this.core+"session_time",n),this.commit(),gt("debug","SCORM results reported: ".concat(e," (").concat(n,")"))}},{key:"commit",value:function(){var t=!1;try{t=this.API[this.prefix+"Commit"]("")}catch(t){gt("error","Error commiting data to the SCORM API: ${ex.message}")}return t}},{key:"setValue",value:function(t,e){var n=!1;try{n=this.API[this.prefix+"SetValue"](t,e)}catch(n){gt("error",'Error setting value "'.concat(e,'" to "').concat(t,'" in SCORM API: ').concat(n.message))}return n}},{key:"getValue",value:function(t){var e=!1;try{e=this.API[this.prefix+"GetValue"](t)}catch(e){gt("error",'Error retrieving "'.concat(t,'" from SCORM API: ').concat(e.message))}return e}},{key:"getTimeExpression",value:function(t){var e=new Date(t),n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds();return this.is2004?"PT".concat(n,"H").concat(i,"M").concat(r,"S"):"".concat(("0000"+n).slice(-4),":").concat(("00"+i).slice(-2),":").concat(("00"+r).slice(-2))}},{key:"getScormType",value:function(){return"SCORM ".concat(this.is2004?"2004":"1.2")}}],r=[{key:"scanForAPI",value:function(e,n){return e.API_1484_11&&e.API_1184_11.Initialize&&e.API_1184_11.SetValue&&e.API_1184_11.Commit?e.API_1184_11:e.API&&e.API.LMSInitialize&&e.API.LMSSetValue&&e.API.LMSCommit?e.API:e.parent&&e.parent!==e&&n++<t.DISCOVER_MAX_TRIES?t.scanForAPI(e.parent,n):null}},{key:"getSCORM",value:function(e){var n=null;try{var i=t.scanForAPI(window,0);null===i&&window.opener&&(i=t.scanForAPI(window.opener,0)),i&&((n=new t(i,e)).initialize()||(n=null))}catch(t){n=null,gt("warn","Unable to use SCORM: %s",t.toString())}return n}}],n&&oo(e.prototype,n),r&&oo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(so.prototype,{is2004:!1,reporter:null,prefix:"",core:"cmi.",API:null,studentId:"",studentName:""}),so.DISCOVER_MAX_TRIES=50;var ao=so;function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function uo(t,e,n){return e&&lo(t.prototype,e),n&&lo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var ho=function(){function t(e){co(this,t),this.ps=e,this.sessions=[],this.started=new Date,this.initiated=!1,this.info=new fo(this)}return uo(t,[{key:"getInfo",value:function(){return this.info.recalc()}},{key:"getProperty",value:function(t,e){return e}},{key:"getBooleanProperty",value:function(t,e){var n=this.getProperty(t,!0===e?"true":"false");return null===t?e:"true"===n}},{key:"getGroups",value:function(){return Promise.reject("No groups defined!")}},{key:"getUsers",value:function(t){return Promise.reject("No users defined in "+t)}},{key:"getUserData",value:function(t){return Promise.reject("Unknown user!")}},{key:"getGroupData",value:function(t){return Promise.reject("Unknown group!")}},{key:"userBased",value:function(){return null===this.bUserBased&&(this.bUserBased=this.getBooleanProperty("USER_TABLES",!1)),this.bUserBased}},{key:"promptForNewGroup",value:function(){return Promise.reject("Remote creation of groups not yet implemented!")}},{key:"promptForNewUser",value:function(){return Promise.reject("Remote creation of users not yet implemented!")}},{key:"promptGroupId",value:function(){var t=this;return new Promise((function(e,n){t.userBased()?t.getGroups().then((function(r){if(!r||r.length<1)n("No groups defined!");else{var o=0,s=i()("<select/>").attr({size:Math.max(3,Math.min(15,r.length))});r.forEach((function(t){return s.append(i()("<option/>").attr({value:t.id}).text(t.name))})),s.change((function(t){o=t.target.selectedIndex})),t.ps.skin.showDlg(!0,{main:[i()("<h2/>",{class:"subtitle"}).html(pt("Select group:")),s],bottom:[t.ps.skin.$okDlgBtn,t.ps.skin.$cancelDlgBtn]}).then((function(){e(r[o].id)})).catch(n)}})).catch(n):n("This system does not manage users!")}))}},{key:"promptUserId",value:function(t){var e=this;return new Promise((function(n,r){if(null===e.userId||t)if(e.userBased()){var o=i()("<input/>",{type:"password",size:8,maxlength:64});if(e.getBooleanProperty("SHOW_USER_LIST",!0))e.promptGroupId().then((function(t){e.getUsers(t).then((function(s){if(!s||s.length<1)r("Group "+t+" has no users!");else{var a=-1,c=i()("<select/>").attr({size:Math.max(3,Math.min(15,s.length))});s.forEach((function(t){return c.append(i()("<option/>").attr({value:t.id}).text(t.name))})),c.change((function(t){a=t.target.selectedIndex})),e.ps.skin.showDlg(!0,{main:[i()("<h2/>",{class:"subtitle"}).html(pt("Select user:")),c,i()("<h2/>",{class:"subtitle"}).html(pt("Password:")).append(o)],bottom:[e.ps.skin.$okDlgBtn,e.ps.skin.$cancelDlgBtn]}).then((function(){a>=0?s[a].pwd&&ro.Decrypt(s[a].pwd)!==o.val()?(window.alert(pt("Incorrect password")),r("Incorrect password")):(e.userId=s[a].id,n(e.userId)):r("No user has been selected")})).catch(r)}})).catch(r)})).catch(r);else{var s=i()("<input/>",{type:"text",size:8,maxlength:64});e.ps.skin.showDlg(!0,{main:[i()("<div/>").css({"text-align":"right"}).append(i()("<h2/>",{class:"subtitle"}).html(pt("User:")).append(s)).append(i()("<h2/>",{class:"subtitle"}).html(pt("Password:")).append(o))],bottom:[e.ps.skin.$okDlgBtn,e.ps.skin.$cancelDlgBtn]}).then((function(){e.getUserData(s.val()).then((function(t){t.pwd&&ro.Decrypt(t.pwd)!==o.val()?(window.alert(pt("Incorrect password")),r("Incorrect password")):(e.userId=t.id,n(e.userId))})).catch(r)})).catch(r)}}else r("This system does not manage users!");else n(e.userId)}))}},{key:"getData",value:function(){this.info.recalc();var t={started:this.started.toISOString(),descriptionKey:this.descriptionKey,descriptionDetail:this.descriptionDetail,projects:this.info.numSessions,sequences:this.info.numSequences,activitiesDone:this.info.nActivities,playedOnce:this.info.nActPlayed,reportable:this.info.reportableActs,ratioPlayed:Math.round(100*this.info.ratioPlayed),activitiesSolved:this.info.nActSolved,ratioSolved:Math.round(100*this.info.ratioSolved),actScore:this.info.nActScore,partialScore:Math.round(100*this.info.partialScore),globalScore:Math.round(100*this.info.globalScore),time:Math.round(this.info.tTime/10)/100,actions:this.info.nActions,sessions:[]};return this.userId?t.userId=this.userId:this.SCORM&&(t.user=this.SCORM.studentName+(""===this.SCORM.studentId?"":" (".concat(this.SCORM.studentId,")"))),this.sessions.forEach((function(e){e.getInfo().numSequences>0&&t.sessions.push(e.getData(!1,!1))})),t}},{key:"init",value:function(e){return e||(e=this.ps.options),this.userId=bt(e.user),this.sessionKey=bt(e.key),this.sessionContext=bt(e.context),this.groupCodeFilter=bt(e.groupCodeFilter),this.userCodeFilter=bt(e.userCodeFilter),!1!==e.SCORM&&(this.SCORM=ao.getSCORM(this),null!==this.SCORM&&this.descriptionKey===t.prototype.descriptionKey&&(this.descriptionKey=this.SCORM.getScormType())),this.initiated=!0,gt("debug","Basic Reporter initialized"),Promise.resolve(!0)}},{key:"end",value:function(){return gt("debug","Basic Reporter ending"),this.endSession(),Promise.resolve(!0)}},{key:"endSequence",value:function(){this.currentSession&&(this.currentSession.endSequence(),this.info.valid=!1)}},{key:"endSession",value:function(){this.endSequence(),this.currentSession=null}},{key:"newGroup",value:function(t){throw"No database!"}},{key:"newUser",value:function(t){throw"No database!"}},{key:"newSession",value:function(t){this.endSession(),this.currentSession=new eo(t),this.sessions.push(this.currentSession),this.info.valid=!1}},{key:"newSequence",value:function(t){this.currentSession&&(this.currentSession.newSequence(t),this.info.valid=!1,this.SCORM&&this.SCORM.commitInfo())}},{key:"newActivity",value:function(t){this.currentSession&&(this.currentSession.newActivity(t),this.info.valid=!1)}},{key:"endActivity",value:function(t,e,n){this.currentSession&&(this.currentSession.endActivity(t,e,n),this.info.valid=!1)}},{key:"newAction",value:function(t,e,n,i){this.currentSession&&(this.currentSession.newAction(t,e,n,i),this.info.valid=!1)}},{key:"getCurrentSequenceInfo",value:function(){return null===this.currentSession?null:this.currentSession.getCurrentSequenceInfo()}},{key:"getCurrentSequenceTag",value:function(){return null===this.currentSession?null:this.currentSession.getCurrentSequenceTag()}}],[{key:"registerClass",value:function(e,n){return t.CLASSES[e]=n,n}},{key:"getReporter",value:function(e,n){var i=null;return null===e&&(e="Reporter",n.options.hasOwnProperty("reporter")&&(e=n.options.reporter)),t.CLASSES.hasOwnProperty(e)?i=new t.CLASSES[e](n):gt("error","Unknown reporter class: %s",e),i}}]),t}();Object.assign(ho.prototype,{info:null,ps:null,SCORM:null,userId:null,sessionKey:null,sessionContext:null,groupCodeFilter:null,userCodeFilter:null,descriptionKey:"Results are not currently being saved",descriptionDetail:"",started:null,sessions:[],currentSession:null,initiated:!1,bUserBased:null,MAX_USERID_PROMPT_ATTEMPTS:3});var fo=function(){function t(e){co(this,t),this.rep=e}return uo(t,[{key:"clear",value:function(){this.numSessions=this.numSequences=this.nActivities=this.reportableActs=this.nActSolved=this.nActPlayed=this.nActScore=this.nActions=this.ratioSolved=this.ratioPlayed=this.tScore=this.tTime=this.partialScore=this.globalScore=0,this.valid=!1}},{key:"recalc",value:function(){var t=this;return this.valid||(this.clear(),this.rep.sessions.forEach((function(e){var n=e.getInfo();t.reportableActs+=n.sReg.reportableActs,n.numSequences>0&&(t.numSessions++,t.numSequences+=n.numSequences,n.nActivities>0&&(t.nActivities+=n.nActivities,t.nActPlayed+=n.sReg.actNames.length,t.nActSolved+=n.nActSolved,t.nActions+=n.nActions,n.nActScore>0&&(t.tScore+=n.tScore*n.nActScore,t.nActScore+=n.nActScore),t.tTime+=n.tTime))})),this.nActivities>0&&(this.ratioSolved=this.nActSolved/this.nActivities,this.reportableActs>0&&(this.ratioPlayed=this.nActPlayed/this.reportableActs),this.partialScore=this.tScore/(100*this.nActScore),this.globalScore=this.partialScore*this.ratioPlayed),this.valid=!0),this}}]),t}();Object.assign(fo.prototype,{rep:null,valid:!1,numSessions:0,numSequences:0,nActivities:0,reportableActs:0,nActSolved:0,nActPlayed:0,nActScore:0,nActions:0,ratioSolved:0,ratioPlayed:0,tScore:0,partialScore:0,tTime:0,globalScore:0}),ho.Info=fo,ho.CLASSES={Reporter:ho};var po=ho;function vo(t){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vo(t)}function yo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function go(t,e){return go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},go(t,e)}function mo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ko(t);if(e){var r=ko(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return bo(this,n)}}function bo(t,e){if(e&&("object"===vo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wo(t)}function wo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ko(t){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ko(t)}var Ao=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&go(t,e)}(c,t);var e,n,r,s=mo(c);function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),n=s.call(this),e=ft(e),n.options=i().extend(Object.create(n.options),e),n.id="JC".concat((65536+Math.round(65535*Math.random())).toString(16).toUpperCase().substr(1)),n.$topDiv=t||i()("<div/>"),n.$topDiv.css({"text-align":"initial"}),n.$topDiv.parent().is("td")&&n.$topDiv.css({width:ae(n.options.width,null,null,"100%"),height:ae(n.options.height,null,null,"100%")}),n.$mainContainer=i()("<div/>",{class:"JClicContainer",id:n.id}).css({width:"100%",height:"100%"}).appendTo(n.$topDiv),n.localFS=location&&"file:"===location.protocol,n.$div=i()("<div/>",{class:"JClicPlayer"}),n.project=new Nr,n.activeMediaBag=new ln,n.counterVal={score:0,actions:0,time:0},n.bgImageOrigin=new De,n.buildActions(),n.history=new Xe(wo(n)),n.audioEnabled=n.options.audioEnabled,n.navButtonsAlways=n.options.navButtonsAlways,n.defaultSkin=kn.getSkin(n.options.skin,wo(n)),n.setSkin(kn.getSkin("@empty.xml",wo(n))),n.initTimers(),n.listenTouchEvents(),gt("info","JClicPlayer ready"),n}return e=c,n=[{key:"listenTouchEvents",value:function(){var t=this,e=null,n=0,i=this.$div[0],r=this.options,o=r.minSwipeX,s=r.maxSwipeY,a=r.rightToLeft,c=function(r){if(r.target===i&&r.changedTouches&&1===r.changedTouches.length){var c=r.changedTouches[0],l=e?c.clientX-e.clientX:0,u=e?c.clientY-e.clientY:0,h=Math.sqrt(l*l+u*u);switch(r.type){case"touchstart":var f=new Date;document&&document.fullscreenEnabled&&e&&n&&f-n<800&&h<o?(r.preventDefault(),gt("info","Toggle full screen mode from double touch"),t.skin.setScreenFull(),e=null):(e=c,n=f);break;case"touchend":if(e&&Math.abs(l)>o&&Math.abs(u)<s){var p=l<0&&!a?"next":"prev",d=t.actions[p];d&&d.enabled&&(r.preventDefault(),gt("info",'Performing action "'.concat(p,'" from touch gesture')),d.actionPerformed(r)),e=null}else h>o&&(e=null);break;case"touchcancel":e=null}}else e=null};i.addEventListener("touchstart",c),i.addEventListener("touchend",c),i.addEventListener("touchcancel",c)}},{key:"getUniqueId",value:function(t){return"".concat(this.id,"-").concat(t)}},{key:"buildActions",value:function(){var t=this;this.actions={next:new He("next",(function(){return t.history.processJump(t.project.activitySequence.getJump(!1,t.reporter),!1)})),prev:new He("prev",(function(){return t.history.processJump(t.project.activitySequence.getJump(!0,t.reporter),!1)})),return:new He("return",(function(){return t.history.pop()})),reset:new He("reset",(function(){t.actPanel&&t.actPanel.act.canReinit()&&t.initActivity()})),help:new He("help",(function(){t.actPanel&&t.actPanel.showHelp()})),info:new He("info",(function(){t.actPanel&&t.actPanel.act.hasInfo()&&(t.actPanel.act.infoUrl?t.displayURL(t.act.infoUrl,!0):t.actPanel.act.infoCmd&&t.runCmd(t.actPanel.act.infoCmd))})),reports:new He("reports",(function(){return t.showReports()})),audio:new He("audio",(function(){t.audioEnabled=!t.audioEnabled,t.audioEnabled||t.stopMedia(),jn.prototype.globalEnabled=t.audioEnabled}))},i().each(this.actions,(function(e,n){n.addStatusListener((function(e){t.skin&&t.skin.actionStatusChanged(e)}))}))}},{key:"reset",value:function(){gt("info","Restoring player"),this.removeActivity(),this.end(),this.activeMediaBag=new ln,this.history.clearHistory(),this.setSkin(null),this.setMsg(null),this.setCounterValue("score",0),this.setCounterValue("actions",0),this.setCounterValue("time",0),this.skin&&this.skin.setWaitCursor("reset")}},{key:"stop",value:function(){this.stopMedia(-1)}},{key:"end",value:function(){var t=null;return this.stopMedia(),this.closeHelpWindow(),this.reporter&&(t=this.reporter.end(),this.reporter=null),this.actPanel&&(this.actPanel.end(),this.actPanel.$div.remove(),this.actPanel=null),this.project&&(this.project.end(),this.project=null),this.activeMediaBag&&this.activeMediaBag.removeAll(),t||Promise.resolve(!0)}},{key:"initReporter",value:function(){return this.reporter&&(this.reporter.end(),this.reporter=null),this.reporter=po.getReporter(null,this),this.reporter.init()}},{key:"initTimers",value:function(){var t=this;this.timer&&this.timer.stop(),this.timer=new We((function(){t.incCounterValue("time"),t.actPanel&&t.actPanel.act.maxTime>0&&t.actPanel.playing&&t.counterVal.time>=t.actPanel.act.maxTime&&t.actPanel.finishActivity(!1)}),1e3,!1),this.delayedTimer&&this.delayedTimer.stop(),this.delayedTimer=new We((function(){t.delayedAction&&t.delayedAction.processEvent(t.delayedAction,null)}),1e3,!1),this.delayedTimer.repeats=!1}},{key:"showReports",value:function(){this.skin&&this.skin.showReports(this.reporter)}},{key:"closeHelpWindow",value:function(){this.skin&&this.skin._closeDlg(!1)}},{key:"setSkin",value:function(t){!(t=t||(this.project&&this.project.skin?this.project.skin:this.defaultSkin))||null!==this.skin&&t.name===this.skin.name||(t.attach(this),this.skin=t,this.skin.doLayout())}},{key:"setProject",value:function(t){this.project&&(this.project!==t&&this.project.end(),this.removeActivity()),this.project=t||new Nr,this.project.realize(this)}},{key:"load",value:function(t,e,n){var r=this;this.forceFinishActivity(),this.setWaitCursor(!0);var s=null;if(t){if("string"==typeof t){var c=ne(this.basePath,t);if(c.endsWith("project.json"))return gt("info","Loading JSON info from: ".concat(c)),void i().getJSON(c).done((function(t){var i=t.mainFile;i&&Zt(i,".jclic")||Zt(i,".jclic.json")?r.load(ne(te(c),i),e,n):gt("error",'Invalid or null "mainFile" specified in '.concat(c,' - "project.json".'))})).fail((function(e,n,i){var r="".concat(n," (").concat(i,") while loading ").concat(t);gt(r),window.alert("Error!\n".concat(r))})).always((function(){return r.setWaitCursor(!1)}));if(c.endsWith(".zip"))return this.zip=null,gt("info","Loading ZIP file: ".concat(c)),void a().getBinaryContent(c,(function(t,i){if(t)return r.setWaitCursor(!1),void gt("error","Error loading ZIP file: ".concat(t.toString()));(new(o())).loadAsync(i).then((function(t){r.zip=t,r.zip.fullZipPath=c,r.zip.zipBasePath=te(c);var i=null;r.zip.files["project.json"]?r.zip.files["project.json"].async("string").then((function(t){try{var i=JSON.parse(t);Zt(i.mainFile,".jclic")?r.load(ne(r.zip.zipBasePath,i.mainFile),e,n):gt("error",'Invalid or null "mainFile" specified in '.concat(c,' - "project.json".'))}catch(t){gt("error",'Error reading "project.json" in '.concat(c,": ").concat(t?t.toString():"unknown error"))}})).catch((function(t){gt("error","Error reading ZIP file: ".concat(t?t.toString():"unknown reason"))})):(i=Object.keys(r.zip.files).find((function(t){return t.endsWith(".jclic")}))||null)?r.load(ne(r.zip.zipBasePath,i),e,n):gt("error","This ZIP file does not contain any JClic project!"),r.setWaitCursor(!1)})).catch((function(t){gt("error","Error reading ZIP file: ".concat(t?t.toString():"unknown reason")),r.setWaitCursor(!1)}))}));if(this.localFS&&window.JClicObject&&!window.JClicObject.projectFiles[c])return l()("".concat(c,".js"),(function(){var i,o;window.JClicObject.projectFiles[c]&&(window.JClicObject.projectFiles[c]=(i=[[/&#xD;/g,"\r"],[/&#xA;/g,"\n"],[/&#x9;/g,"\t"]],o=window.JClicObject.projectFiles[c],i.reduce((function(t,e){var n=rt(e,2),i=n[0],r=n[1];return t.replace(i,r)}),o)),r.load(t,e,n))})),void this.setWaitCursor(!1);var u=function(o){var s=0===o.indexOf("data:text/xml;")||o.endsWith(".jclic");(s?i().get(o,null,null,"xml"):i().getJSON(o)).done((function(o){if(null!==o&&"object"===vo(o)){var a=new Nr;s?a.setProperties(i()(o).find("JClicProject"),c,r.zip,r.options):a.setAttributes(o,c,r.zip,r.options),gt("info","Project file loaded and parsed: ".concat(t));var l=a.mediaBag.buildAll(null,(function(t){gt("trace",'"'.concat(t.name,'" ready.')),r.incProgress(1)}),r);gt("info","Media elements to be loaded: ".concat(l)),r.setProgress(0,l);var u=0;r.setWaitCursor(!0);var h=window.setInterval((function(){++u>r.options.maxWaitTime/500&&(window.clearInterval(h),r.setProgress(-1),r.setWaitCursor(!1),gt("error","Error loading media")),-1===a.mediaBag.countWaitingElements()&&(window.clearInterval(h),r.setProgress(-1),r.setWaitCursor(!1),r.load(a,e,n))}),500)}else gt("error","Bad data. Project not loaded: ".concat(t))})).fail((function(e,n,i){var r="".concat(n," (").concat(i,") while loading ").concat(t);gt(r),window.alert("Error!\n".concat(r))})).always((function(){return r.setWaitCursor(!1)}))};gt("info","Loading project: ".concat(t));var h=c;if(this.zip){var f=ee(h,this.zip.zipBasePath);if(this.zip.files[f])return void this.zip.file(f).async("string").then((function(t){u("data:".concat(f.endsWith(".jclic")?"text/xml":"application/json",";charset=UTF-8,").concat(t))})).catch((function(t){gt("error",'Unable to extract "'.concat(f,'" from ZIP file because of: ').concat(t?t.toString():"unknown reason")),r.setWaitCursor(!1)}))}else if(this.localFS){if(!window.JClicObject||!window.JClicObject.projectFiles[c])return gt("error","Unable to load: ".concat(c,".js")),void this.setWaitCursor(!1);h="data:".concat(c.endsWith(".jclic")?"text/xml":"application/json",";charset=UTF-8,").concat(window.JClicObject.projectFiles[c])}return void u(h)}this.setProject(t),e||n||(e="0"),this.reporter&&this.reporter.newSession(t)}if(!Tt(e)){gt("info","Loading sequence: ".concat(e)),this.navButtonsDisabled=!1;var p=null;if("string"==typeof e&&(p=this.project.activitySequence.getElementByTag(e,!0)),null===p){var d=parseInt(e,10);"number"==typeof d&&(p=this.project.activitySequence.getElement(d,!0))}null!==p&&(this.reporter&&this.reporter.newSequence(p),n=p.activity)}if(n){var v=this.project.getActivity(n);v?(gt("info","Loading activity: ".concat(n)),wi.resetAudioElements(),v.prepareMedia(this),this.project.activitySequence.checkCurrentActivity(v.name),(s=v.getActivityPanel(this)).buildVisualComponents()):gt("error","Missing activity: ".concat(n))}if(null!==this.actPanel&&(this.actPanel.end(),this.actPanel.$div.remove(),this.actPanel=null,this.setCounterValue("time",0)),s){if(this.actPanel=s,this.options.fade>0&&this.actPanel.$div.css("display","none"),this.$div.prepend(this.actPanel.$div),this.skin&&this.skin.resetAllCounters(!1),this.actPanel.skin?this.setSkin(this.actPanel.skin):this.project.skin?(this.setSkin(this.project.skin),this.lastProjectSkin=this.project.skin):this.lastProjectSkin?this.setSkin(this.lastProjectSkin):this.setSkin(null),this.skin){var y=this.history.storedElementsCount()>0||this.options.returnAsExit,g=this.navButtonsAlways?"both":this.navButtonsDisabled?"none":this.project.activitySequence.getNavButtonsFlag();this.actions.next.setEnabled(("fwd"===g||"both"===g)&&this.project.activitySequence.hasNextAct(y)),this.actions.prev.setEnabled(("back"===g||"both"===g)&&this.project.activitySequence.hasPrevAct(y)),this.actions.return.setEnabled(y),this.actions.help.setEnabled(this.actPanel.act.helpWindowAllowed()),this.actions.reset.setEnabled(this.actPanel.act.canReinit()),this.actions.info.setEnabled(this.actPanel.act.hasInfo())}this.doLayout(),this.initActivity(),this.history.pushBrowserHistory(),this.actPanel.$div.fadeIn(this.options.fade,(function(){return r.activityReady()}))}this.setWaitCursor(!1)}},{key:"forceFinishActivity",value:function(){this.timer.stop(),this.delayedTimer.stop(),this.actPanel&&(this.closeHelpWindow(),this.actPanel.forceFinishActivity(),this.stopMedia(),this.activeMediaBag.removeAll())}},{key:"removeActivity",value:function(){this.forceFinishActivity(),this.actPanel&&(this.actPanel.end(),this.actPanel.$div.remove(),this.actPanel=null,this.setMsg(null),this.doLayout())}},{key:"initActivity",value:function(){this.setWaitCursor(!0),this.timer.stop(),this.delayedTimer.stop(),this.setCounterValue("time",0),this.stopMedia(),this.actPanel&&(this.actPanel.initActivity(),this.timer.start(),this.actPanel.act.mustPauseSequence()||this.startAutoPassTimer(),gt("info",'Activity "'.concat(this.actPanel.act.name,'" running'))),this.setWaitCursor(!1)}},{key:"activityReady",value:function(){this.actPanel&&(this.actPanel.activityReady(),gt("info","Activity ready"))}},{key:"startActivity",value:function(){this.setWaitCursor(!0),this.actPanel&&this.actPanel.startActivity(),this.setWaitCursor(!1)}},{key:"doLayout",value:function(){var t=this,e=this.dim.width=this.$div.width(),n=this.dim.height=this.$div.height(),i={"background-color":this.actPanel?this.actPanel.act.bgColor:"azure","background-image":""};if(this.actPanel){var r=this.actPanel.act;r.bgGradient&&(i["background-image"]=r.bgGradient.getCss()),r.bgImageFile&&r.bgImageFile.length>0&&this.project.mediaBag.getElement(r.bgImageFile,!0).getFullPathPromise().then((function(e){t.$div.css({"background-image":"url('"+e+"')","background-repeat":r.tiledBgImg?"repeat":"no-repeat","background-position":r.tiledBgImg?"":"center center"})}));var o=ye.BoxBase.AC_MARGIN,s=new Fe(o,o,e-2*o,n-2*o);this.actPanel.bgImage&&!r.tiledBgImg&&r.absolutePositioned&&(this.bgImageOrigin.x=(e-this.actPanel.bgImage.width)/2,this.bgImageOrigin.y=(n-this.actPanel.bgImage.height)/2,s.pos.moveTo(this.bgImageOrigin),s.dim.width-=this.bgImageOrigin.x-o,s.dim.height-=this.bgImageOrigin.y-o,s.dim.width=Math.min(s.dim.width,e),s.dim.height=Math.min(s.dim.height,n)),this.actPanel.fitTo(s,this)}this.$div.css(i)}},{key:"playMedia",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null,o=t.file,s=null;switch(t.type){case"PLAY_AUDIO":case"PLAY_VIDEO":case"PLAY_MIDI":case"RECORD_AUDIO":case"PLAY_RECORDED_AUDIO":if(this.audioEnabled){var a=this.activeMediaBag.getActiveMediaPlayer(t,this.project.mediaBag,this);a&&(s=function(){return a.play(n)})}break;case"RUN_CLIC_PACKAGE":r=new Vn("JUMP",o),t.externalParam&&(r.projectPath=t.externalParam),s=function(){return e.history.processJump(r,!0)};break;case"RUN_CLIC_ACTIVITY":this.history.push(),s=function(){return e.load(null,null,o)};break;case"RETURN":if(this.history.storedElementsCount()>0||!this.options.returnAsExit){s=function(){return e.history.pop()};break}case"EXIT":r=new Vn("EXIT",o),s=function(){return e.history.processJump(r,!1)};break;case"RUN_EXTERNAL":s=function(){return e.runCmd(o)};break;case"URL":o&&(s=function(){return e.displayURL(o,t.level>1)});break;default:gt("error","Unknown media type: ".concat(t.type))}i&&s?i.push(s):s&&s()}},{key:"stopMedia",value:function(t){"number"!=typeof t&&(t=-1),this.activeMediaBag.stopAll(t)}},{key:"runCmd",value:function(t){gt("warn",'Unsupported call to external command: "'.concat(t,'"'))}},{key:"activityFinished",value:function(t){this.closeHelpWindow(),gt("info","Activity finished"),this.timer.stop(),this.startAutoPassTimer()}},{key:"startAutoPassTimer",value:function(){var t=this.project.activitySequence.getCurrentAct();null!==t&&t.delay>0&&!this.delayedTimer.isRunning()&&!this.navButtonsDisabled&&(this.delayedAction=this.actions.next,this.delayedTimer.interval=1e3*t.delay,this.delayedTimer.start())}},{key:"setMsg",value:function(t){var e=this.skin?this.skin.getMsgBox():null;e&&(e.clear(),this.skin.invalidate(e).update(),e.setContent(t||Ii.EMPTY_CONTENT),this.skin.invalidate(e).update(),e.playMedia(this))}},{key:"playMsg",value:function(){this.skin&&this.skin.getMsgBox()&&this.skin.getMsgBox().playMedia(this)}},{key:"setCounterValue",value:function(t,e){this.counterVal[t]=e,this.skin&&this.skin.counters[t]&&this.skin.counters[t].setValue(e)}},{key:"getCounterValue",value:function(t){return this.counterVal[t]}},{key:"setCounterEnabled",value:function(t,e){this.skin&&(this.skin.enableCounter(t,e),this.setCountDown(t,0))}},{key:"incCounterValue",value:function(t){this.counterVal[t]++;var e=this.actPanel,n=this.skin?this.skin.counters[t]:null;n&&n.setValue(this.counterVal[t]),"actions"===t&&null!==e&&e.act.maxActions>0&&e.playing&&this.counterVal.actions>=e.act.maxActions&&window.setTimeout((function(){e.finishActivity(e.solved)}),0)}},{key:"setCountDown",value:function(t,e){this.skin&&this.skin.counters[t]&&this.skin.counters[t].setCountDown(e)}},{key:"setWaitCursor",value:function(t){this.skin&&this.skin.setWaitCursor(t)}},{key:"setProgress",value:function(t,e){this.skin&&this.skin.setProgress(t,e)}},{key:"incProgress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.skin&&this.skin.incProgress(t)}},{key:"getActiveMediaPlayer",value:function(t){return this.activeMediaBag&&t?this.activeMediaBag.getActiveMediaPlayer(t,this.project.mediaBag,this):null}},{key:"reportNewActivity",value:function(t){var e=this.project.activitySequence.getCurrentAct();this.reporter&&(e.tag===this.reporter.getCurrentSequenceTag()&&this.reporter.newSequence(e),t.includeInReports&&this.reporter.newActivity(t)),this.setCounterValue("actions",0),this.setCounterValue("score",0)}},{key:"reportNewAction",value:function(t,e,n,i,r,o){this.reporter&&t.includeInReports&&t.reportActions&&this.reporter.newAction(e,n,i,r),o>=0&&(this.incCounterValue("actions"),this.setCounterValue("score",o))}},{key:"reportEndActivity",value:function(t,e){this.reporter&&t.includeInReports&&this.reporter.endActivity(this.counterVal.score,this.counterVal.actions,e)}},{key:"showHelp",value:function(t){return!!this.skin&&this.skin.showHelp(t)}},{key:"displayURL",value:function(t,e){t&&(e?window.open(t,this.options.infoUrlFrame):this.end().then((function(){window.location.href=t})))}},{key:"exit",value:function(t){this.displayURL(t||this.options.exitUrl,!1)}},{key:"setWindowTitle",value:function(t){gt("info","running ".concat(t))}}],n&&yo(e.prototype,n),r&&yo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(Ge);Object.assign(Ao.prototype,{options:{maxWaitTime:12e4,infoUrlFrame:"_blank",exitUrl:null,returnAsExit:!1,audioEnabled:!0,navButtonsAlways:!1,fade:300,minSwipeX:40,maxSwipeY:100,rightToLeft:!1},id:"JC0000",$div:null,$topDiv:null,$mainContainer:null,fullScreenChecked:!1,project:null,basePath:"",zip:null,localFS:!1,actPanel:null,history:null,skin:null,defaultSkin:null,lastProjectSkin:null,activeMediaBag:null,reporter:null,actions:{},timer:null,delayedTimer:null,delayedAction:null,counterVal:{score:0,actions:0,time:0},bgImageOrigin:null,audioEnabled:!0,navButtonsDisabled:!1,navButtonsAlways:!1});var xo=Ao;function Co(t){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Co(t)}function So(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oo(){return Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Eo(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Oo.apply(this,arguments)}function Eo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bo(t)););return t}function Po(t,e){return Po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Po(t,e)}function To(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Bo(t);if(e){var r=Bo(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _o(this,n)}}function _o(t,e){if(e&&("object"===Co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jo(t)}function jo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bo(t){return Bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bo(t)}var Ro=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Po(t,e)}(o,t);var e,n,i,r=To(o);function o(t,e,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(i=r.call(this)).container=e,i.parent=t,i.boxBase=n,i.shape=jo(i),i.specialShape=!1,i.visible=!0,i}return e=o,n=[{key:"setParent",value:function(t){this.parent=t}},{key:"getParent",value:function(){return this.parent}},{key:"end",value:function(){}},{key:"setContainer",value:function(t){this.container=t,this.$hostedComponent&&this.container&&this.container.$div&&(this.$hostedComponent.detach(),this.container.$div.append(this.$hostedComponent))}},{key:"getContainerX",value:function(){return this.container}},{key:"getContainerResolve",value:function(){for(var t=this;null===t.container&&null!==t.parent;)t=t.parent;return t.container}},{key:"invalidate",value:function(t){var e=this.getContainerResolve();e&&e.invalidate(t)}},{key:"setBoxBase",value:function(t){this.boxBase=t,this.invalidate()}},{key:"getBoxBaseResolve",value:function(){for(var t=this;!t.boxBase&&t.parent;)t=t.parent;return t.boxBase||Pi.DEFAULT_BOX_BASE}},{key:"setShape",value:function(t){this.shape=t,this.specialShape=!0,this.invalidate(),Oo(Bo(o.prototype),"setBounds",this).call(this,t.getBounds()),this.invalidate()}},{key:"getShape",value:function(){return this.shape}},{key:"contains",value:function(t){return this.shape===this?Oo(Bo(o.prototype),"contains",this).call(this,t):this.shape.contains(t)}},{key:"setBounds",value:function(t,e,n,i){if("number"==typeof t&&(t=new Fe(t,e,n,i)),!this.equals(t)){var r=!this.dim.equals(t.dim);return this.specialShape?(r&&(this.shape.scaleBy(new Me(t.dim.width/this.dim.width,t.dim.height/this.dim.height)),this.setShape(this.shape)),this.pos.equals(t.pos)||this.shape.moveTo(t.pos),this.setShape(this.shape)):Oo(Bo(o.prototype),"setBounds",this).call(this,t),this.$hostedComponent&&this.setHostedComponentBounds(r),this}}},{key:"moveTo",value:function(t,e){"number"==typeof t&&(t=new De(t,e)),this.setBounds(new Fe(this).moveTo(t))}},{key:"moveBy",value:function(t,e){this.setBounds(new Fe(this).moveBy(t,e))}},{key:"setSize",value:function(t,e){this.setBounds(new Fe(this.pos,new Me(t,e)))}},{key:"hasBorder",value:function(){return this.border}},{key:"setBorder",value:function(t){t||this.invalidate(),this.border=t,t&&this.invalidate()}},{key:"isVisible",value:function(){return this.visible}},{key:"setVisible",value:function(t){this.visible=t,this.setHostedComponentVisible(),this.invalidate()}},{key:"setHostedComponentVisible",value:function(){this.$hostedComponent&&this.$hostedComponent.css("visibility",this.visible?"visible":"hidden")}},{key:"isTemporaryHidden",value:function(){return this.temporaryHidden}},{key:"setTemporaryHidden",value:function(t){this.temporaryHidden=t}},{key:"isInactive",value:function(){return this.inactive}},{key:"setInactive",value:function(t){if(this.inactive=t,this.$hostedComponent)this.setHostedComponentColors(),this.setHostedComponentVisible();else{if(this.$accessibleElement){var e=this.isInactive()&&!this.accessibleAlwaysActive;this.$accessibleElement.prop({disabled:e,tabindex:e?-1:0})}this.invalidate()}}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(t){this.inverted=t,this.$hostedComponent?this.setHostedComponentColors():this.invalidate()}},{key:"isMarked",value:function(){return this.marked}},{key:"setMarked",value:function(t){t||this.invalidate(),this.marked=t,this.$hostedComponent?(this.setHostedComponentColors(),this.setHostedComponentBorder()):t&&this.invalidate()}},{key:"isFocused",value:function(){return this.focused}},{key:"setFocused",value:function(t){t||this.invalidate(),this.focused=t,t&&this.invalidate(),this.$hostedComponent&&this.$hostedComponent.css("z-index",this.focused?20:2)}},{key:"isAlternative",value:function(){return this.alternative}},{key:"setAlternative",value:function(t){this.alternative=t,this.invalidate()}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty()||!this.isVisible()||this.isTemporaryHidden())return!1;if(e&&!this.shape.intersects(e))return!1;var n=this.getBoxBaseResolve();return n.transparent||n.dontFill||this.tmpTrans||(n.bgGradient&&!n.bgGradient.hasTransparency()||(t.fillStyle=this.inactive?n.inactiveColor:this.inverted?n.textColor:n.backColor,this.shape.fill(t,e)),n.bgGradient&&(t.fillStyle=n.bgGradient.getGradient(t,this.shape.getBounds()),this.shape.fill(t,e)),t.fillStyle="black"),this.$hostedComponent||this.updateContent(t,e),this.drawBorder(t),!0}},{key:"updateContent",value:function(t,e){}},{key:"drawBorder",value:function(t){if(this.border||this.marked){var e=this.getBoxBaseResolve();t.strokeStyle=e.borderColor,e[this.marked?"markerStroke":"borderStroke"].setStroke(t),this.marked&&(t.globalCompositeOperation="xor"),this.shape.stroke(t),this.marked&&(t.globalCompositeOperation="source-over"),t.strokeStyle="black",Ie.prototype.setStroke(t)}}},{key:"getBorderBounds",value:function(){var t=new Fe(this.getBounds());if(this.border||this.marked){var e=this.getBoxBaseResolve()[this.marked?"markerStroke":"borderStroke"].lineWidth;t.moveBy(-e/2,-e/2),t.dim.width+=e,t.dim.height+=e}return t}},{key:"setHostedComponent",value:function(t){this.$hostedComponent&&this.$hostedComponent.detach(),this.$hostedComponent=t,this.$hostedComponent&&(this.setContainer(this.container),this.setHostedComponentColors(),this.setHostedComponentBorder(),this.setHostedComponentBounds(!0),this.setHostedComponentVisible(),this.setFocused(this.focused))}},{key:"getHostedComponent",value:function(){return this.$hostedComponent}},{key:"setHostedComponentColors",value:function(){if(this.$hostedComponent){var t=this.getBoxBaseResolve().getCSS(null,this.inactive,this.inverted,this.alternative);this.$hostedComponent.data("background-image")&&t["background-image"]&&(t["background-image"]="".concat(this.$hostedComponent.data("background-image"),",").concat(t["background-image"])),this.$hostedComponent.css(t)}}},{key:"setHostedComponentBorder",value:function(){if(this.$hostedComponent&&(this.border||this.marked)){var t=this.getBoxBaseResolve();this.$hostedComponent.css({"border-width":"".concat(t.get(this.marked?"markerStroke":"borderStroke").lineWidth,"px"),"border-style":"solid","border-color":t.get("borderColor")})}}},{key:"setHostedComponentBounds",value:function(t){if(this.$hostedComponent){var e=this.getBounds(),n=this.border||this.marked?this.getBoxBaseResolve().get(this.marked?"markerStroke":"borderStroke").lineWidth:0;this.$hostedComponent.css({position:"absolute",width:e.dim.width-2*n+"px",height:e.dim.height-2*n+"px",top:e.pos.y+"px",left:e.pos.x+"px"})}}}],n&&So(e.prototype,n),i&&So(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fe);Object.assign(Ro.prototype,{parent:null,container:null,boxBase:null,border:!1,shape:null,specialShape:!1,visible:!0,temporaryHidden:!1,tmpTrans:!1,inactive:!1,inverted:!1,alternative:!1,marked:!1,focused:!1,accessibleText:"",role:"cell",$accessibleElement:null,accessibleAlwaysActive:!1,$hostedComponent:null});var Io=Ro;function Do(t){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Do(t)}function Mo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function No(){return No="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Vo(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},No.apply(this,arguments)}function Vo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zo(t)););return t}function qo(t,e){return qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qo(t,e)}function Lo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=zo(t);if(e){var r=zo(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Fo(this,n)}}function Fo(t,e){if(e&&("object"===Do(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zo(t){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zo(t)}var Uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qo(t,e)}(s,t);var e,n,r,o=Lo(s);function s(t,e,n,i,r){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(a=o.call(this,t,e,n)).clear(),"number"==typeof i&&(a.idLoc=i,a.idAss=0,a.idOrder=0),r&&a.setBounds(r),a}return e=s,n=[{key:"getCurrentContent",value:function(){return this.isAlternative()?this.altContent:this.content}},{key:"getContent",value:function(){return this.content||this.setContent(new Ii),this.content}},{key:"clear",value:function(){this.content=null,this.altContent=null,this.idOrder=-1,this.setInactive(!0),this.hasHostedComponent||this.setHostedComponent(null),this.setHostedMediaPlayer(null),this.$accessibleElement&&this.$accessibleElement.html(""),this.tmpTrans&&(this.tmpTrans=!1),this.invalidate()}},{key:"isEquivalent",value:function(t,e){return null!==t&&null!==this.content&&this.content.isEquivalent(t.content,e)}},{key:"isCurrentContentEquivalent",value:function(t,e){return null!==t&&null!==this.getCurrentContent()&&this.getCurrentContent().isEquivalent(t.getCurrentContent(),e)}},{key:"exchangeLocation",value:function(t){var e=new De(this.pos),n=this.idLoc;this.moveTo(t.pos),t.moveTo(e),this.idLoc=t.idLoc,t.idLoc=n}},{key:"copyContent",value:function(t){this.idOrder=t.idOrder,this.idAss=t.idAss,this.content=t.content,this.altContent=t.altContent,this.content&&(this.content.style&&this.setBoxBase(this.content.style),null!==this.content.border&&t.hasBorder()!==this.content.border&&this.setBorder(this.content.border)),this.setInactive(t.isInactive()),this.setInverted(t.isInverted()),this.setAlternative(t.isAlternative()),this.setHostedComponent(t.getHostedComponent()),this.hasHostedComponent=t.hasHostedComponent,this.setHostedMediaPlayer(t.hostedMediaPlayer),this.hostedMediaPlayer&&this.hostedMediaPlayer.setVisualComponentVisible(!this.isInactive()&&this.isVisible()),this.$accessibleElement&&this.$accessibleElement.html(this.toString())}},{key:"exchangeContent",value:function(t){var e=new s(this.getParent(),this.getContainerX(),this.boxBase);e.copyContent(this),this.copyContent(t),t.copyContent(e)}},{key:"setTextContent",value:function(t){t||(t=""),this.content||(this.content=new Ii),this.content.text=t,this.content.mediaContent=null,this.content.img=null,this.setHostedComponent(null),this.setInactive(!1),this.checkHostedComponent(),this.setHostedMediaPlayer(null),this.$accessibleElement&&this.$accessibleElement.html(this.toString())}},{key:"setDefaultIdAss",value:function(){this.idAss=null===this.content?-1:this.content.id}},{key:"isAtPlace",value:function(){return this.idOrder===this.idLoc}},{key:"setContent",value:function(t,e){if(t instanceof Li){if(e<0&&(e=this.idOrder),e>=t.getNumCells())return;t.style!==this.boxBase&&this.setBoxBase(t.style),t=t.getActiveBoxContent(e)}if(this.setHostedComponent(null),this.setHostedMediaPlayer(null),this.content=t,t){if(t.animatedGifFile&&!this.specialShape){var n="url(".concat(t.animatedGifFile,")"),r=i()("<span/>").css({"background-image":n,"background-position":"center","background-repeat":"no-repeat"});r.data("background-image",n),null!==t.imgClip&&r.css({"background-origin":"border-box","background-position":"".concat(-t.imgClip.pos.x,"px ").concat(-t.imgClip.pos.y,"px")}),this.setHostedComponent(r)}t.style!==this.boxBase&&this.setBoxBase(t.style),t.innerHtmlText&&this.setHostedComponent(i()("<div/>").html(t.innerHtmlText)),t.hasOwnProperty("border")&&this.hasBorder()!==t.border&&this.setBorder(t.border),this.setInactive(!1),t.amp&&this.setHostedMediaPlayer(t.amp),this.checkHostedComponent(),this.checkAutoStartMedia()}else this.clear();this.invalidate(),this.$accessibleElement&&this.$accessibleElement.html(this.toString())}},{key:"setAltContent",value:function(t,e){t instanceof Li&&(e<0&&(e=this.idOrder),t=t.getActiveBoxContent(e)),this.altContent=t,this.checkHostedComponent(),this.isAlternative()&&this.hostedMediaPlayer&&this.setHostedMediaPlayer(null),this.$accessibleElement&&(this.$accessibleElement.html(this.toString()),this.$accessibleElement.prop("disabled",!0))}},{key:"setCurrentContent",value:function(t){this.isAlternative()?this.setAltContent(t):this.setContent(t),this.invalidate()}},{key:"switchToAlt",value:function(){return!(this.isAlternative()||!this.altContent||this.altContent.isEmpty()||(this.setHostedComponent(null),this.setHostedMediaPlayer(null),this.setAlternative(!0),this.tmpTrans=!1,this.checkHostedComponent(),this.checkAutoStartMedia(),this.$accessibleElement&&this.$accessibleElement.html(this.toString()),0))}},{key:"checkHostedComponent",value:function(){if(!this.hasHostedComponent){var t=this.getCurrentContent(),e=this.getBoxBaseResolve();!this.isInactive()&&t&&t.innerHtmlText&&(e.getCSS()["text-align"]=t.txtAlign.h.replace("middle","center"))}}},{key:"checkAutoStartMedia",value:function(){var t=this.getContent();t&&t.mediaContent&&t.mediaContent.autoStart&&t.amp&&t.amp.playNow(this)}},{key:"updateContent",value:function(t,e){var n=this.getCurrentContent(),i=this.getBoxBaseResolve();if(this.isInactive()||!n||this.dim.width<2||this.dim.height<2)return this._focusAccessibleElement(t),!0;if(e&&!this.intersects(e))return!1;var r=null;if(n.img&&!this.tmpTrans)try{if(n.imgClip){var o=n.imgClip.getBounds(),s=n.img;if(!n.imgClip.isRect()){var a=document.createElement("canvas");a.width=o.pos.x+o.dim.width,a.height=o.pos.y+o.dim.height;var c=a.getContext("2d");n.imgClip.clip(c),c.drawImage(n.img,0,0),s=a}t.drawImage(s,Math.max(0,o.pos.x),Math.max(0,o.pos.y),Math.min(s.width,o.dim.width),Math.min(s.height,o.dim.height),this.pos.x,this.pos.y,this.dim.width,this.dim.height)}else{var l=n.img.naturalWidth||this.dim.width,u=n.img.naturalHeight||this.dim.height,h=!1,f=1;ye.COMPRESS_IMAGES&&this.dim.width>0&&this.dim.height>0&&(l>this.dim.width||u>this.dim.height)&&(l*=f=Math.min(this.dim.width/l,this.dim.height/u),u*=f,h=!0);var p="left"===n.imgAlign.h?0:"right"===n.imgAlign.h?this.dim.width-l:(this.dim.width-l)/2,d="top"===n.imgAlign.v?0:"bottom"===n.imgAlign.v?this.dim.height-u:(this.dim.height-u)/2;h?t.drawImage(n.img,this.pos.x+p,this.pos.y+d,l,u):t.drawImage(n.img,this.pos.x+p,this.pos.y+d),n.avoidOverlapping&&n.text&&(r=new Fe(Math.max(0,p),Math.max(0,d),Math.min(this.dim.width,l),Math.min(this.dim.height,u)))}}catch(t){gt("warn",'Unable to draw image "'.concat(n.image,'": ').concat(t.message))}if(n.text&&n.text.length>0){var v=this.pos.x,y=this.pos.y,g=this.dim.width,m=this.dim.height;if(r){for(var b=[0,r.pos.x,r.pos.x+r.dim.width,g],w=[0,r.pos.y,r.pos.y+r.dim.height,m],k=[new Fe(b[0],w[0],b[3],w[1]),new Fe(b[0],w[2],b[3],w[3]-w[2]),new Fe(b[0],w[0],b[1],w[3]),new Fe(b[2],w[0],b[3]-b[2],w[3])],A=k[0],x=A.dim.width*A.dim.height,C=1;C<k.length;C++){var S=k[C].dim.width*k[C].dim.height;if(S>x-1){if(Math.abs(S-x)<=1){var O=!1;switch(C){case 1:O="bottom"===n.txtAlign.v;break;case 2:O="left"===n.txtAlign.h;break;case 3:O="right"===n.txtAlign.h}if(!O)continue}x=S,A=k[C]}}v+=A.pos.x,y+=A.pos.y,g=A.dim.width,m=A.dim.height}var E=Math.max(5,g-2*i.textMargin),P=Math.max(5,m-2*i.textMargin),T=i.prepareText(t,n.text,E,P);t.font=i.font.cssFont(),t.textBaseline="alphabetic";for(var _=i.font.getHeight(),j=_*T.length,B=y+i.textMargin+("top"===n.txtAlign.v?0:"bottom"===n.txtAlign.v?P-j:(P-j)/2)+i.font.getMetrics().ascent,R=0;R<T.length;R++,B+=_){var I=v+i.textMargin+("left"===n.txtAlign.h?0:"right"===n.txtAlign.h?E-T[R].size.width:(E-T[R].size.width)/2);if(i.shadow){var D=Math.max(1,i.font.size/10);t.fillStyle=i.shadowColor,t.fillText(T[R].text,I+D,B+D)}t.fillStyle=this.isInverted()?i.backColor:this.isAlternative()?i.alternativeColor:i.textColor,t.fillText(T[R].text,I,B)}this._focusAccessibleElement(t)}return!0}},{key:"_focusAccessibleElement",value:function(t){ye.CANVAS_DRAW_FOCUS&&this.$accessibleElement&&(this.shape.preparePath(t),t.drawFocusIfNeeded(this.$accessibleElement.get(-1)))}},{key:"getDescription",value:function(){return this.content?this.content.getDescription():""}},{key:"toString",value:function(){return("cell"!==this.role?pt(this.role):"")+(this.getCurrentContent()||"-").toString()}},{key:"playMedia",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getCurrentContent();return!(!n||!n.mediaContent||(gt("debug","Playing: ".concat(n.mediaContent.toString())),t.playMedia(n.mediaContent,this,e),0))}},{key:"setHostedMediaPlayer",value:function(t){var e=this.hostedMediaPlayer;this.hostedMediaPlayer=t,e&&e!==t&&e.linkTo(null),t&&t.linkTo(this)}},{key:"setBounds",value:function(t,e,n,i){"number"==typeof t&&(t=new Fe(t,e,n,i)),this.equals(t)||(No(zo(s.prototype),"setBounds",this).call(this,t),this.hostedMediaPlayer&&this.hostedMediaPlayer.checkVisualComponentBounds(this))}},{key:"setHostedComponentBounds",value:function(t){if(this.$hostedComponent){No(zo(s.prototype),"setHostedComponentBounds",this).call(this,t);var e=this.getCurrentContent();if(t&&e&&e.animatedGifFile&&e.img){var n=e.img,i=Math.max(n.naturalWidth,this.dim.width),r=Math.max(n.naturalHeight,this.dim.height),o=1,a="";if(e.imgClip){var c=e.imgClip.getBounds();(this.dim.width<c.dim.width||this.dim.height<c.dim.height)&&(o=Math.min(this.dim.width/c.dim.width,this.dim.height/c.dim.height),a="".concat(i*o,"px ").concat(r*o,"px")),this.$hostedComponent.css({"background-position":"".concat(-e.imgClip.pos.x*o,"px ").concat(-e.imgClip.pos.y*o,"px"),"background-size":a})}else(this.dim.width<i||this.dim.height<r)&&(o=Math.min(this.dim.width/i,this.dim.height/r),a="".concat(i*o,"px ").concat(r*o,"px")),this.$hostedComponent.css({"background-size":a})}}}},{key:"buildAccessibleElement",value:function(t,e,n,r){var o=this;this.$accessibleElement&&this.$accessibleElement.remove();var s=t.get(-1);if(s.width>0&&s.height>0){var a=Math.round(1e5*Math.random()),c=this.isInactive()&&!this.accessibleAlwaysActive;this.$accessibleElement=i()("<button/>",{tabindex:c?-1:0,id:"AE".concat(a),disabled:c}).html(this.toString()).on("click",(function(n){if(n.originalEvent&&(0!==n.originalEvent.pageX||0!==n.originalEvent.pageY))return!0;gt("debug","Click on accessible element: ".concat(o.toString()));var s=i().Event(r||"click"),a=o.getBounds(),c=t.offset();return s.pageX=c.left+a.pos.x+a.dim.width/2,s.pageY=c.top+a.pos.y+a.dim.height/2,e.trigger(s),!1})),(n||t).append(this.$accessibleElement),ye.CANVAS_DRAW_FOCUS&&this.$accessibleElement.on("focus blur",(function(t){gt("debug","".concat(t.type," accessible element: ").concat(o.toString())),o.container&&o.container.update(),o.updateContent(s.getContext("2d"),null)}))}return this.$accessibleElement}}],r=[{key:"createCell",value:function(t,e){if(e&&e.dimension){var n=new s,r=i()('<canvas width="'+e.dimension.width+'" height="'+e.dimension.height+'"/>'),o=new Fe(0,0,e.dimension.width,e.dimension.height);return n.container=new Ge,n.container.$div=t,n.setContent(e),n.setBounds(o),t.append(r),e.mediaContent&&n.buildAccessibleElement(r,t),n.update(r.get(-1).getContext("2d"),o),n}}}],n&&Mo(e.prototype,n),r&&Mo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(Io);Object.assign(Uo.prototype,{idOrder:-1,idLoc:-1,idAss:-1,pos0:null,content:null,altContent:null,hasHostedComponent:!1,hostedMediaPlayer:null,isBackground:!1});var $o=Uo;function Ho(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Wo=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.id=e),n&&(this.$div=n)}var e,n,i;return e=t,n=[{key:"getDisplayValue",value:function(){var t=this.countDown>0?this.countDown-this.value:this.value;return this.displayDiffFrom&&(t-=this.displayDiffFrom.value),Math.max(0,Math.min(this.MAX_DISPLAY_VALUE,t))}},{key:"refreshDisplay",value:function(){this.$div&&this.$div.html(this.enabled?(this.getDisplayValue()+1e3).toString().substr(1):"000")}},{key:"setEnabled",value:function(t){this.enabled!==t&&(this.enabled=t,this.$div&&(this.refreshDisplay(),this.$div.css("opacity",this.enabled?1:.3)))}},{key:"setCountDown",value:function(t){this.countDown!==(this.countDown=t)&&this.refreshDisplay()}},{key:"incValue",value:function(){this.value++,this.enabled&&this.refreshDisplay()}},{key:"setValue",value:function(t){this.enabled&&this.value!==(this.value=t)&&this.refreshDisplay()}}],n&&Ho(e.prototype,n),i&&Ho(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Wo.prototype,{id:"",$div:null,value:0,countDown:0,enabled:!0,MAX_DISPLAY_VALUE:999,displayDiffFrom:null});var Go=Wo;function Jo(t){return Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jo(t)}function Ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yo(){return Yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Qo(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Yo.apply(this,arguments)}function Qo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ns(t)););return t}function Xo(t,e){return Xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xo(t,e)}function ts(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ns(t);if(e){var r=ns(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return es(this,n)}}function es(t,e){if(e&&("object"===Jo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ns(t){return ns=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ns(t)}var is=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xo(t,e)}(s,t);var e,n,r,o=ts(s);function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ko(this,s),e=o.call(this,t,n,r);var a="";if(Be.loadGoogleFonts(e.cssFonts),e.$ctrlCnt=i()("<div/>",{class:"JClicCtrlCnt unselectableText",role:"navigation"}),e.$div.append(e.$ctrlCnt),a=pt("Previous activity"),e.buttons.prev=i()("<button/>",{class:"JClicBtn",title:a,"aria-label":a}).append(i()(oe(e.prevIcon,e.iconWidth,e.iconHeight,e.iconFill))).on("click",(function(t){e.ps&&e.ps.actions.prev.processEvent(t)})),e.$ctrlCnt.append(e.buttons.prev),e.msgBox=new $o,e.msgBox.role="message",e.$msgBoxDiv=i()("<div/>",{class:"JClicMsgBox"}).on("click",(function(){return e.msgBox.playMedia(t),!1})),e.$ctrlCnt.append(e.$msgBoxDiv),a=pt("Next activity"),e.buttons.next=i()("<button/>",{class:"JClicBtn",title:a,"aria-label":a}).append(i()(oe(e.nextIcon,e.iconWidth,e.iconHeight,e.iconFill))).on("click",(function(t){e.ps&&e.ps.actions.next.processEvent(t)})),e.$ctrlCnt.append(e.buttons.next),!1!==e.ps.options.counters&&!1!==r.counters){a=pt("Reports");var c=i()("<button/>",{class:"JClicCountCnt","aria-label":a}).on("click",(function(t){e.ps&&e.ps.actions.reports.processEvent(t)}));i().each(kn.prototype.counters,(function(t,n){a=pt(t),e.counters[t]=new Go(t,i()("<div/>",{class:"JClicCounter",title:a,"aria-label":a}).css({"background-image":"url(".concat(se(e[t+"Icon"],e.counterIconWidth,e.counterIconHeight,e.counterIconFill),")"),color:e.counterIconFill}).html("000").appendTo(c))})),e.$ctrlCnt.append(c)}if(!0!==e.ps.options.info&&!0!==r.info||(a=pt("Information"),e.buttons.info=i()("<button/>",{class:"JClicBtn",title:a,"aria-label":a}).append(i()(oe(e.infoIcon,e.iconWidth,e.iconHeight,e.iconFill))).on("click",(function(t){e.ps&&e.ps.actions.info.processEvent(t)})),e.$ctrlCnt.append(e.buttons.info)),!0!==e.ps.options.reportsBtn&&!0!==r.reportsBtn||(a=pt("Reports"),e.buttons.about=i()("<button/>",{class:"JClicBtn",title:a,"aria-label":a}).append(i()(oe(e.reportsIcon,e.iconWidth,e.iconHeight,e.iconFill))).on("click",(function(t){e.ps&&e.ps.actions.reports.processEvent(t)})),e.$ctrlCnt.append(e.buttons.about)),document&&document.fullscreenEnabled&&(a=pt("Toggle full screen"),e.buttons.fullscreen=i()("<button/>",{class:"JClicBtn",title:a,"aria-label":a}).append(i()("<img/>",{src:se(e.fullScreenIcon,e.iconWidth,e.iconHeight,e.iconFill)})).on("click",(function(){e.setScreenFull(null)})),e.$ctrlCnt.append(e.buttons.fullscreen)),"function"==typeof e.ps.options.closeFn){a=pt("Close");var l=e.ps.options.closeFn;e.buttons.close=i()("<button/>",{class:"JClicBtn",title:a,"aria-label":a}).append(i()(oe(e.closeIcon,e.iconWidth,e.iconHeight,e.iconFill))).on("click",(function(){gt("info","Closing the player"),l()})),e.$ctrlCnt.append(e.buttons.close)}var u=null;return i().each(e.buttons,(function(t,e){!e||"function"==typeof e[0].focus&&"function"==typeof e[0].blur||(null===u&&(u=function(){return gt("error",'"blur" and "focus" not defined for SVG objects in Explorer/Edge')}),e[0].focus=e[0].blur=u)})),e}return e=s,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"".concat(Yo(ns(s.prototype),"_getStyleSheets",this).call(this,t)).concat("default"===t?this.mainCSS:"half"===t?this.mainCSSHalf:"twoThirds"===t?this.mainCSSTwoThirds:"")}},{key:"doLayout",value:function(){Yo(ns(s.prototype),"doLayout",this).call(this),this.buttons.fullscreen&&(this.buttons.fullscreen.find("img").get(-1).src=se(this[document&&document.fullscreenElement?"fullScreenExitIcon":"fullScreenIcon"],this.iconWidth,this.iconHeight,this.iconFill))}},{key:"enableMainButtons",value:function(t){this.$ctrlCnt.find(".JClicBtn,.JClicCountCnt").attr("tabindex",t?"0":"-1")}}],n&&Zo(e.prototype,n),r&&Zo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(kn);Object.assign(is.prototype,{skinId:"JClicDefaultSkin",$ctrlCnt:null,margin:18,msgBoxHeight:60,countersWidth:60,countersHeight:20,mainCSS:".ID .JClicCtrlCnt {\n  margin: 0 9px 18px 9px;\n  display: -webkit-flex;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.ID .JClicCountCnt {\n  display: -webkit-flex;\n  display: flex;\n  flex-direction: column;\n}\n\n.ID .JClicMsgBox {\n  height: 60px;\n  flex-grow: 1;\n  background-color: lightblue;\n}\n\n.ID .JClicBtn {\n  cursor: pointer;\n  line-height: 0;\n}\n\n.ID .JClicBtn:disabled {\n  cursor: inherit;\n  opacity: 0.3;\n}\n\n.ID .JClicCounter {\n  width: 40px;\n  height: 20px;\n  padding-left: 20px;\n  color: white;\n  cursor: pointer;\n  font-family: Roboto, Sans-serif;\n  font-size: 18px;\n  text-align: center;\n  background-repeat: no-repeat;\n  background-position: left;\n  box-sizing: content-box;\n}\n",mainCSSHalf:".ID .JClicPlayerCnt {\n  margin: 9px;\n}\n\n.ID .JClicCtrlCnt {\n  margin: 0 4px 9px 4px;\n}\n\n.ID .JClicCtrlCnt button svg, img {\n  width: 18px;\n  height: 18px;\n}\n\n.ID .JClicMsgBox {\n  height: 30px;\n}\n\n.ID .JClicCounter {\n  width: 20px;\n  height: 10px;\n  margin-left: -15px;\n  transform: scale(0.5);\n}\n",mainCSSTwoThirds:".ID .JClicPlayerCnt {\n  margin: 12px;\n}\n\n.ID .JClicCtrlCnt {\n  margin: 0 6px 12px 6px;\n}\n\n.ID .JClicCtrlCnt button svg, img {\n  width: 24px;\n  height: 24px;\n}\n\n.ID .JClicMsgBox {\n  height: 40px;\n}\n\n.ID .JClicCounter {\n  width: 27px;\n  height: 13px;\n  margin-left: -10px;\n  transform: scale(0.666);\n}\n",cssFonts:["Roboto"],iconWidth:36,iconHeight:36,iconFill:"#FFFFFF",prevIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />\n</svg>\n',nextIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />\n</svg>\n',fullScreenIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" />\n</svg>\n',fullScreenExitIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z" />\n</svg>\n',closeIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />\n</svg>\n',infoIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" />\n</svg>\n',reportsIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" />\n</svg>\n',counterIconWidth:18,counterIconHeight:18,counterIconFill:"#FFFFFF",timeIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" />\n  <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z" />\n</svg>\n',scoreIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />\n</svg>\n',actionsIcon:'<svg fill="#FFFFFF" viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z" />\n</svg>\n'});var rs=kn.registerClass("default",is);function os(t){return os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},os(t)}function ss(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function as(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cs(){return cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=ls(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},cs.apply(this,arguments)}function ls(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ps(t)););return t}function us(t,e){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},us(t,e)}function hs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ps(t);if(e){var r=ps(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return fs(this,n)}}function fs(t,e){if(e&&("object"===os(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ps(t){return ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ps(t)}var ds=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&us(t,e)}(o,t);var e,n,i,r=hs(o);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ss(this,o),r.call(this,t,e,n)}return e=o,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return cs(ps(o.prototype),"_getStyleSheets",this).call(this,t)+("default"===t?this.skinCSS:"")}}],n&&as(e.prototype,n),i&&as(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(rs);Object.assign(ds.prototype,{skinId:"JClicOrangeSkin",skinCSS:".ID {background-color:#FF8B19;}"});var vs=kn.registerClass("orange",ds);function ys(t){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(t)}function gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ms(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bs(){return bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=ws(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},bs.apply(this,arguments)}function ws(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cs(t)););return t}function ks(t,e){return ks=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ks(t,e)}function As(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Cs(t);if(e){var r=Cs(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return xs(this,n)}}function xs(t,e){if(e&&("object"===ys(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Cs(t){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cs(t)}var Ss=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ks(t,e)}(o,t);var e,n,i,r=As(o);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return gs(this,o),r.call(this,t,e,n)}return e=o,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return bs(Cs(o.prototype),"_getStyleSheets",this).call(this,t)+("default"===t?this.skinCSS:"")}}],n&&ms(e.prototype,n),i&&ms(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(rs);Object.assign(Ss.prototype,{skinId:"JClicGreenSkin",iconFill:"#20640E",counterIconFill:"#20640E",skinCSS:".ID {background-color:#4AFF19;}"});var Os=kn.registerClass("green",Ss);function Es(t){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(t)}function Ps(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ts(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _s(){return _s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=js(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},_s.apply(this,arguments)}function js(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ds(t)););return t}function Bs(t,e){return Bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bs(t,e)}function Rs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ds(t);if(e){var r=Ds(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Is(this,n)}}function Is(t,e){if(e&&("object"===Es(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ds(t){return Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ds(t)}var Ms=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bs(t,e)}(o,t);var e,n,i,r=Rs(o);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ps(this,o),r.call(this,t,e,n)}return e=o,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return _s(Ds(o.prototype),"_getStyleSheets",this).call(this,t)+("default"===t?this.skinCSS:"")}}],n&&Ts(e.prototype,n),i&&Ts(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(rs);Object.assign(Ms.prototype,{skinId:"JClicBlueSkin",skinCSS:".ID {background-color:#1990FF;}"});var Ns=kn.registerClass("blue",Ms);function Vs(t){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(t)}function qs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ls(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fs(){return Fs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=zs(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Fs.apply(this,arguments)}function zs(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ws(t)););return t}function Us(t,e){return Us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Us(t,e)}function $s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ws(t);if(e){var r=Ws(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Hs(this,n)}}function Hs(t,e){if(e&&("object"===Vs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ws(t){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ws(t)}var Gs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Us(t,e)}(s,t);var e,n,r,o=$s(s);function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return qs(this,s),(e=o.call(this,t,n,Object.assign({},r,{counters:!1,reportsBtn:!0}))).$ctrlCnt.detach().prependTo(e.$div),e.$msgBoxDiv.detach().appendTo(e.$div),i()("<div/>").css({"flex-grow":1}).insertAfter(e.$ctrlCnt.children(":nth-child(2)")),e}return e=s,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"".concat(Fs(Ws(s.prototype),"_getStyleSheets",this).call(this,t)).concat("default"===t?this.skinCSS:"half"===t?this.skinCSSHalf:"twoThirds"===t?this.skinCSSTwoThirds:"")}}],n&&Ls(e.prototype,n),r&&Ls(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(rs);Object.assign(Gs.prototype,{skinId:"JClicSimpleSkin",skinCSS:".ID {\n  background-color: #888888;\n}\n\n.ID .JClicCtrlCnt {\n  margin: 9px;\n}\n\n.ID .JClicPlayerCnt {\n  margin: 0px 18px 18px;\n}\n\n.ID .JClicMsgBox {\n  flex-grow: 0;\n  margin: 0 18px 18px 18px;\n}\n",skinCSSHalf:".ID .JClicCtrlCnt {\n  margin: 4px;\n}\n\n.ID .JClicPlayerCnt {\n  margin: 0px 9px 9px;\n}\n\n.ID .JClicMsgBox {\n  margin: 0 9px 9px 9px;\n}\n",skinCSSTwoThirds:".ID .JClicCtrlCnt {\n  margin: 6px;\n}\n\n.ID .JClicPlayerCnt {\n  margin: 0px 12px 12px;\n}\n\n.ID .JClicMsgBox {\n  margin: 0 12px 12px 12px;\n}\n"});var Js=kn.registerClass("simple",Gs);function Ks(t){return Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(t)}function Zs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ys(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qs(){return Qs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Xs(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Qs.apply(this,arguments)}function Xs(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ia(t)););return t}function ta(t,e){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ta(t,e)}function ea(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ia(t);if(e){var r=ia(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return na(this,n)}}function na(t,e){if(e&&("object"===Ks(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ia(t){return ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ia(t)}var ra=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ta(t,e)}(o,t);var e,n,i,r=ea(o);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Zs(this,o),r.call(this,t,e,Object.assign({},n,{counters:!1,reportsBtn:!0}))}return e=o,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return Qs(ia(o.prototype),"_getStyleSheets",this).call(this,t)+("default"===t?this.skinCSS:"")}}],n&&Ys(e.prototype,n),i&&Ys(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(rs);Object.assign(ra.prototype,{skinId:"JClicMiniSkin",iconWidth:18,iconHeight:18,iconFill:"#080808",counterIconFill:"#080808",margin:8,skinCSS:".ID {\n  background-color: #F4F4F4;\n}\n\n.ID .JClicPlayerCnt {\n  margin: 4px;\n}\n\n.ID .JClicCtrlCnt {\n  margin: 0 2px 4px 2px;\n}\n\n.ID .JClicMsgBox {\n  height: 25px;\n}\n",mainCSSHalf:"",mainCSSTwoThirds:""});var oa=kn.registerClass("mini",ra);function sa(t){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(t)}function aa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ca(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function la(){return la="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=ua(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},la.apply(this,arguments)}function ua(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=da(t)););return t}function ha(t,e){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ha(t,e)}function fa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=da(t);if(e){var r=da(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pa(this,n)}}function pa(t,e){if(e&&("object"===sa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function da(t){return da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},da(t)}var va=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ha(t,e)}(o,t);var e,n,i,r=fa(o);function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return aa(this,o),(e=r.call(this,t,n,i)).msgBox=new $o,e.msgBox.role="message",e}return e=o,n=[{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return la(da(o.prototype),"_getStyleSheets",this).call(this,t)+("default"===t?this.mainCSS:"")}}],n&&ca(e.prototype,n),i&&ca(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(kn);Object.assign(va.prototype,{skinId:"JClicEmptySkin",mainCSS:".ID .JClicPlayerCnt {margin:0;}"});var ya=kn.registerClass("empty",va);function ga(t){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(t)}function ma(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ba(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wa(){return wa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=ka(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},wa.apply(this,arguments)}function ka(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sa(t)););return t}function Aa(t,e){return Aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Aa(t,e)}function xa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Sa(t);if(e){var r=Sa(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ca(this,n)}}function Ca(t,e){if(e&&("object"===ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sa(t){return Sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sa(t)}var Oa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Aa(t,e)}(s,t);var e,n,r,o=xa(s);function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ma(this,s),(e=o.call(this,t,n,r)).$mainPanel=i()("<div/>",{class:"JClicCustomMainPanel"}),e.$gridPanel=i()("<div/>",{class:"JClicGridPanel"});for(var a=0;a<9;a++)e.$gridPanel.append(i()("<div/>",{class:"JClicCell JClicCell".concat(a+1)}));return e.$mainPanel.append(e.$gridPanel),e.$playerCnt.detach().addClass("JClicPlayerCell").appendTo(e.$mainPanel),e.$div.prepend(e.$mainPanel),r.buttons&&Object.keys(r.buttons.button).forEach((function(n){var r="about"===n?"reports":n,o=pt(e.msgKeys[r]||r);e.buttons[r]=i()("<button/>",{class:"JClicBtn JClicTransform Btn-".concat(r),title:o,"aria-label":o,disabled:void 0===e.msgKeys[r]}).on("click",(function(e){t.actions[r]&&t.actions[r].processEvent(e)})),e.$mainPanel.append(e.buttons[r])})),r.rectangle.messages&&(e.msgBox=new $o,e.msgBox.role="message",e.$msgBoxDiv=i()("<div/>",{class:"JClicMsgBox"}).on("click",(function(){return e.msgBox.playMedia(t),!1})),e.$mainPanel.append(e.$msgBoxDiv)),!1!==e.ps.options.counters&&r.counters&&r.counters.counter&&i().each(kn.prototype.counters,(function(t,n){if(r.counters.counter[t]){var o=pt(t);e.counters[t]=new Go(t,i()("<div/>",{class:"JClicCounter JClicTransform Counter-".concat(t),title:o,"aria-label":o}).html("000").appendTo(e.$mainPanel))}})),r.progressAnimation&&(e.$progressAnimation=i()("<div/>",{class:"JClicProgressAnimation JClicTransform"}),e.$mainPanel.append(e.$progressAnimation)),e}return e=s,n=[{key:"enableMainButtons",value:function(t){this.$mainPanel.find(".JClicBtn").attr("tabindex",t?"0":"-1")}},{key:"_computeStyleSheets",value:function(){var t=this.options.dimension.preferredSize.width,e=this.options.dimension.preferredSize.height;this.twoThirdsMedia={width:t,height:e},this.halfMedia={width:Math.round(2*t/3),height:Math.round(2*e/3)};var n=this.options.rectangle.frame.left,i=n+this.options.rectangle.player.left,r=n+this.options.slicer.left,o=n+this.options.slicer.right,s=i+this.options.rectangle.player.width,a=n+this.options.rectangle.frame.width,c=this.options.rectangle.frame.top,l=c+this.options.rectangle.player.top,u=c+this.options.slicer.top,h=c+this.options.slicer.bottom,f=l+this.options.rectangle.player.height,p=c+this.options.rectangle.frame.height,d=this.ps.project.mediaBag.getElement(this.options.image,!0),v=d.data&&d.data.src?d.data.src:"",y=d.data?ce(d.data,new Fe(n,c,r-n,u-c)):"",g=d.data?ce(d.data,new Fe(r-n,c,o-r,u-c)):"",m=d.data?ce(d.data,new Fe(o,c,a-o,u-c)):"",b=d.data?ce(d.data,new Fe(n,u-c,r-n,h-u)):"",w=d.data?ce(d.data,new Fe(o-n,u-c,a-o,h-u)):"",k=d.data?ce(d.data,new Fe(n,h-c,r-n,p-h)):"",A=d.data?ce(d.data,new Fe(r-n,h-c,o-r,p-h)):"",x=d.data?ce(d.data,new Fe(o,h-c,a-o,p-h)):"",C="\n.ID .JClicCustomMainPanel {flex-grow:1;position:relative;background-color: ".concat(Dt(this.options.color.fill.value),";}\n.ID .JClicGridPanel {position:absolute;width:100%;height:100%;display:grid;grid-template-columns:").concat(r-n,"px 1fr ").concat(a-o,"px;grid-template-rows:").concat(u-c,"px 1fr ").concat(p-h,"px;}\n.ID .JClicCell {background-repeat:no-repeat;background-size:contain;}\n.ID .JClicPlayerCell {position:absolute;top:").concat(l-c,"px;right:").concat(a-s,"px;bottom:").concat(p-f,"px;left:").concat(i-n,"px;}\n.ID .JClicCell1 {background-image:url(").concat(y,");}\n.ID .JClicCell2 {background-image:url(").concat(g,");background-repeat:repeat-x;}\n.ID .JClicCell3 {background-image:url(").concat(m,");}\n.ID .JClicCell4 {background-image:url(").concat(b,");background-repeat:repeat-y;}\n.ID .JClicCell5 {}\n.ID .JClicCell6 {background-image:url(").concat(w,");background-repeat:repeat-y;}\n.ID .JClicCell7 {background-image:url(").concat(k,");}\n.ID .JClicCell8 {background-image:url(").concat(A,");background-repeat:repeat-x;}\n.ID .JClicCell9 {background-image:url(").concat(x,");}"),S="\n.ID .JClicGridPanel {grid-template-columns:".concat(Math.round((r-n)/2),"px 1fr ").concat(Math.round((a-o)/2),"px;grid-template-rows:").concat(Math.round((u-c)/2),"px 1fr ").concat(Math.round((p-h)/2),"px;}\n.ID .JClicPlayerCell {top:").concat(Math.round((l-c)/2),"px;right:").concat(Math.round((a-s)/2),"px;bottom:").concat(Math.round((p-f)/2),"px;left:").concat(Math.round((i-n)/2),"px;}\n.ID .JClicTransform {transform: scale(0.5);}"),O="\n.ID .JClicGridPanel {grid-template-columns:".concat(Math.round(2*(r-n)/3),"px 1fr ").concat(Math.round(2*(a-o)/3),"px;grid-template-rows:").concat(Math.round(2*(u-c)/3),"px 1fr ").concat(Math.round(2*(p-h)/3),"px;}\n.ID .JClicPlayerCell {top:").concat(Math.round(2*(l-c)/3),"px;right:").concat(Math.round(2*(a-s)/3),"px;bottom:").concat(Math.round(2*(p-f)/3),"px;left:").concat(Math.round(2*(i-n)/3),"px;}\n.ID .JClicTransform {transform: scale(0.666);}");if(this.options.buttons){var E=this.options.buttons,P=30,T=30,_={};E.settings&&(E.settings.dimension&&(P=E.settings.dimension.width||P,T=E.settings.dimension.height||T),E.settings.offset&&Object.assign(_,E.settings.offset)),Object.keys(this.options.buttons.button).forEach((function(t){var e=E.button[t],n="about"===t?"reports":t,i=P,o=T,s=_;e.settings&&(e.settings.dimension&&(i=e.settings.dimension.width||i,o=e.settings.dimension.height||o),e.settings.offset&&(s=Object.assign({},_,e.settings.offset)));var c=e.point.pos.left,l=c<r?"left:".concat(c):"right:".concat(a-c-i),h=c<r?"left:".concat(Math.round(c/2-i/4)):"right:".concat(Math.round((a-c-i)/2-i/4)),f=c<r?"left:".concat(Math.round(2*c/3-i/6)):"right:".concat(Math.round(2*(a-c-i)/3-i/6)),d=e.point.pos.top,y=d<u?"top:".concat(d):"bottom:".concat(p-d-o),g=d<u?"top:".concat(Math.round(d/2-o/4)):"bottom:".concat(Math.round((p-d-o)/2-o/4)),m=d<u?"top:".concat(Math.round(2*d/3-o/6)):"bottom:".concat(Math.round(2*(p-d-o)/3-o/6)),b=e.point.source.left,w=e.point.source.top;C+=".ID .Btn-".concat(n," {position:absolute;").concat(l,"px;").concat(y,"px;width:").concat(i,"px;height:").concat(o,"px;background:url(").concat(v,") !important;background-position:-").concat(b,"px -").concat(w,"px !important;}\n"),S+=".ID .Btn-".concat(n," {").concat(h,"px;").concat(g,"px;}\n"),O+=".ID .Btn-".concat(n," {").concat(f,"px;").concat(m,"px;}\n"),s.active&&(C+=".ID .Btn-".concat(n,":active {background-position:-").concat(b+s.active.right,"px -").concat(w+s.active.down,"px !important;}\n")),s.over&&(C+=".ID .Btn-".concat(n,":hover {background-position:-").concat(b+s.over.right,"px -").concat(w+s.over.down,"px !important;}\n")),s.disabled&&(C+=".ID .Btn-".concat(n,":disabled {background-position:-").concat(b+s.disabled.right,"px -").concat(w+s.disabled.down,"px !important;}\n"))}))}if(this.options.counters&&this.options.counters.settings){var j=this.options.counters,B=35,R=20;j.settings.dimension&&j.settings.dimension.counter&&(B=j.settings.dimension.counter.width||B,R=j.settings.dimension.counter.height||R);var I=37,D=14;j.settings.dimension&&j.settings.dimension.label&&(I=j.settings.dimension.label.width||I,D=j.settings.dimension.label.height||D);var M="black";j.style&&j.style.color&&j.style.color.foreground&&(M=Dt(j.style.color.foreground.value||M));var N=D-4,V="Roboto";j.style&&j.style.font&&j.style.font.label&&(N=Math.max(8,j.style.font.label.size||N),V="".concat(j.style.font.label.family||"Roboto",",Roboto,sans-serif")),C+=".ID .JClicCounter {font-size:".concat(R-2,"px;color:").concat(M,"}\n"),Object.keys(this.options.counters.counter).forEach((function(t){var e=j.counter[t],n=B,i=R,o=e.point.counter.left,s=e.point.label.left||o-Math.round((I-B)/2),c=o<r?"left:".concat(o):"right:".concat(a-o-n),l=o<r?"left:".concat(Math.round(o/2-n/4)):"right:".concat(Math.round((a-o-n)/2-n/4)),h=o<r?"left:".concat(Math.round(2*o/3-n/6)):"right:".concat(Math.round(2*(a-o-n)/3-n/6)),f=e.point.counter.top,d=e.point.label.top||f-D,v=f<u?"top:".concat(f):"bottom:".concat(p-f-i),y=f<u?"top:".concat(Math.round(f/2-i/4)):"bottom:".concat(Math.round((p-f-i)/2-i/4)),g=f<u?"top:".concat(Math.round(2*f/3-i/6)):"bottom:".concat(Math.round(2*(p-f-i)/3-i/6));C+=".ID .Counter-".concat(t," {position:absolute;").concat(c,"px;").concat(v,"px;width:").concat(n,"px;height:").concat(i,"px;line-height:").concat(i,"px;}\n"),C+=".ID .Counter-".concat(t,':before {content:"').concat(pt(t),'";font-size:').concat(N,"px;font-family:").concat(V,";width:").concat(I,"px;height:").concat(D,"px;line-height:").concat(D,"px;position:absolute;top:").concat(d-f,"px;left:").concat(s-o,"px;}"),S+=".ID .Counter-".concat(t," {").concat(l,"px;").concat(y,"px;}\n"),O+=".ID .Counter-".concat(t," {").concat(h,"px;").concat(g,"px;}\n")}))}if(this.options.progressAnimation){var q=this.options.progressAnimation,L=30,F=30;q.dimension&&(L=q.dimension.width||L,F=q.dimension.height||F);var z=q.point.pos.left,U=z<r?"left:".concat(z):"right:".concat(a-z-L),$=z<r?"left:".concat(Math.round(z/2-L/4)):"right:".concat(Math.round((a-z-L)/2-L/4)),H=z<r?"left:".concat(Math.round(2*z/3-L/6)):"right:".concat(Math.round(2*(a-z-L)/3-L/6)),W=q.point.pos.top,G=W<u?"top:".concat(W):"bottom:".concat(p-W-F),J=W<u?"top:".concat(Math.round(W/2-F/4)):"bottom:".concat(Math.round((p-W-F)/2-F/4)),K=W<u?"top:".concat(Math.round(2*W/3-F/6)):"bottom:".concat(Math.round(2*(p-W-F)/3-F/6)),Z=q.point.source.left,Y=q.point.source.top;if(C+=".ID .JClicProgressAnimation {position:absolute;".concat(U,"px;").concat(G,"px;width:").concat(L,"px;height:").concat(F,"px;background:url(").concat(v,");background-position:-").concat(Z,"px -").concat(Y,"px;}\n"),S+=".ID .JClicProgressAnimation {".concat($,"px;").concat(J,"px;}\n"),O+=".ID .JClicProgressAnimation {".concat(H,"px;").concat(K,"px;}\n"),q.frames&&q.direction){var Q=(q.step||L)*("right"===q.direction?1:"left"===q.direction?-1:0),X=(q.step||F)*("down"===q.direction?1:"up"===q.direction?-1:0);C+="\n@keyframes anim {100% {background-position:".concat(-1*(Z+Q*q.frames),"px ").concat(-1*(Y+X*q.frames),"px;}}\n.ID .JClicProgressAnimation {animation: anim ").concat(q.frames*q.delay,"ms steps(").concat(q.frames,") infinite;}")}}if(this.options.rectangle.messages){var tt=this.options.rectangle.messages,et=n+tt.left,nt=a-tt.width-tt.left-n,it=tt.top<u?"top:".concat(tt.top):"bottom:".concat(p-tt.height-tt.top),rt=tt.top<u?"top:".concat(Math.round(tt.top/2)):"bottom:".concat(Math.round((p-tt.height-tt.top)/2)),ot=tt.top<u?"top:".concat(Math.round(2*tt.top/3)):"bottom:".concat(Math.round(2*(p-tt.height-tt.top)/3));C+=".ID .JClicMsgBox {position:absolute;left:".concat(et,"px;right:").concat(nt,"px;height:").concat(tt.height,"px;").concat(it,"px;}"),S+=".ID .JClicMsgBox {left:".concat(Math.round(et/2),"px;right:").concat(Math.round(nt/2),"px;height:").concat(Math.round(tt.height/2),"px;").concat(rt,"px;}"),O+=".ID .JClicMsgBox {left:".concat(Math.round(2*et/3),"px;right:").concat(Math.round(2*nt/3),"px;height:").concat(Math.round(2*tt.height/3),"px;").concat(ot,"px;}")}this.cssVariants={default:this.mainCSS+C,half:S,twoThirds:O}}},{key:"_getStyleSheets",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.cssVariants||this._computeStyleSheets(),"".concat(wa(Sa(s.prototype),"_getStyleSheets",this).call(this,t)).concat(this.cssVariants[t]||"")}},{key:"setWaitCursor",value:function(t){wa(Sa(s.prototype),"setWaitCursor",this).call(this,t),this.$progressAnimation&&this.$progressAnimation.css("animation-play-state",this.waitCursorCount>0?"running":"paused")}}],n&&ba(e.prototype,n),r&&ba(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(kn);Object.assign(Oa.prototype,{skinId:"JClicCustomSkin",image:null,mainCSS:".ID .JClicPlayerCnt {margin:0;}.ID .JClicBtn:focus {outline:0;}.ID .JClicCounter {font-family:Roboto,sans-serif;text-align:center;}",cssVariants:null,msgKeys:{next:"Next activity",prev:"Previous activity",info:"Information",help:"Help",reports:"Reports",audio:"Audio on/off",reset:"Reset activity"},$progressAnimation:null});var Ea=kn.registerClass("custom",Oa);function Pa(t){return Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pa(t)}function Ta(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _a(t,e){return _a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_a(t,e)}function ja(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ra(t);if(e){var r=Ra(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ba(this,n)}}function Ba(t,e){if(e&&("object"===Pa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ra(t){return Ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ra(t)}var Ia=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_a(t,e)}(o,t);var e,n,i,r=ja(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,t,e)}return e=o,n=[{key:"buildShapes",value:function(){for(var t=1/this.nCols,e=1/this.nRows,n=0;n<this.nRows;n++)for(var i=0;i<this.nCols;i++)this.shapeData[n*this.nCols+i]=new Fe(new De(i*t,n*e),new Me(t,e));this.initiated=!0}}],n&&Ta(e.prototype,n),i&&Ta(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ni);Object.assign(Ia.prototype,{rectangularShapes:!0});var Da=Ni.registerClass("@Rectangular",Ia);function Ma(t){return Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ma(t)}function Na(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Va(){return Va="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=qa(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Va.apply(this,arguments)}function qa(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ua(t)););return t}function La(t,e){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},La(t,e)}function Fa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ua(t);if(e){var r=Ua(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return za(this,n)}}function za(t,e){if(e&&("object"===Ma(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ua(t){return Ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ua(t)}var $a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&La(t,e)}(o,t);var e,n,i,r=Fa(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,1,1)).customShapes=!0,n.nCols=t,n.nRows=e,n.showEnclosure=!0,n}return e=o,(n=[{key:"buildShapes",value:function(){this.nCells>0&&(this.initiated=!0)}},{key:"getEnclosingShapeData",value:function(){return this.showEnclosure?this.enclosing||Va(Ua(o.prototype),"getEnclosingShapeData",this).call(this):null}}])&&Na(e.prototype,n),i&&Na(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ni),Ha=Ni.registerClass("@Holes",$a);function Wa(t){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wa(t)}function Ga(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ja(t,e){return Ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ja(t,e)}function Ka(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ya(t);if(e){var r=Ya(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Za(this,n)}}function Za(t,e){if(e&&("object"===Wa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ya(t){return Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ya(t)}var Qa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ja(t,e)}(o,t);var e,n,i,r=Ka(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,t,e)}return e=o,n=[{key:"buildShapes",value:function(){for(var t=[],e=[],n=0;n<=this.nRows;n++)t[n]=[],e[n]=[];for(var i=0;i<this.nRows;i++)for(var r=0;r<this.nCols;r++)t[i][r]=0===i?0:1+(this.randomLines?Math.round(9*Math.random()):i+r)%2,e[i][r]=0===r?0:1+(this.randomLines?Math.round(9*Math.random()):r+i+1)%2,r===this.nCols-1&&(e[i][r+1]=0),i===this.nRows-1&&(t[i+1][r]=0);for(var o=1/this.nCols,s=1/this.nRows,a=0;a<this.nRows;a++)for(var c=0;c<this.nCols;c++){var l=o*c,u=s*a,h=new Ue([new $e("M",[l,u])]);this.hLine(h,t[a][c],l+0,u+0,o,s,!1),this.vLine(h,e[a][c+1],l+o,u+0,o,s,!1),this.hLine(h,t[a+1][c],l+o,u+s,o,s,!0),this.vLine(h,e[a][c],l+0,u+s,o,s,!0),h.addStroke(new $e("X")),h.calcEnclosingRect(),this.shapeData[a*this.nCols+c]=h}this.initiated=!0}},{key:"hLine",value:function(t,e,n,i,r,o,s){var a=s?-1:1,c=1===e?1:-1;if(0===e)t.addStroke(new $e("L",[n+r*a,i]));else{var l=n+(r-r*this.baseWidthFactor)/2*a,u=r*this.baseWidthFactor*a;t.addStroke(new $e("L",[l,i]));var h=o*this.toothHeightFactor*c;t.addStroke(new $e("L",[l,i+h])),t.addStroke(new $e("L",[l+u,i+h])),t.addStroke(new $e("L",[l+u,i])),t.addStroke(new $e("L",[n+r*a,i]))}}},{key:"vLine",value:function(t,e,n,i,r,o,s){var a=s?-1:1,c=1===e?1:-1;if(0===e)t.addStroke(new $e("L",[n,i+o*a]));else{var l=i+(o-o*this.baseWidthFactor)/2*a,u=o*this.baseWidthFactor*a;t.addStroke(new $e("L",[n,l]));var h=r*this.toothHeightFactor*c;t.addStroke(new $e("L",[n+h,l])),t.addStroke(new $e("L",[n+h,l+u])),t.addStroke(new $e("L",[n,l+u])),t.addStroke(new $e("L",[n,i+o*a]))}}}],n&&Ga(e.prototype,n),i&&Ga(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ni),Xa=Ni.registerClass("@JigSaw",Qa);function tc(t){return tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(t)}function ec(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nc(t,e){return nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nc(t,e)}function ic(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=oc(t);if(e){var r=oc(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return rc(this,n)}}function rc(t,e){if(e&&("object"===tc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oc(t){return oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oc(t)}var sc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nc(t,e)}(o,t);var e,n,i,r=ic(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,t,e)}return e=o,n=[{key:"hLine",value:function(t,e,n,i,r,o,s){var a=s?-1:1,c=1===e?1:-1;if(0===e)t.addStroke(new $e("L",[n+r*a,i]));else{var l=n+(r-r*this.baseWidthFactor)/2*a,u=r*this.baseWidthFactor*a;t.addStroke(new $e("L",[l,i]));var h=o*this.toothHeightFactor*c;t.addStroke(new $e("L",[l+u/2,i+h])),t.addStroke(new $e("L",[l+u,i])),t.addStroke(new $e("L",[n+r*a,i]))}}},{key:"vLine",value:function(t,e,n,i,r,o,s){var a=s?-1:1,c=1===e?1:-1;if(0===e)t.addStroke(new $e("L",[n,i+o*a]));else{var l=i+(o-o*this.baseWidthFactor)/2*a,u=o*this.baseWidthFactor*a;t.addStroke(new $e("L",[n,l]));var h=r*this.toothHeightFactor*c;t.addStroke(new $e("L",[n+h,l+u/2])),t.addStroke(new $e("L",[n,l+u])),t.addStroke(new $e("L",[n,i+o*a]))}}}],n&&ec(e.prototype,n),i&&ec(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Xa),ac=Ni.registerClass("@TriangularJigSaw",sc);function cc(t){return cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(t)}function lc(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function uc(t,e){return uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uc(t,e)}function hc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=pc(t);if(e){var r=pc(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return fc(this,n)}}function fc(t,e){if(e&&("object"===cc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pc(t){return pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pc(t)}var dc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uc(t,e)}(o,t);var e,n,i,r=hc(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,t,e)}return e=o,n=[{key:"hLine",value:function(t,e,n,i,r,o,s){var a=s?-1:1,c=1===e?1:-1;if(0===e)t.addStroke(new $e("L",[n+r*a,i]));else{var l=n+(r-r*this.baseWidthFactor)/2*a,u=r*(this.baseWidthFactor/12)*a;t.addStroke(new $e("L",[l,i]));var h=o*this.toothHeightFactor*c/8;t.addStroke(new $e("B",[l+4*u,i,l+6*u,i-h,l+4*u,i-3*h])),t.addStroke(new $e("B",[l+2*u,i-5*h,l+10*u,i-5*h,l+8*u,i-3*h])),t.addStroke(new $e("B",[l+6*u,i-1*h,l+8*u,i,l+12*u,i])),t.addStroke(new $e("L",[n+r*a,i]))}}},{key:"vLine",value:function(t,e,n,i,r,o,s){var a=s?-1:1,c=1===e?1:-1;if(0===e)t.addStroke(new $e("L",[n,i+o*a]));else{var l=i+(o-o*this.baseWidthFactor)/2*a,u=o*this.baseWidthFactor/12*a;t.addStroke(new $e("L",[n,l]));var h=r*this.toothHeightFactor*c/8;t.addStroke(new $e("B",[n,l+4*u,n-h,l+6*u,n-3*h,l+4*u])),t.addStroke(new $e("B",[n-5*h,l+2*u,n-5*h,l+10*u,n-3*h,l+8*u])),t.addStroke(new $e("B",[n-1*h,l+6*u,n,l+8*u,n,l+12*u])),t.addStroke(new $e("L",[n,i+o*a]))}}}],n&&lc(e.prototype,n),i&&lc(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Xa);Object.assign(dc.prototype,{baseWidthFactor:3/4,toothHeightFactor:.6});var vc=Ni.registerClass("@ClassicJigSaw",dc);function yc(t){return yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yc(t)}function gc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mc(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bc(t,e,n){return e&&mc(t.prototype,e),n&&mc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wc(t,e){return wc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wc(t,e)}function kc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=xc(t);if(e){var r=xc(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ac(this,n)}}function Ac(t,e){if(e&&("object"===yc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xc(t){return xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xc(t)}var Cc=["+","-",String.fromCharCode(215),":"],Sc=-12345,Oc=Intl&&Intl.NumberFormat().format(1.1).indexOf(",")>0,Ec=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wc(t,e)}(n,t);var e=kc(n);function n(){var t;return gc(this,n),(t=e.call(this)).className="@arith.Arith",t.numericContent=!0,t.opA=new n.Operator,t.opB=new n.Operator,t}return bc(n,[{key:"setProperties",value:function(t){var e=this;return t.children().each((function(t,n){var r=i()(n),o="";switch(n.nodeName){case"operand":switch(r.attr("id")){case"A":e.opA.setProperties(r);break;case"B":e.opB.setProperties(r)}break;case"operations":e.use_add=mt(r.attr("plus")),e.use_subst=mt(r.attr("minus")),e.use_mult=mt(r.attr("multiply")),e.use_div=mt(r.attr("divide"));break;case"unknown":e.exp_abx=mt(r.attr("result")),e.exp_xbc=mt(r.attr("first")),e.exp_axc=mt(r.attr("last")),e.exp_axbc=mt(r.attr("operand")),e.exp_caxb=mt(r.attr("inverse"));break;case"result":o=r.attr("from"),e.resultLimInf=wt("x"===o?0:o,e.resultLimInf),o=r.attr("to"),e.resultLimSup=wt("x"===o?0:o,e.resultLimSup),e.resultCarry=mt(r.attr("notCarry"),e.resultCarry),e.resultNoDup=!mt(r.attr("duplicates"),!e.resultNoDup);var s=r.attr("order");e.resultOrder="ascending"===s?"SORTASC":"descending"===s?"SORTDESC":"NOSORT",s=r.attr("condition"),e.opCond="firstBig"===s?"AGB":"lastBig"===s?"BGA":"INDIF"}})),this}},{key:"getAttributes",value:function(){return qt(this,["className","opA","opB","use_add","use_subst","use_mult","use_div","exp_abx|true","exp_axc|false","exp_xbc|false","exp_axbc|false","exp_caxb|false","resultLimInf|0","resultLimSup|9999","resultCarry|false","resultNoDup|false","resultOrder|NOSORT","opCond|INDIF"])}},{key:"setAttributes",value:function(t){return zt(this,t,["className",{key:"opA",fn:n.Operator},{key:"opB",fn:n.Operator},"use_add","use_subst","use_mult","use_div","exp_abx","exp_axc","exp_xbc","exp_axbc","exp_caxb","resultLimInf","resultLimSup","resultCarry","resultNoDup","resultOrder","opCond"])}},{key:"genNum",value:function(t,e,n,i){var r=!1;t.c=e.numDec;var o=0===t.c?1:1===t.c?10:100,s=e.limSup;i!==Sc&&i<s&&(s=i);var a=e.limInf;if(n!==Sc&&n>a&&(a=n),e.fromList>0&&(t.vf=e.lst[Math.floor(Math.random()*e.fromList)],r=!0),!r){var c=Math.floor(100*Math.random());e.wZero&&c<=10?(t.vf=0,r=!0):e.wOne&&c>10&&c<=20?(t.vf=1,r=!0):e.wMinusOne&&c>20&&c<=30&&(t.vf=-1,r=!0)}if(!r){if(a>s){var l=a;a=s,s=l}var u=Math.floor(s-a+1);u<0&&(u=1);var h=(Math.floor(Math.random()*u)+a)*o;o>1&&(h+=Math.floor(Math.random()*o)),t.vf=h/o}return!0}},{key:"genOp",value:function(t){var e,i,r,o,s,a,c,l,u=[],h=this.resultLimInf,f=this.resultLimSup,p=0;switch(this.use_add&&(u[p++]="SUM"),this.use_subst&&(u[p++]="REST"),this.use_mult&&(u[p++]="MULT"),this.use_div&&(u[p++]="DIV"),u[Math.floor(Math.random()*p)]){case"SUM":for(e=0;e<60;e++){switch(this.genNum(t.numA,this.opA,this.RES,f),i=t.numA.vf<h?h-Math.floor(t.numA.vf):this.RES,r=f-Math.floor(t.numA.vf),this.opCond){case"AGB":(r===this.RES||r>t.numA.vf)&&(r=Math.floor(t.numA.vf));break;case"BGA":(i===this.RES||i<t.numA.vf)&&(i=Math.floor(t.numA.vf))}if(this.genNum(t.numB,this.opB,i,r),t.numR.vf=t.numA.vf+t.numB.vf,t.numR.vf>=h&&t.numR.vf<=f)break}if(t.numR.c=t.numA.c>t.numB.c?t.numA.c:t.numB.c,t.op=0,this.resultCarry&&t.numA.vf>0&&t.numB.vf>0){for(o=2===t.numR.c?100:1===t.numR.c?10:1,c=n.DecFormat(Math.floor(t.numA.vf*o+.5),0,10).split(""),l=n.DecFormat(Math.floor(t.numB.vf*o+.5),0,10).split(""),e=0;e<10&&("0"===c[e]&&"0"===l[e]);e++);for(;e<10;e++)if(!((s=parseInt(c[e]))+(a=parseInt(l[e]))<10)){for(;s+a>9;)s>a?s=s>0?Math.floor(Math.random()*s):0:a=a>0?Math.floor(Math.random()*a):0;c[e]=s.toFixed(0),l[e]=a.toFixed(0)}t.numA.vf=parseInt(c.join(""))/o,t.numB.vf=parseInt(l.join(""))/o,t.numR.vf=Math.floor(t.numA.vf*o+t.numB.vf*o+.5)/o}break;case"REST":for(e=0;e<60;e++){switch(this.genNum(t.numA,this.opA,h,this.RES),i=t.numA.vf>f?Math.floor(t.numA.vf-f):this.RES,r=Math.floor(t.numA.vf-h),this.opCond){case"AGB":(r===this.RES||r>t.numA.vf)&&(r=Math.floor(t.numA.vf));break;case"BGA":(i===this.RES||i<t.numA.vf)&&(i=Math.floor(t.numA.vf))}if(this.genNum(t.numB,this.opB,i,r),t.numR.vf=t.numA.vf-t.numB.vf,t.numR.vf>=h&&t.numR.vf<=f)break}if(t.numR.c=t.numA.c>t.numB.c?t.numA.c:t.numB.c,t.op=1,this.resultCarry&&t.numA.vf>0&&t.numB.vf>0&&t.numA.vf>=t.numB.vf){for(o=2===t.numR.c?100:1===t.numR.c?10:1,c=n.DecFormat(Math.floor(t.numA.vf*o+.5),0,10).split(""),l=n.DecFormat(Math.floor(t.numB.vf*o+.5),0,10).split(""),e=0;e<10&&"0"===l[e];e++);for(;e<10;e++)(s=parseInt(c[e]))>=(a=parseInt(l[e]))||(a=s>0?Math.floor(Math.random()*s):0,l[e]=a.toFixed(0));t.numA.vf=parseInt(c.join(""))/o,t.numB.vf=parseInt(l.join(""))/o,t.numR.vf=Math.floor(t.numA.vf*o-t.numB.vf*o+.5)/o}break;case"MULT":for(e=0;e<60;e++){switch(this.genNum(t.numA,this.opA,this.RES,this.RES),i=this.opB.limInf,r=this.opB.limSup,this.opCond){case"AGB":r>t.numA.vf&&(r=Math.floor(t.numA.vf));break;case"BGA":i<t.numA.vf&&(i=Math.floor(t.numA.vf))}if(this.genNum(t.numB,this.opB,i,r),t.numR.vf=t.numA.vf*t.numB.vf,t.numR.vf>=h&&t.numR.vf<=f)break}t.numR.c=t.numA.c+t.numB.c,t.op=2;break;case"DIV":for(e=0;e<60;e++){switch(this.genNum(t.numA,this.opA,this.RES,this.RES),i=this.opB.limInf,r=this.opB.limSup,this.opCond){case"AGB":r>t.numA.vf&&(r=Math.floor(t.numA.vf));break;case"BGA":i<t.numA.vf&&(i=Math.floor(t.numA.vf))}if(this.genNum(t.numB,this.opB,i,r),0!==t.numB.vf&&Math.abs(t.numA.vf)>=Math.abs(t.numB.vf)&&(t.numR.vf=t.numA.vf/t.numB.vf)>=h&&t.numR.vf<=f)break}0===t.numB.vf&&(t.numB.vf=1),t.numR.vf=t.numA.vf/t.numB.vf,e=t.numA.c-t.numB.c,o=Math.pow(10,e),t.numA.vf*=o,t.numR.vf*=o,t.numR.vf=Math.floor(t.numR.vf),t.numA.vf=t.numR.vf*t.numB.vf,t.numA.vf/=o,t.numR.vf/=o,t.numR.c=e>0?e:0,t.op=3;break;default:return!1}return!0}},{key:"process",value:function(t){var e,i,r,o,s,a,c=t.nRows,l=t.nCols,u=t.content,h=t.useIds,f=[],p=[],d=this.exp_caxb,v="",y="",g="",m="",b=[],w=[],k=[],A=l,x=c,C=c*l,S=null;if(c<=0||l<=0||null===u||u.length<1||null===u[0])return!1;if(C<2)return!1;if(s=0,this.exp_abx&&(p[s++]="ABX"),this.exp_axc&&(p[s++]="AXC"),this.exp_xbc&&(p[s++]="XBC"),this.exp_axbc&&(p[s++]="AXBC"),0===s)return!1;for(e=0;e<C;e++){for(o=new n.Operation,i=0;i<60&&(this.genOp(o),this.resultNoDup);i++){for(r=0;r<e&&o.numR.vf!==f[r].numR.vf;r++);if(r===e)break}f[e]=o}if(0!==this.resultOrder)for(e=C-1;e>0;e--)for(i=0;i<e;i++)("SORTASC"===this.resultOrder&&f[i].numR.vf>f[i+1].numR.vf||"SORTDESC"===this.resultOrder&&f[i].numR.vf<f[i+1].numR.vf)&&(o=f[i],f[i]=f[i+1],f[i+1]=o);for(e=0;e<C;e++)switch(a=p[Math.floor(Math.random()*s)],v=n.DecFormat(f[e].numA.vf,f[0].numA.c),y=n.DecFormat(f[e].numB.vf,f[0].numB.c),g=n.DecFormat(f[e].numR.vf,f[0].numR.c),m=Cc[f[e].op],k[e]=d?"".concat(g,"Â =Â ").concat(v,"Â ").concat(m,"Â ").concat(y):"".concat(v,"Â ").concat(m,"Â ").concat(y,"Â =Â ").concat(g),a){case"AXC":w[e]=y,b[e]=d?"".concat(g,"Â =Â ").concat(v,"Â ").concat(m,"Â ?"):"".concat(v,"Â ").concat(m,"Â ?Â =Â ").concat(g);break;case"XBC":w[e]=v,b[e]=d?"".concat(g,"Â =Â ?Â ").concat(m,"Â ").concat(y):"?Â ".concat(m,"Â ").concat(y,"Â =Â ").concat(g);break;case"AXBC":w[e]=m,b[e]=d?"".concat(g,"Â =Â ").concat(v,"Â ?Â ").concat(y):"".concat(v,"Â ?Â ").concat(y,"Â =Â ").concat(g);break;default:w[e]=g,b[e]=d?"?Â =Â ".concat(v,"Â ").concat(m,"Â ").concat(y):"".concat(v,"Â ").concat(m,"Â ").concat(y,"Â =")}if(h){S=[];var O=[];for(r=0,e=0;e<C;e++){for(i=0;i<r&&w[e]!==O[i];i++);i===r?(O[r]=w[e],S[e]=r,r++):S[e]=i}for(w=[],e=0;e<r;e++)w[e]=O[e];if(x*A!==r){switch(r){case 6:x=3,A=2;break;case 8:x=4,A=2;break;case 9:x=3,A=3;break;case 10:x=5,A=2;break;case 12:x=4,A=3;break;case 14:x=7,A=2;break;case 15:x=5,A=5;break;case 16:x=4,A=4;break;case 18:x=3,A=6;break;case 20:x=5,A=4;break;default:x=r,A=1}}}if(Oc){var E=function(t){return t.replace(/\./g,",")};b=b.map(E),w=w.map(E),k=k.map(E)}return u[0].setTextContent(b,l,c),null!==S&&u[0].setIds(S),u.length>1&&null!==u[1]&&(u[1].setTextContent(w,A,x),u[1].getShaper().reset(A,x)),u.length>2&&null!==u[2]&&u[2].setTextContent(k,l,c),!0}}],[{key:"DecFormat",value:function(t,e,n){var i=t.toFixed(e);if(n){var r=i.indexOf(".");for(r<0&&(r=i.length);r<n;r++)i="0".concat(i)}return i}}]),n}(Gi);Object.assign(Ec.prototype,{opA:null,opB:null,use_add:!0,use_subst:!1,use_mult:!1,use_div:!1,exp_abx:!0,exp_axc:!1,exp_xbc:!1,exp_axbc:!1,exp_caxb:!1,resultLimInf:0,resultLimSup:9999,resultCarry:!1,resultNoDup:!1,resultOrder:"NOSORT",opCond:"INDIF"}),Ec.Operator=function(){function t(){gc(this,t)}return bc(t,[{key:"setProperties",value:function(t){var e=this;return he(t.get(0).attributes,(function(n,r){switch(n){case"decimals":e.numDec=Number(r);break;case"values":e.lst=r.split(" ").map((function(t){return Number(t)})),e.fromList=e.lst.length;break;case"from":e.limInf=Number("x"===r?0:r);break;case"to":e.limSup=Number("x"===r?0:r)}t.children().each((function(t,n){var r=i()(n);if("include"===n.nodeName)e.wZero=mt(r.attr("zero")),e.wOne=mt(r.attr("one")),e.wMinusOne=mt(r.attr("minusOne"))}))})),this}},{key:"getAttributes",value:function(){return qt(this,["limInf","limSup","numDec|0","wZero|false","wOne|false","wMinusOne|false","fromList|0","lst"])}},{key:"setAttributes",value:function(t){return zt(this,t,["limInf","limSup","numDec","wZero","wOne","wMinusOne","fromList","lst"])}}]),t}(),Object.assign(Ec.Operator.prototype,{limInf:0,limSup:10,numDec:0,wZero:!1,wOne:!1,wMinusOne:!1,fromList:0,lst:[]}),Ec.Num=function(){function t(){gc(this,t),this.vf=0,this.c=0}return bc(t,[{key:"format",value:function(){return Ec.DecFormat(this.vf,this.c)}}]),t}(),Ec.Operation=function(){return bc((function t(){gc(this,t),this.numA=new Ec.Num,this.numB=new Ec.Num,this.numR=new Ec.Num,this.op=0}))}();var Pc=Gi.registerClass("@arith.Arith",Ec);function Tc(t){return Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(t)}function _c(t){return function(t){if(Array.isArray(t))return jc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return jc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jc(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Bc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Rc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bc(Object(n),!0).forEach((function(e){Ic(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ic(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dc(){return Dc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Mc(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Dc.apply(this,arguments)}function Mc(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$c(t)););return t}function Nc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vc(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qc(t,e,n){return e&&Vc(t.prototype,e),n&&Vc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lc(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fc(t,e)}function Fc(t,e){return Fc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fc(t,e)}function zc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=$c(t);if(e){var r=$c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Uc(this,n)}}function Uc(t,e){if(e&&("object"===Tc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $c(t){return $c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$c(t)}var Hc=function(t){Lc(n,t);var e=zc(n);function n(t){return Nc(this,n),e.call(this,t)}return qc(n,[{key:"getMinNumActions",value:function(){return this.document?this.document.numTargets:0}}]),n}(Br);Object.assign(Hc.prototype,{ev:null,checkButtonText:null,prevScreen:!1,prevScreenText:null,prevScreenStyle:null,prevScreenMaxTime:-1});var Wc=function(t){Lc(n,t);var e=zc(n);function n(t,i,r){var o;return Nc(this,n),(o=e.call(this,t,i,r)).targets=[],o}return qc(n,[{key:"setDocContent",value:function(t,e){var n=this;t.empty().css(e.style.default.css).css({display:"flex","flex-direction":"column"});var r=i()("<div/>").css({"flex-grow":1,overflow:"auto"}),o=i()("<div/>",{class:"JClicTextDocument"}).css({padding:4}).css(e.style.default.css),s=null,a=[];return e.p.forEach((function(t){var r=i()("<p/>").css({margin:0}),c=!0;if(t.style?(s=e.style[t.style].css,r.css(s)):s=null,t.Alignment){var l=Number(t.Alignment);r.css({"text-align":1===l?"center":2===l?"right":"left"})}t.elements.forEach((function(t){var o;switch(t.objectType){case"text":var l=i()("<span/>").html(t.text).text();(n.spanText?Wt(l):[{text:l,sep:""}]).forEach((function(s){var a,c,l=s.text,u=s.sep,h=Rc({},n.act.document.style.default.css);null!=t&&null!==(a=t.attr)&&void 0!==a&&a.style&&(h=Rc(Rc({},h),e.style[t.attr.style].css)),null!=t&&null!==(c=t.attr)&&void 0!==c&&c.css&&(h=Rc(Rc({},h),t.attr.css)),(n.spanChars?_c(l):[l]).forEach((function(e){t.attr?((o=i()("<span/>").html(e).css(h)).initialCSS=h,r.append(n.$createSpanElement(o))):n.spanText?(o=i()("<span/>").html(e),r.append(n.$createSpanElement(o))):r.append(e)})),""!==u&&r.append(u)}));break;case"cell":o=i()("<span/>");var u=$o.createCell(o.css({position:"relative"}),t);o.css({display:"inline-block","vertical-align":"middle"}),t.mediaContent&&o.on("click",(function(t){return t.preventDefault(),n.ps.stopMedia(1),u.playMedia(n.ps),!1})),r.append(o);break;case"target":if(o=i()("<span/>"),n.showingPrevScreen){o.text(t.text),r.append(o);break}var h=t,f=null;if("no_info"!==h.infoMode&&h.popupContent){f=i()("<span/>").css({position:"absolute","padding-top":"2pt",display:"none"});var p=$o.createCell(f,h.popupContent);h.popupContent.mediaContent&&f.on("click",(function(t){return t.preventDefault(),n.ps.stopMedia(1),p?p.playMedia(n.ps):h.popupContent.mediaContent&&n.ps.playMedia(h.popupContent.mediaContent),!1})),h.$popup=f,a.push({p:r,span:f,box:p})}o=n.$createTargetElement(h,o),h.num=n.targets.length,h.pos=h.num,n.targets.push(h),o&&(o.css(e.style.default.css),s&&o.css(s),n.targetsMarked?h.attr?(h.attr.style||(h.attr.style="target"),o.css(e.style[h.attr.style].css),h.attr.css&&o.css(h.attr.css)):e.style.target&&o.css(e.style.target.css):h.targetStatus="HIDDEN",null!==f&&"onDemand"===h.infoMode&&o.keydown((function(t){t.key===h.popupKey?(t.preventDefault(),n.showPopup(f,h.popupMaxTime,h.popupDelay)):"Escape"===t.key&&(t.preventDefault(),n.showPopup(null))}))),f&&o?h.isList?r.append(o).append(f):r.append(f).append(o):o&&r.append(o),h.$p=r}c=!1})),c&&r.html("&nbsp;"),o.append(r)})),t.append(r.append(o)),this.act.checkButtonText&&!this.showingPrevScreen&&(this.$checkButton=i()("<button/>",{class:"StockBtn"}).html(this.act.checkButtonText).css({width:"100%","flex-shrink":0}).on("click",(function(){return n.evaluatePanel()})),t.append(this.$checkButton)),a.forEach((function(t){return t.span.css({"margin-top":t.p.css("font-size")})})),this.act.ev&&this.act.ev.init(this.act.project.settings.locales),t}},{key:"$createTargetElement",value:function(t,e){return e.text(t.text),t.$span=e,e}},{key:"$createSpanElement",value:function(t){return t}},{key:"initActivity",value:function(){this.act.prevScreen?this.preInitActivity():this.startActivity()}},{key:"startActivity",value:function(){Dc($c(n.prototype),"initActivity",this).call(this),this.setAndPlayMsg("initial","start"),this.setDocContent(this.$div,this.act.document),this.playing=!0}},{key:"preInitActivity",value:function(){var t=this;if(this.act.prevScreen){var e=function(){return t.showingPrevScreen=!1,t.$div.unbind("click"),t.prevScreenTimer&&(window.clearTimeout(t.prevScreenTimer),t.prevScreenTimer=null),t.startActivity(),!0};if(this.showingPrevScreen=!0,this.$div.empty(),this.act.prevScreenText){this.act.prevScreenStyle||(this.act.prevScreenStyle=new Pi),this.$div.css(this.act.prevScreenStyle.getCSS()).css("overflow","auto");var n=i()("<div/>",{class:"JClicTextDocument"}).css({padding:4}).css(this.act.prevScreenStyle.getCSS()).append(this.act.prevScreenText);this.$div.append(n)}else this.setDocContent(this.$div,this.act.document);this.enableCounters(!0,!1,!1),this.ps.setCounterValue("time",0),this.ps.setMsg(this.act.messages.previous),this.act.prevScreenMaxTime>0&&(this.ps.setCountDown("time",this.act.prevScreenMaxTime),this.prevScreenTimer=window.setTimeout(e,1e3*this.act.prevScreenMaxTime)),this.$div.on("click",e),this.ps.playMsg()}}},{key:"evaluatePanel",value:function(){return this.finishActivity(!0),!0}},{key:"finishActivity",value:function(t){this.$checkButton&&this.$checkButton.prop("disabled",!0),this.targets.forEach((function(t){t.$comboList&&t.$comboList.attr("disabled",!0)})),this.showPopup(null),Dc($c(n.prototype),"finishActivity",this).call(this,t)}},{key:"processEvent",value:function(t){return this.playing}},{key:"showPopup",value:function(t,e,n){var i=this;this.$currentPopup&&(this.$currentPopup.css({display:"none"}),this.$currentPopup=null,this.currentPopupTimer&&(window.clearTimeout(this.currentPopupTimer),this.currentPopupTimer=0)),this.popupWaitTimer&&(window.clearTimeout(this.popupWaitTimer),this.popupWaitTimer=0),n?this.popupWaitTimer=window.setTimeout((function(){i.showPopup(t,e)}),1e3*n):t&&(t.css({display:""}),t.trigger("click"),this.$currentPopup=t,e&&(this.currentPopupTimer=window.setTimeout((function(){t.css({display:"none"}),i.$currentPopup===t&&(i.$currentPopup=null,i.currentPopupTimer=0)}),1e3*e)))}}]),n}(Rr);Object.assign(Wc.prototype,{targets:null,targetsMarked:!0,$checkButton:null,prevScreenTimer:null,$currentPopup:null,currentPopupTimer:0,popupWaitTimer:0,spanText:!1,spanChars:!1}),Hc.Panel=Wc;var Gc=Hc;function Jc(t){return Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(t)}function Kc(){return Kc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Zc(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Kc.apply(this,arguments)}function Zc(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rl(t)););return t}function Yc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qc(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xc(t,e,n){return e&&Qc(t.prototype,e),n&&Qc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&el(t,e)}function el(t,e){return el=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},el(t,e)}function nl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=rl(t);if(e){var r=rl(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return il(this,n)}}function il(t,e){if(e&&("object"===Jc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function rl(t){return rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rl(t)}var ol=function(t){tl(n,t);var e=nl(n);function n(t){return Yc(this,n),e.call(this,t)}return Xc(n,[{key:"needsKeyboard",value:function(){return!0}}]),n}(Hc);Object.assign(ol.prototype,{autoJump:!1,forceOkToAdvance:!1});var sl=function(t){tl(n,t);var e=nl(n);function n(t,i,r){return Yc(this,n),e.call(this,t,i,r)}return Xc(n,[{key:"$createTargetElement",value:function(t,e){var n=this;e.addClass("JClicTextTarget");var r="target".concat("000".concat(this.targets.length-1).slice(-3));return t.isList&&t.options&&t.options.length>0?(e=i()("<select/>",{id:r,name:r}),""!==t.options[0].trim()&&i()("<option selected/>",{value:"",text:""}).appendTo(e),t.options.forEach((function(t){return i()("<option/>",{value:t,text:t}).appendTo(e)})),t.$comboList=e.bind("focus change",(function(e){e.textTarget=t,n.processEvent(e)}))):(t.currentText=t.iniText?t.iniText:Pt(t.iniChar,t.numIniChars),t.$span=e.text(t.currentText).attr({contenteditable:"true",id:r,autocomplete:"off",spellcheck:"false"}).bind("focus input blur",(function(e){e.textTarget=t,n.processEvent(e)})).bind("keydown keyup",(function(e){13===e.keyCode&&(e.preventDefault(),"keydown"===e.type&&(e.textTarget=t,e.type="blur",n.processEvent(e)))}))),e}},{key:"evaluatePanel",value:function(){var t=this,e=0,n=this.targets.length;return this.targets.forEach((function(n){var i=t.act.ev.evalText(n.readCurrentText(),n.answers),r=t.act.ev.isOk(i);n.targetStatus=r?"SOLVED":"WITH_ERROR",r&&e++,t.markTarget(n,i),t.ps.reportNewAction(t.act,"WRITE",n.currentText,n.getAnswers(),r,e)})),e===n?(this.finishActivity(!0),!0):(this.playEvent("finishedError"),!1)}},{key:"checkTarget",value:function(t,e,n){var i=this.act.ev.evalText(t.currentText,t.answers),r=this.act.ev.isOk(i);if(t.targetStatus=r?"SOLVED":"WITH_ERROR",e)return r;this.markTarget(t,i);var o=this.countSolvedTargets(!1,!1);if(t.currentText.length>0&&this.ps.reportNewAction(this.act,"WRITE",t.currentText,t.getAnswers(),r,o),r&&o===this.targets.length)return this.finishActivity(!0),r;if(t.currentText.length>0&&this.playEvent(r?"actionOk":"actionError"),n&&0!==n){var s=t.num+n;s>=this.targets.length?s=0:s<0&&(s=this.targets.length-1);var a=this.targets[s];a.$span?(a.$span.focus(),ve(a.$span.get(-1),0,0)):a.$comboList&&a.$comboList.focus()}return r}},{key:"countSolvedTargets",value:function(t,e){var n=this;return this.targets.reduce((function(i,r){return t&&(r.readCurrentText(),n.checkTarget(r,!e)),"SOLVED"===r.targetStatus?++i:i}),0)}},{key:"markTarget",value:function(t,e){if(t.$comboList||this.act.ev.isOk(e))t.checkColors();else if(t.$span){for(var n=t.currentText,r=[],o=-1,s=-1,a=0;a<e.length&&a<n.length;a++)e[a]!==o&&(r[++s]="",o=e[a]),r[s]+=n.charAt(a);a<n.length&&(r[s]+=n.substr(a)),t.$span.empty(),o=e[0],r.forEach((function(e){i()("<span/>").text(e).css(t.doc.style[0===o?"target":"targetError"].css).appendTo(t.$span),o^=1}))}t.flagModified=!1}},{key:"activityReady",value:function(){Kc(rl(n.prototype),"activityReady",this).call(this),i()(".JClicTextTarget").css("white-space","normal"),this.targets.length>0&&this.targets[0].$span&&this.targets[0].$span.focus()}},{key:"finishActivity",value:function(t){return this.targets.forEach((function(t){t.$span?t.$span.removeAttr("contenteditable").blur():t.$comboList&&t.$comboList.attr("disabled","true").blur()})),Kc(rl(n.prototype),"finishActivity",this).call(this,t)}},{key:"processEvent",value:function(t){if(!Kc(rl(n.prototype),"processEvent",this).call(this,t))return!1;var e=t.textTarget,i=null,r=0;switch(t.type){case"focus":e&&(e.$span&&e.$span.children().length>0?(i=e.$span,r=Math.min(e.currentText.length,pe(i.get(-1))),i.empty(),i.text(e.currentText),ve(i.get(-1),r,r),e.flagModified=!0):e.$comboList&&e.$comboList.css(e.doc.style.target.css),e.$popup&&("always"===e.infoMode||"onError"===e.infoMode&&"WITH_ERROR"===e.targetStatus)?this.showPopup(e.$popup,e.popupMaxTime,e.popupDelay):this.showPopup(null));break;case"blur":e.flagModified&&!this.$checkButton&&this.checkTarget(e,!1,1);break;case"input":if(e&&e.$span){var o=(i=e.$span).html();if(/(<br>|\n|\r)/.test(o))return o=o.replace(/(<br>|\n|\r)/g,""),i.html(o),e.currentText=i.text(),!this.$checkButton&&this.checkTarget(e,!1,1);if((o=i.text())!==e.currentText){e.flagModified=!0;var s=o.length-e.currentText.length;if(s>0){if(o.indexOf(e.iniChar)>=0){r=pe(i.get(-1));for(var a=0;a<s;a++){var c=o.indexOf(e.iniChar);if(c<0)break;o=o.substr(0,c)+o.substr(c+1),c<r&&r--}i.text(o),ve(i.get(-1),r,r)}o.length>e.maxLenResp&&(r=pe(i.get(-1)),o=o.substr(0,e.maxLenResp),r=Math.min(r,o.length),i.text(o),ve(i.get(-1),r,r))}else""===o&&(o=e.iniChar,i.text(o),ve(i.get(-1),0,0));e.currentText=o}}break;case"change":if(e&&e.$comboList)return e.currentText=e.$comboList.val(),e.flagModified=!0,!this.$checkButton&&this.checkTarget(e,!1,1)}return!0}}]),n}(Wc);Object.assign(sl.prototype,{locked:!0}),ol.Panel=sl;var al=Ir.registerClass("@text.FillInBlanks",ol);function cl(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ll="source-over",ul=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e,this.ctx=n,this.dim=new Me(n.canvas.width,n.canvas.height),this.origin=new De,this.dest=new De,this.relativePos=new De}var e,n,i;return e=t,(n=[{key:"moveBy",value:function(t,e){this.moveTo(De(this.dest.x+t,this.dest.y+e))}},{key:"moveTo",value:function(t,e){if(this.active&&(e||!this.dest.equals(t))){this.bgRect&&(this.bgImg?this.ctx.putImageData(this.bgImg,0,0,this.bgRect.pos.x,this.bgRect.pos.y,this.bgRect.dim.width,this.bgRect.dim.height):this.parent&&this.parent.updateContent()),this.dest.moveTo(t);var n=new De(this.origin.x-this.relativePos.x,this.origin.y-this.relativePos.y);this.bgRect=new Fe(n,this.bx?this.bx.dim:new Me);var i=new De(t.x-this.relativePos.x,t.y-this.relativePos.y);this.bgRect.add(new Fe(i,this.bx?this.bx.dim:new Me)),this.bgRect.grow(10,10),null!==this.bx?(this.bx.moveTo(new De(t.x-this.relativePos.x,t.y-this.relativePos.y)),this.bx.setTemporaryHidden(!1),this.bx.update(this.ctx,null),this.bx.setTemporaryHidden(!0)):(this.drawLine(),this.linePainted=!0)}}},{key:"begin",value:function(t,e){this.active&&this.end(),this.origin.moveTo(t),this.dest.moveTo(t),this.linePainted=!1,this.active=!0,e&&(this.bx=e,this.relativePos.moveTo(t.x-e.pos.x,t.y-e.pos.y),this.bx.setFocused(!0),this.bx.setTemporaryHidden(!0),this.linePainted=!1,this.parent.invalidate().update());try{this.bgImg=this.ctx.getImageData(0,0,this.dim.width,this.dim.height)}catch(t){this.bgImg=null}this.bgRect=null,e&&this.moveTo(t,!0)}},{key:"end",value:function(){this.active&&(this.active=!1,this.linePainted=!1,this.bgRect=null,this.bgImg=null,this.bx&&(this.bx.setFocused(!1),this.bx.moveTo(this.origin.x-this.relativePos.x,this.origin.y-this.relativePos.y),this.bx.setTemporaryHidden(!1),this.bx=null,this.relativePos.moveTo(0,0)),this.ctx.clearRect(0,0,this.dim.width,this.dim.height),this.parent.invalidate().update())}},{key:"drawLine",value:function(){if(this.compositeOp!==ll?(this.ctx.strokeStyle=this.xorColor,this.ctx.globalCompositeOperation=this.compositeOp):this.ctx.strokeStyle=this.lineColor,this.ctx.lineWidth=this.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(this.origin.x,this.origin.y),this.ctx.lineTo(this.dest.x,this.dest.y),this.ctx.stroke(),this.arrow){var t=Math.atan2(this.origin.x-this.dest.x,this.dest.x-this.origin.x),e=new De(this.dest.x-this.arrowLength*Math.cos(t+this.arrowAngle),this.dest.y+this.arrowLength*Math.sin(t+this.arrowAngle));this.ctx.beginPath(),this.ctx.moveTo(this.dest.x,this.dest.y),this.ctx.lineTo(e.x,e.y),this.ctx.stroke(),e.moveTo(this.dest.x-this.arrowLength*Math.cos(t-this.arrowAngle),this.dest.y+this.arrowLength*Math.sin(t-this.arrowAngle)),this.ctx.beginPath(),this.ctx.moveTo(this.dest.x,this.dest.y),this.ctx.lineTo(e.x,e.y),this.ctx.stroke()}this.compositeOp!==ll&&(this.ctx.globalCompositeOperation=ll)}}])&&cl(e.prototype,n),i&&cl(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(ul.prototype,{bgImg:null,bgRect:null,origin:null,dest:null,arrow:!1,active:!1,linePainted:!1,arrowLength:10,arrowAngle:Math.PI/6,lineColor:"black",xorColor:"white",compositeOp:"difference",DEFAULT_COMPOSITE_OP:ll,relativePos:null,bx:null,ctx:null,dim:null,parent:null,lineWidth:1.5});var hl=ul;function fl(t){return fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(t)}function pl(){return pl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=dl(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},pl.apply(this,arguments)}function dl(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Al(t)););return t}function vl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yl(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gl(t,e,n){return e&&yl(t.prototype,e),n&&yl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ml(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bl(t,e)}function bl(t,e){return bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bl(t,e)}function wl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Al(t);if(e){var r=Al(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return kl(this,n)}}function kl(t,e){if(e&&("object"===fl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Al(t){return Al=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Al(t)}var xl=function(t){ml(n,t);var e=wl(n);function n(t){return vl(this,n),e.call(this,t)}return gl(n,[{key:"hasRandom",value:function(){return!0}},{key:"shuffleAlways",value:function(){return!0}},{key:"helpSolutionAllowed",value:function(){return!0}}]),n}(Hc);Object.assign(xl.prototype,{amongParagraphs:!1,bc:null});var Cl=function(t){ml(n,t);var e=wl(n);function n(t,i,r){return vl(this,n),e.call(this,t,i,r)}return gl(n,[{key:"buildVisualComponents",value:function(){this.act.document.style.target.css.cursor="pointer",pl(Al(n.prototype),"buildVisualComponents",this).call(this)}},{key:"setBounds",value:function(t){this.$canvas&&this.$canvas.remove(),pl(Al(n.prototype),"setBounds",this).call(this,t),this.act.dragCells||(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0,"pointer-events":"none"}),this.$div.append(this.$canvas),this.bc=new hl(this,this.$canvas.get(-1).getContext("2d")),this.bc.compositeOp=this.bc.DEFAULT_COMPOSITE_OP,this.invalidate().update())}},{key:"$createTargetElement",value:function(t,e){var i=this;pl(Al(n.prototype),"$createTargetElement",this).call(this,t,e);var r="target".concat("000".concat(this.targets.length-1).slice(-3));return e.addClass("JClicTextTarget").bind("click",(function(e){e.textTarget=t,e.idLabel=r,i.processEvent(e)})),e}},{key:"swapTargets",value:function(t,e){var n=t.$span,r=e.$span,o=i()("<span/>");o.insertAfter(r),r.detach(),r.insertAfter(n),n.detach(),n.insertAfter(o),o.remove();var s=t.pos,a=t.$p;t.pos=e.pos,t.$p=e.$p,e.pos=s,e.$p=a}},{key:"initActivity",value:function(){pl(Al(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents()}},{key:"startActivity",value:function(){var t=this;if(pl(Al(n.prototype),"startActivity",this).call(this),!this.showingPrevScreen){if("orderWords"!==this.act.type||this.act.amongParagraphs)this.shuffleTargets(this.targets,this.act.shuffles);else{var e=[],i=null,r=[];this.targets.forEach((function(t){null!==i&&i.$p!==t.$p&&(e.push(r),r=[]),r.push(t),i=t})),r.length>0&&e.push(r),e.forEach((function(e){return t.shuffleTargets(e,t.act.shuffles)}))}this.playing=!0}this.setBounds(this)}},{key:"shuffleTargets",value:function(t,e){var n=t.length;if(n>1)for(var i=100,r=0;r<e;r++){var o=Math.floor(Math.random()*n),s=Math.floor(Math.random()*n);o!==s?this.swapTargets(t[o],t[s]):--i&&r++}}},{key:"setCurrentTarget",value:function(t){var e=this.act.document.getFullStyle("target").css;this.currentTarget&&this.currentTarget.$span&&this.currentTarget.$span.css(e),t&&t.$span&&t.$span.css({color:e["background-color"],"background-color":e.color}),this.currentTarget=t}},{key:"countSolvedTargets",value:function(){return this.targets.filter((function(t){return t.num===t.pos})).length}},{key:"evaluatePanel",value:function(){var t=this;this.bc&&this.bc.active&&this.bc.end(),this.setCurrentTarget(null);var e=0;return this.targets.forEach((function(n){var i=n.num===n.pos;n.targetStatus=i?"SOLVED":"WITH_ERROR",i&&e++,n.checkColors(),t.ps.reportNewAction(t.act,"PLACE",n.text,n.pos,i,e)})),e===this.targets.length?(this.finishActivity(!0),!0):(this.playEvent("finishedError"),!1)}},{key:"finishActivity",value:function(t){return i()(".JClicTextTarget").css("cursor","pointer"),pl(Al(n.prototype),"finishActivity",this).call(this,t)}},{key:"processEvent",value:function(t){if(!pl(Al(n.prototype),"processEvent",this).call(this,t))return!1;var e=t.textTarget,i=null;if(this.bc&&this.playing&&!this.showingPrevScreen){if("touchend"===t.type)i=this.bc.active?this.bc.dest.clone():new De;else{var r=t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,o=t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY;i=new De(r-this.$div.offset().left,o-this.$div.offset().top)}switch(t.type){case"click":if(e&&e!==this.currentTarget)if(this.currentTarget){if(this.bc&&this.bc.active&&this.bc.end(),this.swapTargets(e,this.currentTarget),this.setCurrentTarget(null),!this.$checkButton){var s=this.countSolvedTargets(),a=e.pos===e.num;this.ps.reportNewAction(this.act,"PLACE",e.text,e.pos,a,s),a&&s===this.targets.length?this.finishActivity(!0):this.playEvent(a?"actionOk":"actionError")}}else this.setCurrentTarget(e),this.bc.begin(i),this.playEvent("click");break;case"mousemove":this.bc.moveTo(i)}return t.preventDefault(),!0}}}]),n}(Wc);Object.assign(Cl.prototype,{currentTarget:null,bc:null,events:["click","mousemove"]}),xl.Panel=Cl;var Sl=Ir.registerClass("@text.Order",xl);function Ol(t){return Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(t)}function El(){return El="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Pl(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},El.apply(this,arguments)}function Pl(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ml(t)););return t}function Tl(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _l(t,e,n){return e&&Tl(t.prototype,e),n&&Tl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rl(t,e)}function Rl(t,e){return Rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rl(t,e)}function Il(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ml(t);if(e){var r=Ml(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Dl(this,n)}}function Dl(t,e){if(e&&("object"===Ol(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ml(t){return Ml=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ml(t)}var Nl=function(t){Bl(n,t);var e=Il(n);function n(t){return jl(this,n),e.call(this,t)}return _l(n)}(Hc),Vl=function(t){Bl(n,t);var e=Il(n);function n(t,i,r){return jl(this,n),e.call(this,t,i,r)}return _l(n,[{key:"$createTargetElement",value:function(t,e){return null}},{key:"startActivity",value:function(){El(Ml(n.prototype),"startActivity",this).call(this),this.$div.find(".JClicTextDocument").attr("contenteditable","true").attr("spellcheck","false")}},{key:"evaluatePanel",value:function(){var t=this.$div.find(".JClicTextDocument").text().trim(),e=this.act.document.getRawText(),n=this.act.ev.checkText(t,e);return this.ps.reportNewAction(this.act,"WRITE",t,e,n,this.targets.length),n?(this.finishActivity(!0),!0):(this.playEvent("finishedError"),!1)}},{key:"finishActivity",value:function(t){return this.$div.find(".JClicTextDocument").attr("contenteditable","false"),El(Ml(n.prototype),"finishActivity",this).call(this,t)}}]),n}(Wc);Nl.Panel=Vl;var ql=Ir.registerClass("@text.Complete",Nl);function Ll(t){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(t)}function Fl(){return Fl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=zl(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Fl.apply(this,arguments)}function zl(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zl(t)););return t}function Ul(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $l(t,e,n){return e&&Ul(t.prototype,e),n&&Ul(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gl(t,e)}function Gl(t,e){return Gl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gl(t,e)}function Jl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Zl(t);if(e){var r=Zl(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Kl(this,n)}}function Kl(t,e){if(e&&("object"===Ll(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zl(t){return Zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zl(t)}var Yl=function(t){Wl(n,t);var e=Jl(n);function n(t){return Hl(this,n),e.call(this,t)}return $l(n)}(Hc),Ql=function(t){Wl(n,t);var e=Jl(n);function n(t,i,r){var o;return Hl(this,n),(o=e.call(this,t,i,r)).spanText=!0,o.spanChars="identifyChars"===t.type,o.spansChecked=new Set,o}return $l(n,[{key:"$createTargetElement",value:function(t,e){var i=this;Fl(Zl(n.prototype),"$createTargetElement",this).call(this,t,e);var r="target".concat("000".concat(this.targets.length-1).slice(-3));return e.bind("click",(function(e){e.textTarget=t,e.idLabel=r,i.processEvent(e)})),e}},{key:"$createSpanElement",value:function(t){var e=this;return t.bind("click",(function(n){n.$spanElement=t,e.processEvent(n)})),t}},{key:"initActivity",value:function(){var t=this;Fl(Zl(n.prototype),"initActivity",this).call(this,this),this.$div.find(".JClicTextDocument > p").css("cursor","pointer"),this.$div.find(".JClicTextDocument > span").css("cursor","pointer"),this.spansChecked.forEach((function(e){return e.css(e.initialCSS||t.act.document.style.default.css)})),this.spansChecked.clear(),this.playing=!0}},{key:"countSolvedTargets",value:function(){return this.targets.filter((function(t){return"SOLVED"===t.targetStatus})).length}},{key:"evaluatePanel",value:function(){var t=this,e=0;return this.targets.forEach((function(n){var i="SOLVED"===n.targetStatus;i&&e++,n.checkColors(),t.ps.reportNewAction(t.act,"SELECT",n.text,n.pos,i,e)})),e===this.targets.length&&0===this.spansChecked.size?(this.finishActivity(!0),!0):(this.spansChecked.forEach((function(e){return e.css(t.act.document.style.targetError.css)})),this.playEvent("finishedError"),!1)}},{key:"finishActivity",value:function(t){return this.$div.find(".JClicTextDocument > p").css("cursor","pointer"),Fl(Zl(n.prototype),"finishActivity",this).call(this,t)}},{key:"processEvent",value:function(t){if(!Fl(Zl(n.prototype),"processEvent",this).call(this,t)||t.timeStamp===this.lastTimeStamp)return!1;t.timeStamp&&(this.lastTimeStamp=t.timeStamp);var e=t.textTarget,i=t.$spanElement;if("click"===t.type){var r,o,s=!1;if(e?("SOLVED"===e.targetStatus?e.targetStatus="HIDDEN":(e.targetStatus="SOLVED",s=!0),r=e.text,o=e.pos,e.checkColors()):(i?(i.checked=!i.checked,i.checked?(this.spansChecked.add(i),i.css(this.act.document.style.target.css)):(this.spansChecked.delete(i),i.css(i.initialCSS||this.act.document.style.default.css)),r=i.text()):r="unknown",o=0),!this.$checkButton){var a=this.countSolvedTargets();this.ps.reportNewAction(this.act,"SELECT",r,o,s,a),s&&0===this.spansChecked.size&&a===this.targets.length?this.finishActivity(!0):this.playEvent(s?"actionOk":"actionError")}t.preventDefault()}return!0}}]),n}(Wc);Object.assign(Ql.prototype,{targetsMarked:!1,lastTimeStamp:0,spansChecked:new Set}),Yl.Panel=Ql;var Xl=Ir.registerClass("@text.Identify",Yl);function tu(t){return tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(t)}function eu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nu(){return nu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=iu(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},nu.apply(this,arguments)}function iu(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=au(t)););return t}function ru(t,e){return ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ru(t,e)}function ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=au(t);if(e){var r=au(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return su(this,n)}}function su(t,e){if(e&&("object"===tu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function au(t){return au=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},au(t)}var cu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ru(t,e)}(o,t);var e,n,i,r=ou(o);function o(t,e,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(i=r.call(this,t,e,n)).preferredBounds=new Fe,i.cells=[],i}return e=o,n=[{key:"getPreferredSize",value:function(){return this.preferredBounds.dim}},{key:"getMinimumSize",value:function(){var t=this.getPreferredSize();return new Me(Math.max(ye.MIN_CELL_SIZE,t.width),Math.max(ye.MIN_CELL_SIZE,t.height))}},{key:"getScaledSize",value:function(t){var e=this.getPreferredSize();return new Me(Math.round(t*e.width),Math.round(t*e.height))}},{key:"addBox",value:function(t){this.cells.push(t),t.setParent(this),1===this.cells.length?Fe.prototype.setBounds.call(this,t):this.add(t),this.preferredBounds.setBounds(this.getBounds())}},{key:"boxIndex",value:function(t){return null===t?-1:this.cells.indexOf(t)}},{key:"getBox",value:function(t){return t<0||t>=this.cells.length?null:this.cells[t]}},{key:"getBackgroundBox",value:function(){return this.backgroundBox}},{key:"setBackgroundBox",value:function(t){this.backgroundBox=t,null!==t&&(t.setParent(this),t.isBackground=!0),Fe.prototype.add.call(this,t),this.preferredBounds.setBounds(this.getBounds())}},{key:"recalcSize",value:function(){var t=this.backgroundBox?new Fe(this.backgroundBox.pos,this.backgroundBox.dim):null;this.cells.forEach((function(e){t?t.add(e):t=new Fe(e.pos,e.dim)})),t||(t=new Fe(this.pos.x,this.pos.y,0,0)),this.preferredBounds.setRect(t),this.x=t.pos.x,this.y=t.pos.y,this.dim.width=t.dim.width,this.dim.height=t.dim.height}},{key:"getNumCells",value:function(){return this.cells.length}},{key:"setCellAttr",value:function(t,e){this.cells.forEach((function(n){return n[t]=e})),this.backgroundBox&&(this.backgroundBox[t]=e)}},{key:"setBorder",value:function(t){this.cells.forEach((function(e){return e.setBorder(t)}))}},{key:"setVisible",value:function(t){this.cells.forEach((function(e){return e.setVisible(t)}))}},{key:"setAlternative",value:function(t){nu(au(o.prototype),"setAlternative",this).call(this,t),this.cells.forEach((function(e){return e.setAlternative(t)}))}},{key:"setBounds",value:function(t,e,n,i){var r=this;if("number"==typeof t&&(t=new Fe(t,e,n,i)),t.getSurface()>0&&!t.equals(this)){var s=t.dim.width/this.dim.width,a=t.dim.height/this.dim.height,c=t.pos.x-this.pos.x,l=t.pos.y-this.pos.y;if(this.cells.forEach((function(t){var e=new De(t.pos.x-r.pos.x,t.pos.y-r.pos.y);t.setBounds(c+r.pos.x+s*e.x,l+r.pos.y+a*e.y,s*t.dim.width,a*t.dim.height),t.pos0=null})),null!==this.backgroundBox){var u=this.backgroundBox,h=new De(u.pos.x-this.pos.x,u.pos.y-this.pos.y);u.setBounds(c+this.pos.x+s*h.x,l+this.pos.y+a*h.y,s*u.dim.width,a*u.dim.height)}}nu(au(o.prototype),"setBounds",this).call(this,t)}},{key:"update",value:function(t,e){return!(this.isEmpty()||!this.isVisible()||this.isTemporaryHidden()||e&&!this.intersects(e)||(null!==this.backgroundBox&&this.backgroundBox.update(t,e),this.cells.forEach((function(n){n.isMarked()||n.update(t,e)})),this.cells.forEach((function(n){n.isMarked()&&n.update(t,e)})),0))}},{key:"findBox",value:function(t){for(var e=null,n=this.cells.length-1;n>=0;n--){var i=this.getBox(n);if(i.isVisible()&&i.contains(t)){e=i;break}}return e}},{key:"countInactiveCells",value:function(){return this.cells.reduce((function(t,e){return e.isInactive()?++t:t}),0)}}],i=[{key:"layoutSingle",value:function(t,e,n){if(!e)return t;var i=e.getPreferredSize(),r=e.getMinimumSize(),o=t;o.width-=2*n,o.height-=2*n,(r.width>o.width||r.height>o.height)&&(o=r);var s=i.width>o.width?o.width/i.width:1;return s*i.height>o.height&&(s=o.height/i.height),i=e.getScaledSize(s),e.setBounds(n,n,i.width,i.height),i.width+=2*n,i.height+=2*n,i}},{key:"layoutDouble",value:function(t,e,n,i,r){var o=!1,s=1,a=1;switch(i){case"AB":case"BA":s=2,a=1,o=!0;break;case"AUB":case"BUA":s=1,a=2,o=!1}var c=e.getBounds(),l=n.getBounds(),u=e.getPreferredSize(),h=n.getPreferredSize(),f=new Me(o?u.width+h.width:Math.max(u.width,h.width),o?Math.max(u.height,h.height):u.height+h.height),p=e.getMinimumSize(),d=n.getMinimumSize(),v=new Me(o?p.width+d.width:Math.max(p.width,d.width),o?Math.max(p.height,d.height):p.height+d.height),y=t;y.width-=(1+s)*r,y.height-=(1+a)*r,(v.width>y.width||v.height>y.height)&&y.setDimension(v);var g=f.width>y.width?y.width/f.width:1;g*f.height>y.height&&(g=y.height/f.height),u=e.getScaledSize(g);var m=(h=n.getScaledSize(g)).width>u.width?(h.width-u.width)/2:0,b=u.width>h.width?(u.width-h.width)/2:0,w=h.height>u.height?(h.height-u.height)/2:0,k=u.height>h.height?(u.height-h.height)/2:0;switch(i){case"AB":e.setBounds(r,r+w,u.width,u.height),n.setBounds(2*r+u.width,r+k,h.width,h.height);break;case"BA":n.setBounds(r,r+k,h.width,h.height),e.setBounds(2*r+h.width,r+w,u.width,u.height);break;case"AUB":e.setBounds(r+m,r,u.width,u.height),n.setBounds(r+b,2*r+u.height,h.width,h.height);break;case"BUA":n.setBounds(r+b,r,h.width,h.height),e.setBounds(r+m,2*r+h.height,u.width,u.height);break;default:e.setBounds(Math.round(r+g*c.pos.x),Math.round(r+g*c.pos.y),u.width,u.height),n.setBounds(Math.round(r+g*l.pos.x),Math.round(r+g*l.pos.y),u.width,u.height)}var A=new Fe(e.getBounds());return A.add(n.getBounds()),f.width=A.dim.width+2*r,f.height=A.dim.height+2*r,f}}],n&&eu(e.prototype,n),i&&eu(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Io);Object.assign(cu.prototype,{cells:[],preferredBounds:new Fe,backgroundBox:null});var lu=cu;function uu(t){return uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(t)}function hu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fu(t,e){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fu(t,e)}function pu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=vu(t);if(e){var r=vu(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return du(this,n)}}function du(t,e){if(e&&("object"===uu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vu(t){return vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vu(t)}var yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fu(t,e)}(s,t);var e,n,r,o=pu(s);function s(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,t,e,n)}return e=s,n=[{key:"addActiveBox",value:function(t){return t.idLoc=this.cells.length,t.idOrder=t.idLoc,this.addBox(t)}},{key:"getActiveBox",value:function(t){return this.getBox(t)}},{key:"getBackgroundActiveBox",value:function(){return this.getBackgroundBox()}},{key:"setContent",value:function(t,e,n,i,r){n||(n=0),i||(i=0),r||(r=this.cells.length);for(var o=0;o<r;o++){var s=this.getActiveBox(i+o);s.setContent(t,n+o),s.setAlternative(!1),e&&s.setAltContent(e,n+o)}if(null!==t.backgroundContent&&null!==this.getBackgroundActiveBox()){var a=this.getBackgroundActiveBox();a.setContent(t.backgroundContent),t.style!==a.boxBase&&a.setBoxBase(t.style)}}},{key:"findActiveBox",value:function(t){return this.findBox(t)}},{key:"clearAllBoxes",value:function(){this.cells.forEach((function(t){return t.clear()}))}},{key:"clearAll",value:function(){this.clearAllBoxes(),null!==this.backgroundBox&&this.getBackgroundActiveBox().clear()}},{key:"countCellsAtPlace",value:function(){return this.cells.reduce((function(t,e){return e.isAtPlace()?++t:t}),0)}},{key:"getActiveBoxWithIdLoc",value:function(t){return this.cells.find((function(e){return e.idLoc===t}))||null}},{key:"cellIsAtEquivalentPlace",value:function(t,e){return t.isAtPlace()||t.isEquivalent(this.getActiveBoxWithIdLoc(t.idOrder),e)}},{key:"countCellsAtEquivalentPlace",value:function(t){var e=this;return this.cells.reduce((function(n,i){return e.cellIsAtEquivalentPlace(i,t)?++n:n}),0)}},{key:"countCellsWithIdAss",value:function(t){return this.cells.reduce((function(e,n){return n.idAss===t?++e:e}),0)}},{key:"setDefaultIdAss",value:function(){this.cells.map((function(t){return t.setDefaultIdAss()}))}},{key:"shuffleCells",value:function(t,e){var n=this.cells.length;if(n>=2){for(var i=[],r=[],o=new De,s=0;s<n;s++){var a=this.getActiveBox(s);i[s]=new De(a.pos),r[s]=a.idLoc}for(var c=0;c<t;c++){var l=Math.floor(Math.random()*n),u=Math.floor(Math.random()*n);if(l!==u){o.moveTo(i[l]),i[l].moveTo(i[u]),i[u].moveTo(o);var h=r[l];r[l]=r[u],r[u]=h}}for(var f=0;f<n;f++){var p=this.getActiveBox(f),d=i[f].x,v=i[f].y;p.moveTo(new De(d,v)),e&&this.fitCellsInArea([p]),p.idLoc=r[f]}}}},{key:"fitCellsInArea",value:function(t){var e=this,n=this.pos.x+this.dim.width,i=this.pos.y+this.dim.height;t.forEach((function(t){t.pos0||(t.pos0=new De(t.pos));var r=Math.min(Math.max(t.pos.x,e.pos.x),n-t.dim.width),o=Math.min(Math.max(t.pos.y,e.pos.y),i-t.dim.height);r===t.pos.x&&o===t.pos.y||t.moveTo(new De(r,o))}))}},{key:"swapCellPositions",value:function(t,e,n){var i=new De(e.pos),r=e.pos0,o=e.idLoc;e.moveTo(t.pos0||t.pos),e.pos0=t.pos0,e.idLoc=t.idLoc,t.moveTo(r||i),t.pos0=r,t.idLoc=o,n&&this.fitCellsInArea([t,e])}},{key:"resetIds",value:function(){this.cells.forEach((function(t,e){t&&(t.idOrder=e,t.idAss=e,t.idLoc=e)}))}},{key:"getNextItem",value:function(t,e){var n=-12345;e||(e=n);for(var i=t+1;i<this.cells.length;i++){var r=this.cells[i];if(!r)break;if(e!==n){if(e===r.idAss)break}else if(r.idAss>=0)break}return i}},{key:"buildAccessibleElements",value:function(t,e,n){var r=this;return this.$accessibleDiv=""!==this.accessibleText?i()("<div/>",{"aria-label":this.accessibleText,tabindex:0}):null,t.append(this.$accessibleDiv),this.cells.map((function(t){return t})).sort((function(t,e){return t.idLoc>e.idLoc?1:-1})).forEach((function(i){return i.buildAccessibleElement(t,e,r.$accessibleDiv,n)})),this.$accessibleDiv}}],n&&hu(e.prototype,n),r&&hu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(lu);function gu(t){return gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(t)}function mu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bu(t,e){return bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bu(t,e)}function wu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=xu(t);if(e){var r=xu(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ku(this,n)}}function ku(t,e){if(e&&("object"===gu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Au(t)}function Au(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xu(t){return xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xu(t)}Object.assign(yu.prototype,{$accessibleDiv:null});var Cu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bu(t,e)}(o,t);var e,n,i,r=wu(o);function o(t,e,n,i,s,a,c,l){var u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(u=r.call(this,t,e,n)).nCols=l.nCols,u.nRows=l.nRows;for(var h=new Fe(new De(i,s),new Me(Math.round(a/u.nCols)*u.nCols,Math.round(c/u.nRows)*u.nRows)),f=0;f<l.nCells;f++){var p=l.getShape(f,h),d=new $o(Au(u),e,n,f,p.getBounds());l.rectangularShapes||d.setShape(p),u.addActiveBox(d)}if(l.hasRemainder){var v=l.getRemainderShape(h),y=new $o(Au(u),e,n,0,v.getBounds());y.setShape(v),u.setBackgroundBox(y)}return u}return e=o,i=[{key:"createEmptyGrid",value:function(t,e,n,i,r,s,a){var c=r?new o(t,e,a||r.style,n,i,r.getTotalWidth(),r.getTotalHeight(),s||r.getShaper()):null;return c&&c.setBorder(r.border),c}}],(n=[{key:"getMinimumSize",value:function(){return new Me(ye.MIN_CELL_SIZE*this.nCols,ye.MIN_CELL_SIZE*this.nRows)}},{key:"getScaledSize",value:function(t){return new Me(Gt(t*this.preferredBounds.dim.width,this.nCols),Gt(t*this.preferredBounds.dim.height,this.nRows))}},{key:"getCoord",value:function(t){return new De(t.idLoc%this.nCols,Math.floor(t.idLoc/this.nCols))}},{key:"getCoordDist",value:function(t,e){var n=this.getCoord(t),i=this.getCoord(e);return new De(i.x-n.x,i.y-n.y)}}])&&mu(e.prototype,n),i&&mu(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(yu);Object.assign(Cu.prototype,{nCols:1,nRows:1});var Su=Cu;function Ou(t){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(t)}function Eu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tu(t,e,n){return e&&Pu(t.prototype,e),n&&Pu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _u(){return _u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=ju(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},_u.apply(this,arguments)}function ju(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mu(t)););return t}function Bu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ru(t,e)}function Ru(t,e){return Ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ru(t,e)}function Iu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Mu(t);if(e){var r=Mu(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Du(this,n)}}function Du(t,e){if(e&&("object"===Ou(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mu(t){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mu(t)}var Nu=function(t){Bu(n,t);var e=Iu(n);function n(t){return Eu(this,n),e.call(this,t)}return Tu(n,[{key:"setProperties",value:function(t){_u(Mu(n.prototype),"setProperties",this).call(this,t),this.abc.primary.avoidAllIdsNull(this.abc.answers.getNumCells())}},{key:"getMinNumActions",value:function(){return this.invAss?this.abc.answers.getNumCells():this.abc.primary.getNumCells()-this.nonAssignedCells}},{key:"hasRandom",value:function(){return!0}},{key:"needsKeyboard",value:function(){return!0}},{key:"helpSolutionAllowed",value:function(){return!0}}]),n}(Br);Object.assign(Nu.prototype,{nonAssignedCells:0,useIdAss:!0});var Vu=function(t){Bu(n,t);var e=Iu(n);function n(t,i,r){return Eu(this,n),e.call(this,t,i,r)}return Tu(n,[{key:"clear",value:function(){this.bgA&&(this.bgA.end(),this.bgA=null),this.bgB&&(this.bgB.end(),this.bgB=null)}},{key:"buildVisualComponents",value:function(){var t=this;this.firstRun&&_u(Mu(n.prototype),"buildVisualComponents",this).call(this),this.clear();var e=this.act.abc.primary,r=this.act.abc.answers,o=this.act.abc.solvedPrimary;if(e&&r){if(this.act.invAss&&(this.invAssCheck=Array(r.getNumCells()).fill(!1)),e.image&&(e.setImgContent(this.act.project.mediaBag,null,!1),!e.animatedGifFile||e.shaper.rectangularShapes||this.act.shuffleA||(this.$animatedBg=i()("<span/>").css({"background-image":"url("+e.animatedGifFile+")","background-position":"center","background-repeat":"no-repeat",position:"absolute"}).appendTo(this.$div))),o&&o.image&&o.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp){var s=[e,r];o&&s.push(o),this.act.acp.generateContent(e.nch,e.ncw,s,!1)}this.bgA=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,e);var a=r.w;"AUB"!==this.act.boxGridPos&&"BUA"!==this.act.boxGridPos||(a=e.getTotalWidth()),this.bgB=new Su(null,this,r.style,this.act.margin,this.act.margin,a,r.h,new Da(1,1)),this.$form=i()("<form/>",{id:"form1"}),this.$form[0].addEventListener("submit",(function(e){return e.preventDefault(),t.playing&&t.setCurrentCell(t.currentCell),!1})),this.$textField=i()("<input/>",{type:"text",size:200}).css(r.style.getCSS()).css({position:"absolute",top:0,left:0,border:0,padding:0,margin:0,"text-align":"center"}).attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.$div.append(this.$form.append(this.$textField)),this.bgA.setContent(e,o||null),this.bgA.setDefaultIdAss(),this.$animatedBg&&this.bgA.setCellAttr("tmpTrans",!0),this.act.nonAssignedCells=0;for(var c=0;c<this.bgA.getNumCells();c++){var l=this.bgA.getActiveBox(c);-1===l.idAss&&(this.act.nonAssignedCells++,l.switchToAlt(this.ps))}this.bgA.setVisible(!0),this.bgB.setVisible(!1)}}},{key:"initActivity",value:function(){_u(Mu(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bgA&&this.bgB&&(this.act.shuffleA&&this.shuffle([this.bgA],!0,!0),this.useOrder&&(this.currentItem=this.bgA.getNextItem(-1)),this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.playing=!0)}},{key:"activityReady",value:function(){_u(Mu(n.prototype),"activityReady",this).call(this),this.setCurrentCell(0)}},{key:"updateContent",value:function(t){if(_u(Mu(n.prototype),"updateContent",this).call(this,t),this.bgA&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bgA.update(i,t)}return this}},{key:"setDimension",value:function(t){return this.bgA&&this.bgB&&!this.getBounds().equals(t)?lu.layoutDouble(t,this.bgA,this.bgB,this.act.boxGridPos,this.act.margin):t}},{key:"setBounds",value:function(t){if(this.$canvas&&this.$canvas.remove(),_u(Mu(n.prototype),"setBounds",this).call(this,t),this.bgA||this.bgB){var e=t.clone();if("AUB"===this.act.boxGridPos?e.height-=this.bgB.pos.y+this.act.margin/2:"AB"===this.act.boxGridPos&&(e.width-=this.bgB.pos.x+this.act.margin/2),this.$canvas=i()('<canvas width="'+e.dim.width+'" height="'+e.dim.height+'"/>').css({position:"absolute",top:0,left:0}),this.bgA&&this.$animatedBg){var r=this.bgA.getBounds();this.$animatedBg.css({left:r.pos.x,top:r.pos.y,width:r.dim.width+"px",height:r.dim.height+"px","background-size":r.dim.width+"px "+r.dim.height+"px"}),this.$canvas.insertAfter(this.$animatedBg)}else this.$div.prepend(this.$canvas);this.$textField&&this.$textField.css({top:this.bgB.pos.y,left:this.bgB.pos.x,width:this.bgB.dim.width,height:this.bgB.dim.height,zIndex:9}),this.invalidate().update()}}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&(_u(Mu(n.prototype),"buildAccessibleComponents",this).call(this),this.bgA&&this.bgA.buildAccessibleElements(this.$canvas,this.$div,"click"))}},{key:"checkInvAss",value:function(){return this.act.invAss&&this.invAssCheck&&this.invAssCheck.every((function(t){return t}))}},{key:"setCurrentCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.playing){var n=null,i=!1;if(-1!==this.currentCell){var r=!1;if(n=this.bgA?this.bgA.getActiveBoxWithIdLoc(this.currentCell):null){n.setMarked(!1);var o=n.getDescription(),s=n.idAss,a=s>=0?this.act.abc.answers.getActiveBoxContent(s).text:"",c=this.$textField.val().trim();if(Kt(c,a,!1,this.act.numericContent)){r=!0,n.idAss=-1;var l=a.indexOf("|");l>=0&&this.$textField.val(a.substring(0,l)),this.act.abc.solvedPrimary?(n.switchToAlt(this.ps),i=n.playMedia(this.ps,e)):n.clear(),this.act.invAss&&s>=0&&s<this.invAssCheck.length&&(this.invAssCheck[s]=!0),this.act.useOrder&&(this.currentItem=this.bgA.getNextItem(this.currentItem))}var u=this.bgA.countCellsWithIdAss(-1);if(c.length>0&&this.ps.reportNewAction(this.act,"WRITE",o,c,r,u),r&&(this.checkInvAss()||u===this.bgA.getNumCells()))return this.finishActivity(!0),this.$textField.prop("disabled",!0),void this.invalidate().update();!i&&c.length>0&&this.playEvent(r?"actionOk":"actionError")}}if(n=this.bgA?this.act.useOrder?this.bgA.getBox(this.currentItem):this.bgA.getActiveBoxWithIdLoc(t):null,this.bgA&&(!n||-1===n.idAss)){for(var h=0;h<this.bgA.getNumCells()&&-1===(n=this.bgA.getActiveBoxWithIdLoc(h)).idAss;h++);if(n&&-1===n.idAss)return this.finishActivity(!1),this.$textField.prop("disabled",!0),void this.invalidate().update()}n&&this.bgA&&this.bgA.getNumCells()>1&&n.setMarked(!0),n&&(this.currentCell=n.idLoc),this.$textField.val(""),this.$textField.focus(),this.invalidate().update(),n&&n.playMedia(this.ps,e)}}},{key:"processEvent",value:function(t){if(this.playing){var e=[];switch(t.type){case"click":t.preventDefault(),this.ps.stopMedia(1);var n=new De(t.pageX-this.$div.offset().left,t.pageY-this.$div.offset().top);if(this.bgB.contains(n)){this.$textField.focus();break}var i=this.bgA?this.bgA.findActiveBox(n):null;i&&!i.isInactive()&&(i.getContent()&&null===i.getContent().mediaContent&&this.playEvent("CLICK"),this.setCurrentCell(i.idLoc,e));break;case"change":t.preventDefault(),this.setCurrentCell(this.currentCell,e)}return e.forEach((function(t){return t()})),!1}}}]),n}(Rr);Object.assign(Vu.prototype,{$textField:null,invAssCheck:null,bgA:null,bgB:null,currentCell:-1,events:["click","change"]}),Nu.Panel=Vu;var qu=Br.registerClass("@text.WrittenAnswer",Nu);function Lu(t){return Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(t)}function Fu(){return Fu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=zu(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Fu.apply(this,arguments)}function zu(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zu(t)););return t}function Uu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $u(t,e,n){return e&&Uu(t.prototype,e),n&&Uu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gu(t,e)}function Gu(t,e){return Gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gu(t,e)}function Ju(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Zu(t);if(e){var r=Zu(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ku(this,n)}}function Ku(t,e){if(e&&("object"===Lu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zu(t){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zu(t)}var Yu=function(t){Wu(n,t);var e=Ju(n);function n(t){var i;return Hu(this,n),(i=e.call(this,t)).includeInReports=!1,i.reportActions=!1,i}return $u(n)}(Br),Qu=function(t){Wu(n,t);var e=Ju(n);function n(t,i,r){return Hu(this,n),e.call(this,t,i,r)}return $u(n,[{key:"clear",value:function(){this.bg&&(this.bg.end(),this.bg=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&Fu(Zu(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary;t&&(t.image&&(t.setImgContent(this.act.project.mediaBag,null,!1),t.animatedGifFile&&!t.shaper.rectangularShapes&&(this.$animatedBg=i()("<span/>").css({"background-image":"url(".concat(t.animatedGifFile,")"),"background-position":"center","background-repeat":"no-repeat",position:"absolute"}).appendTo(this.$div))),null!==this.act.acp&&this.act.acp.generateContent(t.nch,t.ncw,[t],!1),this.bg=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t),this.bg.setContent(t),this.$animatedBg&&this.bg.setCellAttr("tmpTrans",!0),this.bg.setVisible(!0))}},{key:"initActivity",value:function(){Fu(Zu(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.invalidate().update(),this.setAndPlayMsg("initial","start"),this.playing=!0}},{key:"updateContent",value:function(t){if(Fu(Zu(n.prototype),"updateContent",this).call(this,t),this.bg&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bg.update(i,t)}return this}},{key:"setDimension",value:function(t){return this.getBounds().equals(t)?t:lu.layoutSingle(t,this.bg,this.act.margin)}},{key:"setBounds",value:function(t){var e=this;if(this.$canvas&&this.$canvas.remove(),Fu(Zu(n.prototype),"setBounds",this).call(this,t),this.bg){if(this.$canvas=i()('<canvas width="'+t.dim.width+'" height="'+t.dim.height+'"/>').css({position:"absolute",top:0,left:0}),this.$animatedBg){var r=this.bg.getBounds();this.$animatedBg.css({left:r.pos.x,top:r.pos.y,width:"".concat(r.dim.width,"px"),height:"".concat(r.dim.height,"px"),"background-size":"".concat(r.dim.width,"px ").concat(r.dim.height,"px")})}this.$div.append(this.$canvas),this.invalidate().update(),window.setTimeout((function(){return e.bg?e.bg.buildAccessibleElements(e.$canvas,e.$div):null}),0)}}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&this.bg&&(Fu(Zu(n.prototype),"buildAccessibleComponents",this).call(this),this.bg.buildAccessibleElements(this.$canvas,this.$div))}},{key:"processEvent",value:function(t){if(this.playing){var e=new De(t.pageX-this.$div.offset().left,t.pageY-this.$div.offset().top),n=[];this.ps.stopMedia(1);var i=this.bg.findActiveBox(e);i&&(i.playMedia(this.ps,n)||this.playEvent("click")),n.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(Qu.prototype,{bg:null,events:["click"]}),Yu.Panel=Qu;var Xu=Br.registerClass("@panels.InformationScreen",Yu);function th(t){return th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(t)}function eh(){return eh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=nh(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},eh.apply(this,arguments)}function nh(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uh(t)););return t}function ih(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rh(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function oh(t,e,n){return e&&rh(t.prototype,e),n&&rh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ah(t,e)}function ah(t,e){return ah=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ah(t,e)}function ch(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=uh(t);if(e){var r=uh(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return lh(this,n)}}function lh(t,e){if(e&&("object"===th(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function uh(t){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uh(t)}var hh=function(t){sh(n,t);var e=ch(n);function n(t){return ih(this,n),e.call(this,t)}return oh(n,[{key:"getMinNumActions",value:function(){return this.cellsToMatch}},{key:"hasRandom",value:function(){return!0}}]),n}(Br);Object.assign(hh.prototype,{nonAssignedCells:0,cellsToMatch:1});var fh=function(t){sh(n,t);var e=ch(n);function n(t,i,r){return ih(this,n),e.call(this,t,i,r)}return oh(n,[{key:"clear",value:function(){this.bg&&(this.bg.end(),this.bg=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&eh(uh(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary,e=this.act.abc.solvedPrimary;if(t){if(t.image&&(t.setImgContent(this.act.project.mediaBag,null,!1),!t.animatedGifFile||t.shaper.rectangularShapes||this.act.shuffleA||(this.$animatedBg=i()("<span/>").css({"background-image":"url(".concat(t.animatedGifFile,")"),"background-position":"center","background-repeat":"no-repeat",position:"absolute"}).appendTo(this.$div))),e&&e.image&&e.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp){var r=[t];e&&(r.push(null),r.push(e)),this.act.acp.generateContent(t.nch,t.ncw,r,!1)}this.bg=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t),this.bg.setContent(t,e||null),this.bg.setAlternative(!1),this.$animatedBg&&this.bg.setCellAttr("tmpTrans",!0),this.bg.setDefaultIdAss(),this.act.nonAssignedCells=0,this.act.cellsToMatch=0;for(var o=this.bg.getNumCells(),s=0;s<o;s++){var a=this.bg.getActiveBox(s),c=a.idAss;1===c?this.act.cellsToMatch++:-1===c&&(this.act.nonAssignedCells++,a.switchToAlt(this.ps))}this.bg.setVisible(!0)}}},{key:"initActivity",value:function(){eh(uh(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bg&&(this.act.shuffleA&&this.shuffle([this.bg],!0,!0),this.useOrder&&(this.currentItem=this.bg.getNextItem(-1)),this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.playing=!0)}},{key:"updateContent",value:function(t){if(eh(uh(n.prototype),"updateContent",this).call(this,t),this.bg&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bg.update(i,t)}return eh(uh(n.prototype),"updateContent",this).call(this,t)}},{key:"setDimension",value:function(t){return this.getBounds().equals(t)?t:lu.layoutSingle(t,this.bg,this.act.margin)}},{key:"setBounds",value:function(t){var e=this;if(this.$canvas&&this.$canvas.remove(),eh(uh(n.prototype),"setBounds",this).call(this,t),this.bg){if(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$animatedBg){var r=this.bg.getBounds();this.$animatedBg.css({left:r.pos.x,top:r.pos.y,width:"".concat(r.dim.width,"px"),height:"".concat(r.dim.height,"px"),"background-size":"".concat(r.dim.width,"px ").concat(r.dim.height,"px")})}this.$div.append(this.$canvas),this.invalidate().update(),window.setTimeout((function(){return e.bg?e.bg.buildAccessibleElements(e.$canvas,e.$div):null}),0)}}},{key:"buildAccessibleComponents",value:function(){this.bg&&this.$canvas&&this.accessibleCanvas&&(eh(uh(n.prototype),"buildAccessibleComponents",this).call(this),this.bg.buildAccessibleElements(this.$canvas,this.$div))}},{key:"processEvent",value:function(t){if(this.playing){var e=new De(t.pageX-this.$div.offset().left,t.pageY-this.$div.offset().top),n=!1,i=[];if("click"===t.type){this.ps.stopMedia(1);var r=this.bg?this.bg.findActiveBox(e):null;if(r)if(-1!==r.idAss){var o=!1,s=r.getDescription();n=n||r.playMedia(this.ps,i),1!==r.idAss||this.act.useOrder&&r.idOrder!==this.currentItem||(o=!0,r.idAss=-1,r.switchToAlt(this.ps)?n=n||r.playMedia(this.ps,i):r.clear(),this.act.useOrder&&(this.currentItem=this.bg.getNextItem(this.currentItem,1)));var a=this.bg.countCellsWithIdAss(-1);this.ps.reportNewAction(this.act,"SELECT",s,null,o,a-this.act.nonAssignedCells),o&&a===this.act.cellsToMatch+this.act.nonAssignedCells?this.finishActivity(!0):n||this.playEvent(o?"actionOk":"actionError"),this.update()}else this.playEvent("actionError")}i.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(fh.prototype,{bg:null,events:["click"]}),hh.Panel=fh;var ph=Br.registerClass("@panels.Identify",hh);function dh(t){return dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dh(t)}function vh(){return vh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=yh(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},vh.apply(this,arguments)}function yh(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ch(t)););return t}function gh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mh(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bh(t,e,n){return e&&mh(t.prototype,e),n&&mh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kh(t,e)}function kh(t,e){return kh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kh(t,e)}function Ah(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ch(t);if(e){var r=Ch(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return xh(this,n)}}function xh(t,e){if(e&&("object"===dh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ch(t){return Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ch(t)}var Sh=function(t){wh(n,t);var e=Ah(n);function n(t){return gh(this,n),e.call(this,t)}return bh(n,[{key:"mustPauseSequence",value:function(){return!0}},{key:"getMinNumActions",value:function(){return 0}},{key:"hasRandom",value:function(){return!0}}]),n}(Br),Oh=function(t){wh(n,t);var e=Ah(n);function n(t,i,r){return gh(this,n),e.call(this,t,i,r)}return bh(n,[{key:"clear",value:function(){this.bgA&&(this.bgA.end(),this.bgA=null),this.bgB&&(this.bgB.end(),this.bgB=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&vh(Ch(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary,e=this.act.abc.secondary;if(t&&e){t.image&&(t.setImgContent(this.act.project.mediaBag,null,!1),!t.animatedGifFile||t.shaper.rectangularShapes||this.act.shuffleA||(this.$animatedBg=i()("<span/>").css({"background-image":"url(".concat(t.animatedGifFile,")"),"background-position":"center","background-repeat":"no-repeat",position:"absolute"}).appendTo(this.$div))),e.image&&e.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp&&this.act.acp.generateContent(t.nch,t.ncw,[t,e],!1),this.bgA=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t);var r="AUB"===this.act.boxGridPos||"BUA"===this.act.boxGridPos?t.getTotalWidth():e.w;this.bgB=new Su(null,this,e.style,this.act.margin,this.act.margin,r,e.h,new Da(1,1)),this.bgA.setContent(t),this.bgA.setDefaultIdAss(),this.$animatedBg&&this.bgA.setCellAttr("tmpTrans",!0),this.bgB.getActiveBox(0).setInactive(!1),this.bgA.setVisible(!0),this.bgB.setVisible(!0)}}},{key:"initActivity",value:function(){vh(Ch(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bgA&&this.bgB&&(this.act.shuffleA&&this.shuffle([this.bgA],!0,!0),this.useOrder&&(this.currentItem=this.bgA.getNextItem(-1)),this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.playing=!0)}},{key:"updateContent",value:function(t){if(vh(Ch(n.prototype),"updateContent",this).call(this,t),this.bgA&&this.bgB&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bgA.update(i,t),this.bgB.update(i,t)}return this}},{key:"setDimension",value:function(t){return this.bgA&&this.bgB&&!this.getBounds().equals(t)?lu.layoutDouble(t,this.bgA,this.bgB,this.act.boxGridPos,this.act.margin):t}},{key:"setBounds",value:function(t){if(this.$canvas&&this.$canvas.remove(),vh(Ch(n.prototype),"setBounds",this).call(this,t),this.bgA||this.bgB){if(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$animatedBg){var e=this.bgA.getBounds();this.$animatedBg.css({left:e.pos.x,top:e.pos.y,width:"".concat(e.dim.width,"px"),height:"".concat(e.dim.height,"px"),"background-size":"".concat(e.dim.width,"px ").concat(e.dim.height,"px")})}this.$div.append(this.$canvas),this.invalidate().update()}}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&(vh(Ch(n.prototype),"buildAccessibleComponents",this).call(this),this.bgA&&this.bgA.buildAccessibleElements(this.$canvas,this.$div),this.bgB&&this.bgB.buildAccessibleElements(this.$canvas,this.$div))}},{key:"processEvent",value:function(t){if(this.playing){var e=new De(t.pageX-this.$div.offset().left,t.pageY-this.$div.offset().top),n=[];if("click"===t.type){this.ps.stopMedia(1);var i=this.bgA.findActiveBox(e);if(i){var r=this.bgB.getActiveBox(0);if(-1===i.idAss||this.act.useOrder&&i.idOrder!==this.currentItem)r.clear(),r.setInactive(!1);else if(r.setContent(this.act.abc.secondary,i.idAss),r.playMedia(this.ps,n)||i.playMedia(this.ps,n)||this.playEvent("CLICK"),this.act.useOrder&&(this.currentItem=this.bgA.getNextItem(this.currentItem)),this.ps.reportNewAction(this.act,"SELECT",i.getDescription(),r.getDescription(),!0,0),0===i.idAss&&1===this.bgA.getNumCells()){var o=this.act.project.activitySequence,s=o.getCurrentAct();s&&o.hasNextAct(!0)&&s.delay>0&&"both"!==o.getNavButtonsFlag()&&"fwd"!==o.getNavButtonsFlag()&&this.finishActivity(!0)}this.update()}}n.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(Oh.prototype,{bgA:null,bgB:null,events:["click"]}),Sh.Panel=Oh;var Eh=Br.registerClass("@panels.Explore",Sh);function Ph(t){return Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(t)}function Th(){return Th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=_h(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Th.apply(this,arguments)}function _h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vh(t)););return t}function jh(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bh(t,e,n){return e&&jh(t.prototype,e),n&&jh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ih(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dh(t,e)}function Dh(t,e){return Dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dh(t,e)}function Mh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Vh(t);if(e){var r=Vh(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Nh(this,n)}}function Nh(t,e){if(e&&("object"===Ph(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Vh(t){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vh(t)}var qh=function(t){Ih(n,t);var e=Mh(n);function n(t){var i;return Rh(this,n),(i=e.call(this,t)).menuElements=[],i.includeInReports=!1,i.reportActions=!1,i}return Bh(n)}(Br),Lh=function(t){Ih(n,t);var e=Mh(n);function n(t,i,r){var o;return Rh(this,n),o=e.call(this,t,i,r),i.lastProjectSkin=null,o}return Bh(n,[{key:"buildVisualComponents",value:function(){var t=this;this.firstRun&&Th(Vh(n.prototype),"buildVisualComponents",this).call(this);var e=i()("<div/>").css(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({width:"100%","max-height":"100%",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"flex","flex-wrap":"wrap","overflow-y":"auto","place-content":"center"},"overflow-y","auto"));this.act.menuElements.forEach((function(r){var o=r.description||r.caption||"JClic",s=i()("<button/>",{class:"StockBtn",title:o,"aria-label":o}).css({"min-width":"80px","max-width":"200px","min-height":"80px",margin:"4px",padding:"4px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}),a=n.icons[r.icon||"@ico00.png"],c=i()("<img/>",{src:a||""}).css({"max-width":"180px","max-height":"100px",margin:"4px"});a||t.act.project.mediaBag.getElement(r.icon,!0).getFullPathPromise().then((function(t){return c.attr("src",t)}));s.append(c),s.append(i()("<span/>").css({"max-width":"180px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}).html(r.caption)),s[0].addEventListener("click",(function(e){var n=new Sn(r.projectPath?"RUN_CLIC_PACKAGE":"RUN_CLIC_ACTIVITY",r.sequence);r.projectPath&&(n.externalParam=r.projectPath),gt("info","Launching ".concat(r.projectPath||""," ").concat(r.sequence||"")),t.ps.playMedia(n),e.preventDefault()})),e.append(s)})),this.$div.empty().append(e)}},{key:"setDimension",value:function(t){return t}},{key:"initActivity",value:function(){Th(Vh(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.setAndPlayMsg("initial","start"),this.playing=!0}}]),n}(Rr);Lh.icons={"@ico00.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAB1UExURUxpcZVZAGyAAGyAAJVZAJVZAJVZAIhmAJVZAJVZAJVZAIhmAGyAAGyAAGyAAGyAAGyAAJVZAJVZAGyAAJVZANj+AP+ZAMFzAPWSALVsANyEAM57AJ66AOiLALXVAM3xAK1nAI6oAIabAJWwAMTnAKFgAGyAAIlz9xYAAAAVdFJOUwB9oCIiZpkRRKq7M4BVu9VmVd1EzJvdA7gAAAE0SURBVDjLjZPZkoMgEEVFFsHdZBQR3M38/ycOKQ1gJKnpV051nwtNEPyrsjBNom9AqNSapxn8CBRjXY+DmjXkbQSXeq9tWJe7ByhVberXqzCY8yGM6GVK9FQ4SpVUxAwnJ+A+2wkLBLLppYgJRgZIrcJYBKxvdLUdFzE4mHBzFNDUvKoVdFfI7YQ1q7gD7LowXNRwaM4R6AzQEXNRWZrPT2jLA9YaQOIXQHV0WIbFvKZImPNGmLCMCwY0lJQQS6vAzEXFjY7Of5iORXwKySHe8+kWWwVeGQUnmW3QTMgDONUbhQ+ABAZwozkTqH1Ox8za3Jz3drLZDMABquuM9nFaKXZpwfFpp+j0ZiHJ21pifiIkQ++Lix+9nc+Z5/tQwrt2fxEBvN8vooQJLgTDX74xSi6z/wAoQC7hWsslMgAAAABJRU5ErkJggg==","@ico01.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAByUExURUxpcfzZt/rfw/pycvrcv/3UrJqf/QAAAP/hxPvOov9sbPqFhYmN/f7nz3V4+/3ky/+AgPrIl11g/P/Klf+Kiv9XV//q1vtHR/rCim1w//pcXISI//tfX5WY/VNT///Dh/86OvwhISUl/js7+klM+vq6e8H/VfEAAAABdFJOUwBA5thmAAABGElEQVQ4y62T23aCMBBFiU48iQlELoJW7b3//4udBIi0MqsvDU+w95yEGSiK/15YrlVhd1+C8Nk05+ribzcvCJlXklBV3u/8pToLAnMk3kiCh0Hkz4LA/NSC+YcgANTWYP4OqVGmtmAuC2St2Mn4EMbq9TaPvABpDborD+OB0QqG8hbo3HTNAikFCtEZBTcMx+t+ewC2U4IyMAFUTgVd5nukHYlrqYcxSBlw15k/gTlXx/ySPT5NLOkyP7IQq0PoOd/wSZLgmLtD5AMLsS70ZbnZEL+LTQmZv6aEQIkrpTUlwWX+FhNCyNzaOiVkHgXODyHzFr87ye/3g+NxGrTgJ6zNa8nXJ04zf4Ew88ylr8KM/At//sB88w0/sBcK3bRRzgAAAABJRU5ErkJggg==","@ico02.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAtUExURUxpcQAAAP///8zMzJmZmfrdwP/hxPvOov3UrP3JlvzZt/zlzf/p0/zBh/rDjUN28cYAAAABdFJOUwBA5thmAAAAyklEQVQ4y6WT6w6DIAxG/YS2XHTv/7grLshF0C1r+KE5n6fFpMvybQHt6bldbXfQcazNsTD4MdCV+S+AQcBUBYa5M4BfHrcB8oNA08HLg0EeAiwOuGtBzoE0Mje4AO4S7QwhgDhlZrcISiNoqxzFoGbSb5Uyozhs4ckdD4M+OfQtUmeKcUsGnaQEyoSp/6YJIr2LXAPqp4OH4BzJtUXyZy7iBwbl8eSDALUc/Z/Sv1DxHfVm5ao5hjtIme+YbOnJMdlj/vCJoB5HX97wIgms7CtjdwAAAABJRU5ErkJggg==","@ico03.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAwUExURUxpcQAAAPrdwP/hxP7mz/8AAAAAmfvOov3UrAAA//3JlvzZtwCZAP8A//zCifq6e7UN6GsAAAABdFJOUwBA5thmAAABA0lEQVQ4y5WS2RbDIAhEHdyTJv3/vy2osVj1oR6zeYcBDcb8NV6v9fp1NV7mgq8cMs/cDWYHhrmomsM1pcj9pgS7FL3IZ6AI8nazsCiCnPOG3wf0QpArfDnoGATC6mwc9oi/AtMFgAFFLQhDCuZcQ0yAMghB+cuNUgJpSVM1zg7phGUFpv3VFdB5gqxolpwdTqYO5EaPJ57PgWOZWgvt0bl4u+LAbwmzv0Q7JxquJM2FSpwTBRHvRU7Mey/E16f4FwfeSkpUBD26CIQ+PMajODTmaw0Dr7/V1zRVQCNvAvNw6QbFb5iWwvRaWKE4Vh3H/6LxG+ueROfYdXXlb+zavg/++ADYLwfSmmk9oQAAAABJRU5ErkJggg==","@icofolder.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUxpcffvhP///2VlZczMZv//zPf39+/nc8zMzDMzmZmZZrW1tbWttcl3sA0AAAABdFJOUwBA5thmAAAAgklEQVQ4y9WSQQ6AIAwEsVtFwf+/14JGbcHeTHSuO9kFQggfBE8BFwLR+mBwFGYSZvh53zjzZTdkLTXCkS/ViDHBCLe8Gla48qpkGEHl+8pdYJo0yOouPA2GhLLiCCyC28DIcAXZ0IfsVKS3BTGUMDas0E9NfkO/ovmQBv2v0BJ+xAaYuQX2hCJNtwAAAABJRU5ErkJggg=="},qh.Panel=Lh;var Fh=Br.registerClass("@panels.Menu",qh);function zh(t){return zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(t)}function Uh(){return Uh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=$h(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Uh.apply(this,arguments)}function $h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qh(t)););return t}function Hh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wh(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gh(t,e,n){return e&&Wh(t.prototype,e),n&&Wh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kh(t,e)}function Kh(t,e){return Kh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kh(t,e)}function Zh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Qh(t);if(e){var r=Qh(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Yh(this,n)}}function Yh(t,e){if(e&&("object"===zh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qh(t){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qh(t)}var Xh=function(t){Jh(n,t);var e=Zh(n);function n(t){return Hh(this,n),e.call(this,t)}return Gh(n,[{key:"getMinNumActions",value:function(){return this.abc.primary.getNumCells()}},{key:"hasRandom",value:function(){return!0}},{key:"shuffleAlways",value:function(){return!0}},{key:"helpSolutionAllowed",value:function(){return!0}}]),n}(Br),tf=function(t){Jh(n,t);var e=Zh(n);function n(t,i,r){return Hh(this,n),e.call(this,t,i,r)}return Gh(n,[{key:"clear",value:function(){this.bgA&&(this.bgA.end(),this.bgA=null),this.bgB&&(this.bgB.end(),this.bgB=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&Uh(Qh(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary;if(t){t.image&&t.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp&&this.act.acp.generateContent(t.nch,t.ncw,[t],!1),this.bgA=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t),this.bgB=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t),this.bgA.setContent(t),this.bgA.accessibleText=pt("source"),this.bgB.accessibleText=pt("target"),this.bgA.setVisible(!0),this.bgB.setVisible(!0);var e=this.bgA.getBackgroundActiveBox(),i=this.bgB.getBackgroundActiveBox();e&&i&&i.exchangeContent(e)}}},{key:"initActivity",value:function(){Uh(Qh(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bgA&&this.bgB&&(this.shuffle([this.bgA],!0,!0),this.useOrder&&(this.currentItem=this.bgA.getNextItem(-1)),this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.playing=!0)}},{key:"updateContent",value:function(t){if(Uh(Qh(n.prototype),"updateContent",this).call(this),this.bgA&&this.bgB&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bgA.update(i,t),this.bgB.update(i,t)}return this}},{key:"setDimension",value:function(t){return this.bgA&&this.bgB&&!this.getBounds().equals(t)?lu.layoutDouble(t,this.bgA,this.bgB,this.act.boxGridPos,this.act.margin):t}},{key:"setBounds",value:function(t){this.$canvas&&this.$canvas.remove(),Uh(Qh(n.prototype),"setBounds",this).call(this,t),(this.bgA||this.bgB)&&(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$div.append(this.$canvas),this.bc=new hl(this,this.$canvas.get(-1).getContext("2d")),this.invalidate().update())}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&(Uh(Qh(n.prototype),"buildAccessibleComponents",this).call(this),this.bgA&&this.bgA.buildAccessibleElements(this.$canvas,this.$div,"mousedown"),this.bgB&&(this.bgB.setCellAttr("accessibleAlwaysActive",!0),this.bgB.buildAccessibleElements(this.$canvas,this.$div,"mousedown")))}},{key:"processEvent",value:function(t){if(this.bc&&this.playing){var e,n,i=null,r=[];if("touchend"===t.type)i=this.bc.active?this.bc.dest.clone():new De;else{var o=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,s=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY;i=new De(o-this.$div.offset().left,s-this.$div.offset().top)}var a=!1;switch(t.type){case"touchcancel":this.bc.active&&this.bc.end();break;case"mouseup":if(this.bc.active&&i.distanceTo(this.bc.origin)<=3)break;a=!0;case"touchend":case"touchstart":case"mousedown":if(this.bc.active){if(this.ps.stopMedia(1),e=this.act.dragCells?this.bc.bx:this.bgA.findActiveBox(this.bc.origin),n=this.bgB.findActiveBox(i),this.bc.end(),e&&n&&n.isInactive()){var c=!1,l="".concat(e.getDescription()," (").concat(e.idOrder,")"),u="(".concat(n.idOrder,")"),h=this.act.abc.primary.getActiveBoxContent(n.idOrder);e.getContent().isEquivalent(h,!0)&&(c=!0,e.exchangeContent(n),e.setVisible(!1),this.act.useOrder&&(this.currentItem=this.bgA.getNextItem(this.currentItem)));var f=this.bgA.countInactiveCells();this.ps.reportNewAction(this.act,"PLACE",l,u,c,f),c&&f===this.bgA.getNumCells()?this.finishActivity(!0):this.playEvent(c?"actionOk":"actionError")}this.update(),this.bgA.$accessibleDiv&&this.bgA.$accessibleDiv.focus()}else{if(a)break;this.ps.stopMedia(1),!(e=this.bgA.findActiveBox(i))||e.isInactive()||this.act.useOrder&&e.idOrder!==this.currentItem||(this.act.dragCells?this.bc.begin(i,e):this.bc.begin(i),e.playMedia(this.ps,r)||this.playEvent("click"),this.bgB.$accessibleDiv&&this.bgB.$accessibleDiv.focus())}break;case"mousemove":case"touchmove":this.bc.moveTo(i)}r.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(tf.prototype,{bgA:null,bgB:null,bc:null,events:["mousedown","mouseup","mousemove","touchstart","touchend","touchmove","touchcancel"]}),Xh.Panel=tf;var ef=Br.registerClass("@puzzles.DoublePuzzle",Xh);function nf(t){return nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(t)}function rf(){return rf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=of(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},rf.apply(this,arguments)}function of(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pf(t)););return t}function sf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function af(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cf(t,e,n){return e&&af(t.prototype,e),n&&af(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uf(t,e)}function uf(t,e){return uf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uf(t,e)}function hf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=pf(t);if(e){var r=pf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ff(this,n)}}function ff(t,e){if(e&&("object"===nf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pf(t){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pf(t)}var df=function(t){lf(n,t);var e=hf(n);function n(t){return sf(this,n),e.call(this,t)}return cf(n,[{key:"getMinNumActions",value:function(){return this.abc.primary.getNumCells()}},{key:"hasRandom",value:function(){return!0}},{key:"shuffleAlways",value:function(){return!0}},{key:"helpSolutionAllowed",value:function(){return!0}}]),n}(Br),vf=function(t){lf(n,t);var e=hf(n);function n(t,i,r){return sf(this,n),e.call(this,t,i,r)}return cf(n,[{key:"clear",value:function(){this.bg&&(this.bg.end(),this.bg=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&rf(pf(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary;t&&(t.image&&t.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp&&this.act.acp.generateContent(t.nch,t.ncw,[t],!1),this.bg=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t),this.bg.setContent(t),this.bg.setVisible(!0))}},{key:"initActivity",value:function(){rf(pf(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bg&&(this.shuffle([this.bg],!0,!0),this.useOrder&&(this.currentItem=this.bg.getNextItem(-1)),this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.playing=!0)}},{key:"updateContent",value:function(t){if(rf(pf(n.prototype),"updateContent",this).call(this,t),this.bg&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bg.update(i,t)}return this}},{key:"setDimension",value:function(t){return!this.bg||this.getBounds().equals(t)?t:lu.layoutSingle(t,this.bg,this.act.margin)}},{key:"setBounds",value:function(t){this.$canvas&&this.$canvas.remove(),rf(pf(n.prototype),"setBounds",this).call(this,t),this.bg&&(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$div.append(this.$canvas),this.bc=new hl(this,this.$canvas.get(-1).getContext("2d")),this.invalidate().update())}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&this.bg&&(rf(pf(n.prototype),"buildAccessibleComponents",this).call(this),this.bg.buildAccessibleElements(this.$canvas,this.$div,"mousedown"))}},{key:"processEvent",value:function(t){if(this.bc&&this.playing){var e,n,i=null,r=[];if("touchend"===t.type)i=this.bc.active?this.bc.dest.clone():new De;else{var o=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,s=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY;i=new De(o-this.$div.offset().left,s-this.$div.offset().top)}var a=!1;switch(t.type){case"touchcancel":this.bc.active&&this.bc.end();break;case"mouseup":if(this.bc.active&&i.distanceTo(this.bc.origin)<=3)break;a=!0;case"touchend":case"touchstart":case"mousedown":if(this.bc.active){if(this.ps.stopMedia(1),e=this.act.dragCells?this.bc.bx:this.bg.findActiveBox(this.bc.origin),this.bc.end(),n=this.bg.findActiveBox(i),e&&n){var c="".concat(e.getDescription()," (").concat(e.idOrder,")"),l="(".concat(n.idLoc,")"),u=e.idOrder===n.idLoc;this.bg.swapCellPositions(e,n,!0);var h=this.bg.countCellsAtEquivalentPlace(!0);this.ps.reportNewAction(this.act,"PLACE",c,l,u,h),u&&h===this.bg.getNumCells()?this.finishActivity(!0):this.playEvent(u?"actionOk":"actionError")}this.update()}else{if(a)break;this.ps.stopMedia(1),(e=this.bg.findActiveBox(i))&&(this.act.dragCells?this.bc.begin(i,e):this.bc.begin(i),e.playMedia(this.ps,r)||this.playEvent("click"))}break;case"mousemove":case"touchmove":this.bc.moveTo(i)}r.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(vf.prototype,{bg:null,bc:null,events:["mousedown","mouseup","mousemove","touchstart","touchend","touchmove","touchcancel"]}),df.Panel=vf;var yf=Br.registerClass("@puzzles.ExchangePuzzle",df);function gf(t){return gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(t)}function mf(){return mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=bf(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},mf.apply(this,arguments)}function bf(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ef(t)););return t}function wf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kf(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Af(t,e,n){return e&&kf(t.prototype,e),n&&kf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cf(t,e)}function Cf(t,e){return Cf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cf(t,e)}function Sf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ef(t);if(e){var r=Ef(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Of(this,n)}}function Of(t,e){if(e&&("object"===gf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ef(t){return Ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ef(t)}var Pf=function(t){xf(n,t);var e=Sf(n);function n(t){return wf(this,n),e.call(this,t)}return Af(n,[{key:"getMinNumActions",value:function(){return this.abc.primary.getNumCells()}},{key:"hasRandom",value:function(){return!0}},{key:"shuffleAlways",value:function(){return!0}},{key:"helpSolutionAllowed",value:function(){return!0}}]),n}(Br),Tf=function(t){xf(n,t);var e=Sf(n);function n(t,i,r){return wf(this,n),e.call(this,t,i,r)}return Af(n,[{key:"clear",value:function(){this.bg&&(this.bg.end(),this.bg=null),this.parkBg&&(this.parkBg.end(),this.parkBg=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&mf(Ef(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary;t&&(t.image&&t.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp&&this.act.acp.generateContent(t.nch,t.ncw,[t],!1),this.bg=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t),this.bg.setContent(t),this.bg.setVisible(!0),this.hiddenBoxIndex=Math.floor(Math.random()*this.bg.getNumCells()),this.hiddenBox=this.bg.getActiveBox(this.hiddenBoxIndex),this.hiddenBox.setVisible(!1),this.parkBg=new Su(null,this,t.style,this.act.margin,this.act.margin,this.hiddenBox.dim.width,this.hiddenBox.dim.height,new Da(1,1)),this.parkBg.setContent(t,null,this.hiddenBoxIndex,0,1),this.parkBg.setBorder(this.bg.hasBorder()),this.parkBg.setVisible(!0))}},{key:"initActivity",value:function(){if(mf(Ef(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bg){this.act.shuffles%2!=1&&this.act.shuffles++;for(var t=0;t<this.act.shuffles;t++){var e=this.bg.getCoord(this.hiddenBox),i=0===Math.floor(2*Math.random())?1:-1;0===Math.floor(2*Math.random())?(e.x+=i,(e.x<0||e.x>=this.bg.nCols)&&(e.x-=2*i)):(e.y+=i,(e.y<0||e.y>=this.bg.nRows)&&(e.y-=2*i));var r=this.bg.getActiveBoxWithIdLoc(e.y*this.bg.nCols+e.x);null!==r&&this.hiddenBox.exchangeLocation(r)}this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.playing=!0}}},{key:"updateContent",value:function(t){if(mf(Ef(n.prototype),"updateContent",this).call(this,t),this.bg&&this.parkBg&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bg.update(i,t),this.parkBg.update(i,t)}return this}},{key:"setDimension",value:function(t){return this.bg&&this.parkBg&&!this.getBounds().equals(t)?lu.layoutDouble(t,this.bg,this.parkBg,this.act.boxGridPos,this.act.margin):t}},{key:"setBounds",value:function(t){this.$canvas&&this.$canvas.remove(),mf(Ef(n.prototype),"setBounds",this).call(this,t),this.bg&&this.parkBg&&(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$div.append(this.$canvas),this.invalidate().update())}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&this.bg&&(mf(Ef(n.prototype),"buildAccessibleComponents",this).call(this),this.bg.buildAccessibleElements(this.$canvas,this.$div))}},{key:"processEvent",value:function(t){if(this.playing){var e=new De(t.pageX-this.$div.offset().left,t.pageY-this.$div.offset().top),n=[];if("click"===t.type){this.ps.stopMedia(1);var i=this.bg.findActiveBox(e);if(i)if(i.isVisible()){var r=this.bg.getCoordDist(i,this.hiddenBox);if(Math.abs(r.x)+Math.abs(r.y)===1){var o=i.playMedia(this.ps,n),s="".concat(i.getDescription()," (").concat(i.idOrder,")"),a="(".concat(this.hiddenBox.idLoc,")");i.exchangeLocation(this.hiddenBox);var c=i.idOrder===i.idLoc,l=this.bg.countCellsAtEquivalentPlace(!0);this.ps.reportNewAction(this.act,"SELECT",s,a,c,l),c&&l===this.bg.getNumCells()?(this.hiddenBox.setVisible(!0),this.parkBg.setVisible(!1),this.finishActivity(!0)):o||this.playEvent("click")}this.update()}else this.playEvent("actionError")}n.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(Tf.prototype,{bg:null,parkBg:null,hiddenBox:null,hiddenBoxIndex:-1,events:["click"]}),Pf.Panel=Tf;var _f=Br.registerClass("@puzzles.HolePuzzle",Pf);function jf(t){return jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(t)}function Bf(){return Bf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Rf(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Bf.apply(this,arguments)}function Rf(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ff(t)););return t}function If(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Df(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mf(t,e,n){return e&&Df(t.prototype,e),n&&Df(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vf(t,e)}function Vf(t,e){return Vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vf(t,e)}function qf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ff(t);if(e){var r=Ff(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}function Lf(t,e){if(e&&("object"===jf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ff(t){return Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ff(t)}var zf=function(t){Nf(n,t);var e=qf(n);function n(t){return If(this,n),e.call(this,t)}return Mf(n,[{key:"getMinNumActions",value:function(){return this.abc.primary.getNumCells()}},{key:"hasRandom",value:function(){return!0}},{key:"shuffleAlways",value:function(){return!0}}]),n}(Br),Uf=function(t){Nf(n,t);var e=qf(n);function n(t,i,r){return If(this,n),e.call(this,t,i,r)}return Mf(n,[{key:"clear",value:function(){this.bg&&(this.bg.end(),this.bg=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&Bf(Ff(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary,e=this.act.abc.secondary;if(t){if(t.image&&t.setImgContent(this.act.project.mediaBag,null,!1),e&&e.image&&e.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp){var i=[t];e&&i.push(e),this.act.acp.generateContent(t.nch,t.ncw,i,!1)}var r=t.ncw,o=t.nch;"AB"===this.act.boxGridPos||"BA"===this.act.boxGridPos?r*=2:o*=2,this.bg=new Su(null,this,t.style,this.act.margin,this.act.margin,t.w*r,t.h*o,new Da(r,o));var s=t.getNumCells();this.bg.setBorder(t.border),this.bg.setContent(t,null,0,0,s),this.bg.setContent(e||t,null,0,s,s);for(var a=0;a<2;a++)for(var c=0;c<s;c++){var l=this.bg.getActiveBox(a*s+c);l.idAss=c,l.setInactive(!0)}this.bg.setVisible(!0)}}},{key:"initActivity",value:function(){Bf(Ff(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bg&&(this.shuffle([this.bg],!0,!0),this.invalidate().update(),this.setAndPlayMsg("initial","start"),this.playing=!0)}},{key:"updateContent",value:function(t){if(Bf(Ff(n.prototype),"updateContent",this).call(this,t),this.bg&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bg.update(i,t)}return this}},{key:"setDimension",value:function(t){return!this.bg||this.getBounds().equals(t)?t:lu.layoutSingle(t,this.bg,this.act.margin)}},{key:"setBounds",value:function(t){this.$canvas&&this.$canvas.remove(),Bf(Ff(n.prototype),"setBounds",this).call(this,t),this.bg&&(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$div.append(this.$canvas),this.bc=new hl(this,this.$canvas.get(-1).getContext("2d")),this.invalidate().update())}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&this.bg&&(Bf(Ff(n.prototype),"buildAccessibleComponents",this).call(this),this.bg.setCellAttr("accessibleAlwaysActive",!0),this.bg.buildAccessibleElements(this.$canvas,this.$div,"mousedown"))}},{key:"processEvent",value:function(t){if(this.bc&&this.playing){var e,n,i=null,r=[];if("touchend"===t.type)i=this.bc.active?this.bc.dest.clone():new De;else{var o=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,s=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY;i=new De(o-this.$div.offset().left,s-this.$div.offset().top)}var a=!1;switch(t.type){case"touchcancel":this.bc.active&&this.bc.end();break;case"mouseup":case"touchend":if(this.bc.active&&i.distanceTo(this.bc.origin)<=3)break;a=!0;case"touchstart":case"mousedown":if(this.bc.active){if(this.ps.stopMedia(1),e=this.act.dragCells?this.bc.bx:this.bg?this.bg.findActiveBox(this.bc.origin):null,this.bc.end(),n=this.bg?this.bg.findActiveBox(i):null,e&&-1!==e.idAss&&n&&-1!==n.idAss)if(e!==n){var c=!1;e.idAss===n.idAss||e.getContent().isEquivalent(n.getContent(),!0)?(c=!0,e.idAss=-1,e.setInactive(!1),n.idAss=-1,n.setInactive(!1)):(e.setInactive(!0),this.act.dragCells?n.setInactive(!0):(n.setInactive(!1),this.update(),this.act.dragCells?this.bc.begin(i,e):this.bc.begin(i)));var l=n.playMedia(this.ps,r);if(this.bg){var u=this.bg.countCellsWithIdAss(-1);this.ps.reportNewAction(this.act,"MATCH",e.getDescription(),n.getDescription(),c,u/2),c&&u===this.bg.getNumCells()?this.finishActivity(!0):l||this.playEvent(c?"actionOk":"actionError")}}else this.playEvent("CLICK"),e.setInactive(!0);else null!==e&&e.setInactive(!0);this.invalidate().update()}else{if(a)break;this.ps.stopMedia(1),(e=this.bg?this.bg.findActiveBox(i):null)&&-1!==e.idAss&&(e.playMedia(this.ps,r)||this.playEvent("click"),e.setInactive(!1),this.update(),this.act.dragCells?this.bc.begin(i,e):this.bc.begin(i))}break;case"mousemove":case"touchmove":this.bc.moveTo(i)}r.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(Uf.prototype,{bg:null,bc:null,events:["mousedown","mouseup","mousemove","touchstart","touchend","touchmove","touchcancel"]}),zf.Panel=Uf;var $f=Br.registerClass("@memory.MemoryGame",zf);function Hf(t){return Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(t)}function Wf(){return Wf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Gf(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Wf.apply(this,arguments)}function Gf(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ep(t)););return t}function Jf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kf(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zf(t,e,n){return e&&Kf(t.prototype,e),n&&Kf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qf(t,e)}function Qf(t,e){return Qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qf(t,e)}function Xf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ep(t);if(e){var r=ep(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tp(this,n)}}function tp(t,e){if(e&&("object"===Hf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ep(t){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ep(t)}var np=function(t){Yf(n,t);var e=Xf(n);function n(t){return Jf(this,n),e.call(this,t)}return Zf(n,[{key:"getMinNumActions",value:function(){return this.abc.primary.getNumCells()}},{key:"hasRandom",value:function(){return!0}},{key:"shuffleAlways",value:function(){return!0}},{key:"helpSolutionAllowed",value:function(){return!0}}]),n}(Br);Object.assign(np.prototype,{useIdAss:!1});var ip=function(t){Yf(n,t);var e=Xf(n);function n(t,i,r){return Jf(this,n),e.call(this,t,i,r)}return Zf(n,[{key:"clear",value:function(){this.bgA&&(this.bgA.end(),this.bgA=null),this.bgB&&(this.bgB.end(),this.bgB=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&Wf(ep(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.abc.primary,e=this.act.abc.secondary,r=this.act.abc.solvedPrimary;if(t&&e){if(t.image&&(t.setImgContent(this.act.project.mediaBag,null,!1),!t.animatedGifFile||t.shaper.rectangularShapes||this.act.shuffleA||(this.$animatedBg=i()("<span/>").css({"background-image":"url(".concat(t.animatedGifFile,")"),"background-position":"center","background-repeat":"no-repeat",position:"absolute"}).appendTo(this.$div))),e.image&&(e.setImgContent(this.act.project.mediaBag,null,!1),!e.animatedGifFile||e.shaper.rectangularShapes||this.act.shuffleB||(this.$animatedBgB=i()("<span/>").css({"background-image":"url(".concat(e.animatedGifFile,")"),"background-position":"center","background-repeat":"no-repeat",position:"absolute"}).appendTo(this.$div))),r&&r.image&&r.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp){var o=[t,e];r&&o.push(r),this.act.acp.generateContent(t.nch,t.ncw,o,!1)}this.bgA=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,t),this.bgB=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,e),this.bgA.setContent(t,r||null),this.$animatedBg&&this.bgA.setCellAttr("tmpTrans",!0),this.bgB.setContent(e),this.$animatedBgB&&this.bgB.setCellAttr("tmpTrans",!0),this.bgA.accessibleText=pt("source"),this.bgB.accessibleText=pt("target"),this.bgA.setVisible(!0),this.bgB.setVisible(!0)}}},{key:"initActivity",value:function(){if(Wf(ep(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.bgA&&this.bgB){var t=[];this.act.shuffleA&&t.push(this.bgA),this.act.shuffleB&&t.push(this.bgB),t.length>0&&this.shuffle(t,!0,!0),this.useOrder&&(this.currentItem=this.bgA.getNextItem(-1)),this.invalidate().update(),this.setAndPlayMsg("initial","start"),this.playing=!0}}},{key:"updateContent",value:function(t){if(Wf(ep(n.prototype),"updateContent",this).call(this,t),this.bgA&&this.bgB&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.bgA.update(i,t),this.bgB.update(i,t)}return this}},{key:"setDimension",value:function(t){return this.bgA&&this.bgB&&!this.getBounds().equals(t)?lu.layoutDouble(t,this.bgA,this.bgB,this.act.boxGridPos,this.act.margin):t}},{key:"setBounds",value:function(t){if(this.$canvas&&this.$canvas.remove(),Wf(ep(n.prototype),"setBounds",this).call(this,t),this.bgA||this.bgB){if(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$animatedBg&&this.bgA){var e=this.bgA.getBounds();this.$animatedBg.css({left:e.pos.x,top:e.pos.y,width:e.dim.width+"px",height:e.dim.height+"px","background-size":"".concat(e.dim.width,"px ").concat(e.dim.height,"px")})}if(this.$animatedBgB&&this.bgB){var r=this.bgB.getBounds();this.$animatedBgB.css({left:r.pos.x,top:r.pos.y,width:r.dim.width+"px",height:r.dim.height+"px","background-size":"".concat(r.dim.width,"px ").concat(r.dim.height,"px")})}this.$div.append(this.$canvas),this.bc=new hl(this,this.$canvas.get(-1).getContext("2d")),this.invalidate().update()}}},{key:"buildAccessibleComponents",value:function(){this.$canvas&&this.accessibleCanvas&&(Wf(ep(n.prototype),"buildAccessibleComponents",this).call(this),this.bgA&&this.bgA.buildAccessibleElements(this.$canvas,this.$div,"mousedown"),this.bgB&&this.bgB.buildAccessibleElements(this.$canvas,this.$div,"mousedown"))}},{key:"processEvent",value:function(t){if(this.bc&&this.playing){var e,n,i=null;if("touchend"===t.type)i=this.bc.active?this.bc.dest.clone():new De;else{var r=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,o=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY;i=new De(r-this.$div.offset().left,o-this.$div.offset().top)}var s=!1,a=!1,c=!1,l=[];switch(t.type){case"touchcancel":this.bc.active&&this.bc.end();break;case"mouseup":if(this.bc.active&&i.distanceTo(this.bc.origin)<=3)break;s=!0;case"touchend":case"touchstart":case"mousedown":if(this.bc.active){this.ps.stopMedia(1);var u=this.bc.origin;if(this.bc.end(),(e=this.bgA?this.bgA.findActiveBox(u):null)?n=this.bgB?this.bgB.findActiveBox(i):null:(n=this.bgB?this.bgB.findActiveBox(u):null)&&(e=this.bgA?this.bgA.findActiveBox(i):null,c=!0),e&&n&&-1!==e.idAss&&-1!==n.idAss&&this.act.abc.secondary){var h=!1,f=e.getDescription(),p=n.getDescription(),d=this.act.abc.secondary.getActiveBoxContent(e.idOrder);(e.idOrder===n.idOrder||n.getContent().isEquivalent(d,!0))&&(h=!0,e.idAss=-1,n.idAss=-1,this.act.abc.solvedPrimary?(e.switchToAlt(this.ps),a=a||e.playMedia(this.ps,l)):(a=c?a||e.playMedia(this.ps,l):a||n.playMedia(this.ps,l),e.clear()),n.clear(),this.act.useOrder&&this.bgA&&(this.currentItem=this.bgA.getNextItem(this.currentItem)));var v=this.bgB?this.bgB.countCellsWithIdAss(-1):0;this.ps.reportNewAction(this.act,"MATCH",f,p,h,v),h&&v===this.bgB.getNumCells()?this.finishActivity(!0):a||this.playEvent(h?"actionOk":"actionError")}this.update(),this.bgA&&this.bgA.$accessibleDiv&&this.bgA.$accessibleDiv.focus()}else{if(s)break;if(this.ps.stopMedia(1),e=this.bgA?this.bgA.findActiveBox(i):null,n=this.bgB?this.bgB.findActiveBox(i):null,e&&(!this.act.useOrder||e.idOrder===this.currentItem)||!this.act.useOrder&&n&&-1!==n.idAss){this.act.dragCells?this.bc.begin(i,e||n):this.bc.begin(i),(a=a||(e||n).playMedia(this.ps,l))||this.playEvent("click");var y=e?this.bgA:this.bgB;y&&y.$accessibleDiv&&(y=e?this.bgB:this.bgA)&&y.$accessibleDiv&&y.$accessibleDiv.focus()}}break;case"mousemove":case"touchmove":this.bc.moveTo(i)}l.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(ip.prototype,{bgA:null,bgB:null,bc:null,events:["mousedown","mouseup","mousemove","touchstart","touchend","touchmove","touchcancel"]}),np.Panel=ip;var rp=Br.registerClass("@associations.SimpleAssociation",np);function op(t){return op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(t)}function sp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ap(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cp(t,e,n){return e&&ap(t.prototype,e),n&&ap(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lp(){return lp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=up(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},lp.apply(this,arguments)}function up(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vp(t)););return t}function hp(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fp(t,e)}function fp(t,e){return fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fp(t,e)}function pp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=vp(t);if(e){var r=vp(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return dp(this,n)}}function dp(t,e){if(e&&("object"===op(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vp(t){return vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vp(t)}var yp=function(t){hp(n,t);var e=pp(n);function n(t){var i;return sp(this,n),(i=e.call(this,t)).useIdAss=!0,i}return cp(n,[{key:"setProperties",value:function(t){lp(vp(n.prototype),"setProperties",this).call(this,t),this.abc.primary.avoidAllIdsNull(this.abc.secondary.getNumCells())}},{key:"getMinNumActions",value:function(){return this.invAss?this.abc.secondary.getNumCells():this.abc.primary.getNumCells()-this.nonAssignedCells}}]),n}(np);Object.assign(yp.prototype,{nonAssignedCells:0,useIdAss:!1});var gp=function(t){hp(n,t);var e=pp(n);function n(t,i,r){return sp(this,n),e.call(this,t,i,r)}return cp(n,[{key:"buildVisualComponents",value:function(){var t=this;lp(vp(n.prototype),"buildVisualComponents",this).call(this);var e=this.act.abc.primary,i=this.act.abc.secondary;e&&i&&(this.act.invAss&&(this.invAssCheck=Array(i.getNumCells()).fill(!1)),this.bgA.setDefaultIdAss(),this.act.nonAssignedCells=0,this.bgA.cells.forEach((function(e){-1===e.idAss&&(t.act.nonAssignedCells++,e.switchToAlt(t.ps))})))}},{key:"checkInvAss",value:function(){return!(!this.act.invAss||!this.invAssCheck)&&this.invAssCheck.every((function(t){return t}))}},{key:"processEvent",value:function(t){if(this.bc&&this.playing){var e,n,i=null;if("touchend"===t.type)i=this.bc.active?this.bc.dest.clone():new De;else{var r=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,o=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY;i=new De(r-this.$div.offset().left,o-this.$div.offset().top)}var s=!1,a=!1,c=!1,l=[];switch(t.type){case"touchcancel":this.bc.active&&this.bc.end();break;case"mouseup":if(this.bc.active&&i.distanceTo(this.bc.origin)<=3)break;s=!0;case"touchend":case"touchstart":case"mousedown":if(this.bc.active){this.ps.stopMedia(1);var u=this.bc.origin;if(this.bc.end(),(e=this.bgA?this.bgA.findActiveBox(u):null)?n=this.bgB?this.bgB.findActiveBox(i):null:(n=this.bgB?this.bgB.findActiveBox(u):null)&&(e=this.bgA?this.bgA.findActiveBox(i):null,c=!0),e&&n&&-1!==e.idAss&&!n.isInactive()&&this.act.abc.secondary){var h=e.getDescription(),f=n.getDescription(),p=this.act.abc.secondary.getActiveBoxContent(e.idAss),d=!1;if((e.idAss===n.idOrder||n.getContent().isEquivalent(p,!0))&&(d=!0,e.idAss=-1,this.act.abc.solvedPrimary?(e.switchToAlt(this.ps),a=a||e.playMedia(this.ps,l)):(a=c?a||e.playMedia(this.ps,l):a||n.playMedia(this.ps,l),e.clear()),this.act.invAss&&(this.invAssCheck[n.idOrder]=!0,n.clear()),this.act.useOrder&&this.bgA&&(this.currentItem=this.bgA.getNextItem(this.currentItem))),this.bgA){var v=this.bgA.countCellsWithIdAss(-1);this.ps.reportNewAction(this.act,"MATCH",h,f,d,v-this.act.nonAssignedCells),d&&(this.checkInvAss()||v===this.bgA.getNumCells())?this.finishActivity(!0):a||this.playEvent(d?"actionOk":"actionError")}}else if(this.bgB&&(c&&this.bgA&&this.bgA.contains(i)||!c&&this.bgB.contains(i))){var y=e?e.getDescription():n?n.getDescription():"null";this.ps.reportNewAction(this.act,"MATCH",y,"null",!1,this.bgB.countCellsWithIdAss(-1)),this.playEvent("actionError")}this.update(),this.bgA&&this.bgA.$accessibleDiv&&this.bgA.$accessibleDiv.focus()}else{if(s)break;this.ps.stopMedia(1),e=this.bgA?this.bgA.findActiveBox(i):null,n=this.bgB?this.bgB.findActiveBox(i):null,(e&&-1!==e.idAss&&(!this.act.useOrder||e.idOrder===this.currentItem)||!this.act.useOrder&&n)&&(this.act.dragCells?this.bc.begin(i,e||n):this.bc.begin(i),(a=a||(e||n).playMedia(this.ps,l))||this.playEvent("click"));var g=e?this.bgA:this.bgB;g&&g.$accessibleDiv&&(g=e?this.bgB:this.bgA)&&g.$accessibleDiv&&g.$accessibleDiv.focus()}break;case"mousemove":case"touchmove":this.bc.moveTo(i)}l.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(ip);Object.assign(gp.prototype,{invAssCheck:null}),yp.Panel=gp;var mp=Ir.registerClass("@associations.ComplexAssociation",yp);function bp(t){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(t)}function wp(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kp(){return kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Ap(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},kp.apply(this,arguments)}function Ap(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Op(t)););return t}function xp(t,e){return xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xp(t,e)}function Cp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Op(t);if(e){var r=Op(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Sp(this,n)}}function Sp(t,e){if(e&&("object"===bp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Op(t)}var Ep={MIN_CELL_SIZE:12,DEFAULT_CELL_SIZE:20,MIN_INTERNAL_MARGIN:2},Pp={NORMAL:0,INVERTED:1,HIDDEN:2,LOCKED:4,MARKED:8,TRANSPARENT:16},Tp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xp(t,e)}(o,t);var e,n,i,r=Cp(o);function o(t,e,n,i,s,a,c,l,u,h){var f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(f=r.call(this,t,e,n)).pos.x=i,f.pos.y=s,f.nCols=Math.max(1,a),f.nRows=Math.max(1,c),f.cellWidth=Math.max(l,Ep.MIN_CELL_SIZE),f.cellHeight=Math.max(u,Ep.MIN_CELL_SIZE),f.dim.width=l*f.nCols,f.dim.height=u*f.nRows,f.setChars(" "),f.preferredBounds=new Fe(f.pos,f.dim),f.setBorder(h),f.cursorTimer=new We((function(){return f.blink(0)}),500,!1),f.cursorEnabled=!1,f.useCursor=!1,f.wildTransparent=!1,f.cursor=new De,f}return e=o,n=[{key:"setChars",value:function(t){this.chars=[],this.answers=[],this.attributes=[];for(var e=0;e<this.nRows;e++){var n=e<t.length?t[e]:"";this.chars[e]=n.split(""),this.answers[e]=[],this.attributes[e]=[];for(var i=0;i<this.nCols;i++)i>=n.length&&(this.chars[e][i]=" "),this.answers[e][i]=this.chars[e][i],this.attributes[e][i]=Pp.NORMAL}}},{key:"randomize",value:function(){for(var t=0;t<this.nRows;t++)for(var e=0;e<this.nCols;e++)this.chars[t][e]===this.wild&&(this.chars[t][e]=this.randomChars.charAt(Math.floor(Math.random()*this.randomChars.length)))}},{key:"setCellAttributes",value:function(t,e){var n=Pp.LOCKED;this.wildTransparent?n|=Pp.TRANSPARENT:n|=Pp.INVERTED|Pp.HIDDEN;for(var i=0;i<this.nRows;i++)for(var r=0;r<this.nCols;r++)t&&this.chars[i][r]===this.wild?this.attributes[i][r]=n:(this.attributes[i][r]=Pp.NORMAL,e&&(this.chars[i][r]=" "))}},{key:"setCellLocked",value:function(t,e,n){t>=0&&t<this.nCols&&e>=0&&e<this.nRows&&(this.attributes[e][t]=n?Pp.LOCKED|(this.wildTransparent?Pp.TRANSPARENT:Pp.INVERTED|Pp.HIDDEN):Pp.NORMAL)}},{key:"getItemFor",value:function(t,e){if(!this.isValidCell(t,e))return null;for(var n=new De,i=!1,r=!1,o=0;o<t;o++)0!=(this.attributes[e][o]&Pp.LOCKED)?i||(r&&n.x++,i=!0):(r=!0,i=!1);i=!1,r=!1;for(var s=0;s<e;s++)0!=(this.attributes[s][t]&Pp.LOCKED)?i||(r&&n.y++,i=!0):(r=!0,i=!1);return n}},{key:"setCursorEnabled",value:function(t){this.cursorEnabled=t,!0===t?this.startCursorBlink():this.stopCursorBlink()}},{key:"startCursorBlink",value:function(){this.useCursor&&this.cursorEnabled&&this.cursorTimer&&!this.cursorTimer.isRunning()&&(this.blink(1),this.cursorTimer.start())}},{key:"stopCursorBlink",value:function(){this.cursorTimer&&this.cursorTimer.isRunning()&&(this.cursorTimer.stop(),this.blink(-1))}},{key:"moveCursor",value:function(t,e,n){if(this.useCursor){var i=this.findNextCellWithAttr(this.cursor.x,this.cursor.y,n?Pp.LOCKED:Pp.NORMAL,t,e,!1);this.cursor.equals(i)||this.setCursorAt(i.x,i.y,n)}}},{key:"findFreeCell",value:function(t,e,n){var i=null;if(t&&(0!==e||0!==n))for(var r=new De(t);null===i&&(r.x+=e,r.y+=n,!(r.x<0||r.x>=this.nCols||r.y<0||r.y>=this.nRows));)this.getCellAttribute(r.x,r.y,Pp.LOCKED)||(i=r);return i}},{key:"findNextCellWithAttr",value:function(t,e,n,i,r,o){for(var s=new De(t+i,e+r);s.x<0?(s.x=this.nCols-1,s.y>0?s.y--:s.y=this.nRows-1):s.x>=this.nCols&&(s.x=0,s.y<this.nRows-1?s.y++:s.y=0),s.y<0?(s.y=this.nRows-1,s.x>0?s.x--:s.x=this.nCols-1):s.y>=this.nRows&&(s.y=0,s.x<this.nCols-1?s.x++:s.x=0),(s.x!==t||s.y!==e)&&this.getCellAttribute(s.x,s.y,n)!==o;)s.x+=i,s.y+=r;return s}},{key:"setCursorAt",value:function(t,e,n){this.stopCursorBlink(),this.isValidCell(t,e)&&(this.cursor.x=t,this.cursor.y=e,this.useCursor=!0,n&&this.getCellAttribute(t,e,Pp.LOCKED)?this.moveCursor(1,0,n):this.cursorEnabled&&this.startCursorBlink())}},{key:"setUseCursor",value:function(t){this.useCursor=t}},{key:"getCursor",value:function(){return this.cursor}},{key:"countCharsLike",value:function(t){for(var e=0,n=0;n<this.nRows;n++)for(var i=0;i<this.nCols;i++)this.chars[n][i]===t&&e++;return e}},{key:"getNumCells",value:function(){return this.nRows*this.nCols}},{key:"countCoincidences",value:function(t){var e=0;if(this.answers)for(var n=0;n<this.nRows;n++)for(var i=0;i<this.nCols;i++)this.isCellOk(i,n,t)&&e++;return e}},{key:"isCellOk",value:function(t,e,n){var i=!1;if(this.isValidCell(t,e)){var r=this.chars[e][t];if(r!==this.wild){var o=this.answers[e][t];(r===o||!n&&r.toUpperCase()===o.toUpperCase())&&(i=!0)}}return i}},{key:"getLogicalCoords",value:function(t){if(!this.contains(t))return null;var e=Math.floor((t.x-this.pos.x)/this.cellWidth),n=Math.floor((t.y-this.pos.y)/this.cellHeight);return this.isValidCell(e,n)?new De(e,n):null}},{key:"isValidCell",value:function(t,e){return t<this.nCols&&e<this.nRows&&t>=0&&e>=0}},{key:"setCharAt",value:function(t,e,n){this.isValidCell(t,e)&&(this.chars[e][t]=n,this.repaintCell(t,e))}},{key:"getCharAt",value:function(t,e){return this.isValidCell(t,e)?this.chars[e][t]:" "}},{key:"getStringBetween",value:function(t,e,n,i){var r="";if(this.isValidCell(t,e)&&this.isValidCell(n,i)){var o=n-t,s=i-e;if(0===o||0===s||Math.abs(o)===Math.abs(s)){var a=Math.max(Math.abs(o),Math.abs(s));a>0&&(o/=a,s/=a);for(var c=0;c<=a;c++)r+=this.getCharAt(t+o*c,e+s*c)}}return r}},{key:"setAttributeBetween",value:function(t,e,n,i,r,o){if(this.isValidCell(t,e)&&this.isValidCell(n,i)){var s=n-t,a=i-e;if(0===s||0===a||Math.abs(s)===Math.abs(a)){var c=Math.max(Math.abs(s),Math.abs(a));c>0&&(s/=c,a/=c);for(var l=0;l<=c;l++)this.setAttribute(t+s*l,e+a*l,r,o)}}}},{key:"setAttribute",value:function(t,e,n,i){this.isValidCell(t,e)&&(this.attribute!==Pp.MARKED||i||this.repaintCell(t,e),this.attributes[e][t]&=~n,this.attributes[e][t]|=i?n:0,(n!==Pp.MARKED||i)&&this.repaintCell(t,e))}},{key:"setAllCellsAttribute",value:function(t,e){for(var n=0;n<this.nRows;n++)for(var i=0;i<this.nCols;i++)this.setAttribute(i,n,t,e)}},{key:"getCellAttribute",value:function(t,e,n){return!!this.isValidCell(t,e)&&0!=(this.attributes[e][t]&n)}},{key:"getCellRect",value:function(t,e){return new Fe(this.pos.x+t*this.cellWidth,this.pos.y+e*this.cellHeight,this.cellWidth,this.cellHeight)}},{key:"getCellBorderBounds",value:function(t,e){var n=this.getCellAttribute(t,e,Pp.MARKED);if(!this.border&&!n)return this.getCellRect(t,e);var i=this.getBoxBaseResolve(),r=n?i.markerStroke:i.borderStroke;return this.getCellRect(t,e).grow(r.lineWidth,r.lineWidth)}},{key:"repaintCell",value:function(t,e){this.container&&this.container.invalidate(this.getCellBorderBounds(t,e)).update()}},{key:"getPreferredSize",value:function(){return this.preferredBounds.dim}},{key:"getMinimumSize",value:function(){return new Me(Ep.MIN_CELL_SIZE*this.nCols,Ep.MIN_CELL_SIZE*this.nRows)}},{key:"getScaledSize",value:function(t){return new Me(Gt(t*this.preferredBounds.dim.width,this.nCols),Gt(t*this.preferredBounds.dim.height,this.nRows))}},{key:"setBounds",value:function(t,e,n,i){kp(Op(o.prototype),"setBounds",this).call(this,t,e,n,i),this.cellWidth=this.dim.width/this.nCols,this.cellHeight=this.dim.height/this.nRows}},{key:"updateContent",value:function(t,e){var n=this.getBoxBaseResolve();t.font=n.font.cssFont(),t.textBaseline="alphabetic",n.prepareText(t,"W",this.cellWidth-2*Ep.MIN_INTERNAL_MARGIN,this.cellHeight-2*Ep.MIN_INTERNAL_MARGIN);for(var i=[],r=(this.cellHeight-n.font.getHeight())/2+n.font.getMetrics().ascent,o=0;o<this.nRows;o++)for(var s=0;s<this.nCols;s++)if(this.getCellBorderBounds(s,o).intersects(e)){var a=this.attributes[o][s];if(0==(a&Pp.TRANSPARENT)){var c=0!=(a&Pp.INVERTED),l=0!=(a&Pp.MARKED),u=this.useCursor&&this.cursor.x===s&&this.cursor.y===o,h=this.getCellRect(s,o);if(t.fillStyle=u&&this.cursorBlink?n.inactiveColor:c?n.textColor:n.backColor,h.fill(t),t.strokeStyle="black",0==(a&Pp.HIDDEN)&&(i[0]=this.chars[o][s],i[0])){var f=h.pos.x+(this.cellWidth-t.measureText(i[0]).width)/2,p=h.pos.y+r;if(n.shadow){var d=Math.max(1,n.font.size/10);t.fillStyle=n.shadowColor,t.fillText(i[0],f+d,p+d)}t.fillStyle=c?n.backColor:this.isAlternative()?n.alternativeColor:n.textColor,t.fillText(i[0],f,p)}(this.border||l)&&(t.strokeStyle=n.borderColor,n[l?"markerStroke":"borderStroke"].setStroke(t),l&&(t.globalCompositeOperation="xor"),h.stroke(t),l&&(t.globalCompositeOperation="source-over")),t.strokeStyle="black",Ie.prototype.setStroke(t)}}return!0}},{key:"blink",value:function(t){this.useCursor&&(this.cursorBlink=1===t||-1!==t&&!this.cursorBlink,this.repaintCell(this.cursor.x,this.cursor.y))}},{key:"end",value:function(){this.cursorTimer&&(this.cursorTimer.stop(),this.cursorTimer=null)}}],i=[{key:"createEmptyGrid",value:function(t,e,n,i,r,s){var a=new o(t,e,r.style,n,i,r.ncw,r.nch,r.w,r.h,r.border);return a.wild=r.wild,a.randomChars=r.randomChars,a.wildTransparent=s,a}}],n&&wp(e.prototype,n),i&&wp(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Io);Object.assign(Tp.prototype,{nRows:1,nCols:1,chars:null,answers:null,attributes:null,cellWidth:20,cellHeight:20,preferredBounds:null,wild:Zi.prototype.wild,randomChars:Zi.prototype.randomChars,cursorEnabled:!1,useCursor:!1,cursor:null,cursorBlink:!1,cursorTimer:null,wildTransparent:!1}),Tp.defaults=Ep,Tp.flags=Pp;var _p=Tp;function jp(t){return jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(t)}function Bp(){return Bp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Rp(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Bp.apply(this,arguments)}function Rp(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fp(t)););return t}function Ip(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dp(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mp(t,e,n){return e&&Dp(t.prototype,e),n&&Dp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Np(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vp(t,e)}function Vp(t,e){return Vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vp(t,e)}function qp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Fp(t);if(e){var r=Fp(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lp(this,n)}}function Lp(t,e){if(e&&("object"===jp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Fp(t){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fp(t)}var zp=function(t){Np(n,t);var e=qp(n);function n(t){return Ip(this,n),e.call(this,t)}return Mp(n,[{key:"getMinNumActions",value:function(){return this.clues.length}},{key:"helpSolutionAllowed",value:function(){return!0}},{key:"hasRandom",value:function(){return!0}}]),n}(Br);Object.assign(zp.prototype,{clues:null,clueItems:null,shuffleA:!1,shuffleB:!1});var Up=function(t){Np(n,t);var e=qp(n);function n(t,i,r){var o;return Ip(this,n),(o=e.call(this,t,i,r)).resolvedClues=[],o}return Mp(n,[{key:"clear",value:function(){this.grid&&(this.grid.end(),this.grid=null),this.bgAlt&&(this.bgAlt.end(),this.bgAlt=null)}},{key:"buildVisualComponents",value:function(){this.firstRun&&Bp(Fp(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.tgc,e=this.act.abc.secondary;e&&(e.image&&(e.setImgContent(this.act.project.mediaBag,null,!1),!e.animatedGifFile||e.shaper.rectangularShapes||this.act.shuffleB||(this.$animatedBg=i()("<span/>").css({"background-image":"url(".concat(e.animatedGifFile,")"),"background-position":"center","background-repeat":"no-repeat",position:"absolute"}).appendTo(this.$div))),null!==this.act.acp&&this.act.acp.generateContent(0,0,[e],!1)),t&&(this.grid=_p.createEmptyGrid(null,this,this.act.margin,this.act.margin,t,!1),e&&(this.bgAlt=Su.createEmptyGrid(null,this,this.act.margin,this.act.margin,e),this.$animatedBg&&this.bgAlt.backgroundBox&&(this.bgAlt.backgroundBox.tmpTrans=!0)),this.grid.setVisible(!0))}},{key:"initActivity",value:function(){Bp(Fp(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.grid&&(this.grid.setChars(this.act.tgc.text),this.grid.randomize(),this.grid.setAllCellsAttribute(_p.flags.INVERTED,!1),this.resolvedClues=Array(this.act.clueItems.length).fill(!1),this.bgAlt&&(this.bgAlt.setContent(this.act.abc.secondary),this.$animatedBg&&this.bgAlt.clearAllBoxes(),this.act.shuffleB&&this.shuffle([this.bgAlt],!0,!0),this.bgAlt.setVisible(null!==this.$animatedBg||this.act.invAss)),this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.playing=!0)}},{key:"updateContent",value:function(t){if(Bp(Fp(n.prototype),"updateContent",this).call(this,t),this.grid&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.grid.update(i,t),this.bgAlt&&this.bgAlt.update(i,t)}return this}},{key:"setDimension",value:function(t){return!this.grid||this.getBounds().equals(t)?t:this.bgAlt?lu.layoutDouble(t,this.grid,this.bgAlt,this.act.boxGridPos,this.act.margin):lu.layoutSingle(t,this.grid,this.act.margin)}},{key:"setBounds",value:function(t){if(this.$canvas&&this.$canvas.remove(),Bp(Fp(n.prototype),"setBounds",this).call(this,t),this.grid){if(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$animatedBg&&this.bgAlt){var e=this.bgAlt.getBounds();this.$animatedBg.css({left:e.pos.x,top:e.pos.y,width:"".concat(e.dim.width,"px"),height:"".concat(e.dim.height,"px"),"background-size":"".concat(e.dim.width,"px ").concat(e.dim.height,"px")})}this.$div.append(this.$canvas),this.bc=new hl(this,this.$canvas.get(-1).getContext("2d")),this.invalidate().update()}}},{key:"getCurrentScore",value:function(){return this.resolvedClues.reduce((function(t,e){return e?++t:t}),0)}},{key:"processEvent",value:function(t){if(this.bc&&this.playing){var e=null;if("touchend"===t.type)e=this.bc.active?this.bc.dest.clone():new De;else{var n=t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,i=t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY;e=new De(n-this.$div.offset().left,i-this.$div.offset().top)}var r=!1,o=!1,s=[];switch(t.type){case"touchcancel":this.bc.active&&this.bc.end();break;case"mouseup":if(this.bc.active&&e.distanceTo(this.bc.origin)<=3)break;r=!0;case"touchend":case"touchstart":case"mousedown":if(this.bc.active){this.ps.stopMedia(1);var a=this.grid.getLogicalCoords(this.bc.origin),c=this.grid.getLogicalCoords(this.bc.dest);this.bc.end();var l=this.grid.getStringBetween(a.x,a.y,c.x,c.y);if(null!==l&&l.length>0){for(var u=!1,h=0;h<this.act.clues.length;h++)if(l===this.act.clues[h]){u=!0;break}var f=this.resolvedClues[h];if(u&&!f&&(this.resolvedClues[h]=!0,this.grid.setAttributeBetween(a.x,a.y,c.x,c.y,_p.flags.INVERTED,!0),null!==this.bgAlt)){var p=this.act.clueItems[h];if(p>=0&&p<this.bgAlt.getNumCells()){var d=this.bgAlt.getActiveBox(this.act.clueItems[h]);d&&(d.setVisible(null===this.$animatedBg&&!this.act.invAss),o=d.playMedia(this.ps,s))}}if(f)u||o||this.playEvent("actionError");else{var v=this.getCurrentScore();this.ps.reportNewAction(this.act,"ACTION_SELECT",l,null,u,v),v===this.act.clues.length?this.finishActivity(!0):o||this.playEvent(u?"actionOK":"actionError"),this.invalidate()}}else this.playEvent("actionError");this.update()}else{if(r)break;this.ps.stopMedia(1),this.grid.contains(e)&&(this.playEvent("click"),this.bc.begin(e))}break;case"mousemove":case"touchmove":this.bc.moveTo(e)}s.forEach((function(t){return t()})),t.preventDefault()}}}]),n}(Rr);Object.assign(Up.prototype,{grid:null,bgAlt:null,resolvedClues:null,bc:null,events:["mousedown","mouseup","mousemove","touchstart","touchend","touchmove","touchcancel"]}),zp.Panel=Up;var $p=Br.registerClass("@textGrid.WordSearch",zp);function Hp(t){return Hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(t)}function Wp(){return Wp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Gp(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Wp.apply(this,arguments)}function Gp(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ed(t)););return t}function Jp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kp(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zp(t,e,n){return e&&Kp(t.prototype,e),n&&Kp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yp(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qp(t,e)}function Qp(t,e){return Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qp(t,e)}function Xp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ed(t);if(e){var r=ed(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return td(this,n)}}function td(t,e){if(e&&("object"===Hp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ed(t){return ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ed(t)}var nd=function(t){Yp(n,t);var e=Xp(n);function n(t){return Jp(this,n),e.call(this,t)}return Zp(n,[{key:"getMinNumActions",value:function(){return this.tgc.getNumChars()-this.tgc.countWildChars()}},{key:"needsKeyboard",value:function(){return!0}}]),n}(Br);Object.assign(nd.prototype,{upperCase:!0,checkCase:!0,wildTransparent:!1});var id=function(t){Yp(n,t);var e=Xp(n);function n(t,i,r){return Jp(this,n),e.call(this,t,i,r)}return Zp(n,[{key:"clear",value:function(){this.grid&&(this.grid.end(),this.grid=null),this.style&&(this.style.end(),this.style=null)}},{key:"createBoxBag",value:function(t){var e=this,n=new lu(null,this,null),r=new Io(n,this,this.icoBB);r.setBounds(0,0,this.LABEL_WIDTH,this.act.abc[t].h);var o=i()("<button/>",{class:"StockBtn"}).css({width:this.LABEL_WIDTH,height:this.act.abc[t].h,"background-image":"url(".concat("acrossClues"===t?this.hIcon:this.vIcon,")"),"background-repeat":"no-repeat","background-position":"center","border-radius":6,"z-index":10}).on("click",(function(){e.advance="acrossClues"===t?"ADVANCE_RIGHT"===e.advance?"NO_ADVANCE":"ADVANCE_RIGHT":"ADVANCE_DOWN"===e.advance?"NO_ADVANCE":"ADVANCE_DOWN",e.setBtnStatus()})).on("keypress",(function(t){" "===String.fromCharCode(t.charCode||t.keyCode)&&t.stopPropagation()})).appendTo(this.$div);r.setHostedComponent(o),n.addBox(r);var s=new $o(n,null,null,t,new Fe(this.LABEL_WIDTH+this.act.margin,0,this.act.abc[t].w,this.act.abc[t].h));return n.addBox(s),n.setBoxBase(this.act.abc[t].style),"acrossClues"===t?(this.hClue=s,this.hClueBtn=r):(this.vClue=s,this.vClueBtn=r),n}},{key:"buildVisualComponents",value:function(){this.firstRun&&Wp(ed(n.prototype),"buildVisualComponents",this).call(this),this.clear();var t=this.act.tgc,e=this.act.abc.acrossClues,i=this.act.abc.downClues;if(e.image&&e.setImgContent(this.act.project.mediaBag,null,!1),i.image&&i.setImgContent(this.act.project.mediaBag,null,!1),null!==this.act.acp&&this.act.acp.generateContent(0,0,this.act.abc,!1),t){this.grid=_p.createEmptyGrid(null,this,this.act.margin,this.act.margin,t,this.act.wildTransparent),this.style=new lu(null,this,null);var r=this.createBoxBag("acrossClues"),o=this.createBoxBag("downClues");"AUB"===this.act.boxGridPos||"BUA"===this.act.boxGridPos?o.moveTo(new De(r.dim.width+this.act.margin,0)):o.moveTo(new De(0,r.dim.height+this.act.margin)),this.style.addBox(r),this.style.addBox(o),this.grid.setVisible(!0),this.style.setVisible(!0)}}},{key:"initActivity",value:function(){Wp(ed(n.prototype),"initActivity",this).call(this),this.firstRun?this.firstRun=!1:this.buildVisualComponents(),this.grid&&(this.grid.setChars(this.act.tgc.text),this.numLetters=this.act.getMinNumActions(),this.grid.setCellAttributes(!0,!0),this.grid.setCursorEnabled(!0),this.setCursorAt(0,0),this.advance="ADVANCE_RIGHT",this.setBtnStatus(),this.setAndPlayMsg("initial","start"),this.invalidate().update(),this.$div.attr("tabindex",0),this.$div.focus(),this.playing=!0)}},{key:"getCurrentScore",value:function(){return this.grid?this.grid.countCoincidences(this.act.checkCase):0}},{key:"updateContent",value:function(t){if(Wp(ed(n.prototype),"updateContent",this).call(this,t),this.grid&&this.$canvas){var e=this.$canvas.get(-1),i=e.getContext("2d");t||(t=new Fe(0,0,e.width,e.height)),i.clearRect(t.pos.x,t.pos.y,t.dim.width,t.dim.height),this.grid.update(i,t),this.style.update(i,t)}return this}},{key:"setDimension",value:function(t){return this.grid&&this.style&&!this.getBounds().equals(t)?lu.layoutDouble(t,this.grid,this.style,this.act.boxGridPos,this.act.margin):t}},{key:"setBounds",value:function(t){this.$canvas&&(this.$canvas.remove(),this.$canvas=null),Wp(ed(n.prototype),"setBounds",this).call(this,t),this.grid&&(this.$canvas=i()('<canvas width="'.concat(t.dim.width,'" height="').concat(t.dim.height,'"/>')).css({position:"absolute",top:0,left:0}),this.$div.append(this.$canvas),this.invalidate().update())}},{key:"processEvent",value:function(t){if(this.playing)switch(t.type){case"click":var e=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,n=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY,i=new De(e-this.$div.offset().left,n-this.$div.offset().top),r=[];if(this.ps.stopMedia(1),this.grid.contains(i)){var o=this.grid.getLogicalCoords(i);if(null!==o&&(this.setCursorAt(o.x,o.y),ye.TOUCH_DEVICE)){var s="ADVANCE_DOWN"===this.advance,a=window.prompt("".concat(s?"Vertical":"Horizontal"," word:"),"");this.writeChars(a)}}else if(this.hClue.contains(i))this.hClue.playMedia(this.ps,r);else{if(!this.vClue.contains(i))break;this.vClue.playMedia(this.ps,r)}this.update(),r.forEach((function(t){return t()}));break;case"keypress":var c=t.charCode||t.keyCode;c&&this.grid.getCursor()&&(t.preventDefault(),this.writeChars(String.fromCharCode(c)));break;case"keydown":var l=0,u=0;switch(t.keyCode){case ye.VK.RIGHT:l=1;break;case ye.VK.LEFT:l=-1;break;case ye.VK.DOWN:u=1;break;case ye.VK.UP:u=-1}(l||u)&&(t.preventDefault(),this.moveCursor(l,u),this.update())}}},{key:"moveCursor",value:function(t,e){this.grid&&(this.grid.moveCursor(t,e,!0),this.cursorPosChanged())}},{key:"setCursorAt",value:function(t,e){this.grid.setCursorAt(t,e,!0),this.cursorPosChanged()}},{key:"cursorPosChanged",value:function(){var t=this.grid.getCursor();if(null!==t&&null!==this.style){var e=this.grid.getItemFor(t.x,t.y);null!==e&&(this.hClue.setContent(this.act.abc.acrossClues.getActiveBoxContentWith(t.y,e.x)),this.vClue.setContent(this.act.abc.downClues.getActiveBoxContentWith(t.x,e.y)))}}},{key:"writeChars",value:function(t){if(t&&t.length>0)for(var e=0;e<t.length;e++){var n=this.grid.getCursor(),i=t.charAt(e);this.act.upperCase&&(i=i.toLocaleUpperCase()),this.grid.setCharAt(n.x,n.y,i);var r=this.grid.isCellOk(n.x,n.y,this.act.checkCase),o=this.getCurrentScore();this.ps.reportNewAction(this.act,"WRITE",i,"X:".concat(n.x," Y:").concat(n.y),r,o),o===this.numLetters?(this.grid.setCursorEnabled(!1),this.grid.stopCursorBlink(),this.finishActivity(!0)):(this.playEvent("click"),"ADVANCE_DOWN"===this.advance?this.moveCursor(0,1):"ADVANCE_RIGHT"===this.advance&&this.moveCursor(1,0))}this.update()}},{key:"setBtnStatus",value:function(){this.hClueBtn&&this.hClueBtn.setInactive("ADVANCE_RIGHT"!==this.advance),this.vClueBtn&&this.vClueBtn.setInactive("ADVANCE_DOWN"!==this.advance)}}]),n}(Rr);Object.assign(id.prototype,{LABEL_WIDTH:40,grid:null,style:null,numLetters:0,advance:"NO_ADVANCE",hClue:null,vClue:null,hClueBtn:null,vClueBtn:null,events:["click","keydown","keypress"],hIcon:se('<svg fill="#FFFFFF" height="36" viewBox="0 0 24 24" width="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />\n</svg>\n'),vIcon:se('<svg fill="#FFFFFF" height="36" viewBox="0 0 24 24" width="36" xmlns="http://www.w3.org/2000/svg">\n  <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />\n</svg>\n'),icoSize:{w:36,h:36},icoBB:(new Pi).set("backColor","#4285F4").set("inactiveColor","#70A2F6").set("dontFill",!0)}),nd.Panel=id;var rd=Br.registerClass("@textGrid.CrossWord",nd);function od(t){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(t)}function sd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ad(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cd(t,e,n){return e&&ad(t.prototype,e),n&&ad(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ld(){return ld="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=ud(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},ld.apply(this,arguments)}function ud(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dd(t)););return t}function hd(t,e){return hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hd(t,e)}function fd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=dd(t);if(e){var r=dd(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pd(this,n)}}function pd(t,e){if(e&&("object"===od(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dd(t){return dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dd(t)}var vd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hd(t,e)}(n,t);var e=fd(n);function n(t){var i;return sd(this,n),(i=e.call(this,t)).tasks=[],i}return cd(n,[{key:"getProperty",value:function(t,e){return null!==this.dbProperties&&this.dbProperties.hasOwnProperty(t)?this.dbProperties[t]:e}},{key:"addTask",value:function(t){this.processingTasks?null===this.waitingTasks?this.waitingTasks=[t]:this.waitingTasks.push(t):this.tasks.push(t)}},{key:"flushTasksPromise",value:function(){var t=this;if(this.processingTasks||null===this.currentSessionId||0===this.tasks.length||null===this.serviceUrl)return this.processingTasks&&(this.forceFlush=!0),Promise.resolve(!0);this.processingTasks=!0;for(var e=new yd("multiple"),n=0;n<this.tasks.length;n++)e.appendData(this.tasks[n].$bean);return gt("debug","Reporting:",e.$bean[0]),new Promise((function(n,i){t.transaction(e.$bean).done((function(e,i,r){t.failCount=0,t.waitingTasks?(t.tasks=t.waitingTasks,t.waitingTasks=null):(t.forceFlush=!1,t.tasks=[]),t.forceFlush&&t.tasks.length>0?(t.forceFlush=!1,t.processingTasks=!1,t.flushTasksPromise().then((function(){n(!0)}))):(t.forceFlush=!1,n(!0),t.processingTasks=!1)})).fail((function(e,n,r){++t.failCount>t.maxFails&&t.stopReporting().then(),i("Error reporting results to ".concat(t.serviceUrl," [").concat(n," ").concat(r,"]")),t.processingTasks=!1}))}))}},{key:"init",value:function(t){var e=this;null==t&&(t=this.ps.options),ld(dd(n.prototype),"init",this).call(this,t),this.initiated=!1,this.stopReporting(),this.serverPath=t.path||this.DEFAULT_SERVER_PATH,this.descriptionDetail=this.serverPath;var r=t.service||this.DEFAULT_SERVER_SERVICE;Yt(r,"/")||(r="/".concat(r));var o=t.protocol||this.DEFAULT_SERVER_PROTOCOL;this.serviceUrl="".concat(o,"://").concat(this.serverPath).concat(r);var s=new yd("get_properties");return new Promise((function(n,r){e.transaction(s.$bean).done((function(o,s,a){e.dbProperties={},i()(o).find("param").each((function(t,n){var r=i()(n);e.dbProperties[r.attr("name")]=r.attr("value")})),e.promptUserId(!1).then((function(i){e.userId=i;var r=t.lap||e.getProperty("TIME_LAP",e.DEFAULT_TIMER_LAP);e.timerLap=Math.min(30,Math.max(1,parseInt(r))),e.timer=window.setInterval((function(){return e.flushTasksPromise().then()}),1e3*e.timerLap),e.beforeUnloadFunction=function(t){if(null!==e.serviceUrl&&(e.tasks.length>0||e.processingTasks)){e.flushTasksPromise().then();var n=pt("Please wait until the results of your activities are sent to the reports system");return t&&(t.returnValue=n),n}},window.addEventListener("beforeunload",e.beforeUnloadFunction),e.initiated=!0,n(!0)})).catch((function(t){e.stopReporting(),r("Error getting the user ID: ".concat(t))}))})).fail((function(t,n,i){e.stopReporting(),r("Error initializing reports service ".concat(e.serviceUrl," [").concat(n," ").concat(i,"]"))}))}))}},{key:"newSession",value:function(t){ld(dd(n.prototype),"newSession",this).call(this,t),this.serviceUrl&&null!==this.userId&&(this.currentSessionId=null)}},{key:"createDBSession",value:function(t){var e=this;return null===this.currentSessionId||t?new Promise((function(t,n){e.initiated&&null!==e.userId&&null!==e.currentSession?e.flushTasksPromise().then((function(){e.currentSessionId=null;var r=new yd("add session");r.setParam("project",e.currentSession.projectName),r.setParam("activities",Number(e.currentSession.reportableActs)),r.setParam("time",Number(e.currentSession.started)),r.setParam("code",e.currentSession.code),r.setParam("user",e.userId),r.setParam("key",e.sessionKey),r.setParam("context",e.sessionContext),e.transaction(r.$bean).done((function(n,r,o){e.currentSessionId=i()(n).find('param[name="session"]').attr("value"),t(e.currentSessionId)})).fail((function(t,i,r){e.stopReporting(),n("Error creating new reports session in ".concat(e.serviceUrl," [").concat(i," ").concat(r,"]"))}))})):n("Unable to start session in remote server!")})):Promise.resolve(this.currentSessionId)}},{key:"end",value:function(){return this.reportActivity(!0),this.stopReporting().then(ld(dd(n.prototype),"end",this).call(this))}},{key:"transaction",value:function(t){return null===this.serviceUrl?null:i().ajax({method:"POST",url:this.serviceUrl,data:'<?xml version="1.0" encoding="UTF-8"?>'+(new XMLSerializer).serializeToString(t.get(0)).replace("minactions","minActions").replace("reportactions","reportActions"),contentType:"text/xml",dataType:"xml"})}},{key:"getGroups",value:function(){var t=this;return new Promise((function(e,n){if(t.userBased()){var r=new yd("get groups");t.transaction(r.$bean).done((function(t,n,r){var o=[];i()(t).find("group").each((function(t,e){var n=i()(e);o.push({id:n.attr("id"),name:n.attr("name")})})),e(o)})).fail((function(e,i,r){n("Error retrieving groups list from ".concat(t.serviceUrl," [").concat(i," ").concat(r,"]"))}))}else n("This system does not manage users!")}))}},{key:"getUsers",value:function(t){var e=this;return new Promise((function(n,r){if(e.userBased()){var o=new yd("get users");null!=t&&o.setParam("group",t),e.transaction(o.$bean).done((function(t,e,r){var o=[];i()(t).find("user").each((function(t,e){var n=i()(e),r={id:n.attr("id"),name:n.attr("name")};n.attr("pwd")&&(r.pwd=n.attr("pwd")),o.push(r)})),n(o)})).fail((function(t,n,i){r("Error retrieving users list from ".concat(e.serviceUrl," [").concat(n," ").concat(i,"]"))}))}else r("This system does not manage users!")}))}},{key:"getUserData",value:function(t){var e=this;return new Promise((function(n,r){if(e.userBased()){var o=new yd("get user data");null!=t?o.setParam("user",t):r("Invalid user ID"),e.transaction(o.$bean).done((function(t,e,r){var o=i()(t).find("user");if(1!==o.length)window.alert(pt("Invalid user")),n("Invalid user ID");else{var s={id:o.attr("id"),name:o.attr("name")};o.attr("pwd")&&(s.pwd=o.attr("pwd")),n(s)}})).fail((function(t,n,i){r("Error retrieving user data from ".concat(e.serviceUrl," [").concat(n," ").concat(i,"]"))}))}else r("This system does not manage users!")}))}},{key:"stopReporting",value:function(){var t=this,e=null;return this.timer>=0&&(window.clearInterval(this.timer),this.timer=-1),this.beforeUnloadFunction&&(window.removeEventListener("beforeunload",this.beforeUnloadFunction),this.beforeUnloadFunction=null),this.initiated&&(e=this.flushTasksPromise().then((function(){t.serviceUrl=null,t.descriptionDetail="".concat(t.serverPath," (").concat(pt("not connected"),")"),t.initiated=!1}))),e||Promise.resolve(!0)}},{key:"reportActivity",value:function(t){var e=this;if(this.lastActivity){this.lastActivity.closed||this.lastActivity.closeActivity();var n=this.actCount++,i=this.lastActivity;this.createDBSession(!1).then((function(){var r=new yd("add activity");r.setParam("session",e.currentSessionId),r.setParam("num",n),r.appendData(i.$getXML()),e.addTask(r),t&&e.flushTasksPromise().then()}))}null!==this.currentSession&&null!==this.currentSession.currentSequence&&this.currentSession.currentSequence.currentActivity!==this.lastActivity?this.lastActivity=this.currentSession.currentSequence.currentActivity:this.lastActivity=null}},{key:"newActivity",value:function(t){ld(dd(n.prototype),"newActivity",this).call(this,t),this.reportActivity(!1)}},{key:"endActivity",value:function(t,e,i){ld(dd(n.prototype),"endActivity",this).call(this,t,e,i),this.reportActivity(!0)}}]),n}(po);Object.assign(vd.prototype,{descriptionKey:"Reporting to remote server",descriptionDetail:"(not connected)",serverPath:"",beforeUnloadFunction:null,currentSessionId:"",lastActivity:null,actCount:0,serviceUrl:null,dbProperties:null,tasks:null,waitingTasks:null,processingTasks:!1,forceFlush:!1,timer:-1,timerLap:5,failCount:0,maxFails:5,DEFAULT_SERVER_PATH:"localhost:9000",DEFAULT_SERVER_SERVICE:"/JClicReportService",DEFAULT_SERVER_PROTOCOL:document&&document.location&&"http:"===document.location.protocol?"http":"https",DEFAULT_TIMER_LAP:20});var yd=function(){function t(e,n){sd(this,t),this.$bean=i()("<bean/>").attr({id:e}),n&&this.appendData(n)}return cd(t,[{key:"appendData",value:function(t){t&&this.$bean.append(t)}},{key:"setParam",value:function(t,e){null!=e&&this.appendData(i()("<param/>").attr({name:t,value:e}))}}]),t}();Object.assign(yd.prototype,{$bean:null}),vd.ReportBean=yd;var gd=po.registerClass("TCPReporter",vd);function md(t){return md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(t)}function bd(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wd(){return wd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=kd(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},wd.apply(this,arguments)}function kd(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sd(t)););return t}function Ad(t,e){return Ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ad(t,e)}function xd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Sd(t);if(e){var r=Sd(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Cd(this,n)}}function Cd(t,e){if(e&&("object"===md(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sd(t){return Sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sd(t)}var Od=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ad(t,e)}(o,t);var e,n,i,r=xd(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).key="jclic_".concat((new Date).toISOString(),"#").concat(Math.ceil(1e3*Math.random())),e}return e=o,(n=[{key:"init",value:function(t){return null==t&&(t=this.ps.options),"local"===t.storage&&(this.storage=window.localStorage,this.descriptionKey="Reporting to local storage"),po.prototype.init.call(this,t)}},{key:"saveCurrentReport",value:function(){var t=this;window.setTimeout((function(){t.storage.setItem(t.key,JSON.stringify(t.getData()))}),0)}},{key:"endSequence",value:function(){wd(Sd(o.prototype),"endSequence",this).call(this),this.saveCurrentReport()}},{key:"endActivity",value:function(t,e,n){wd(Sd(o.prototype),"endActivity",this).call(this,t,e,n),this.saveCurrentReport()}}])&&bd(e.prototype,n),i&&bd(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(po);Object.assign(Od.prototype,{storage:window.sessionStorage,descriptionKey:"Reporting to session storage",descriptionDetail:"(browser session)",key:null});var Ed=po.registerClass("SessionStorageReporter",Od);function Pd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Td(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Td(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Td(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function jd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_d(Object(n),!0).forEach((function(e){Bd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rd={Deps:{DefaultSkin:rs,OrangeSkin:vs,GreenSkin:Os,BlueSkin:Ns,SimpleSkin:Js,MiniSkin:oa,EmptySkin:ya,CustomSkin:Ea,Rectangular:Da,Holes:Ha,JigSaw:Xa,TriangularJigSaw:ac,ClassicJigSaw:vc,Arith:Pc,TextActivityBase:Gc,FillInBlanks:al,OrderText:Sl,Complete:ql,IdentifyText:Xl,WrittenAnswer:qu,InformationScreen:Xu,Identify:ph,Explore:Eh,Menu:Fh,DoublePuzzle:ef,ExchangePuzzle:yf,HolePuzzle:_f,MemoryGame:$f,SimpleAssociation:rp,ComplexAssociation:mp,WordSearch:$p,CrossWord:rd,TCPReporter:gd,SessionStorageReporter:Ed},JClicPlayer:xo,JClicProject:Nr,AWT:Je,Utils:me,$:i(),options:"undefined"==typeof JClicDataOptions?{}:JClicDataOptions,projectFiles:{},currentPlayers:[],loadProject:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=ft(jd(jd({},Rd.options),n),!0,!1);var r,o=null,s=Pd(Rd.currentPlayers);try{for(s.s();!(r=s.n()).done;){var a=r.value;if(a&&a.$topDiv&&a.$topDiv.get(-1)===t){gt("debug","Existing JClicPlayer found in div. I will try to reuse it."),o=a;var c,l=Pd(Object.getOwnPropertyNames(n));try{for(l.s();!(c=l.n()).done;){var u=c.value;if(!o.options.hasOwnProperty(u)||o.options[u]!==n[u]){gt("debug","Existing JClicPlayer has diferent options! Creating a new one from scratch."),o=null;break}}}catch(t){l.e(t)}finally{l.f()}break}}}catch(t){s.e(t)}finally{s.f()}o?o.reset():(gt("debug","Creating a new instance of JClicPlayer"),o=new xo(i()(t).empty(),n));e&&o.initReporter().then((function(){return o.load(e)})).catch((function(e){gt("error","Unable to start reporting: ".concat(e.toString(),".\n JClicPlayer will be removed.'")),i()(t).empty().removeAttr("style").append(i()("<h2/>").html(o.getMsg("ERROR"))).append(i()("<p/>").html(e));var n=Rd.currentPlayers.indexOf(o);n>=0&&Rd.currentPlayers.splice(n,1),o=null}));o&&!1!==n.savePlayersRef&&-1===Rd.currentPlayers.indexOf(o)&&Rd.currentPlayers.push(o);return o}};if("undefined"!=typeof window){window.JClicObject=Rd;var Id=function(){return Rd.currentPlayers.forEach((function(t){t&&t.skin&&t.skin.fit()}))};i()(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",Id),i()(window).on("resize",Id)}i()((function(){var t="undefined"==typeof JClicDataOptions?{}:JClicDataOptions;if(Rd.options=t,!t.noInit){var e="string"==typeof JClicDataProject?JClicDataProject:"string"==typeof Rd.projectFile?Rd.projectFile:null;t.browserHistory=1===i()("body>div.JClic").length||t.browserHistory&&1===i()(".JClic").length,i()(".JClic").each((function(n,r){var o=i()(r),s=o.data("project");s&&(e=s);var a=o.data("options");a&&(t=i().extend(Object.create(t),a)),Rd.loadProject(r,e,t)}))}}))}()}();
//# sourceMappingURL=jclic.min.js.map