<!DOCTYPE html>
<html lang="ca">
  <head>
    <meta charset="utf-8"/>
    <meta name="google-signin-scope" content="profile email"/>
    <meta name="google-signin-client_id" content="628119593973-72bhu9uv9jrlaqv3c7o1h9quf6jocspn.apps.googleusercontent.com"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="mylib.js"></script>
    <script src="https://apis.google.com/js/platform.js?onload=gApiLoaded" async defer></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.blue-indigo.min.css"/>
    <script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>
    <script src="dialog-polyfill/dialog-polyfill.js"></script>
    <link rel="stylesheet" type="text/css" href="dialog-polyfill/dialog-polyfill.css" />    
    <link href="mylib.css" rel="stylesheet" type="text/css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout__title">La meva zonaClic</span>
          <div class="mdl-layout-spacer"></div>
          <div class="mdl-layout-content hidden" id="userIdBox">
            <img class="avatar">            
          </div>
        </div>          
      </header>
      <main class="mdl-layout__content">

        <div id="loginBox" class="mdl-cell hidden">
          <p>Inicieu la sessió amb el vostre identificador XTEC:</p>
          <div id="gSignInBtn"></div>
          <div id="loginSpinner" class="mdl-spinner mdl-js-spinner is-active hidden"></div>
          <p id="loginMsg"></p>
        </div>

        <div id="accountInfo" class ="mdl-card mdl-shadow--2dp mdl-cell hidden">
          <div class="mdl-card__supporting-text">
            <h2 class="mdl-card__title-text">Dades del compte</h2>
            <table class="accountInfo">
              <tbody>
                <tr><td>Usuari:</td><td id="fullUserName"></td></tr>
                <tr><td>Ubicació de la biblioteca:</td><td><a id="userLibUrl" class="code" target="_BLANK"></a></td></tr>
                <tr><td>Projectes publicats:</td><td id="userNumProjects"></td></tr>
                <tr><td>Espai de disc ocupat:</td><td><span id="usedBytes">0 MB</span> (de <span id="quota">0 MB</span> disponibles)</td></tr>
              </tbody>
            </table>
          </div>
          <div class="mdl-card__actions mdl-card--border">
            <button id="uploadBtn" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">Publica un projecte nou</button>
            <button id="logoutBtn" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">Tanca la sessió</button>
          </div>              
        </div>
        
        <div id="projects"></div>
        
      </main>      
    </div>
    
    <dialog id="uploadDlg" class="mdl-dialog">
      <h4 class="mdl-dialog__title">Publicació de projectes</h4>
      <div class="mdl-dialog__content">
        <form id="uploadForm" enctype="multipart/form-data">
          <p>Per publicar un projecte JClic l'heu d'<strong>exportar</strong> abans al format SCORM HTML5
            amb el <a href="http://clic.xtec.cat/ca/jclic/download.htm" target="_BLANK">JClic Author</a>.<br>
            El fitxer resultant, que porta l'extensió <span class="code">.scorm.zip</span>, és el que heu de seleccionar fent clic en aquest botó:</p>
          <p id="fileSelectBlock">
            <label class="mdl-button mdl-js-button mdl-button--raised">                    
              <input id="scormFileInput" type="file" name="scormFile" accept=".scorm.zip" style="display:none"/>
              Selecciona un fitxer .scorm.zip
            </label>
          </p>
          <p id="fileInfoBlock" class="hidden">
            Fitxer seleccionat: <span id="fileNameInfo">nomdelfitxer</span> <span id="fileSizeInfo">(xxx MB)</span><br>
            <span id="fileWarn" class="warning"></span>
          </p>
          <p id="folderNameBlock" class="hidden">
            <label for="projectNameInput">Directori on es publicarà el projecte: </label>
            <input id="projectNameInput" type="text" name="project" /><br>
            <span id="fileNameWarn" class="warning"></span><br>
          </p>
        </form>
        <div id="fileUploadProgressBlock" class="hidden">
          <p id="uploadMsg">S'està pujant el fitxer...</p>
          <progress id="upProgress" class="mdl-progress mdl-js-progress"></progress><br>            
        </div>
      </div>
      <div class="mdl-dialog__actions">
        <button id="uploadCancel" type="button" class="mdl-button close">Cancel·la</button>
        <button id="uploadOK" type="button" class="mdl-button" disabled>Publica el projecte</button>
      </div>
    </dialog>
    
    <dialog id="confirmDeleteDlg" class="mdl-dialog">
      <h4 class="mdl-dialog__title">Eliminació del projecte "<span class="deleteName"></span>"</h4>
      <div class="mdl-dialog__content">
        <p>Heu sol·licitat eliminar completament el projecte "<span class="deleteName"></span>" del servidor.<br><strong>ATENCIÓ: Aquesta operació no es pot desfer!</strong></p>
        <p>Segur que voleu eliminar el projecte?</p>
        <p id="deleteMsg" class="hidden warning"></p>
      </div>
      <div class="mdl-dialog__actions">
        <button id="deleteCancel" type="button" class="mdl-button close">Cancel·la l'operació</button>
        <button id="deleteOK" type="button" class="mdl-button" disabled>Elimina el projecte</button>
      </div>
    </dialog>    
  </body>
</html>
