<!DOCTYPE html>
<html lang="ca">

<head>
  <meta charset="utf-8" />
  <title>Biblioteca de projectes JClic</title>
  <script>
    const searchParams = new URLSearchParams(window.location.search);
    const lang = searchParams.get('lang') || navigator.language.startsWith('ca') ? 'ca' : navigator.language.startsWith('es') ? 'es' : 'en';
    const buildParam = (name) => {
      const value = searchParams.get(name);
      return value ? `&${name}=${encodeURIComponent(value)}` : '';
    }    
    const title = searchParams.get('title');
    const author = searchParams.get('author');
    const textParam = title || author ? `&text=${encodeURIComponent(`${title || ''} ${author || ''}`.trim())}` : '';
    const newURL = `https://projectes.xtec.cat/clic/${lang}/repo/?${buildParam('language')}${buildParam('prj')}${buildParam('subject')}${buildParam('level')}${buildParam('subject')}${textParam}`;
    const redirect = () => window.location.replace(newURL);
    redirect();
  </script>
</head>

<body>
  <a href="#" onclick="redirect();"><img src="../dist/jclic/jclic_64x64.png" alt="Go to the new JClic library"></a>
</body>

</html>